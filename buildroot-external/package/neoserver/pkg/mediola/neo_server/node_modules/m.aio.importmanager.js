var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.findInternal=function(a,f,c){a instanceof String&&(a=String(a));for(var g=a.length,b=0;b<g;b++){var A=a[b];if(f.call(c,A,b,a))return{i:b,v:A}}return{i:-1,v:void 0}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,f,c){a!=Array.prototype&&a!=Object.prototype&&(a[f]=c.value)};
$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.polyfill=function(a,f,c,g){if(f){c=$jscomp.global;a=a.split(".");for(g=0;g<a.length-1;g++){var b=a[g];b in c||(c[b]={});c=c[b]}a=a[a.length-1];g=c[a];f=f(g);f!=g&&null!=f&&$jscomp.defineProperty(c,a,{configurable:!0,writable:!0,value:f})}};
$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(a,c){return $jscomp.findInternal(this,a,c).v}},"es6","es3");var m=m||{};m.aio=m.aio||{};m.aio.importmanager=m.aio.importmanager||{};
m.aio.importmanager.Manager=function(){var a=function(){};a.prototype.importSteckerPRO=function(a,c,g,b){var f=function(a,b){var d={rooms:[],devices:[],gateways:[]};try{var c,e,f=$($.parseXML(b)),D=f.find("gateway");if(D&&0<D.length)for(c=0;c<D.length;c++){var g=D[c];if(g){var l=$(g).find("transmitter");if(l&&0<l.length&&l[0]){var z=$(l[0]),r=z.attr("ip"),t=z.attr("mode");r&&t&&(t=parseInt(t),d.gateways.push({index:d.gateways.length+1,name:("hc"==a?"HC":a)+" Gateway",info:{sys:"hcgw",ip:r,port:49880,
vendor:a,mode:1==t?1:0}}))}}}0==d.gateways.length&&d.gateways.push({index:d.gateways.length+1,name:("hc"==a?"HC":a)+" Gateway",info:{sys:"hcgw",ip:"0.0.0.0",port:49880,vendor:a,mode:1}});var u=f.find("location");if(u&&0<u.length)for(c=0;c<u.length;c++){var B=u[c];if(B){var p=$(B);if(e=p.attr("id")){var v={index:d.rooms.length+1,name:e};d.rooms.push(v);var q=p.find("device");if(q&&0<q.length)for(a=0;a<q.length;a++){var C=q[a];if(C){var w=$(C);e=w.attr("id");var x=w.attr("type"),y=w.attr("address"),
k=w.attr("data");if(e&&x&&y&&k){switch(x){case "BS":var n="brennenstuhl";var h="RC 3600";"heater"==k&&(h="FHT 433");break;case "ELRO":n="brennenstuhl";h="RCS 1000N";break;case "DY":n="rohrmotor24";h="RMF Motor";break;case "DY2":n="rohrmotor24";h="RMF-RS1 (AP/UP)";break;case "IT":n="intertechno",9<=y.length?(h="IT-1500 ","shutter"==k?h="ITL-1000":"dimmer"==k&&(h="ITLR-300")):(h="CMR-300","shutter"==k&&(h="CMR-500"))}d.devices.push({index:d.devices.length+1,name:e,room:v.index,info:{sys:"hcgw",gateway:1,
data:k,type:"IT"==x&&9<=y.length?"IT2":x,manufacture:n,model:h,address:y}})}}}}}}}catch(J){console.error(J)}return d},K=function(a,b){var c={groups:[]};try{var d,e=$($.parseXML(a)).find("location");if(e&&0<e.length)for(d=0;d<e.length;d++){var f=e[d];if(f){var g=$(f),G=g.attr("id"),l;if(l=G)a:{for(a=0;a<b.length;a++)if(b[a]===G){l=!0;break a}l=!1}if(l){var z={classid:"group",index:c.groups.length+1,name:G,macros:[]};c.groups.push(z);var r=g.find("macro");if(r&&0<r.length)for(a=0;a<r.length;a++){var t=
r[a];if(t){var u=$(t),B=u.attr("id");if(B){var p={classid:"macro",index:z.macros.length+1,name:B,commands:[]};z.macros.push(p);var v=u.find("command");if(v&&0<v.length)for(var q=0;q<v.length;q++){var C=v[q];if(C){var w=$(C),x=w.attr("action"),y=w.attr("sleep");if(x){var k=x.split(".");if(3==k.length){var n={classid:"command",index:p.commands.length+1,action:{type:"command",device:{name:k[1],room:k[0]},value:k[2]}};p.commands.push(n)}}else y&&(n={classid:"sleep",index:p.commands.length+1,time:parseInt(y)},
p.commands.push(n))}}}}}}}}}catch(h){console.error(h)}return c},E=require("m.aio.configmanager.js"),H=E.LicenseManager;E.trace("/config/tenants/"+a,function(d,e){if(d)b&&b(d);else if(e&&e.license){if(H.permitFeature("read",{sys:"hcgw",ip:"127.0.0.1",vendor:"brennenstuhl"},e.license))d="brennenstuhl";else if(H.permitFeature("read",{sys:"hcgw",ip:"127.0.0.1",vendor:"intertechno"},e.license))d="intertechno";else if(H.permitFeature("read",{sys:"hcgw",ip:"127.0.0.1",vendor:"hc"},e.license))d="hc";else{b&&
b(Error("license do not have hcgw module"));return}d=f(d,c);var A=[];d&&d.rooms&&d.rooms.forEach(function(a){a&&a.name&&A.push(a.name)});var E=K(g,A);e=require("m.aio.devicemanager.js");var I=require("m.aio.macromanager.js");if(e=e.getIntHandler(a)){var F=I._getHandler(a);F?(e.data=d,e._save(function(a){a?b&&b(a):(F.macros=I.Macros.parse(E),F._saveMacros(function(a){b&&b(a)}))})):b&&b(Error("no such tenant for macros"))}else b&&b(Error("no such tenant"))}else b&&b("invalid tenant")})};return a}();
m.aio.importmanager.Handler=m.aio.importmanager.Manager;"undefined"!=typeof module&&null!=module&&(module.exports=new m.aio.importmanager.Handler);
