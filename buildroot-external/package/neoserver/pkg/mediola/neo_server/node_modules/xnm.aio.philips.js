var xnm=xnm||{};xnm.aio=xnm.aio||{};xnm.aio.philips=xnm.aio.philips||{};
xnm.aio.philips.JointSpaceTV=function(){var c=function(a,b,f,c){this._logger=require("x.logger.js").getLogger("xnm.aio.philips.JointSpaceTV");this.ip=a;this.port=b;if(!b||0>b)this.port=1925;this.username=f;this.password=c};c.prototype._executeCommand=function(a,b){if(a)switch(a){case "tv":case "satellite":case "hdmi1":case "hdmi2":case "hdmi3":case "hdmiside":case "ext1":case "ext2":case "ypbpr":case "vga":this._setSource(a,b);break;default:this._inputKey(a,b)}else b&&b(Error("code is empty"))};c.prototype._inputKey=
function(a,b){this._doRequest("POST","/1/input/key",{key:a},function(a){b&&b(a)})};c.prototype._setSource=function(a,b){this._doRequest("POST","/1/sources/current",{id:a},function(a){b&&b(a)})};c.prototype._setChannel=function(a,b){this._doRequest("POST","/1/channels/current",{id:a},function(a){b&&b(a)})};c.prototype._doRequest=function(a,b,c,d){var g=this;b="http://"+this.ip+":"+this.port+b;var e=d;c&&"object"==typeof c&&(c=JSON.stringify(c));this._logger.log("trace","send "+a+" req to:"+b+" data:"+
c);$.ajax({url:b,type:a,timeout:3E3,data:"POST"==a?c:null,cache:!1,headers:{"Content-Type":"application/json; charset=UTF-8","Content-Length":c?c.length:0},username:this.username,password:this.password,success:function(a){g._logger.log("trace","http request success:"+a);d&&d(null,a)},error:function(a,b){var c="http request error:"+(a?a.status:"0")+"-"+b;e&&(e(Error(c)),e=null)}})};return c}();
xnm.aio.philips.Handler=function(){var c=function(){};c.prototype.JointSpaceTV=xnm.aio.philips.JointSpaceTV;return c}();"undefined"!=typeof module&&null!=module&&(module.exports=new xnm.aio.philips.Handler);
