var xnm=xnm||{};xnm.aio=xnm.aio||{};xnm.aio.enoceanip=xnm.aio.enoceanip||{};
xnm.aio.enoceanip.IP_Profiles=function(){var f=function(){var a=function(){};a.prototype.getMap=function(){return{ipevt:[{type:"enum",name:"button A0 pressed",ref:{value:"btnA0pressed",options:["true"]}},{type:"enum",name:"button A0 released",ref:{value:"btnA0released",options:["true"]}},{type:"enum",name:"button A0 short press",ref:{value:"btnA0shortPress",options:["true"]}},{type:"enum",name:"button A0 long press",ref:{value:"btnA0longPress",options:["true"]}},{type:"enum",name:"button AI pressed",
ref:{value:"btnAIpressed",options:["true"]}},{type:"enum",name:"button AI released",ref:{value:"btnAIreleased",options:["true"]}},{type:"enum",name:"button AI short press",ref:{value:"btnAIshortPress",options:["true"]}},{type:"enum",name:"button AI long press",ref:{value:"btnAIlongPress",options:["true"]}},{type:"enum",name:"button B0 pressed",ref:{value:"btnB0pressed",options:["true"]}},{type:"enum",name:"button B0 released",ref:{value:"btnB0released",options:["true"]}},{type:"enum",name:"button B0 short press",
ref:{value:"btnB0shortPress",options:["true"]}},{type:"enum",name:"button B0 long press",ref:{value:"btnB0longPress",options:["true"]}},{type:"enum",name:"button BI pressed",ref:{value:"btnBIpressed",options:["true"]}},{type:"enum",name:"button BI released",ref:{value:"btnBIreleased",options:["true"]}},{type:"enum",name:"button BI short press",ref:{value:"btnBIshortPress",options:["true"]}},{type:"enum",name:"button BI long press",ref:{value:"btnBIlongPress",options:["true"]}}]}};a.prototype.resolveState=
function(a,c){if(!c||!c.functions)return null;for(var d=null,b=0;b<c.functions.length;b++){var h=c.functions[b];if(h&&h.key)switch(h.key){case "buttonA0":d||(d={});switch(h.value){case "pressed":d.btnA0pressed=!0;break;case "released":d.btnA0released=!0}break;case "buttonAI":d||(d={});switch(h.value){case "pressed":d.btnAIpressed=!0;break;case "released":d.btnAIreleased=!0}break;case "buttonB0":d||(d={});switch(h.value){case "pressed":d.btnB0pressed=!0;break;case "released":d.btnB0released=!0}break;
case "buttonBI":d||(d={});switch(h.value){case "pressed":d.btnBIpressed=!0;break;case "released":d.btnBIreleased=!0}break;case "multipleButtons":switch(d||(d={}),h.value){case "pressed":d.multiBtnpressed=!0;break;case "released":d.multiBtnreleased=!0}}}return d};return{Version_0_9:new a}}(),b=function(){var a=function(){};a.prototype.getMap=function(){return{ipevt:[{type:"enum",name:"button A0 pressed",ref:{value:"btnA0pressed",options:["true"]}},{type:"enum",name:"button A0 released",ref:{value:"btnA0released",
options:["true"]}},{type:"enum",name:"button A0 short press",ref:{value:"btnA0shortPress",options:["true"]}},{type:"enum",name:"button A0 long press",ref:{value:"btnA0longPress",options:["true"]}},{type:"enum",name:"button AI pressed",ref:{value:"btnAIpressed",options:["true"]}},{type:"enum",name:"button AI released",ref:{value:"btnAIreleased",options:["true"]}},{type:"enum",name:"button AI short press",ref:{value:"btnAIshortPress",options:["true"]}},{type:"enum",name:"button AI long press",ref:{value:"btnAIlongPress",
options:["true"]}},{type:"enum",name:"button B0 pressed",ref:{value:"btnB0pressed",options:["true"]}},{type:"enum",name:"button B0 released",ref:{value:"btnB0released",options:["true"]}},{type:"enum",name:"button B0 short press",ref:{value:"btnB0shortPress",options:["true"]}},{type:"enum",name:"button B0 long press",ref:{value:"btnB0longPress",options:["true"]}},{type:"enum",name:"button BI pressed",ref:{value:"btnBIpressed",options:["true"]}},{type:"enum",name:"button BI released",ref:{value:"btnBIreleased",
options:["true"]}},{type:"enum",name:"button BI short press",ref:{value:"btnBIshortPress",options:["true"]}},{type:"enum",name:"button BI long press",ref:{value:"btnBIlongPress",options:["true"]}},{type:"enum",name:"button C0 pressed",ref:{value:"btnC0pressed",options:["true"]}},{type:"enum",name:"button C0 released",ref:{value:"btnC0released",options:["true"]}},{type:"enum",name:"button C0 short press",ref:{value:"btnC0shortPress",options:["true"]}},{type:"enum",name:"button C0 long press",ref:{value:"btnC0longPress",
options:["true"]}},{type:"enum",name:"button CI pressed",ref:{value:"btnCIpressed",options:["true"]}},{type:"enum",name:"button CI released",ref:{value:"btnCIreleased",options:["true"]}},{type:"enum",name:"button CI short press",ref:{value:"btnCIshortPress",options:["true"]}},{type:"enum",name:"button CI long press",ref:{value:"btnCIlongPress",options:["true"]}},{type:"enum",name:"button D0 pressed",ref:{value:"btnD0pressed",options:["true"]}},{type:"enum",name:"button D0 released",ref:{value:"btnD0released",
options:["true"]}},{type:"enum",name:"button D0 short press",ref:{value:"btnD0shortPress",options:["true"]}},{type:"enum",name:"button D0 long press",ref:{value:"btnD0longPress",options:["true"]}},{type:"enum",name:"button DI pressed",ref:{value:"btnDIpressed",options:["true"]}},{type:"enum",name:"button DI released",ref:{value:"btnDIreleased",options:["true"]}},{type:"enum",name:"button DI short press",ref:{value:"btnDIshortPress",options:["true"]}},{type:"enum",name:"button DI long press",ref:{value:"btnDIlongPress",
options:["true"]}}]}};a.prototype.resolveState=function(a,c){if(!c||!c.functions)return null;for(var d=null,b=0;b<c.functions.length;b++){var h=c.functions[b];if(h&&h.key)switch(h.key){case "buttonA0":d||(d={});switch(h.value){case "pressed":d.btnA0pressed=!0;break;case "released":d.btnA0released=!0}break;case "buttonAI":d||(d={});switch(h.value){case "pressed":d.btnAIpressed=!0;break;case "released":d.btnAIreleased=!0}break;case "buttonB0":d||(d={});switch(h.value){case "pressed":d.btnB0pressed=
!0;break;case "released":d.btnB0released=!0}break;case "buttonBI":d||(d={});switch(h.value){case "pressed":d.btnBIpressed=!0;break;case "released":d.btnBIreleased=!0}break;case "buttonC0":d||(d={});switch(h.value){case "pressed":d.btnC0pressed=!0;break;case "released":d.btnC0released=!0}break;case "buttonCI":d||(d={});switch(h.value){case "pressed":d.btnCIpressed=!0;break;case "released":d.btnCIreleased=!0}break;case "buttonD0":d||(d={});switch(h.value){case "pressed":d.btnD0pressed=!0;break;case "released":d.btnD0released=
!0}break;case "buttonDI":switch(d||(d={}),h.value){case "pressed":d.btnDIpressed=!0;break;case "released":d.btnDIreleased=!0}}}return d};return{Version_0_9:new a}}(),e=function(){var a=function(){};a.prototype.getMap=function(){return{status:[{type:"enum",name:"water detected",ref:{value:"water",options:["true","false"]}}],ipevt:[{type:"enum",name:"water detected",ref:{value:"water",options:["true","false"]}}]}};a.prototype.resolveState=function(a,c){if(!c||!c.functions)return null;for(var d=null,
b=0;b<c.functions.length;b++){var h=c.functions[b];h&&h.key&&"liquidDetected"==h.key&&(d||(d={}),d.water=h.value)}return d};return{Version_0_9:new a}}(),a=function(){var a=function(){};a.prototype.getMap=function(){return{status:[{type:"enum",name:"alarm",ref:{value:"alarm",options:["off","on"]}},{type:"enum",name:"battery Low",ref:{value:"lowbat",options:["true","false"]}}],ipevt:[{type:"enum",name:"alarm",ref:{value:"alarm",options:["off","on"]}},{type:"enum",name:"battery Low",ref:{value:"lowbat",
options:["true","false"]}}]}};a.prototype.resolveState=function(a,c){if(!c||!c.functions)return null;for(var d=null,b=0;b<c.functions.length;b++){var h=c.functions[b];h&&h.key&&("alarm"==h.key?(d||(d={}),d.alarm=h.value):"batteryLow"==h.key&&(d||(d={}),d.lowbat=h.value))}return d};return{Version_0_9:new a}}(),g=function(){var a=function(){};a.prototype.getMap=function(){return{status:[{type:"enum",name:"handle",ref:{value:"handle",options:["closed","open","up"]}}],ipevt:[{type:"enum",name:"handle",
ref:{value:"handle",options:["closed","open","up"]}}]}};a.prototype.resolveState=function(a,c){if(!c||!c.functions)return null;for(var d=null,b=0;b<c.functions.length;b++){var h=c.functions[b];h&&h.key&&"handle"==h.key&&(d||(d={}),d.handle=h.value)}return d};return{Version_0_9:new a}}(),c=function(){var a=function(){};a.prototype.getMap=function(){return{status:[{type:"float",name:"humidity",ref:{value:"humidity",extMeta:"0-100",scale:.4}},{type:"float",name:"temperature",ref:{value:"temperature",
extMeta:"0-40",scale:.16}}],ipevt:[{type:"float",name:"humidity",ref:{value:"humidity",extMeta:"0-100",scale:.4}},{type:"float",name:"temperature",ref:{value:"temperature",extMeta:"0-40",scale:.16}}]}};a.prototype.resolveState=function(a,c){if(!c||!c.functions)return null;for(var d=null,b=0;b<c.functions.length;b++){var h=c.functions[b];h&&h.key&&(d||(d={}),d[h.key]=h.value)}return d};return{Version_0_9:new a}}(),q=function(){var a=function(){};a.prototype.getMap=function(){return{status:[{type:"int",
name:"error code",ref:{value:"errorCode",extMeta:"251-255"}},{type:"int",name:"illumination",ref:{value:"illumination",extMeta:"0-1000"}},{type:"enum",name:"motion detected",ref:{value:"motionDetected",options:["false","true"]}},{type:"float",name:"supply voltage",ref:{value:"supplyVoltage",extMeta:"0-5",scale:.02}}],ipevt:[{type:"int",name:"error code",ref:{value:"errorCode",extMeta:"251-255"}},{type:"int",name:"illumination",ref:{value:"illumination",extMeta:"0-1000"}},{type:"enum",name:"motion detected",
ref:{value:"motionDetected",options:["false","true"]}},{type:"float",name:"supply voltage",ref:{value:"supplyVoltage",extMeta:"0-5",scale:.02}}]}};a.prototype.resolveState=function(a,c){if(!c||!c.functions)return null;for(var d=null,b=0;b<c.functions.length;b++){var h=c.functions[b];h&&h.key&&(d||(d={}),d[h.key]=h.value)}return d};return{Version_0_9:new a}}(),k=function(){var a=function(){};a.prototype.getMap=function(){return{status:[{type:"int",name:"setpoint",ref:{value:"setpoint",extMeta:"0-255"}},
{type:"float",name:"temperature",ref:{value:"temperature",extMeta:"0-40",scale:.157}}],ipevt:[{type:"int",name:"setpoint",ref:{value:"setpoint",extMeta:"0-255"}},{type:"float",name:"temperature",ref:{value:"temperature",extMeta:"0-40",scale:.157}}]}};a.prototype.resolveState=function(a,d){if(!d||!d.functions)return null;for(var c=null,b=0;b<d.functions.length;b++){var g=d.functions[b];g&&g.key&&(c||(c={}),c[g.key]=g.value)}return c};var c=function(){};c.prototype.getMap=function(){return{status:[{type:"float",
name:"setpoint",ref:{value:"setpoint",extMeta:"-3-3",scale:.5}},{type:"float",name:"temperature",ref:{value:"temperature",extMeta:"0-40",scale:.1}}],ipevt:[{type:"float",name:"setpoint",ref:{value:"setpoint",extMeta:"-3-3",scale:.5}},{type:"float",name:"temperature",ref:{value:"temperature",extMeta:"0-40",scale:.1}}]}};c.prototype.resolveState=function(a,d){if(!d||!d.functions)return null;for(var c=null,b=0;b<d.functions.length;b++){var g=d.functions[b];g&&g.key&&(c||(c={}),c[g.key]=g.value)}return c};
return{Version_0_9:new a,Version_0_9_Thermokon:new c}}(),l=function(){var a=function(){};a.prototype.getMap=function(){return{command:[{type:"float",name:"set point",ref:{value:"setpoint",ext:"%f",extMeta:"0-40",scale:.5}},{type:"int",name:"set valve",ref:{value:"setvalve",ext:"%d",extMeta:"0-100"}}],status:[{type:"enum",name:"actuator obstructed",ref:{value:"actuatorObstructed",options:["false","true"]}},{type:"enum",name:"battery low",ref:{value:"batteryLow",options:["false","true"]}},{type:"enum",
name:"contact",ref:{value:"contact",options:["closed","open"]}},{type:"enum",name:"energy input enabled",ref:{value:"energyInput",options:["false","true"]}},{type:"enum",name:"energy storage charged",ref:{value:"energyStorageCharged",options:["false","true"]}},{type:"enum",name:"service mode",ref:{value:"serviceMode",options:["off","on"]}},{type:"float",name:"temperature",ref:{value:"temperature",extMeta:"0-40",scale:.157}},{type:"int",name:"valve",ref:{value:"valve",extMeta:"0-100"}},{type:"enum",
name:"window",ref:{value:"window",options:["closed","open"]}}],ipevt:[{type:"enum",name:"actuator obstructed",ref:{value:"actuatorObstructed",options:["false","true"]}},{type:"enum",name:"battery low",ref:{value:"batteryLow",options:["false","true"]}},{type:"enum",name:"contact",ref:{value:"contact",options:["closed","open"]}},{type:"enum",name:"energy input enabled",ref:{value:"energyInput",options:["false","true"]}},{type:"enum",name:"energy storage charged",ref:{value:"energyStorageCharged",options:["false",
"true"]}},{type:"enum",name:"service mode",ref:{value:"serviceMode",options:["off","on"]}},{type:"float",name:"temperature",ref:{value:"temperature",extMeta:"0-40",scale:.157}},{type:"int",name:"valve",ref:{value:"valve",extMeta:"0-100"}},{type:"enum",name:"window",ref:{value:"window",options:["closed","open"]}}]}};a.prototype.executeCommand=function(a,c,d,b){c=this.getPutStateBody(a,c);if(!c)return!1;d.setDeviceState(a.deviceId,c,function(d){b&&b(d)});return!0};a.prototype.getPutStateBody=function(a,
c){var d=null;switch(c.value){case "setpoint":d={state:{functions:[{key:"switch",value:"on"}]}};break;case "off":d={state:{functions:[{key:"switch",value:"off"}]}};break;case "query":d={state:{functions:[{key:"query",value:"status"}]}}}return d};a.prototype.resolveState=function(a,c){if(!c||!c.functions)return null;for(var d=null,b=0;b<c.functions.length;b++){var g=c.functions[b];g&&g.key&&("switch"==g.key?(d||(d={}),d.state=g.value):"localControl"==g.key&&(d||(d={}),d.local_control=g.value))}return d};
return{Version_0_9:new a}}(),n=function(){var a=function(){};a.prototype.getMap=function(){return{status:[{type:"enum",name:"liquid detected",ref:{value:"liquidDetected",options:["false","true"]}},{type:"float",name:"temperature",ref:{value:"temperature",extMeta:"0-40",scale:.157}}],ipevt:[{type:"enum",name:"liquid detected",ref:{value:"liquidDetected",options:["false","true"]}},{type:"float",name:"temperature",ref:{value:"temperature",extMeta:"0-40",scale:.157}}]}};a.prototype.resolveState=function(a,
c){if(!c||!c.functions)return null;for(var d=null,b=0;b<c.functions.length;b++){var g=c.functions[b];g&&g.key&&(d||(d={}),d[g.key]=g.value)}return d};return{Version_0_9_Afriso:new a}}(),p=function(){var a=function(){};a.prototype.getMap=function(){return{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}},{type:"enum",name:"query status",ref:{value:"query"}}],status:[{type:"enum",name:"state",ref:{value:"state",options:["off","on"]}},{type:"enum",name:"local control",
ref:{value:"local_control",options:["off","on"]}}],ipevt:[{type:"enum",name:"state",ref:{value:"state",options:["off","on"]}},{type:"enum",name:"local control",ref:{value:"local_control",options:["off","on"]}}]}};a.prototype.executeCommand=function(a,c,d,b){c=this.getPutStateBody(a,c);if(!c)return!1;d.setDeviceState(a.deviceId,c,function(d){b&&b(d)});return!0};a.prototype.getPutStateBody=function(a,c){var d=null;switch(c.value){case "on":d={state:{functions:[{key:"switch",value:"on"}]}};break;case "off":d=
{state:{functions:[{key:"switch",value:"off"}]}};break;case "query":d={state:{functions:[{key:"query",value:"status"}]}}}return d};a.prototype.resolveState=function(a,c){if(!c||!c.functions)return null;for(var d=null,b=0;b<c.functions.length;b++){var g=c.functions[b];g&&g.key&&("switch"==g.key?(d||(d={}),d.state=g.value):"localControl"==g.key&&(d||(d={}),d.local_control=g.value))}return d};return{Version_0_9:new a}}(),m=function(){var a=function(){};a.prototype.getMap=function(){return{command:[{type:"int",
name:"dim to",ref:{value:"dimTo",ext:"%d",extMeta:"0-100"}},{type:"enum",name:"stop dim",ref:{value:"stop"}},{type:"enum",name:"query status",ref:{value:"query"}}],status:[{type:"int",name:"state",ref:{value:"state",ext:"%d",extMeta:"0-100"}},{type:"enum",name:"local control",ref:{value:"local_control",options:["off","on"]}}],ipevt:[{type:"int",name:"state",ref:{value:"state",ext:"%d",extMeta:"0-100"}},{type:"enum",name:"local control",ref:{value:"local_control",options:["off","on"]}}]}};a.prototype.executeCommand=
function(a,c,d,b){c=this.getPutStateBody(a,c);if(!c)return!1;d.setDeviceState(a.deviceId,c,function(d){b&&b(d)});return!0};a.prototype.getPutStateBody=function(a,c){var d=null;switch(c.value){case "dimTo":if("undefined"==typeof c.ext||null==c.ext)return null;d=parseInt(c.ext);0>d&&(d=0);100<d&&(d=100);d={state:{functions:[{key:"dimValue",value:d},{key:"rampingMode",value:"switch"}]}};break;case "stop":d={state:{functions:[{key:"dimValue",value:"invalid"},{key:"rampingMode",value:"stop"}]}};break;
case "query":d={state:{functions:[{key:"query",value:"status"}]}}}return d};a.prototype.resolveState=function(a,c){if(!c||!c.functions)return null;for(var d=null,b=0;b<c.functions.length;b++){var g=c.functions[b];g&&g.key&&("dimValue"==g.key?(d||(d={}),d.state=g.value):"localControl"==g.key&&(d||(d={}),d.local_control=g.value))}return d};return{Version_0_9:new a}}(),t=function(){var c=function(){};c.prototype.getMap=function(){return{command:[{type:"enum",name:"channel 1 on",ref:{value:"ch1on"}},
{type:"enum",name:"channel 1 off",ref:{value:"ch1off"}},{type:"enum",name:"channel 2 on",ref:{value:"ch2on"}},{type:"enum",name:"channel 2 off",ref:{value:"ch2off"}},{type:"enum",name:"all on",ref:{value:"allOn"}},{type:"enum",name:"all off",ref:{value:"allOff"}},{type:"enum",name:"query channel 1 status",ref:{value:"ch1query"}},{type:"enum",name:"query channel 2 status",ref:{value:"ch2query"}},{type:"enum",name:"query all status",ref:{value:"allQuery"}}],status:[{type:"enum",name:"channel 1 state",
ref:{value:"ch1state",options:["off","on"]}},{type:"enum",name:"channel 2 state",ref:{value:"ch2state",options:["off","on"]}}],ipevt:[{type:"enum",name:"channel 1 state",ref:{value:"ch1state",options:["off","on"]}},{type:"enum",name:"channel 2 state",ref:{value:"ch2state",options:["off","on"]}}]}};c.prototype.executeCommand=function(c,a,d,b){a=this.getPutStateBody(c,a);if(!a)return!1;d.setDeviceState(c.deviceId,a,function(d){b&&b(d)});return!0};c.prototype.getPutStateBody=function(c,a){var d=null;
switch(a.value){case "ch1on":d={state:{functions:[{key:"channel",value:0},{key:"switch",value:"on"}]}};break;case "ch1off":d={state:{functions:[{key:"channel",value:0},{key:"switch",value:"off"}]}};break;case "ch2on":d={state:{functions:[{key:"channel",value:1},{key:"switch",value:"on"}]}};break;case "ch2off":d={state:{functions:[{key:"channel",value:1},{key:"switch",value:"off"}]}};break;case "allOn":d={state:{functions:[{key:"channel",value:"all"},{key:"switch",value:"on"}]}};break;case "allOff":d=
{state:{functions:[{key:"channel",value:"all"},{key:"switch",value:"off"}]}};break;case "ch1query":d={state:{functions:[{key:"channel",value:0},{key:"query",value:"status"}]}};break;case "ch2query":d={state:{functions:[{key:"channel",value:1},{key:"query",value:"status"}]}};break;case "allQuery":d={state:{functions:[{key:"channel",value:"all"},{key:"query",value:"status"}]}}}return d};c.prototype.resolveState=function(c,a){if(!a||!a.functions)return null;for(var d=null,b=0;b<a.functions.length;b++){var g=
a.functions[b];g&&g.key&&"switch"==g.key&&(d||(d={}),0==g.channel?d.ch1state=g.value:1==g.channel&&(d.ch2state=g.value))}return d};return{Version_0_9:new c}}(),r=function(){var c=function(){};c.prototype.getMap=function(){return{command:[{type:"int",name:"move to",ref:{value:"position",ext:"%d",extMeta:"0-100"}},{type:"int",name:"angle to",ref:{value:"angle",ext:"%d",extMeta:"0-100"}},{type:"enum",name:"move up",ref:{value:"moveUp"}},{type:"enum",name:"move down",ref:{value:"moveDown"}},{type:"enum",
name:"stop",ref:{value:"stop"}},{type:"enum",name:"query status",ref:{value:"query"}}],status:[{type:"int",name:"position",ref:{value:"position",ext:"%d",extMeta:"0-100"}},{type:"int",name:"angle",ref:{value:"angle",ext:"%d",extMeta:"0-100"}},{type:"enum",name:"locking mode",ref:{value:"lockingMode",options:["block","unblock"]}}],ipevt:[{type:"int",name:"position",ref:{value:"position",ext:"%d",extMeta:"0-100"}},{type:"int",name:"angle",ref:{value:"angle",ext:"%d",extMeta:"0-100"}},{type:"enum",name:"locking mode",
ref:{value:"lockingMode",options:["block","unblock"]}}]}};c.prototype.executeCommand=function(c,a,d,b){a=this.getPutStateBody(c,a);if(!a)return!1;d.setDeviceState(c.deviceId,a,function(c){b&&b(c)});return!0};c.prototype.getPutStateBody=function(c,a){var d=null;switch(a.value){case "moveUp":d={state:{functions:[{key:"position",value:0},{key:"angle",value:0}]}};break;case "moveDown":d={state:{functions:[{key:"position",value:100},{key:"angle",value:100}]}};break;case "position":if("undefined"==typeof a.ext||
null==a.ext)return null;d=parseInt(a.ext);0>d&&(d=0);100<d&&(d=100);d={state:{functions:[{key:"position",value:d}]}};break;case "angle":if("undefined"==typeof a.ext||null==a.ext)return null;d=parseInt(a.ext);0>d&&(d=0);100<d&&(d=100);d={state:{functions:[{key:"angle",value:d}]}};break;case "stop":d={state:{functions:[{key:"stop",value:!0}]}};break;case "query":d={state:{functions:[{key:"query",value:"status"}]}}}return d};c.prototype.resolveState=function(c,a){if(!a||!a.functions)return null;for(var d=
null,b=0;b<a.functions.length;b++){var g=a.functions[b];if(g&&g.key)switch(g.key){case "buttonA0":d||(d={});switch(g.value){case "pressed":d.btnA0pressed=!0;break;case "released":d.btnA0released=!0}break;case "buttonAI":d||(d={});switch(g.value){case "pressed":d.btnAIpressed=!0;break;case "released":d.btnAIreleased=!0}break;case "buttonB0":d||(d={});switch(g.value){case "pressed":d.btnB0pressed=!0;break;case "released":d.btnB0released=!0}break;case "buttonBI":d||(d={});switch(g.value){case "pressed":d.btnBIpressed=
!0;break;case "released":d.btnBIreleased=!0}break;case "buttonC0":d||(d={});switch(g.value){case "pressed":d.btnC0pressed=!0;break;case "released":d.btnC0released=!0}break;case "buttonCI":d||(d={});switch(g.value){case "pressed":d.btnCIpressed=!0;break;case "released":d.btnCIreleased=!0}break;case "buttonD0":d||(d={});switch(g.value){case "pressed":d.btnD0pressed=!0;break;case "released":d.btnD0released=!0}break;case "buttonDI":d||(d={});switch(g.value){case "pressed":d.btnDIpressed=!0;break;case "released":d.btnDIreleased=
!0}break;default:d||(d={}),d[g.key]=g.value}}return d};return{Version_0_9:new c}}(),u=function(){var a=function(){};a.prototype.getMap=function(){return{status:[{type:"enum",name:"contact",ref:{value:"contact",options:["closed","open"]}}],ipevt:[{type:"enum",name:"contact",ref:{value:"contact",options:["closed","open"]}}]}};a.prototype.resolveState=function(a,c){if(!c||!c.functions)return null;for(var d=null,b=0;b<c.functions.length;b++){var g=c.functions[b];g&&g.key&&(d||(d={}),d[g.key]=g.value)}return d};
return{Version_0_9:new a}}();return{F6_02_01:f,F6_03_01:b,F6_05_01:e,F6_05_02:a,F6_10_00:g,A5_04_01:c,A5_07_03:q,A5_10_03:k,A5_20_01:l,A5_30_03:n,D2_01_01:p,D2_01_03:m,D2_01_11:t,D2_05_02:r,D5_00_01:u,getPorfile:function(a,c,b){a=a.replace(/-/g,"_").toUpperCase();c="Version_"+(c+"").replace(/\./g,"_");return b&&this[a]&&this[a][c+"_"+b]?this[a][c+"_"+b]:this[a]?this[a][c]:null}}}();
xnm.aio.enoceanip.IPClient=function(){var f=function(a,b,c){c=Error(c?c:"enocean ip error");c.code=a;c.httpStatus=b;return c},b=function(a,b,c){b=c?c:Error(b?b:"error");b.code=a;return b},e=function(a,b,c,e,f){this._logger="undefined"==typeof require||null==require?{log:function(){}}:require("x.logger.js").getLogger("xnm.aio.enoceanip.IPClient");this._ip=a;this._port=b;this._username=c;this._password=e;this._useHttps=f;this._port||(this._port=8080)};e.prototype.getIP=function(){return this._ip};e.prototype.getPort=
function(){return this._port};e.prototype.toJSON=function(){return{ip:this._ip,port:this._port,username:this._username,password:this._password,useHttps:this._useHttps}};e.prototype.getSystemInfo=function(a){this._doEnoceanIPRequest("GET","/system/info",null,function(b,c){b?a&&a(b):c.systemInfo?a&&a(null,c.systemInfo):a&&a(f(-1,esponse.header.httpStatus,"invalid get system info response"))})};e.prototype.getProfiles=function(a){this._doEnoceanIPRequest("GET","/profiles",null,function(b,c){b?a&&a(b):
c.profiles?a&&a(null,c.profiles):a&&a(f(-1,esponse.header.httpStatus,"invalid get profiles response"))})};e.prototype.getProfileInfo=function(a,b,c){this._doEnoceanIPRequest("GET","/profiles/"+a+(b?"?version="+b:""),null,function(a,b){a?c&&c(a):b.profile?c&&c(null,b.profile):c&&c(f(-1,esponse.header.httpStatus,"invalid get profile info response"))})};e.prototype.getDevices=function(a){this._doEnoceanIPRequest("GET","/devices",null,function(b,c){b?a&&a(b):c.devices?a&&a(null,c.devices):a&&a(f(-1,esponse.header.httpStatus,
"invalid get devices response"))})};e.prototype.getDevicesStream=function(a,b,c,e){var k="/devices/stream";if(a||b||c)k+="?";a&&(k+="direction="+a+"&");b&&(k+="delimited="+b+"&");c&&(k+="output="+c+"&");return this._doEnoceanIPRequest("GET",k,null,function(a,c){a?e&&e(a):c.devices?e&&e(null,c.devices):e&&e(f(-1,esponse.header.httpStatus,"invalid get devices response"))},!0)};e.prototype.getDevicesStates=function(a){this._doEnoceanIPRequest("GET","/devices/states",null,function(b,c){b?a&&a(b):c.states?
a&&a(null,c.states):a&&a(f(-1,esponse.header.httpStatus,"invalid get devices states response"))})};e.prototype.getDevice=function(a,b){this._doEnoceanIPRequest("GET","/devices/"+a,null,function(a,e){a?b&&b(a):e.device?b&&b(null,e.device):b&&b(f(-1,esponse.header.httpStatus,"invalid get device response"))})};e.prototype.getDeviceProfile=function(a,b){this._doEnoceanIPRequest("GET","/devices/"+a+"/profile",null,function(a,e){a?b&&b(a):e.profile?b&&b(null,e.profile):b&&b(f(-1,esponse.header.httpStatus,
"invalid get device profile response"))})};e.prototype.getDeviceState=function(a,b){this._doEnoceanIPRequest("GET","/devices/"+a+"/state",null,function(a,e){a?b&&b(a):e.state?b&&b(null,e.state):b&&b(f(-1,esponse.header.httpStatus,"invalid get device state response"))})};e.prototype.setDeviceState=function(a,b,c){this._doEnoceanIPRequest("PUT","/devices/"+a+"/state",b,function(a,b){a?c&&c(a):c&&c(null)})};e.prototype._doEnoceanIPRequest=function(a,b,c,e,k){this._logger.log("debug","do EnoceanIP "+
a+" request with path:"+b+(c?" and json:"+JSON.stringify(c):""));var l=this;return this._doJSONRequest(a,b,null,c,function(a,b){l._logger.log("debug","get EnoceanIP response "+(a?"error:"+a.message:JSON.stringify(b)));if(a)e&&e(f(a.code,-1,a.message));else if(b.header){var c=b.header.httpStatus,g=b.header.code?b.header.code:0;200!=c&&202!=c&&(a=f(g,c,b.header.message));e&&e(a,b)}else e&&e(f(-1,-1,"enocean ip response has no 'header'"))},k)};e.prototype._doJSONRequest=function(a,g,c,e,f,l){var n=null;
e&&(n=JSON.stringify(e));return this._doRequest(a,g,c,n,function(a,c,e){if(a)f&&f(a);else if(a=e.statusCode,c)try{var g=JSON.parse(c);g?f&&f(null,g):f&&f(b(a,"invalid repsonse"))}catch(q){f&&f(b(a,null,q))}else f&&f(b(a,"repsonse body empty"))},l)};e.prototype._doRequest=function(a,e,c,f,k,l){a={host:this._ip,port:this._port,path:e,method:a,headers:{Connection:"close","Content-Type":"application/json"}};if(c)for(var n in c)c.hasOwnProperty(n)&&(a.headers[n]=c[n]);if(this._username||this._password)a.auth=
(this._username?this._username:"")+":"+(this._password?this._password:""),a.headers.Authorization="Basic "+(new Buffer((this._username?this._username:"")+":"+(this._password?this._password:""))).toString("base64");f&&(a.headers["Content-Length"]=f.length);c=require("http");this._useHttps&&(c=require("https"),"undefined"!=typeof process&&null!=process&&process.env&&(process.env.NODE_TLS_REJECT_UNAUTHORIZED="0"));this._logger.log("trace","do "+(this._useHttps?"HTTPS":"HTTP")+" request:"+JSON.stringify(a));
var p=this,m=k,t={_headerListener:null,_chunkListener:null,on:function(a,b){"chunk"==a?this._chunkListener=b:"header"==a&&(this._headerListener=b)},emit:function(a,b){try{"chunk"==a&&this._chunkListener?this._chunkListener(b):"header"==a&&this._headerListener&&this._headerListener(b)}catch(c){}}},r=c.request(a,function(a){a.setEncoding("utf-8");t.emit("header",a);var b="";a.on("data",function(a){b+=a;t.emit("chunk",a)});a.on("end",function(){p._logger.log("trace","receive code:"+a.statusCode+" headers:"+
JSON.stringify(a.headers)+" response:"+b);m&&(m(null,b,a),m=null)})});if(r.on)r.on("error",function(a){p._logger.log("trace","do request error:"+a.message);m&&(m(b(-1,null,a)),m=null)});r.setTimeout&&(k=2E3,l&&(k=6E5),r.setTimeout(k,function(){p._logger.log("trace","do request timeout");r.abort();m&&(m(b(-2,"http timeout")),m=null)}));f&&(this._logger.log("trace","do request send body:"+f),r.write(f));r.end();return t};return e}();
xnm.aio.enoceanip.DCGW=function(){var f=function(b,e,a,g,c){xnm.aio.enoceanip.IPClient.call(this,b,e,a,g,c);this._logger=require("x.logger.js").getLogger("xnm.aio.enoceanip.DCGW")};f.prototype=new xnm.aio.enoceanip.IPClient;f.prototype.constructor=f;f.prototype.listDevices=function(b){this.getDevices(function(e,a){if(e)b&&b(e);else if(a&&0!=a.length){for(var g=[],c=0;c<a.length;c++)g.push({sys:"dcgw",deviceId:a[c].deviceId,friendlyId:a[c].friendlyId,manufacturer:a[c].manufacturer,location:a[c].location,
eeps:a[c].eeps});b&&b(null,g)}else b&&b(null,[])})};f.prototype.executeCommandCreator=function(b,e,a){if(b&&b.deviceId&&b.eeps&&0!=b.eeps.length)if(e&&e.value){for(var g=null,c=0;c<b.eeps.length;c++){var f=b.eeps[c];if((f=xnm.aio.enoceanip.IP_Profiles.getPorfile(f.eep,f.version,f.variation))&&f.executeCommand&&(g=f.executeCommand(b,e,this,a)))break}g||a&&a(Error("command unknown"))}else a&&a(Error("command json invalid"));else a&&a(Error("device json invalid"))};f.prototype.getStatesCreator=function(b,
e,a){if(e&&0!=e.length){var g=this;this.getDevicesStates(function(b,f){if(b)a&&a(b);else{var k={},l;for(l=0;l<f.length;l++){var n=f[l];if(n&&n.deviceId)for(var p=0;p<e.length;p++){var m=e[p];m&&m.device&&m.device.deviceId==n.deviceId&&(k[n.deviceId]||(k[n.deviceId]=g.resolveDeviceState(m.device,n)))}}n=[];for(l=0;l<e.length;l++)(m=e[l])&&m.id&&m.device&&m.device.deviceId&&m.status&&m.status.value&&k[m.device.deviceId]&&(p=k[m.device.deviceId][m.status.value],"undefined"!=typeof p&&null!=p&&n.push({id:m.id,
status:p}));a&&a(null,n)}})}else a&&a(null,[])};f.prototype.resolveDeviceState=function(b,e){if(!b||!b.eeps||0==b.eeps.length)return null;for(var a=null,g=0;g<b.eeps.length;g++){var c=b.eeps[g];if((c=xnm.aio.enoceanip.IP_Profiles.getPorfile(c.eep,c.version,c.variation))&&c.resolveState&&(c=c.resolveState(b,e))&&null!=c&&"undefined"!=typeof c)if(null==a||"undefined"==typeof a)a=c;else{var f=void 0;for(f in c)c.hasOwnProperty(f)&&(a[f]=c[f])}}return a};f.prototype.toJSON=function(){return{sys:"dcgw",
ip:this._ip,port:this._port,username:this._username,password:this._password,useHttps:this._useHttps}};f.prototype.equalsTo=function(b){return b&&b instanceof f?this._ip==b._ip&&this._port==b._port&&this._username==b._username&&this._password==b._password:!1};f.parseJSON=function(b){return b.ip?new f(b.ip,b.port,b.username,b.password,b.useHttps):null};return f}();
xnm.aio.enoceanip.DCGW.DM=function(){var f=function(b,e){this.code=b;this.message=e;this.stack=Error().stack};f.prototype=Error();f.prototype.name="DCGWDMError";f.prototype.code=0;f.ERROR_CODE={DEFAULT:0,INDEX_EXISTS:1,ID_EXISTS:2,INVALID:3,UNKNOW:4,NOT_FOUND:5,IP_EXISTS:6};return{SYS:"dcgw",getGatewayType:function(){return[{sys:this.SYS,name:"OPUS Gateway",port:8080}]},createGateway:function(b,e,a){e=f.ERROR_CODE;b?b.ip?a(null,b):a(new f(e.INVALID,"ip is invalid")):a(new f(e.INVALID,"info is invalid"))},
updateGateway:function(b,e,a,g){b=f.ERROR_CODE;e?e.ip?g(null,e):g(new f(b.INVALID,"ip is invalid")):g(new f(b.INVALID,"update is invalid"))},deleteGateway:function(b,e,a){a()},createDevice:function(b,e,a){var g=f.ERROR_CODE;if(b)if(b.gateway)if(b.deviceId){e=e.data.gateways;var c,q;for(c=0;c<e.length;c++)if(e[c].index===b.gateway){q=e[c];break}q?a(null,b):a(new f(g.NOT_FOUND,"gateway with index "+b.gateway+" not exists"))}else a(new f(g.INVALID,"deviceId is invalid"));else a(new f(g.INVALID,"gateway is invalid"));
else a(new f(g.INVALID,"info is invalid"))},updateDevice:function(b,e,a){var g=f.ERROR_CODE;if(b)if(b.gateway)if(b.deviceId){e=e.data.gateways;var c,q;for(c=0;c<e.length;c++)if(e[c].index===b.gateway){q=e[c];break}q?a(null,b):a(new f(g.NOT_FOUND,"gateway with index "+b.gateway+" not exists"))}else a(new f(g.INVALID,"deviceId is invalid"));else a(new f(g.INVALID,"gateway is invalid"));else a(new f(g.INVALID,"info is invalid"))},deleteDevice:function(b,e,a){a()},applyUIFilter:function(b,e){var a=this,
g=function(a,b,c){var e=[];a.forEach(function(a){if("root"==a.type){a=JSON.parse(JSON.stringify(a));var f=g(a.children,b,c);f&&0<f.length&&(a.children=f,e.push(a))}else{f=c.elems;if("*"==f)f=!0;else{for(var k=!1,l=0;l<f.length;l++)if(f[l]==a.type){k=!0;break}f=k}f&&(a=JSON.parse(JSON.stringify(a)),e.push(a))}});return e},c=function(b,c){var e=[],f=a.getCommandStatusMap(b);if(f){var k=[];switch(c.catagory){case "command":f.command&&(k=g(f.command,b,c));break;case "status":f.status&&(k=g(f.status,b,
c));break;case "ipevt":f.ipevt&&(k=g(f.ipevt,b,c))}e=e.concat(k)}return e};if(!b.sys)return null;var f=JSON.parse(JSON.stringify(b)),k=null;switch(e.catagory){case "command":k=c(b,e);f.command=k;break;case "status":k=c(b,e);f.status=k;break;case "ipevt":k=c(b,e);f.ipevt=k;break;default:return null}return k&&0!=k.length?f:null},applyIPEventFilter:function(b){if(!b)return null;b=this.applyUIFilter(b,{catagory:"ipevt",elems:"*"});console.log("ipevt",b);return b},getCommandStatusMap:function(b){if(!b||
!b.eeps||0==b.eeps.length)return null;for(var e={command:[],status:[],ipevt:[]},a=0;a<b.eeps.length;a++){var g=b.eeps[a],c=xnm.aio.enoceanip.IP_Profiles.getPorfile(g.eep,g.version,g.variation);c&&(c=c.getMap())&&("to"!=g.direction&&"both"!=g.direction||!c.command||(e.command=e.command.concat(c.command)),"from"==g.direction||"both"==g.direction)&&(c.status&&(e.status=e.status.concat(c.status)),c.ipevt&&(e.ipevt=e.ipevt.concat(c.ipevt)))}return e}}}();
xnm.aio.enoceanip.Handler=function(){var f=function(){};f.prototype.DCGW=xnm.aio.enoceanip.DCGW;f.prototype.devicemanager=xnm.aio.enoceanip.DCGW.DM;f.prototype.registModule=function(b){b.register(this.devicemanager.SYS,"enoceanip")};f.prototype.resolveGateway=function(b){return b?b.sys==this.devicemanager.SYS?this.DCGW.parseJSON(b):null:null};f.prototype.getDeviceCommands=function(b,e){if(!b)return null;var a;b.sys==this.devicemanager.SYS&&(a=this.devicemanager.applyUIFilter(b,{catagory:"command",
elems:"*"}));a=a?a.command:[];e&&e(null,a)};f.prototype.getDeviceStatus=function(b,e){if(!b)return null;var a;b.sys==this.devicemanager.SYS&&(a=this.devicemanager.applyUIFilter(b,{catagory:"status",elems:"*"}));a=a?a.status:[];e&&e(null,a)};f.prototype.doCommand=function(b,e,a,g){(b=this.resolveGateway(b))?b.executeCommandCreator(e,a,function(a){g&&g(a)}):g&&g(Error("gateway json format invalid"))};f.prototype.doStatus=function(b,e,a,g,c){(e=this.resolveGateway(e))?e.getStatesCreator(null,[{id:b,
device:a,status:g}],function(a,b){a?c&&c(a):c&&c(null,b[0])}):c&&c(Error("device json format invalid"))};f.prototype.resolveEvent=function(b,e,a){return(b=this.resolveGateway(b))?b.resolveDeviceState(e,a):null};f.prototype.getDeviceList=function(b,e){var a=this.resolveGateway(b);a?a.listDevices(function(a,b){e&&e(a,b)}):e&&e(Error("gateway json format invalid"))};f.prototype.discover=function(b,e){var a=require("x.mdns.js");a.clearRecordBuffer();a.discoverServiceWithTimeout("_enocean._tcp.local",
b,function(a,b){if(a)e&&e(a);else{for(var f=[],k=0;k<b.length;k++){var l=b[k];if(l.target&&l.ip&&0<l.ip.length){var n=l.target.toLowerCase();if(-1!=n.indexOf("dcgw")||-1!=n.indexOf("opus"))l=new xnm.aio.enoceanip.DCGW(l.ip[0]),f.push(l)}}e&&e(a,f)}})};return f}();"undefined"!=typeof module&&null!=module&&(module.exports=new xnm.aio.enoceanip.Handler);
