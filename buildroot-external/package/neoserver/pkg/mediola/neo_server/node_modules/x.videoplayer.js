var x=x||{};x.videoplayer=x.videoplayer||{},x.videoplayer.Player=function(){var e=function e(_e){this._options=_e,this._listeners={};};e.prototype.on=function(e,t){e&&t&&(this._listeners[e]||(this._listeners[e]=[]),-1==this._listeners[e].indexOf(t)&&this._listeners[e].push(t));},e.prototype.off=function(e,t){if(e&&t&&this._listeners[e]){var r=this._listeners[e].indexOf(t);-1!=r&&this._listeners[e].splice(r,1);}},e.prototype.init=function(e){throw new Error("func init not implemented");},e.prototype.playHLS=function(e){},e.prototype.playFLV=function(e){},e.prototype._emitEvent=function(e,t){if(e){var r=this._listeners[e];if(r&&r.length>0)for(var i=0;i<r.length;i++){var o=r[i];try{o(t);}catch(t){this._logger.log("trace","call "+e+" listener failed, error:"+t.message);}}}};var t=function t(_t){e.call(this,_t),this._logger=require("x.logger.js").getLogger("x.videoplayer.MobilePlayer"),this._playerID=null;var r=this;this._nativeListener=function(e){e?e.error?r._emitEvent("error",new Error(e.error)):e.close?r._emitEvent("close"):e.start?r._emitEvent("start"):e.end?r._emitEvent("end"):e.replay?r._emitEvent("replay"):e.init&&(e.init.error?r._emitEvent("init",new Error(e.init.error)):(r._playerID=e.init.playerID,r._emitEvent("init"))):r._emitEvent("error",new Error("native bridge error"));};};return(t.prototype=new e()).constructor=t,t.prototype.init=function(e){e&&this.on("init",e),XC.callHost("videoplayer","createPlayer",this._options?this._options:{},this._nativeListener);},t.prototype.playHLS=function(e,t){XC.callHost("videoplayer","playHLS",{playerID:this._playerID,url:e,duration:t});},t.prototype.playMP4=function(e,t,r){XC.callHost("videoplayer","playMP4",{playerID:this._playerID,url:e,duration:t,options:r});},t.prototype.playRTSP=function(e,t){XC.callHost("videoplayer","playRTSP",{playerID:this._playerID,url:e,transport:t});},t.prototype.playMultiHLS=function(e){XC.callHost("videoplayer","playMultiHLS",{playerID:this._playerID,urls:e});},t.prototype.playFLV=function(e,t){XC.callHost("videoplayer","playFLV",{playerID:this._playerID,url:e,duration:t});},t.prototype.close=function(){XC.callHost("videoplayer","closePlayer",{playerID:this._playerID});},e.iOSPlayer=t,e.AndroidPlayer=t,e;}(),x.videoplayer.Handler=function(){var e=function e(){};return e.prototype.createVideoPlayer=function(e,t){var r=null,i=null;"undefined"!=typeof window&&null!=window&&window.XCHost||(r="node-webkit"),"undefined"!=typeof window&&null!=window&&window.XCHost&&window.XCHost.getType&&(r=window.XCHost.getType()),(i="Android"==r?new x.videoplayer.Player.AndroidPlayer(e):"node-webkit"==r||"undefined"!=typeof process&&null!=process&&"node"==process.title?new x.videoplayer.Player.NWPlayer(e):new x.videoplayer.Player.iOSPlayer(e)).init(function(e){t&&t(e,i);});},e;}(),"undefined"!=typeof module&&null!=module&&(module.exports=new x.videoplayer.Handler());