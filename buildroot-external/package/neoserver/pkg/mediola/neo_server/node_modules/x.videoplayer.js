var x=x||{};x.videoplayer=x.videoplayer||{};
x.videoplayer.Player=function(){var c=function(a){this._options=a;this._listeners={}};c.prototype.on=function(a,b){a&&b&&(this._listeners[a]||(this._listeners[a]=[]),-1==this._listeners[a].indexOf(b)&&this._listeners[a].push(b))};c.prototype.off=function(a,b){a&&b&&this._listeners[a]&&(b=this._listeners[a].indexOf(b),-1!=b&&this._listeners[a].splice(b,1))};c.prototype.init=function(a){throw Error("func init not implemented");};c.prototype.playHLS=function(a){};c.prototype.playFLV=function(a){};c.prototype._emitEvent=
function(a,b){if(a){var c=this._listeners[a];if(c&&0<c.length)for(var d=0;d<c.length;d++){var e=c[d];try{e(b)}catch(f){this._logger.log("trace","call "+a+" listener failed, error:"+f.message)}}}};var d=function(){c.call(this);this._logger=require("x.logger.js").getLogger("x.videoplayer.MobilePlayer");this._playerID=null;var a=this;this._nativeListener=function(b){b?b.error?a._emitEvent("error",Error(b.error)):b.close?a._emitEvent("close"):b.start?a._emitEvent("start"):b.end?a._emitEvent("end"):b.replay?
a._emitEvent("replay"):b.init&&(b.init.error?a._emitEvent("init",Error(b.init.error)):(a._playerID=b.init.playerID,a._emitEvent("init"))):a._emitEvent("error",Error("native bridge error"))}};d.prototype=new c;d.prototype.constructor=d;d.prototype.init=function(a){if(a)this.on("init",a);XC.callHost("videoplayer","createPlayer",null,this._nativeListener)};d.prototype.playHLS=function(a,b){XC.callHost("videoplayer","playHLS",{playerID:this._playerID,url:a,duration:b})};d.prototype.playMultiHLS=function(a){XC.callHost("videoplayer",
"playMultiHLS",{playerID:this._playerID,urls:a})};d.prototype.playFLV=function(a,b){XC.callHost("videoplayer","playFLV",{playerID:this._playerID,url:a,duration:b})};d.prototype.close=function(){XC.callHost("videoplayer","closePlayer",{playerID:this._playerID})};c.iOSPlayer=d;c.AndroidPlayer=d;return c}();
x.videoplayer.Handler=function(){var c=function(){};c.prototype.createVideoPlayer=function(c,a){var b=null,d=null;"undefined"!=typeof window&&null!=window&&window.XCHost||(b="node-webkit");"undefined"!=typeof window&&null!=window&&window.XCHost&&window.XCHost.getType&&(b=window.XCHost.getType());d="Android"==b?new x.videoplayer.Player.AndroidPlayer(c):"node-webkit"==b||"undefined"!=typeof process&&null!=process&&"node"==process.title?new x.videoplayer.Player.NWPlayer(c):new x.videoplayer.Player.iOSPlayer;
d.init(function(b){a&&a(b,d)})};return c}();"undefined"!=typeof module&&null!=module&&(module.exports=new x.videoplayer.Handler);
