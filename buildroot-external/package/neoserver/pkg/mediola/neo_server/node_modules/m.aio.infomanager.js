var m=m||{};m.aio=m.aio||{},m.aio.infomanager=m.aio.infomanager||{},m.aio.infomanager.Manager=function(){var e=-1,r={},n="info",a=[],i="blocked",t="webservice.mediola.com",o=443,s="/creatorneo/license/getlicensesummary",c="/creatorneo/license/getblocked2",u=["mcontrol","xs1","cloud_device"],f=["aio","hm","hue","harmony","instar","ip","telefunken","konine","contronics","7links","dlink","hama","foscam","edimax","ipsync","wemo","sonos","redeye","itach","irtrans","digitus","dmx4all","easysh","moehlenhoff","internorm","siegenia","miele","rwe","ez","vera","knx","synco","bub","rademacher","max","nueva","osram","netatmo","intertechno","brennenstuhl","spro","milight","aio_upgrade","hm_upgrade",null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,"ultimate","tado","denon","pioneer","yamaha","onkyo","marantz","doorbird","homewizard","rehau","fritz","qivicon","mobotix","ipcam","netatmo_welcome","yellowstone","samsung","esco","mydlink","orvibo","raumfeld","bose","axis","neoserver","nuki","warema","feller","enocean","zwave","tahoma","fibaro","zigbee","digitalstrom","mystrom","hautau","brelag","hm_ccu3","wir","iobroker","kopp","enoceanip","cloud_device","gealan","nanoleaf","shelly","selve","openhab","bosch","homekit","gira","junghome","somfylocal","eltako_minisafe2"],l=["neo","neo2"],_contains=function _contains(e,r){for(var n=0;n<e.length;n++){if(e[n]===r)return!0;}return!1;},_encode=function _encode(e){var r=require("crypto"),n=new Buffer("fO4gAeDjh4HwO0D8+/9Bfw==","base64"),a=new Buffer("+ubtPBJR9uejkjXiN6c1Bg==","base64"),i=r.createCipheriv("aes-128-cbc",n,a);i.setAutoPadding(!0);var t=[i.update(e,"utf8")];return t.push(i["final"]()),Buffer.concat(t).toString("base64");},_decode=function _decode(e){var r=require("crypto"),n=new Buffer("fO4gAeDjh4HwO0D8+/9Bfw==","base64"),a=new Buffer("+ubtPBJR9uejkjXiN6c1Bg==","base64"),i=r.createDecipheriv("aes-128-cbc",n,a);i.setAutoPadding(!0);var t=[i.update(new Buffer(e,"base64"))];t.push(i["final"]());var o=Buffer.concat(t).toString("utf8");return JSON.parse(o);},_removeUpgradedLite=function _removeUpgradedLite(e,r){var n={"aio@10":{full:0,upgrade:42},"hm@10":{full:1,upgrade:43}};if(r&&e&&0!==r.length)for(var a in n){var i=n[a];if(i){var t=r.indexOf(a);if(!(t<0)){var o=e.indexOf(i.upgrade);o>=0?(r.splice(t,1),e.indexOf(i.full)<0&&(e.splice(o,1),e.push(i.full))):e.indexOf(i.full)>=0&&r.splice(t,1);}}}},_plugin2idx=function _plugin2idx(e){for(var r=-1,n=0;n<f.length;n++){if(f[n]==e){r=n;break;}}return r;},_featureArr2idxArr=function _featureArr2idxArr(e){for(var r=[],n=0;n<e.length;n++){var a=_plugin2idx(e[n]);-1!=a&&(_contains(r,a)||r.push(a));}return r;},_mergeArr=function _mergeArr(e,r){var n,a=[];for(n=0;n<e.length;n++){a.push(e[n]);}for(n=0;n<r.length;n++){_contains(e,r[n])||a.push(r[n]);}return a;},_retrieveBlockedLicense=function _retrieveBlockedLicense(e,r,n){!function(e){var r=require("https"),n={host:t,port:o,path:c,method:"GET",timeout:2e4,headers:{"User-Agent":"mediola",Connection:"close"}},a="",i=r.request(n,function(r){r.setEncoding("utf8"),r.on("data",function(e){a+=e;}),r.on("end",function(){e&&(200==r.statusCode?e(null,a):e(new Error("equest failed:"+a))),e=null;});});i.on&&"function"==typeof i.on&&i.on("error",function(r){e&&e(r),e=null;}),i.setTimeout&&i.setTimeout(2e4),i.end();}(function(t,o){if(t)n&&n(t);else if(o){try{a=JSON.parse(o);}catch(e){}r&&r.updateBlockedLicenses(a,function(){}),e&&a&&e.save(i,_encode(JSON.stringify(a))),n&&n();}else n&&n();});},_getLicenseSummary=function _getLicenseSummary(e,r,n){var a=require("https");443!=o&&(a=require("http"));var i=2e4;n&&n.timeout&&(i=n.timeout);var c={host:t,port:o,path:s,method:"POST",timeout:i,headers:{"User-Agent":"mediola",Connection:"close"}};m.aio.infomanager.IM._logger.log("trace","try to download info from "+c.host+":"+c.port);var u="",f=a.request(c,function(e){e.setEncoding("utf8"),e.on("data",function(e){u+=e;}),e.on("end",function(){if(200==e.statusCode)m.aio.infomanager.IM._logger.log("trace","download info success"),r&&r(null,u);else{m.aio.infomanager.IM._logger.log("trace","download info failed:"+e.statusCode+" :"+u);var n=new Error("request failed:"+u);n.code="http",r&&r(n);}r=null;});});f.on("error",function(e){e.code="connection",m.aio.infomanager.IM._logger.log("trace","download info error:"+e.stack),r&&r(e),r=null;}),f.setTimeout(i,function(){m.aio.infomanager.IM._logger.log("trace","download info timeout");var e=new Error("http timeout");e.code="timeout",r&&r(e),r=null;}),f.write(e),f.end();},_decodeLicenseSummary=function _decodeLicenseSummary(e){var r=_decode(e),n={};for(var a in r){if(r.hasOwnProperty(a)){var i=r[a],t={};if(n[a]=t,t.feature=i.feature,t.blocked=i.blocked,t.skins=i.skins,t.sus_info=i.sus_info,t.sus_flatrate=i.sus_flatrate,t.codes={},i.codes)for(var o in i.codes){if(i.codes.hasOwnProperty(o)){var s=i.codes[o];t.codes[o]={},s.op&&(t.codes[o].op=_decode(s.op)),t.codes[o].blocked=s.blocked;}}}}return n;},_retrieveInfo=function _retrieveInfo(e,a,i){a.trace("config/tenants",function(a,t){if(a)i&&i(a);else if(t){var o=t.getChildren();if(o&&0!=o.length){for(var s=[],c=0;c<o.length;c++){var u=o[c];u&&u.license&&u.license.licenseTxt&&s.push(u.license.licenseTxt);}if(0!=s.length){var f=s.join(":");f=_encode(f),_getLicenseSummary(f,function(a,t){if(a)i&&i(a);else if(t){try{var o=_decodeLicenseSummary(t);for(var s in r){r.hasOwnProperty(s)&&o&&!o[s]&&(o[s]=r[s]);}o&&(r=o),e&&r&&(m.aio.infomanager.IM._logger.log("trace","save pref"),e.save(n,_encode(JSON.stringify(r))));}catch(e){m.aio.infomanager.IM._logger.log("trace","decode info error:"+e.stack);}i&&i();}else i&&i();});}else i&&i();}else i&&i();}else i&&i();});},_getFeatureModules=function _getFeatureModules(e){if(!e||!e.valid)return[];var n=_resolveFeatureArray(e),a=_resolveFeatureLiteNameArray(e),i=!1,t=e.version+":"+("normal"==e.type?0:1)+":"+e.id;if(r&&r[t]&&r[t].sus_info){var o=r[t].sus_info;o.hm&&o.hm.lite&&(i=!0);}if(i){var s=n.indexOf(1);-1!=s&&n.splice(s,1);}else _removeUpgradedLite(n,a);var c=[],l=0;if(_contains(n,63))for(l=0;l<f.length;l++){42!=l&&43!=l&&c.push(f[l]);}else{for(l=0;l<n.length;l++){63!=n[l]&&(42==n[l]?_contains(n,0)||c.push(f[0]):43==n[l]?_contains(n,1)||c.push(f[1]):c.push(f[n[l]]));}for(l=0;l<a.length;l++){var d=a[l].split("@");if(2==d.length&&_contains(f,d[0]))parseInt(d[1])<=10&&c.push(d[0]+"_lite");}}c=_mergeArr(c,u);var h=[];for(l=0;l<c.length;l++){c[l]&&h.push(c[l]);}return h&&-1!=h.indexOf("hm_ccu3")&&-1==h.indexOf("hm")&&h.push("hm"),h;},_resolveFeatureArray=function _resolveFeatureArray(e){var n=e.version+":"+("normal"==e.type?0:1)+":"+e.id,a=[],i=[];if(r)for(var t in r){if(r.hasOwnProperty(t)){if(t!=n)continue;var o=r[t].codes;if(o)for(var s in o){if(o.hasOwnProperty(s)&&o[s]&&o[s].op){var c=o[s],u=c.op;u.features&&u.features.length>0&&(c.blocked?a=a.concat(u.features):i=i.concat(u.features));}}}}a=_featureArr2idxArr(a),i=_featureArr2idxArr(i);var f=function(e){if(!e||!e.valid)return[];var r=[],n=e.features;if(0==e.version)for(var a=0;a<n.length;a++){for(var i=n.readUInt8(n.length-1-a),t=0;t<8;t++){i>>t&1&&r.push(8*a+t);}}else if(1==e.version){var o=n.readUInt8(7);1&o&&r.push(0),o>>1&1&&r.push(1);var s=n.readUInt8(3);s>>2&1&&r.push(34),s>>3&1&&r.push(35),s>>6&1&&r.push(38),s>>7&1&&r.push(39);var c=n.readUInt8(2);1&c&&r.push(40),c>>2&1&&r.push(42),c>>3&1&&r.push(43),n.readUInt8(0)>>7&1&&r.push(63);}else 2==e.version&&n.readUInt8(0)>>7&1&&r.push(63);return r;}(e);return f=function(e,r){for(var n=[],a=0;a<e.length;a++){_contains(r,e[a])||n.push(e[a]);}return n;}(f,a),f=_mergeArr(f,i);},_resolveFeatureLiteNameArray=function _resolveFeatureLiteNameArray(e){var n=e.version+":"+("normal"==e.type?0:1)+":"+e.id,a=[];if(r)for(var i in r){if(r.hasOwnProperty(i)){if(i!=n)continue;var t=r[i].codes;if(t)for(var o in t){if(t.hasOwnProperty(o)&&t[o]&&t[o].op){var s=t[o],c=s.op;c.features_lite&&c.features_lite.length>0&&(s.blocked||(a=a.concat(c.features_lite)));}}}}for(var u=[],f=0;f<a.length;f++){_contains(u,a[f])||u.push(a[f]);}return u;},Manager=function Manager(){this.preference=null,this._configmanager=null,this._logger=require("x.logger.js").getLogger("m.aio.infomanager.Manager");};return Manager.prototype.init=function(u,f,l,d){if(l&&(e=l),this._configmanager=f,u&&u.Preference){this.preference=u.Preference;var h=u.Preference.read(n);if(h)try{r=_decode(h);}catch(e){}var p=u.Preference.read(i);if(p)try{a=_decode(p);}catch(e){}}switch(process.env.CLOUD){case"local":t=process.env.CLOUD_HOST?process.env.CLOUD_HOST:"localhost",o=8080,s="/webservice"+s,c="/webservice"+c;break;case"dev":t=process.env.CLOUD_HOST?process.env.CLOUD_HOST:"mediola-dev.elasticbeanstalk.com",o=80;break;default:t=process.env.CLOUD_HOST?process.env.CLOUD_HOST:"webservice.mediola.com",o=443;}d&&d();},Manager.prototype.retrieveInfo=function(e){var r=require("m.aio.configmanager.js"),n=this,a=2;_retrieveInfo(this.preference,r,function(){setInterval(function(){_retrieveInfo(n.preference,r);},9e5),0==--a&&(e&&e(),e=null);}),_retrieveBlockedLicense(this.preference,r,function(){setInterval(function(){_retrieveBlockedLicense(n.preference,r);},9e5),0==--a&&(e&&e(),e=null);});},Manager.prototype.permitSkin=function(e,n){if(!e||!n)return!1;var a=_resolveFeatureArray(n);if(_contains(a,63))return!0;if(_contains(l,e))return!0;var i=n.version+":"+("normal"==n.type?0:1)+":"+n.id;return!!(r&&r[i]&&r[i].skins)&&_contains(r[i].skins,e);},Manager.prototype.permitFeature=function(n,a,i,t,o,s){var c,u,_getManufacturerFeatureBit=function _getManufacturerFeatureBit(e){switch(e){case"telefunken":return 6;case"konine":return 7;case"abus":return 0;case"7links":return 9;case"dlink":return 10;case"hama":return 11;case"foscam":return 12;case"instar":return 4;case"edimax":return 13;case"nueva":return 35;case"digitus":return 20;case"doorbird":return 70;case"mobotix":return 75;case"generic":return 76;case"netatmo":return 77;case"axis":return 85;default:return-1;}},_hasLiteFeature=function _hasLiteFeature(e,r){if(!u)return 0;if(!e)return 0;for(var n=0;n<r.length;n++){if(r[n]&&0==r[n].indexOf(e))return parseInt(r[n].replace(e+"@",""));}return 0;},_getNodePostition=function _getNodePostition(e,r,n){var a=-1;if(n)for(var i=0;i<n.length&&(!n[i]||!n[i].info||n[i].info.sys!=e||(a++,n[i].index!==r));i++){;}return a;};if(!i)return!1;if(-1==e){if(c=_resolveFeatureArray(i),u=_resolveFeatureLiteNameArray(i),_contains(c,63))return!0;_removeUpgradedLite(c,u);}else if(c=function(n){var a=m.aio.infomanager.IM.hasPartnerUltimate(),i=n.version+":"+("normal"==n.type?0:1)+":"+n.id,t=[];if(r&&r[i]&&r[i].sus_info){t=[];var o=r[i].sus_info;if(o.ultimate)return[63];for(var s in o){if(o.hasOwnProperty(s)){var c=o[s];if(!c.lite&&c.deadline>=e||-1==c.deadline||a){var u=f.indexOf(s);t.push(u);}}}}else{var l=_resolveFeatureArray(n);(-1!=l.indexOf(63)||a||e<=1504223999e3)&&(t=l);}return t;}(i),u=function(n){var a=m.aio.infomanager.IM.hasPartnerUltimate(),i=n.version+":"+("normal"==n.type?0:1)+":"+n.id,t=[];if(r&&r[i]&&r[i].sus_info){t=[];var o=r[i].sus_info;for(var s in o){if(o.hasOwnProperty(s)){var c=o[s];(c.lite&&c.deadline>=e||-1==c.deadline||a)&&t.push(s+"@"+c.devCount);}}}else{var u=_resolveFeatureLiteNameArray(n);(e<=1504223999e3||a)&&(t=u);}return t;}(i),_contains(c,63))return!0;var l=0;switch(a.sys){case"mcontrol":case"xs1":case"virtualdevice":case"neoserver":case"cloudservice":case"webpage":return!0;case"hcgw":if(null!=a.ip&&void 0!==a.ip)switch(a.vendor){case"brennenstuhl":l=39;break;case"intertechno":l=38;break;default:l=40;}else{if(_contains(c,38))return!0;if(_contains(c,39))return!0;l=40;}break;case"netatmo":l=37;break;case"lightify":l=36;break;case"max":l=34;break;case"homepilot1":case"homepilot2":case"homepilot2v5":l=33;break;case"orvibo_ir":if("orvibo"===a.vendor)l=82;else l=35;break;case"orvibo_socket":l=82;break;case"execengine":l=8;break;case"siegenia":l=25;break;case"aio":if(a.gateway_vendor||null!=a.ip&&void 0!==a.ip){if("KNX"==a.type)return _contains(c,30);switch(a.gateway_vendor){case"siegenia":l=25;break;case"internorm":l=24;break;case"nueva":l=35;break;case"brelag":l=98;break;case"wir":l=100;break;case"kopp":l=102;break;case"selve":l=108;break;case"eltako_minisafe2":l=115;break;default:if("EA"==a.version&&_contains(c,24))return!0;if("E2"==a.version&&_contains(c,102))return!0;if("E7"==a.version&&_contains(c,108))return!0;if("000C"===String(a.vid).toUpperCase()&&_contains(c,115))return!0;if(_contains(c,42))return!0;if(_contains(c,90))return!0;if(_contains(c,91))return!0;if(_contains(c,94))return!0;if(_contains(c,30))return!0;var _e2=_hasLiteFeature(f[1],u);if(_e2){return _getNodePostition("aio",t,o)<_e2;}l=0;}}else switch(a.type){case"CM":case"IV":l=108;break;case"IN":case"IW":l=24;break;case"SIAU":l=25;break;case"QA":l=80;break;case"ENOCEAN":if(s&&"aio"===s.sys&&["C1","C2","CA"].includes(s.version))return!0;l=90;break;case"ZWAVE2":l=91;break;case"KNX":l=30;break;case"ZIGBEE":l=94;break;case"BG":l=98;break;default:if("CODE"===a.type&&_contains(c,115))return!0;if(_contains(c,24))return!0;if(_contains(c,25))return!0;if(_contains(c,35))return!0;if(_contains(c,42))return!0;if(_contains(c,98))return!0;if(_contains(c,100))return!0;if(_contains(c,102))return!0;if(_contains(c,108))return!0;if(_hasLiteFeature(f[0],u))return!0;l=0;}break;case"hm":if(_contains(c,43))return!0;if(_contains(c,99))return!0;var _e=_hasLiteFeature(f[1],u);if(_e){return _getNodePostition("hm",t,o)<_e;}l=1;break;case"hue":l=2;break;case"easyled":l=22;break;case"milight":case"milightv6":l=41;break;case"wifiled2":case"dmx4all":case"artnet":l=21;break;case"itach":l=18;break;case"irtrans":l=19;break;case"redeye":l=17;break;case"harmony":l=3;break;case"ip":l=5;break;case"edimax":l=13;break;case"ipsync":l=14;break;case"wemo":l=15;break;case"sonos":l=16;break;case"alpha2":l=23;break;case"tado":l=64;break;case"denon":case"heos":l=65;break;case"pioneer":l=66;break;case"yamaha":l=67;break;case"onkyo":l=68;break;case"marantz":l=69;break;case"homewizard":l=71;break;case"neasmart":l=72;break;case"fritz":l=73;break;case"qivicon":l=74;break;case"rwe":l=27;break;case"cloudy":l=78;break;case"samsung_smarthome":l=79;break;case"dlink":l=81;break;case"raumfeld":l=83;break;case"bose":l=84;break;case"nuki":l=87;break;case"warema":l=88;break;case"feller":l=89;break;case"tahoma":l=92;break;case"fibaro":l=93;break;case"digitalstrom":l=95;break;case"mystrom":l=96;break;case"hautau":l=97;break;case"ioBroker":l=101;break;case"dcgw":l=103;break;case"cloud_service":l=104;break;case"gealan":l=105;break;case"nanoleaf":l=106;break;case"shelly":l=107;break;case"openhab":l=109;break;case"homekit":l=111;break;case"gira":l=112;break;case"junghome":l=113;break;case"somfylocal":l=114;break;case"eltako_minisafe2":l=115;break;case"cam":switch(a.type){case"jpeg":return!0;case"system":switch(a.manufacturer){case"7links":case"hama":if(_contains(c,76))return!0;}if(-1==(l=_getManufacturerFeatureBit(a.manufacturer)))return!1;break;case"custom":l=5;break;case null:case void 0:return!0;}break;default:if(-1==(l=_getManufacturerFeatureBit(a.sys)))return!1;}return _contains(c,l);},Manager.prototype.getFeatureModules=function(e){return _getFeatureModules(e);},Manager.prototype.getFeatureModulesSUS=function(n){return-1==e?null:function(e){var n=m.aio.infomanager.IM.hasPartnerUltimate(),a=e.version+":"+("normal"==e.type?0:1)+":"+e.id,i=null;if(r&&r[a]&&r[a].sus_info){i={};var t=r[a].sus_info,o=!1;for(var s in t.ultimate&&(o=!0),t){if(t.hasOwnProperty(s)){var c=t[s];c.lite?(i[s+"_lite"]=c.deadline,n&&(i[s+"_lite"]=-1)):(i[s]=o?-1:c.deadline,"milight"===s&&(i[s]=-1),n&&(i[s]=-1));}}u.forEach(function(e){i[e]=-1;});}else{var f=1504216799e3,l=_resolveFeatureArray(e);_contains(l,63)&&(f=-1);var d=_getFeatureModules(e);i={},d.forEach(function(e){-1!=u.indexOf(e)?i[e]=-1:(i[e]=f,n&&(i[e]=-1));});}return i.hm_ccu3&&(i.hm||(i.hm=i.hm_ccu3),i.hm&&i.hm<i.hm_ccu3&&(i.hm=i.hm_ccu3)),i;}(n);},Manager.prototype.getSUSFlatrate=function(e){return function(e){var n=e.version+":"+("normal"==e.type?0:1)+":"+e.id;return r&&r[n]&&r[n].sus_flatrate?r[n].sus_flatrate:null;}(e);},Manager.prototype.getDeviceCount=function(e,r){if(!r)return-1;if(!e)return-1;var n=_resolveFeatureArray(r),a=_resolveFeatureLiteNameArray(r);if(_removeUpgradedLite(n,a),_contains(n,63))return-1;var i=null;switch(e.sys){case"aio":switch(e.type){case"IN":case"IW":case"SIAU":return-1;default:if(_contains(n,0))return-1;if(_contains(n,24))return-1;if(_contains(n,25))return-1;if(_contains(n,35))return-1;if(_contains(n,30))return-1;if(_contains(n,42))return 10;if(_contains(n,90))return-1;if(_contains(n,91))return-1;if(_contains(n,94))return-1;if(_contains(n,98))return-1;if(_contains(n,100))return-1;if(_contains(n,102))return-1;if(_contains(n,108))return-1;if(_contains(n,115))return-1;i=f[0];}break;case"hm":if(_contains(n,1))return-1;if(_contains(n,99))return-1;if(_contains(n,43))return 10;i=f[1];break;default:return-1;}if(!i)return-1;for(var t=0,o=0;o<a.length;o++){var s=a[o].split("@");if(2==s.length&&s[0]==i){var c=parseInt(s[1]);c>t&&(t=c);}}return t;},Manager.prototype.getDeviceCount2=function(e,r,n){if(e&&r){var a=require("m.aio.configmanager.js").LicenseManager.resolve(r);if(a){var i=this.getDeviceCount(e,a);n&&n(null,i);}else n&&n(new Error("resolve license fail"));}else n&&n(new Error("argument is null"));},Manager.prototype.updateLicense=function(e,a){if(e){var i=this,t=_encode(e);_getLicenseSummary(t,function(e,t){if(e)a&&a(e);else if(t){try{var o=_decodeLicenseSummary(t);for(var s in r){r.hasOwnProperty(s)&&o&&!o[s]&&(o[s]=r[s]);}o&&(r=o),i.preference&&r&&i.preference.save(n,_encode(JSON.stringify(r)));}catch(e){}a&&a();}else a&&a();});}else a&&a(new Error("license is empty"));},Manager.prototype.updateCodeOld=function(e,a,i,t){if(e&&a&&i){var o=require("m.aio.configmanager.js").LicenseManager.resolve(a);if(o){var s=o.version+":"+("normal"==o.type?0:1)+":"+o.id;if(r||(r={}),r[s]||(r[s]={blocked:!1,codes:{}}),r[s].codes||(r[s].codes={}),r[s].codes[e]={op:_decode(i),blocked:!1},r[s].codes[e].op&&r[s].codes[e].op.skins&&r[s].codes[e].op.skins.length>0){r[s].skins||(r[s].skins=[]);for(var c=r[s].codes[e].op.skins,u=0;u<c.length;u++){c[u]&&!_contains(r[s].skins,c[u])&&r[s].skins.push(c[u]);}}this.preference&&this.preference.save(n,_encode(JSON.stringify(r))),t&&t();}else t&&t(new Error("resolve license fail"));}else t&&t(new Error("argument is null"));},Manager.prototype.updateCode=function(e,a,i,t){if(a){var o=a;o=_encode(o);var s=this;_getLicenseSummary(o,function(e,a){if(e)t&&t(e);else if(a){try{var i=_decodeLicenseSummary(a);for(var o in r){r.hasOwnProperty(o)&&i&&!i[o]&&(i[o]=r[o]);}i&&(r=i),s.preference&&s.preference.save(n,_encode(JSON.stringify(r)));}catch(e){}t&&t();}else t&&t();});}else t&&t(new Error("argument is null"));},Manager.prototype.updateDownloadSkin=function(e,a,i){if(e&&a){var t=e.version+":"+("normal"==e.type?0:1)+":"+e.id;r||(r={}),r[t]||(r[t]={blocked:!1,codes:{},skins:[]}),r[t].skins||(r[t].skins=[]),_contains(r[t].skins,a)||r[t].skins.push(a),this.preference&&this.preference.save(n,_encode(JSON.stringify(r))),i&&i();}else i&&i(new Error("argument is null"));},Manager.prototype.isLicenseBlocked=function(e){if(!a)return!1;for(var r=0;r<a.length;r++){if(a[r].version==e.version&&a[r].id==e.id&&a[r].type==("test"==e.type?1:0))return!0;}return!1;},Manager.prototype.hasPartnerUltimate=function(){var e=this._configmanager.getAllLicenses();if(!e||0==e.length)return!1;for(var r=0;r<e.length;r++){var n=e[r];if(n&&n.isPartnerUltimateLicense())return!0;}return!1;},Manager;}(),m.aio.infomanager.IM=new m.aio.infomanager.Manager(),"undefined"!=typeof module&&null!=module&&(module.exports=m.aio.infomanager.IM);