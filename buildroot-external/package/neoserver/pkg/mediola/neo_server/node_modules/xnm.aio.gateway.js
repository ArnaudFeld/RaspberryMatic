var xnm=xnm||{};xnm.aio=xnm.aio||{};xnm.aio.gateway=xnm.aio.gateway||{};xnm.aio.gateway.systems=xnm.aio.gateway.systems||{};xnm.aio.gateway.SYSID={KOPP:1,FS20:2,HE:3,IT:4,ELRO:5,EF:6,KL:10,RC:11,IA:13,EO:17,LS:18,L2:19,BC:20,WA:21,HM:22,DY:23,ML:27,IN:28,HO:31,AN:33,MC:34,PE:35,ER:36,SL:37,UR:38,CR:39,DB:40,R2:47,RT:52,CF4:53,CF3:54,KN:58,L3:59,NTH:61};xnm.aio.gateway.VID={MEDIOLA:1,NUEVA:2,SIRAL:4,BRELAG:9,WIR:10};
xnm.aio.gateway.REV_SYS_MAP=["- F8 F1 F3 F3F0 F2 F4 F3F3 F3F6 F6 F3F8 F9 FA F3F5 FB F3F2 FC FD E1 E2".split(" "),["CODE",0,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1,1,-1],["KOPP",0,-1,1,1,1,1,1,0,0,1,1,1,-1,-1,-1,-1,0,1,1],["FS20",0,1,1,1,1,1,1,0,0,1,1,1,-1,-1,1,1,0,1,1],["HE",0,1,1,1,1,1,1,0,0,1,1,1,-1,-1,1,1,-1,1,0],["IT",0,1,1,1,1,1,1,0,0,1,1,1,-1,-1,1,1,-1,1,0],["ELRO",0,1,1,1,1,1,1,0,0,1,1,1,-1,-1,1,1,-1,1,0],["EF",0,1,1,1,1,1,1,0,0,1,1,1,-1,-1,1,1,-1,-1,0],["FHT80B",0,1,1,1,1,1,1,0,0,1,1,1,-1,-1,1,1,
0,1,-1],["KL",0,1,1,1,1,1,1,0,0,1,1,1,-1,-1,1,1,-1,-1,0],["RC",0,-1,-1,-1,-1,-1,-1,0,0,1,1,1,-1,-1,-1,-1,1,-1,0],["IA",0,1,1,1,1,1,1,0,0,1,1,1,-1,-1,1,1,-1,1,0],["EO",0,0,0,0,0,0,1,0,0,1,1,1,-1,-1,-1,-1,0,1,1],["LS",0,1,1,1,1,1,1,0,0,1,1,1,-1,-1,-1,-1,-1,-1,0],["L2",0,1,1,1,1,1,1,0,0,1,1,1,-1,-1,-1,-1,-1,1,0],["BC",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],["WA",0,1,1,1,1,1,1,0,0,1,1,1,-1,-1,1,1,-1,1,0],["HM",0,0,0,0,0,0,1,0,0,1,1,1,1,1,1,1,0,1,1],["DY",0,1,1,1,1,1,1,0,0,1,1,1,-1,-1,-1,-1,1,1,-1],["ML",
0,1,1,1,1,1,1,0,0,1,1,1,-1,-1,-1,-1,-1,-1,-1],["IN",0,0,0,0,0,0,-1,0,0,-1,-1,-1,1,1,-1,-1,-1,-1,-1],["HO",0,-1,-1,-1,-1,-1,-1,0,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,0],["AN",0,1,1,1,1,1,1,0,0,1,1,1,-1,-1,-1,-1,-1,-1,-1],["MC",0,1,1,1,1,1,1,0,0,1,1,1,-1,-1,-1,-1,0,1,-1],["PE",0,-1,1,1,-1,-1,1,0,0,1,1,1,1,1,1,1,0,1,1],["ER",0,0,0,0,0,0,1,0,0,1,1,1,1,1,1,1,0,1,-1],["SL",0,1,1,1,1,1,1,0,0,1,1,1,-1,-1,-1,-1,-1,1,0],["UR",0,1,1,1,1,1,1,0,0,1,1,1,-1,-1,-1,-1,-1,-1,1],["CR",0,1,1,1,1,1,1,0,0,1,1,1,-1,-1,-1,-1,1,
1,0],["DB",0,-1,-1,-1,-1,-1,-1,0,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],["R2 ",0,0,0,0,0,0,-1,0,0,1,1,1,-1,-1,-1,-1,-1,1,1],["RT",0,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1,1,0],["CF4",0,0,0,0,0,0,-1,0,0,1,1,1,-1,-1,-1,-1,0,1,1],["CF3",0,0,0,0,0,0,-1,0,0,1,1,1,-1,-1,-1,-1,0,1,1],["KN",0,1,1,1,1,1,1,0,0,1,1,1,-1,-1,-1,-1,0,1,1],["L3",0,1,1,1,1,1,1,0,0,1,1,1,-1,-1,-1,-1,0,1,-1],["NTH",0,-1,-1,1,-1,-1,-1,0,0,-1,1,1,-1,-1,-1,-1,1,-1,0],["RV",0,-1,1,1,1,1,1,0,0,1,-1,-1,-1,-1,-1,-1,-1,-1,-1],["WS300",0,1,1,1,1,1,1,1,
1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],["SIAU",0,0,0,0,1,0,-1,0,0,-1,-1,-1,-1,-1,1,1,0,0,0],["IW",0,0,0,0,0,0,-1,0,0,-1,-1,-1,1,1,-1,-1,0,-1,-1],["PV",0,1,1,1,-1,-1,1,0,0,1,1,1,-1,-1,-1,-1,-1,1,-1],["GQ",0,-1,-1,-1,-1,-1,-1,0,0,1,1,1,-1,-1,-1,-1,0,1,0],["QA",0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,1,0],["FX3",0,-1,-1,-1,-1,-1,-1,0,0,1,1,1,-1,-1,-1,-1,0,1,0],["BK",0,-1,-1,-1,-1,-1,-1,0,0,1,1,1,-1,-1,-1,-1,0,1,0],["WR",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0],["DY2",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0],["BG",0,
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0],["B4",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0]];
xnm.aio.gateway.Gateway=function(b,a){this._logger="undefined"==typeof require||null==require?{log:function(){}}:require("x.logger.js").getLogger("xnm.aio.gateway.Gateway");this.isInRemoteMode=!1;this._ip=b;this._port=80;a&&(this._port=a);this.user="user";this.password=null;this.timeout=8E3;this._pwdHash=null;this.isV5=!1;this._INStatesToGet=[];this._HMStatesToGet=[];this._R2StatesToGet=[];this.CommandHandler=null;if(b){var c=b.split(":");2<=c.length&&(this._ip=c[0],this._port=c[1]);3==c.length&&
(this.password=c[2])}};xnm.aio.gateway.Gateway.prototype.setRemoteAccessMode=function(b){this.isInRemoteMode=!0;this._sid=b;var a;try{a=$.parseJSON(XC.localStorage.getItem("RA_KEYS"))}catch(c){}this._rakey=a&&a[b]?a[b]:"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF"};
xnm.aio.gateway.Gateway.prototype.executeRequest=function(b,a,c){var d=this;if(this.isInRemoteMode)this.executeRemoteCommand(b,a,c);else{var e="http://"+this._ip+":"+this._port+"/command?XC_FNC="+b;this.user&&this.password&&(e+="&XC_USER="+this.user+"&XC_PASS="+this.password);if(a)for(param in a)e+="&"+param+"="+a[param];$.ajax({url:e,timeout:this.timeout,cache:!1,success:function(a){var b=null;if(a&&8<=a.length&&"{XC_SUC}"==a.substr(0,8))if(8<a.length)try{b={data:$.parseJSON(a.substr(8))}}catch(e){XC.debugf("request failed: "+
e);c&&c(null,d._ip);return}else b={data:{}};else a&&8<=a.length&&"{XC_ERR}"==a.substr(0,8)?(b={error:""},8<a.length&&(b={error:a.substr(8)})):a&&8<=a.length&&"{XC_AUT}"==a.substr(0,8)&&(b={error:"AUTH"});c&&c(b,d._ip)},error:function(){XC.debugf("request failed: "+e);c&&c(null,d._ip)}})}};
xnm.aio.gateway.Gateway.prototype.executeRequestV5=function(b,a,c){var d=this;if(this.isInRemoteMode)this.executeRemoteCommandV5(b,a,c);else{var e=!1;-1!=b.indexOf("/")&&(e=!0);var f="http://"+this._ip+":"+this._port+"/cmd?XC_FNC="+b;e&&(f="http://"+this._ip+":"+this._port+b);if(e){if(a)for(param in b=!0,a)b?(f+="?"+param+"="+a[param],b=!1):f+="&"+param+"="+a[param]}else if(a)for(param in a)f+="&"+param+"="+a[param];$.ajax({url:f,timeout:this.timeout,cache:!1,complete:function(a){var b=null;a.responseText?
a=a.responseText:a.statusText&&(a=a.statusText);if(a)if("timeout"!=a){var e=null;try{e=$.parseJSON(a)}catch(f){if("string"==typeof a&&-1!=a.indexOf("XC_SUC"))b={data:{}};else{XC.debugf("request failed: "+f);c&&c(null,d._ip);return}}e&&e.XC_SUC?b={data:e.XC_SUC}:e&&e.XC_ERR&&(b={error:e.XC_ERR})}else if(c){c(null);return}c&&c(b,d._ip)}})}};xnm.aio.gateway.Gateway.prototype.setCHState=function(b,a){this.CommandHandler&&this.CommandHandler.setState(b,a)};
xnm.aio.gateway.Gateway.prototype.getStates=function(b,a){var c=this;this.CommandHandler=b;if(a)for(var d=0;d<a.length;d++){var e=a[d];if("IN"==e.type)this._INStatesToGet.push(e);else if("R2"==e.type){var f=e.data;"dimmer"==f&&this._R2StatesToGet.push(e)}else"HM"==e.type&&(f=e.data,"switch"!=f&&"light"!=f&&"dimmer"!=f&&"meteringSwitch"!=f&&"blind"!=f&&"shutter"!=f&&"rooflight"!=f&&"awning"!=f&&"venetian"!=f&&"raffstore"!=f||this._HMStatesToGet.push(e))}this.executeRequest("GetStates",null,function(a){a&&
a.data?c._receivedStates(a.data,b.getStatesCallback):c._receivedStates(null,b.getStatesCallback)})};xnm.aio.gateway.Gateway.prototype.getCommandURL=function(b,a,c){c=null;var d=require("xnm.aio.gateway.js").getGatewayFunctionForType(a.type);b=require("xnm.aio.gateway.js").getGatewayParams(a,b);if(d&&(c="http://"+this._ip+":"+this._port+"/command?XC_FNC="+d,this.user&&this.password&&(c+="&XC_USER="+this.user+"&XC_PASS="+this.password),b))for(arg in b)c+="&"+arg+"="+b[arg];return c};
xnm.aio.gateway.Gateway.prototype.wasConnectedToServer=function(b){this._sid?$.ajax({type:"GET",url:"http://mediola-ws.elasticbeanstalk.com/ra/q?sid="+this._sid,contentType:"text/plain",timeout:4E3,cache:!1,complete:function(a){var c=-1;a&&200!=a.status&&(c=-2);a.responseText&&(a=a.responseText);if(a&&2<a.length)try{var d=$.parseJSON(a);d.time&&d.log&&d.log.gatewayLastAccess&&(c=((new Date(d.time)).getTime()-(new Date(d.log.gatewayLastAccess)).getTime())/1E3)}catch(e){}b&&b(c)}}):b&&b(-1)};
xnm.aio.gateway.Gateway.prototype.executeRemoteCommand=function(b,a,c){XC.debugf("REMOTECALL: "+b);var d=XC.getHexVal(Math.floor(254*Math.random()+1),2)+"AA",d=d+XC.getHexVal(Math.round((new Date).getTime()/1E3),8),d=d+"01",e="c",f="POST",g=null,h=null,m=null;"SendSC"==b?(h=a.data,(b=xnm.aio.gateway.SYSID[a.type])&&(g=XC.getHexVal(b,2))):"Send2"==b?(g="2b",h=a.code,m="",a.ir?m+=a.ir:m+="00",a.rf?m+=a.rf:m+="00"):"SendFHT80b"==b?(g="07",h=a.tsoll?a.hc1+a.hc2+"ff"+XC.getHexVal(parseInt(a.tsoll),2):
a.hc1+a.hc2+XC.getHexVal(a.modus,2)+"ff"):"saveGroup"==b?(g="2c",h=a.id+XC.getHexVal(a.active,2)):"GetStates"==b&&(g="getstates",f="GET",e="d");if(g){b=null;if(h){b=h.length;m&&(b+=m.length);d+=XC.getHexVal(Math.ceil(b/2)+2,2);d=d+g+XC.getHexVal(Math.ceil(b/2),2);d+=h;m&&(d+=m);!d.length%2&&(d+="0");for(g=0;g<d.length%32;g++)d+="0";g=require("x.crypt.js");g.AES.setSize(128);h=g.AES.h2a(this._rakey);m=g.AES.h2a("764c4518E9055b5239f5a3ff62937234");d=g.AES.encrypt(g.AES.h2a(d),h,m);b=g.AES.a2h(d)}XC.debugf("URL: http://webservice.aio-control.com/ra/"+
e+"?sid="+this._sid);$.ajax({type:f,url:"http://webservice.aio-control.com/ra/"+e+"?sid="+this._sid,data:b,contentType:"text/plain",timeout:5E3,cache:!1,complete:function(a){var b=null;a.responseText&&(a=a.responseText);a&&8<=a.length&&"{XC_SUC}"==a.substr(0,8)&&(b=8<a.length?{data:$.parseJSON(a.substr(8))}:{data:{}});c&&c(b)}})}else c&&c.call()};xnm.aio.gateway.Gateway.prototype.executeCommand=function(b,a,c){this._exeCMD_old(b,a,c)};
xnm.aio.gateway.Gateway.prototype._exeCMD_old=function(b,a,c){var d=require("xnm.aio.gateway.js").getGatewayFunctionForType(a.type),e=require("xnm.aio.gateway.js").getGatewayParams(a,b);if(d&&e){var f=this;this.executeRequest(d,e,function(a){c&&c.call()})}else"HM"==a.type&&a.channel&&"lamella"==a.channel?(f=this,a.channel=null,f.executeCommand("downFor10",a,function(){setTimeout(function(){1<b&&f.executeCommand("upFor"+(parseInt(b)+2),a,function(){c&&c.call()},!1)},500)},!1)):"RC"==a.type&&"resetAll"==
b?this.executeRequest("resetROIS",null,function(a){c&&c.call()}):c&&c.call()};xnm.aio.gateway.Gateway.prototype.executeGatewayCommand=function(b,a){var c={type:"RGB",data:"0000"};"rgbOff"==b?c.data="0000":"rgbWhite"==b?c.data="0005":"rgbRed"==b?c.data="0001":"rgbGreen"==b?c.data="0003":"rgbBlue"==b?c.data="0002":"rgbYellow"==b?c.data="0004":"rgbCyan"==b?c.data="0007":"rgbPurple"==b&&(c.data="0006");this.executeRequest("SendSC",c,function(b){a&&a.call()})};
xnm.aio.gateway.Gateway.prototype._receivedStates=function(b,a){var c=this;if(b)for(var d=b.length,e=0;e<d;e++){var f=b[e].type,g=f;if("SIAUD"==f||"SIAUR"==f||"SIAUG"==f)g="SIAU";"HMFHT"==f&&(g="HM");c.CommandHandler.SystemData.$devicesXML.find("locations location device[type='"+g+"']").each(function(){$data=$(this);var a=$data.attr("data"),d=$data.parent().attr("id")+"."+$data.attr("id"),g=$data.attr("address");if("IT"==f)g=g.replace(/\./g,"");else if("KOPP"==f||"R2"==f)g=g.substr(0,4);if(g&&b[e].adr&&
g.toUpperCase()==b[e].adr.toUpperCase()){var g=null,k=b[e].state;if("HM"==f)if(5==k.length){var n=k.split(":");2==n.length&&(k=parseInt(n[0],16),n=parseInt(n[1],16),c.evaluateHMState(d,a,k,n))}else if(10==k.length){if(n=k.split(":"),3==n.length){k=parseInt(n[0],16);0<(k&16384)&&(k-=32768);var k=""+(k/10).toFixed(1),p=""+parseInt(n[1],16);c.setCHState(d+":temp",k);c.setCHState(d+":hum",p)}}else if(43==k.length){if(n=k.split(":"),12==n.length){k=parseInt(n[0],16);0<(k&16384)&&(k-=32768);var k=""+(k/
10).toFixed(1),p=""+parseInt(n[1],16),a=""+(parseInt(n[2],16)/10).toFixed(1),t=""+parseInt(n[9],16),q=""+parseInt(n[8],16),r=.295*parseInt(n[6],16),v=.295*parseInt(n[7],16),x=""+(r+v).toFixed(1),w="off";"1"==n[10]&&(w="on");var u="N",n=5*parseInt(n[4],16);23>n?u="N":68>n?u="NO":113>n?u="O":158>n?u="SO":203>n?u="S":248>n?u="SW":293>n?u="W":338>n&&(u="NW");c.setCHState("[GLOBAL]:temp",k);c.setCHState("[GLOBAL]:hum",p);c.setCHState("[GLOBAL]:windspeed",a);c.setCHState(d+":temp",k);c.setCHState(d+":hum",
p);c.setCHState(d+":speed",a);c.setCHState(d+":dir",u);c.setCHState(d+":sun",t);c.setCHState(d+":suntime",q);c.setCHState(d+":raining",w);c.setCHState(d+":rain",x);c.setCHState(d+":raintoday",""+r.toFixed(1));c.setCHState(d+":rainyesterday",""+v.toFixed(1))}}else"meteringSwitch"==a&&(n=k.split(":"),8==n.length&&(k=""+(parseInt(n[2],16)/100).toFixed(1),g="C8"==n[6]?"on":"00"==n[6]?"off":k="?",c.setCHState(d,g),c.setCHState(d+":current",k)));else if("ER"==f)4==k.length?(g=parseInt(k.substr(2),16),g=
2==g||15==g?100:1==g||14==g?0:50):g="?",c.setCHState(d,g);else if("R2"==f)g="?",n=k.split(":"),2==n.length&&("dimmer"==a?g=parseInt(n[0],16):"01"==n[0]?g="on":"02"==n[0]&&(g="off")),c.setCHState(d,g);else if("DB"==f||"DB2"==f)n=k.substr(2,4),k=k.substr(0,2),g=0,"0A"==k?g=10:"14"==k?g=20:"1E"==k?g=30:"28"==k?g=40:"32"==k?g=50:"3C"==k?g=60:"46"==k?g=70:"50"==k?g=80:"5A"==k?g=90:"64"==k&&(g=100),k=0,k=0==n?parseInt(n)+1:1==n?parseInt(n)+1:2==n?parseInt(n)+1:4,c.setCHState(d,g),c.setCHState(d+":Lamelle",
k);else if("PE"==f)n=k.split(":"),3==n.length&&(k=""+(parseInt(n[0],16)/10).toFixed(1),"1"==n[2]?g="on":"2"==n[2]?g="off":"3"==n[2]&&(g=k="?"),c.setCHState(d,g),c.setCHState(d+":current",k));else if("RV"==f)n=k.split(":"),g=3==n.length?""+(parseInt(n[0],16)/10).toFixed(1):"?",c.setCHState(d+":current",g);else if("HMFHT"==f){if(n=k.split(":"),6==n.length){t="M";q=window.XC_Text.manu;"A"==n[1].charAt(0)?(t="A",q=window.XC_Text.auto):"B"==n[1].charAt(0)&&(q=window.XC_Text.boost);r=parseInt(n[3],16);
r=(r/10).toFixed(1);k=parseInt(n[2],16);v=k/5;p=null;k=""+(k/10).toFixed(1);if(6>k||6==k)k=window.XC_Text.off;"wallthermostat"==a&&(p=""+parseInt(n[4],16).toFixed(0));c.setCHState(d+":M",q);p?(c.setCHState(d+":H",p+"%"),c.setCHState(d+":MC",t+" "+k+"\u00b0 "+p+"%")):c.setCHState(d+":MC",t+" "+k+"\u00b0");c.setCHState(d+":T",v);c.setCHState(d+":C",r)}}else if("WS300"==f){if(n=k.split(":"),3==n.length||5==n.length){k=parseInt(n[0],16);0<(k&32768)&&(k-=65536);k=""+(k/10).toFixed(1);p=""+(parseInt(n[1],
16)/10).toFixed(0);g=k;if(3==n.length&&5<parseInt(n[2],16)||5==n.length&&5<parseInt(n[4],16))p=k="?";c.setCHState(d+":C",k);c.setCHState(d+":H",p)}}else"FHT80B"==f?(n=k.split(":"),3==n.length&&(q=window.XC_Text.manu,"A"==n[0].charAt(0)&&(q=window.XC_Text.auto),k=parseInt(n[0].substr(1),16),v=k/5,k=(k/10).toFixed(1),r=parseInt(n[1],16),r=(r/10).toFixed(1),"0"==n[2].charAt(0)?g="ok":"E"==n[2].charAt(0)?g="error":"I"==n[2].charAt(0)?g="init":"B"==n[2].charAt(0)&&(g="battery_low"),c.setCHState(d+":M",
q),c.setCHState(d+":MC",k+"\u00b0 "+q),c.setCHState(d+":T",v),c.setCHState(d+":C",r))):"SIAU"==f||"SIAUD"==f||"SIAUR"==f||"SIAUG"==f?(g=c.getSIAUState(f,k))&&c.setCHState(d,g):"IN"==f?c.evaluateINState(d,a,k):"IW"==f?c.evaluateIWState(d,k.substr(2,2)):"RC"==f?(n=k.split(":"),2==n.length&&(g=c.getRCState(a,n[0])),g&&c.setCHState(d,g)):"KOPP"==f?(n=k.split(":"),2==n.length&&(g=c.getKOPPState(a,n[0])),g&&c.setCHState(d,g)):"IT"==f?(n=k.split(":"),2==n.length&&(g=c.getITState(n[0])),g&&c.setCHState(d,
g)):"HE"==f&&(n=k.split(":"),2==n.length&&(g=c.getHEState("F"+n[0].charAt(1))),g&&c.setCHState(d,g));null!=g&&c.setCHState(d,g)}})}a&&a(this);this._getNextINState()};xnm.aio.gateway.Gateway.prototype._getNextINState=function(){var b=this;if(0<this._INStatesToGet.length){var a=this._INStatesToGet.pop();this.executeRequest("ingetstate",{adr:a.address},function(c){c&&c.data&&c.data.state&&b.evaluateINState(a.id,a.data?a.data:a.subtype,c.data.state);setTimeout(function(){b._getNextINState()},250)})}else b._getNextR2State()};
xnm.aio.gateway.Gateway.prototype._getNextR2State=function(){var b=this;if(0<this._R2StatesToGet.length){var a=this._R2StatesToGet.pop();this.executeRequest("refreshSC",{type:"R2",adr:a.address.substr(0,4)},function(c){c&&c.data&&c.data.state&&(c=parseInt(c.data.state,16),b.setCHState(a.id,c));b._getNextR2State()})}else b._getNextHMState()};
xnm.aio.gateway.Gateway.prototype._getNextHMState=function(b){var a=this;if(0<this._HMStatesToGet.length){var c=this._HMStatesToGet.pop();this.executeRequest("refreshhm",{adr:c.address},function(d){d&&d.data&&d.data.state&&a.evaluateHMState(c.id,c.data,parseInt(d.data.state,16),0);a._getNextHMState(b)})}else b&&b()};
xnm.aio.gateway.Gateway.prototype.evaluateINState=function(b,a,c){XC.debugf("IN: "+c+" - "+b+" - "+a);if(8==c.length||20==c.length)c=c.substr(2);if("fan"==a||"fanV2"==a){var d=c.substr(0,2);this.setCHState(b,"03"==d||"0C"==d||"0D"==d?"standby":"04"==d?"level1":"05"==d?"level2":"06"==d?"level3":"07"==d||"0F"==d?"turbo":"08"==d||"09"==d||"0A"==d||"0B"==d?"auto":"11"==d||"12"==d||"13"==d||"14"==d?"night":"0E"==d?"error":"?")}else{d=c.substr(0,2);a=c.substr(4,2);var e=c.substr(2,2);32==c.length&&(d=c.substr(2,
2),a=c.substr(26,2),e=c.substr(18,2));c="undefined";d=parseInt(d,16);d&128?e=a="?":(d&2?c="low1":d&64?c="low2":d&16?c="temp":d&8&&(c="temp2"),d=100-parseInt(a,16),100<d&&(d=100),0>d&&(d=0),a=""+d,d=parseInt(e,16),d=Math.floor((d+1)/4),15<d&&(d=15),e=""+(d+1));this.setCHState(b+":error",c);this.setCHState(b,a);this.setCHState(b+":lamella",e)}};
xnm.aio.gateway.Gateway.prototype.evaluateIWState=function(b,a){var c=parseInt(a,16),d="?";c&16&&(c&1?(d="tilted",this.setCHState(b+":text",window.XC_Text[d])):c&2?(d="closed",this.setCHState(b+":text",window.XC_Text[d])):(d="open",this.setCHState(b+":text",window.XC_Text.opened)),c&4?this.setCHState(b+":error","low"):c&8?this.setCHState(b+":error","timeout"):this.setCHState(b+":error",null));this.setCHState(b,d)};
xnm.aio.gateway.Gateway.prototype.evaluateHMState=function(b,a,c,d){var e=null;"dimmer"==a||"blind"==a||"shutter"==a||"awning"==a||"venetian"==a||"raffstore"==a||"hum"==a||"esco-window"==a?255!=c&&(e=c/2,"blind"==a||"shutter"==a||"awning"==a||"venetian"==a||"raffstore"==a||"esco-window"==a?e=100-e:"dimmer"==a&&(e=5*Math.floor(e/5))):"0042"==a||"0045"==a||"004A"==a||"00C1"==a||"00B2"==a||"00C0"==a?(e="OK",254==d?e="battery":("004A"!=a&&"00C1"!=a&&"00C0"!=a||200!=c||(e="motion"),"0042"==a&&200==c?e=
"smoke":"0045"!=a&&"00B2"!=a||100!=c?"0045"!=a&&"00B2"!=a||200!=c||(e="water"):e="moist"),XC.debugf("hmstate: "+a+" "+e+" - "+c+" - "+d),this.setCHState(b+":text",window.XC_Text[e])):"window"==a||"door"==a||"sensor"==a?100==c?(e="tilted",this.setCHState(b+":text",window.XC_Text.tilted)):200==c?(e="open",this.setCHState(b+":text",window.XC_Text.opened)):0==c?(e="closed",this.setCHState(b+":text",window.XC_Text.closed)):254==c&&(e="battery"):(200==c?e="on":0==c&&(e="off"),255!=c&&"rooflight"==a&&200!=
c&&(e="off"));if(null!=e)return this.setCHState(b,e),e};xnm.aio.gateway.Gateway.prototype.getHEState=function(b){if("FF"==b)return"?";var a;b=parseInt(b,16);0==(b&24)?b&4?a="on":b&2&&(a="off"):b&2?a="on":b&1&&(a="off");return a};xnm.aio.gateway.Gateway.prototype.getRCState=function(b,a){if("FF"==a)return"?";var c,d=parseInt(a,16);if("window"==b||"door"==b)0==d?c="closed":1==d&&(c="opened");return c};
xnm.aio.gateway.Gateway.prototype.getKOPPState=function(b,a){var c="?";if("window"==b||"door"==b)"10"==a?c="closed":"20"==a&&(c="opened");return c};xnm.aio.gateway.Gateway.prototype.getITState=function(b){var a;"0E"==b?a="on":"06"==b&&(a="off");return a};
xnm.aio.gateway.Gateway.prototype.getSIAUState=function(b,a){var c=null;if("SIAU"==b||"SIAUD"==b){if(2==a.length){var d=a.charAt(0),c="0"==d?"open":"1"==d?"tilted":"2"==d?"closed":"?",d=a.charAt(1);"1"==d?c+="_low":"2"==d&&(c+="_err")}}else"SIAUR"!=b&&"SIAUG"!=b||2!=a.length||(d=a.charAt(1),c="0"==d?"ok":"1"==d?"battery":"2"==d?"timeout":"?","?"!=c&&"1"==a.charAt(0)&&(c+="_alarm"));return c};
xnm.aio.gateway.Flasher=function(b,a,c){this._ip=b;this._mac=a.mac;this._updateinfo=a;this._callback=c;this._fwlength=this._fwstart=0;this._fwfile=null;this._blockSize=262;this._currentBlock=0;this._flashTimeout=null;this._flashRetrys=0;this._isFlashingRF=!1;this._rffwlength=this._rffwstart=this._rffwstart=0;this._socket=require("dgram").createSocket("udp4");var d=this;this._socket.on("error",function(a){d._end(-1)});this._socket.on("message",function(a,b){d._evalMessage(a)})};
xnm.aio.gateway.Flasher.prototype._end=function(b){this._socket.close();this._callback(b)};
xnm.aio.gateway.Flasher.prototype._evalMessage=function(b){b=b.toString("hex");if(6==b.length&&"0"==b.charAt(0)&&"1"==b.charAt(1))if(b=(parseInt(b.substr(4,2),16)<<8)+parseInt(b.substr(2,2),16),b==this._currentBlock){clearTimeout(this._flashTimeout);this._flashRetrys=0;this._currentBlock++;this._flashNextBlock();var a=this._fwlength/this._blockSize+this._rffwlength/this._blockSize;b=this._isFlashingRF?(this._fwlength/this._blockSize+b)/a:b/a;b=Math.floor(100*b);this._callback(b)}else 65535==b&&0!=
this._currentBlock&&(clearTimeout(this._flashTimeout),this._currentBlock=this._flashRetrys=0,this._isFlashingRF&&(this._rffwlength=0),0!=this._rffwlength?(this._isFlashingRF=!0,this._flashNextBlock()):this._end(100))};
xnm.aio.gateway.Flasher.prototype._flashNextBlock=function(){var b=require("fs"),a=this,c=this._fwlength,d=this._fwstart,e="FWU:",f=400;this._isFlashingRF&&(c=this._rffwlength,d=this._rffwstart,e="RFU:",f=600);c/this._blockSize>this._currentBlock?b.readFileBinary(this._fwfile,d+this._currentBlock*this._blockSize,this._blockSize,function(b,c){if(!b&&c){var d=new Buffer(XC.getBytes(e).concat(XC.getBytes(a._mac.replace(/-/g,""),!0)).concat(XC.getBytes(c,!0)));a._socket.send(d,0,d.length,1901,a._ip)}}):
(b=new Buffer(XC.getBytes("RST:").concat(XC.getBytes(this._mac.replace(/-/g,""),!0))),this._socket.send(b,0,b.length,1901,this._ip));this._flashTimeout=setTimeout(function(){a._flashRetrys++;10>=a._flashRetrys?a._flashNextBlock():a._end(-1)},f)};
xnm.aio.gateway.Flasher.prototype._flashGateway=function(b,a){this._rffwlength=this._rffwstart=this._currentBlock=this._fwlength=this._fwstart=0;if(null!=b&&0<b.length){var c=b.split("@");if(0<c.length){var d=c[0].split("_");5==d.length&&(this._fwstart=parseInt(a)+parseInt(d[3]),this._fwlength=parseInt(d[4]));if(this._updateinfo.rfv)for(var e=1;e<c.length;e++)if(d=c[e].split("_"),5==d.length&&d[1]==this._updateinfo.rfv){this._rffwstart=parseInt(a)+parseInt(d[3]);this._rffwlength=parseInt(d[4]);break}}}else this._fwlength=
a;if(0<this._fwlength/this._blockSize){var f=this;xnm.aio.gateway.Admin.resetGateway(this._ip,this._mac,!1,function(){f._flashNextBlock()})}else this._end(-1)};
xnm.aio.gateway.Flasher.prototype.start=function(){var b=require("http"),a=require("fs"),c=this;b.getFile(this._updateinfo.path,null,function(b){b?a.existsSync(b)&&(c._fwfile=b,a.stat(b,function(e,f){e||a.readFileLine(b,1,function(a,b){var d=null;if(!a&&b){var e=b.indexOf("HEADER@");0==e&&(d=b.substr(7),0<(e=d.indexOf("@HEADER"))&&(d=d.substr(0,e)))}d?c._flashGateway(d,b.length+1):c._flashGateway(null,c._updateinfo.size)})})):(XC.debugf("failed to load "+c._updateinfo.path),c._end(-1))})};
xnm.aio.gateway.Admin=new function(){this._detectionSockets={};this.detectedGateways={};this._DHCPCallback=this._detectionCallback=null;this._evalMessage=function(b,a){var c={};if(11==b.length&&(b instanceof Array||b instanceof Buffer)&&73==b[0]&&68==b[1]&&58==b[2]){for(var d="IP:"+a+"\nMAC:",e=3;8>e;e++)d+=XC.getHexVal(b[e],2).toLowerCase()+"-";d+=XC.getHexVal(b[8],2).toLowerCase()+"\n";b=d+="HWV:"+XC.getHexVal(b[9],2)+"\n"}else b=b.toString();for(var d=b.split("\n"),f=d.length,e=0;e<f-1;e++){var g=
d[e].split(":");c[g[0]]=g[1]}c.MAC?(this._detectionCallback&&this._detectionCallback(c),this.detectedGateways[c.MAC]=c):c.D_IP&&(this._DHCPCallback&&this._DHCPCallback(c),this._DHCPCallback=null)};this._createDetectionSocket=function(b){var a=this,c=require("dgram").createSocket("udp4");"local"!=b&&(c.on("listening",function(){c.setBroadcast(!0)}),c.bind(null,b));c.on("error",function(a){this.close()});c.on("message",function(b,c){a._evalMessage(b,c.address)});this._detectionSockets[b]=c};this._createDetectionSockets=
function(){var b=require("os");require("dgram");if(b&&b.networkInterfaces){var b=b.networkInterfaces(),a;for(a in b)for(var c=b[a],d=0;d<c.length;d++){var e=c[d];"IPv4"==e.family&&0==e.internal&&(this._detectionSockets[e.address]||this._createDetectionSocket(e.address))}}else this._detectionSockets.local||this._createDetectionSocket("local")};this.detectGateways=function(b){this._detectionCallback=b;this._createDetectionSockets();b=new Buffer("GET\n");for(var a in this._detectionSockets){var c=this._detectionSockets[a];
c.send(b,0,4,1901,"255.255.255.255");c.send(b,0,4,1901,"239.255.255.250")}};this.resetGateway=function(b,a,c,d){if(c){this._createDetectionSockets();b=new Buffer(XC.getBytes("RST:").concat(XC.getBytes(a.replace(/-/g,""),!0)));for(var e in this._detectionSockets)a=this._detectionSockets[e],a.send(b,0,b.length,1901,"255.255.255.255"),a.send(b,0,b.length,1901,"239.255.255.250")}else e=new xnm.aio.gateway.Gateway(b),null!=e&&e.executeRequest("reset",null);d&&setTimeout(function(){d()},300)};this.checkForUpdate=
function(b,a,c){var d=this;require("http").get("http://www.mediola.eu/download/fw/getversion_v5.php",function(e){if(200==e.statusCode){e.setEncoding("utf8");var f="";e.on("data",function(a){f+=a});e.on("end",function(){var e=$($.parseXML(f));if(0!=e.find("Version").length)for(var h in d.detectedGateways)if(d.detectedGateways[h].IP==b){var m;if("F3"==d.detectedGateways[h].HWV)"F0"==d.detectedGateways[h].SWV?m="f3f0":(m="f3",m=d.detectedGateways[h].SWV?m+(d.detectedGateways[h].SWV.toLowerCase()+"M"):
null!=a?a:"f3f3M");else if("F1"==d.detectedGateways[h].HWV||"F4"==d.detectedGateways[h].HWV||"F9"==d.detectedGateways[h].HWV||"FA"==d.detectedGateways[h].HWV||"FB"==d.detectedGateways[h].HWV||"FC"==d.detectedGateways[h].HWV||"FD"==d.detectedGateways[h].HWV)m=d.detectedGateways[h].HWV.toLowerCase();null==m&&null!=a&&(m=a);e.find("Version[ver='"+m+"']").each(function(){var a={};$(this).children().each(function(){var b=$(this);a[b.prop("tagName")]=b.text()});var b={};b.ip=d.detectedGateways[h].IP;b.mac=
d.detectedGateways[h].MAC;d.detectedGateways[h].VER&&(b.current=parseInt(d.detectedGateways[h].VER.replace(/\./g,"")));b.version=parseInt(a.Number,10);b.rfv=d.detectedGateways[h].RFV;d.detectedGateways[h].RFF&&(b.rff=d.detectedGateways[h].RFF);b.hwv=d.detectedGateways[h].HWV;b.path="http://"+a.Server+":"+a.Port+a.Filename;b.size=a.Filesize;b.md5=a.MD5;c&&c(b)});break}})}else XC.debugf("Failed to load: http://www.mediola.eu/download/fw/getversion_v5.php")}).on("error",function(a){XC.debugf("Failed to load: http://www.mediola.eu/download/fw/getversion_v5.php")})};
this.updateGateway=function(b,a,c){(new xnm.aio.gateway.Flasher(b,a,c)).start()};this.getDHCPAddress=function(b,a){this._createDetectionSockets();var c=this;this._DHCPCallback=function(d){XC.debugf("DHCP: "+d.D_IP);c.saveIPData(b,d.D_IP,d.D_SN,d.D_GW,d.D_DNS,a)};setTimeout(function(){c._DHCPCallback&&a&&a(!1)},3E3);var d=new Buffer("DHCP:"+b+"\n"),e;for(e in this._detectionSockets){var f=this._detectionSockets[e];f.send(d,0,d.length,1901,"255.255.255.255");f.send(d,0,d.length,1901,"239.255.255.250")}};
this.saveIPData=function(b,a,c,d,e,f){var g;g="SET:"+b+"\nAUTH:YWRtaW4=\n";a&&(g+="IP:"+a+"\n");c&&(g+="SN:"+c+"\n");d&&(g+="GW:"+d+"\n");e&&(g+="DNS:"+e+"\n");g=new Buffer(g);for(var h in this._detectionSockets){var m=this._detectionSockets[h];m.send(g,0,g.length,1901,"255.255.255.255");m.send(g,0,g.length,1901,"239.255.255.250")}if(f){var l=this;this.detectedGateways[b]=void 0;this.detectGateways();setTimeout(function(){var g=l.detectedGateways[b];g&&g.IP==a&&g.SN==c&&g.GW==d&&g.DNS==e?f(!0):f(!1)},
1E3)}};this.setAdminPassword=function(b,a,c,d){var e=null,f;for(f in this.detectedGateways)this.detectedGateways[f].IP==b&&(e=this.detectedGateways[f].MAC);if(null==e)d&&d(!1);else{b="SET:"+e+"\n"+("AUTH:"+(new Buffer(a)).toString("base64")+"\n");b+="APWD:"+c+"\n";b=new Buffer(b);for(var g in this._detectionSockets)a=this._detectionSockets[g],a.send(b,0,b.length,1901,"255.255.255.255"),a.send(b,0,b.length,1901,"239.255.255.250");d&&this.checkPassword(e,c,function(a){1==a?d(!0):d(!1)})}};this.checkPassword=
function(b,a,c){this.detectedGateways[b]&&delete this.detectedGateways[b].UPWD;a="SET:"+b+"\n"+("AUTH:"+(new Buffer(a)).toString("base64")+"\n");a=new Buffer(a);for(var d in this._detectionSockets){var e=this._detectionSockets[d];e.send(a,0,a.length,1901,"255.255.255.255");e.send(a,0,a.length,1901,"239.255.255.250")}var f=this;setTimeout(function(){var a=f.detectedGateways[b];a&&void 0!=a.UPWD?c(!0):c(!1)},500)};this.checkPasswordViaHTTP=function(b,a,c){b=new xnm.aio.gateway.Gateway(b);b.timeout=
1500;b.executeRequest("EEPR",{XC_PASS:a},function(a){a&&a.error&&"AUTH"==a.error?c(!1):c(!0)})};this.getRemoteAccessKey=function(b,a,c,d){var e=new xnm.aio.gateway.Gateway(b,d);null!=e?e.executeRequest("GetSI",null,function(b){if(b&&b.data&&b.data.RK&&("FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF"!=b.data.RK||!a))c(b.data.RK);else if(a){var d="";for(b=0;16>b;b++)d+=XC.getHexVal(Math.floor(255*Math.random()),2);e.executeRequest("SetRK",{data:d},function(a){a&&!a.error?c(d):c(null)})}else c(null)}):c(null)};this.removeRemoteAccessKey=
function(b,a){var c=new xnm.aio.gateway.Gateway(b,a);null!=c&&c.executeRequest("SetRK",{data:"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF"})};this.checkAESKey=function(b,a,c){var d=new xnm.aio.gateway.Gateway(b,c);null!=d?d.executeRequest("GetSI",null,function(b){if(b&&b.data&&void 0!=b.data.IWK)if(""!=b.data.IWK&&"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF"!=b.data.IWK)a(b.data.IWK);else{var c="";for(b=0;16>b;b++)c+=XC.getHexVal(Math.floor(255*Math.random()),2);d.executeRequest("SendSC",{type:"IW",data:"04"+c},function(b){b&&
!b.error?a(c):a(null)})}else a(null)}):a(null)};this.getSID=function(b,a,c,d){var e=new xnm.aio.gateway.Gateway(b,c);d&&(e.password=d);null!=e?e.executeRequest("GetSI",null,function(b){b&&b.data?b.data.SID&&"FFFFFFFFFFFFFFFF"!=b.data.SID&&"32FFFFFFFFFFFFFF"!=b.data.SID?a(b.data.SID):(b=new (require("xnm.aio.cloud.js").Server),b._url="http://webservice.aio-control.com/config?",b.getNewSID(function(b){var c=null;b&&b.data&&b.data.TOKEN&&(c=b.data.TOKEN,e.executeRequest("SetSV",{id:"SID",data:b.data.TOKEN}));
a(c)})):a(null)}):a(null)};this.getEID=function(b,a,c,d){var e=this,f=new xnm.aio.gateway.Gateway(b,c);d&&(f.password=d);null!=f?f.executeRequest("GetSI",null,function(c){c&&c.data?c.data.EID&&"FFFFFF"!=c.data.EID&&"FFFFFFFFFFFF"!=c.data.EID?a(c.data.EID):c.data.EID&&"FFFFFF"!=c.data.EID&&"FFFFFFFFFFFF"!=c.data.EID?a(null):e.getSID(b,function(b){if(b){var c=new (require("xnm.aio.cloud.js").Server);c._url="http://webservice.aio-control.com/config?";c.getEleroKey(b,function(b){var c=null;b&&b.data&&
b.data.adr&&(c=b.data.adr,f.executeRequest("rfchipcmd",{type:"setERAdr",adr:c}));a(c)})}else a(null)}):a(null)}):a(null)};this.clearEEPROM=function(b,a,c){b=new xnm.aio.gateway.Gateway(b,c);null!=b&&b.executeRequest("fEEPReset",{type:"ff"},function(){a&&a()})};this.V5=new function(){var b=this;this._cloudServerUrl="https://v5ws.mediola.com";this._cloudServer="v5ws.mediola.com";this._cloudPort="80";this._userName="user";this.timeout=5E3;this.getSID=function(a,c){a._executeRequestV5("/info",null,{timeout:this.timeout},
function(d,e){d?c&&c(d,e):e.sid&&"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF"!=e.sid?c&&c(null,e.sid):b.requestPublicKey(a,function(d,e){d?c&&c(d,e):e.key?b.registerAtCloudServer(e.key,function(d,e){d?c&&c(d):b.setConfig(a,{cserver:b._cloudServer,cport:b._cloudPort,sid:e.sid,ckey:e.pk},c)}):c&&c(Error("do not have public key"),e)})})};this.getInfo=function(a,b){a._executeRequestV5("/info",null,{timeout:this.timeout},function(a,e){b&&b(a,e)})};this.activateCloudAccess=function(a,b,d,e){d={cloud:d,cserver:this._cloudServer,
cport:this._cloudPort};b&&(d.at=b);a=new xnm.aio.gateway.Gateway(a);null!=a&&a.executeRequestV5("/config",d,function(a,b){a?e&&e(a):e&&e(null)})};this.checkForUpdate=function(a,b,d,e,f){a=encodeURI("http://www.mediola.com/download/fw/v5/checkforupdate.php?hwv="+a+"&swv="+b+"&platform="+d+"&vendor="+e);require("http").get(a,function(a){if(200==a.statusCode){a.setEncoding("utf8");var b="";a.on("data",function(a){b+=a});a.on("end",function(){f&&f(JSON.parse(b))})}})};this.updateFirmware=function(a){var b=
this,d=require("http"),e=require("fs");d.getFile(a.data.link,null,function(d){d?e.existsSync(d)&&e.stat(d,function(e,h){if(!e){var m=new (require("xnm.aio.m10T.js").V5Updater);a.data.at&&(m.at=a.data.at);m.updateFirmware(a.data.ip,d,function(d){if(d.error)a.error&&a.error(window.XC_Text.errorFlashingFile);else{if(a.onUpdate)a.onUpdate(d.state);if(100==d.state){var e=(new Date).getTime()/1E3,f=function(d){d&&d.data?a.success&&a.success(d):(new Date).getTime()/1E3>e+40?a.error&&a.error(window.XC_Text.failedRebootGw):
setTimeout(function(){b.getGatewayInfos(a.data.ip,a.data.at,f)},500)};setTimeout(function(){f()},2E3)}}})}}):a.error&&a.error(window.XC_Text.errorLoadingFile)})};this.getGatewayInfos=function(a,b,d){var e=null;b&&(e={},e.at=b);var f=new xnm.aio.gateway.Gateway(a);null!=f&&f.executeRequestV5("/info",e,function(a,b){a&&(a.data||a.error)?f.executeRequestV5("GetSI",e,function(b,c){b&&b.data?($.extend(a.data,b.data),d&&d(a)):b&&b.error&&d&&d(b)}):d&&d(null)})};this.scanWifis=function(a,b){var d=new xnm.aio.gateway.Gateway(a);
null!=d&&d.executeRequestV5("/scan",null,function(a){a&&(a.data||a.error)?b&&b(a):b&&b(null)})};this.connectToWifi=function(a,b,d,e,f){b={ssid:b,pwd:d};e&&(b.at=e);a=new xnm.aio.gateway.Gateway(a);null!=a&&a.executeRequestV5("/connect",b,function(a){a&&(a.data||a.error)?f&&f(a):f&&f(null)})};this.hash=function(a){a=String(a);return require("x.crypt.js").MD5(unescape(encodeURI(a+"_SALT!")))};this.setConfig=function(a,b,d){a._executeRequestV5("/config",b,null,function(a,b){d&&d(a,b)})};this.requestPublicKey=
function(a,b){a._executeRequestV5("/getKey",null,null,b)};this.registerAtCloudServer=function(a,b){var d=b;$.ajax({data:{pk:a},url:this._cloudServerUrl+"/registerDevice",method:"GET",timeout:this.timeout,dataType:"json",success:function(a){var b;a&&!a.XC_ERR&&a.XC_SUC?a=a.XC_SUC:(b=Error("reponse error"),a=a.XC_ERR?a.XC_ERR:null);d&&d(b,a);d=null},error:function(a,b){var c="http request error:"+(a?a.status:"0")+"-"+b;d&&(d(Error(c)),d=null)}})}}};
xnm.aio.gateway.TaskManager=function(b){this._systemData=b;this._gatewayTaskData={};this._gatewaysToInit=0;this.isInRemoteMode=!1};
xnm.aio.gateway.TaskManager.prototype.init=function(b){var a=this;this._systemData.$devicesXML.find("gateways gateway[type=aiogateway]").each(function(){var c=$(this);a.isInRemoteMode||c.find("task").attr("active","");if(a.isInRemoteMode)b&&b.call(),d=new (require("xnm.aio.gateway.js").Gateway)(c.attr("ip")),null!=d&&(d.setRemoteAccessMode(c.attr("sid")),a._gatewaysToInit+=1,d.executeRequest("GetStates",null,function(d){if(d&&d.data)for(var f,g,h=0;h<d.data.length;h++)"EVENT"==d.data[h].type&&(f=
d.data[h].address,g=d.data[h].state,f&&g&&(f=f.toUpperCase(),XC.debugf(f),XC.debugf(c.find("task[id='"+f+"']")),c.find("task[id='"+f+"']").attr("active",g)));--a._gatewaysToInit;0==a._gatewaysToInit&&b&&b.call()}));else{a._gatewayTaskData[c.attr("id")]=null;var d=new (require("xnm.aio.gateway.js").Gateway)(c.attr("ip"));null!=d&&(a._gatewaysToInit+=1,d.executeRequest("GetAll",null,function(d){d&&d.data&&(a._gatewayTaskData[c.attr("id")]=d.data);--a._gatewaysToInit;0==a._gatewaysToInit&&(a._syncTasksToXML(),
b&&b.call(),XC.debugf("Taskmanager initialized"))}))}})};
xnm.aio.gateway.TaskManager.prototype._saveTaskToXML=function(b,a){var c=this._systemData.$devicesXML.find("gateways gateway[id='"+b+"']");if(c&&0<c.length){var d=$(c[0]),c=null,e=d.find("tasks");e&&(0==e.length?(c=$(this._systemData.$devicesXML.get(0).createElement("tasks")),c.appendTo(d)):c=e[0]);if(c)return d=$(this._systemData.$devicesXML.get(0).createElement("task")),d.attr("id",a.id),d.attr("name",a.name),d.attr("active",a.active),d.appendTo(c),this._systemData.saveData("devices"),d}return null};
xnm.aio.gateway.TaskManager.prototype._syncTasksToXML=function(){this._systemData.$devicesXML.find("gateways gateway tasks task").empty();var b={},a={},c;for(c in this._gatewayTaskData)if(b[c]={},a[c]={},this._gatewayTaskData[c])for(var d=this._gatewayTaskData[c].length,e=0;e<d;e++)"TASK"==this._gatewayTaskData[c][e].sys||"EVENT"==this._gatewayTaskData[c][e].sys||"ASTRO"==this._gatewayTaskData[c][e].sys?b[c][this._gatewayTaskData[c][e].id]=this._gatewayTaskData[c][e]:"ACTION"==this._gatewayTaskData[c][e].sys&&
(a[c][this._gatewayTaskData[c][e].id]=this._gatewayTaskData[c][e]);for(c in this._gatewayTaskData)if(this._gatewayTaskData[c])for(d=this._gatewayTaskData[c].length,e=0;e<d;e++)if("GROUP"==this._gatewayTaskData[c][e].sys){var f={};f.id=this._gatewayTaskData[c][e].id;var g=this._systemData.$devicesXML.find("gateways gateway[id='"+c+"'] tasks task[id='"+f.id+"']");g&&1==g.length?f.$data=$(g[0]):(f.name=window.XC_Text.task+" "+f.id,f.$data=this._saveTaskToXML(c,f));f.$data.attr("active",this._gatewayTaskData[c][e].active);
for(var h=this._gatewayTaskData[c][e].triggerids,g=h.length/2,m=0;m<g;m++){var l=h.substr(2*m,2),k=null;(k=f.$data.find("trigger[id='"+l+"']"))&&0==k.length&&b[c][l]&&(k=$(this._systemData.$devicesXML.get(0).createElement("trigger")),k.attr("id",l),b[c][l].time?(k.attr("time",b[c][l].time),k.attr("days",b[c][l].days),b[c][l].delay&&(l=parseInt(b[c][l].delay,16),0<(l&32768)&&(l-=65536),k.attr("delay",l))):(k.attr("type",b[c][l].type),k.attr("code",b[c][l].code),(l=this.getDeviceTrigger(b[c][l].type,
b[c][l].code))&&!l.ircode&&k.attr("trigger",l.device+"."+l.trigger)),k.appendTo(f.$data))}h=this._gatewayTaskData[c][e].actionids;g=h.length/2;for(m=0;m<g;m++)l=h.substr(2*m,2),k=null,(k=f.$data.find("action[id='"+l+"']"))&&0==k.length&&a[c][l]&&(k=$(this._systemData.$devicesXML.get(0).createElement("action")),k.attr("id",l),k.attr("type",a[c][l].type),a[c][l].code&&k.attr("code",a[c][l].code),(l=this.getDeviceCommand(a[c][l].type,a[c][l].code,a[c][l].ir,a[c][l].rf))&&k.attr("command",l.device+"."+
l.command),k.appendTo(f.$data))}this._systemData.saveData("devices")};xnm.aio.gateway.TaskManager.prototype._getNextFreeID=function(b,a,c){c=c?!0:!1;var d=[];b.find(a).each(function(){d.push($(this).attr("id"))});if(c)for(b=128;200>b;b++){if(a=XC.getHexVal(b,2),-1==$.inArray(a,d))return a}else for(b=1;100>b;b++)if(a=XC.getHexVal(b,2),-1==$.inArray(a,d))return a;return"FF"};
xnm.aio.gateway.TaskManager.prototype._saveTaskToGateway=function(b){var a="",c="";b.find("trigger").each(function(){a+=$(this).attr("id")});b.find("action").each(function(){c+=$(this).attr("id")});var d=b.parent().parent(),d=new (require("xnm.aio.gateway.js").Gateway)(d.attr("ip"));if(null!=d){var e={};e.id=b.attr("id");b.attr("active")?e.active=b.attr("active"):e.active="1";e.triggerIDs=a;e.actionIDs=c;d.executeRequest("AddGroup",e)}};
xnm.aio.gateway.TaskManager.prototype.deleteTrigger=function(b,a){b.remove();this._saveTaskToGateway(a);this._systemData.saveData("devices")};xnm.aio.gateway.TaskManager.prototype.deleteAction=function(b,a){b.remove();this._saveTaskToGateway(a);this._systemData.saveData("devices")};
xnm.aio.gateway.TaskManager.prototype.saveCommandAction=function(b,a,c,d){var e=null;b||(e=this._getNextFreeID(a.parent(),"task action"),b=$(this._systemData.$devicesXML.get(0).createElement("action")),b.attr("id",e),b.appendTo(a));if(b){c&&d?b.attr("command",c+"."+d):d&&b.attr("code",d);e=a.parent().parent();e=new (require("xnm.aio.gateway.js").Gateway)(e.attr("ip"));if(null!=e){var f={};f.id=b.attr("id");if(c){var g=null;(c=this._systemData.getDeviceData(c))&&(g=require("xnm.aio.gateway.js").getGatewayParams(c,
d));g&&(d=g.data,"PE"==g.type&&12==d.length?d=d.substr(0,2)+d.substr(4):"CODE"==g.type?(d=g.code,g.ir&&(f.ir=g.ir),g.rf&&(f.rf=g.rf)):"FHT80B"==g.type&&(c=d="FF",g.tsoll?c=XC.getHexVal(g.tsoll,2):d="0"+g.modus,d=g.hc1+g.hc2+d+c),f.type=g.type,f.code=d)}else d?(f.type="RGB",f.code=d):f.type="AIO";f.type&&b.attr("type",f.type);e.executeRequest("AddAction",f)}this._saveTaskToGateway(a);this._systemData.saveData("devices")}return b};
xnm.aio.gateway.TaskManager.prototype.saveTimeTrigger=function(b,a,c,d,e){var f=null;b||(f=this._getNextFreeID(a.parent(),"task trigger"),XC.debugf("trigger: "+f),b=$(this._systemData.$devicesXML.get(0).createElement("trigger")),b.attr("id",f),b.appendTo(a));if(b){null!=e&&b.attr("delay",e);b.attr("time",c);b.attr("days",d);f=a.parent().parent();f=new (require("xnm.aio.gateway.js").Gateway)(f.attr("ip"));if(null!=f){var g={};g.id=b.attr("id");g.active="1";g.time=c;g.days=d;g.dateStart="2000-00-00";
g.dateEnd="2000-00-00";b="AddTask";null!=e&&(b="AddAstro",0>e&&(e+=65536),g.delay=XC.getHexVal(e,4));f.executeRequest(b,g)}this._saveTaskToGateway(a);this._systemData.saveData("devices")}};
xnm.aio.gateway.TaskManager.prototype.saveDeviceTrigger=function(b,a,c,d,e,f){if(!b){var g=this._getNextFreeID(a.parent(),"task trigger");b=$(this._systemData.$devicesXML.get(0).createElement("trigger"));b.attr("id",g);b.appendTo(a)}b&&(b.attr("type",c),b.attr("code",d),e&&b.attr("trigger",e+"."+f),e=a.parent().parent(),e=new (require("xnm.aio.gateway.js").Gateway)(e.attr("ip")),null!=e&&(f={},f.id=b.attr("id"),f.active="1",f.type=c,f.code=d,e.executeRequest("AddEvent",f)),this._saveTaskToGateway(a),
this._systemData.saveData("devices"))};xnm.aio.gateway.TaskManager.prototype.deleteTask=function(b){var a=b.parent().parent(),a=new (require("xnm.aio.gateway.js").Gateway)(a.attr("ip"));if(null!=a){var c={id:b.attr("id")};a.executeRequest("DelGroup",c)}b.remove();this._systemData.saveData("devices")};
xnm.aio.gateway.TaskManager.prototype.toggleTask=function(b,a,c){var d=b.parent().parent(),e="1";"1"==b.attr("active")&&(e="0");if(a)b.attr("active",e),c&&c();else if(a=new (require("xnm.aio.gateway.js").Gateway)(d.attr("ip")),null!=a){this.isInRemoteMode&&a.setRemoteAccessMode(d.attr("sid"));var f=this;a.executeRequest("saveGroup",{id:b.attr("id"),active:e},function(a){a&&(b.attr("active",e),f._systemData.saveData("devices"));c&&c()})}else c&&c()};
xnm.aio.gateway.TaskManager.prototype.addNewTask=function(b){var a=new (require("xnm.aio.gateway.js").Gateway)(b.attr("ip"));if(null!=a){var c={id:"FF",active:"1",triggerIDs:"",actionIDs:""};c.id=this._getNextFreeID(b,"tasks task");a.executeRequest("AddGroup",c,function(a){XC.debugf("Gateway: "+a);a&&a.data&&XC.debugf("Gateway: "+a.data)});return this._saveTaskToXML(b.attr("id"),c)}return null};
xnm.aio.gateway.TaskManager.prototype.getMessage=function(b,a,c){xnm.aio.gateway.Admin.getSID(b.attr("ip"),function(b){if(b){var e=new (require("xnm.aio.cloud.js").Server);e._url="http://messages.aio-control.com/ai2/m.php?";e.getMessage(b,a,function(a){var b=null;a&&a.data&&(b={},b.mail=a.data.mail,b.message=a.data.message);c(b)})}else c(null)})};
xnm.aio.gateway.TaskManager.prototype.setMessage=function(b,a,c,d,e){xnm.aio.gateway.Admin.getSID(b.attr("ip"),function(b){if(b){var g=new (require("xnm.aio.cloud.js").Server);g._url="http://messages.aio-control.com/ai2/m.php?";g.setMessage(b,a,c,d,function(a){a&&!a.error?e(!0):e(!1)})}else e(!1)})};
xnm.aio.gateway.TaskManager.prototype.getTriggers=function(b,a){var c=[];if("door"==b||"window"==b||"sensor"==b||"DKL"==b||"DKR"==b)"HM"==a||"PV"==a||"SIAU"==a||"KOPP"==a||"IW"==a?(c.push({id:window.XC_Text.opened,cmd:"opened"}),c.push({id:window.XC_Text.closed,cmd:"closed"}),("SIAU"!=a||"window"!=b&&"DKR"!=b&&"DKL"!=b)&&("IW"!=a||"window"!=b&&"DKR"!=b&&"DKL"!=b)||c.push({id:window.XC_Text.tilted,cmd:"tilted"})):"RC"==a?("sensor"==b?c.push({id:window.XC_Text.alarm,cmd:"alarm"}):(c.push({id:window.XC_Text.opened,
cmd:"alarm"}),c.push({id:window.XC_Text.closed,cmd:"ok"})),c.push({id:window.XC_Text.battery,cmd:"battery"}),c.push({id:window.XC_Text.timeout,cmd:"timeout"}),c.push({id:window.XC_Text.sabotage,cmd:"sabotage"})):"R2"==a?(c.push({id:window.XC_Text.on,cmd:"opened"}),c.push({id:window.XC_Text.off,cmd:"closed"})):"MX"!=a&&"GV"!=a&&"ELRO"!=a||"sensor"!=b?"IT"!=a&&"FS20"!=a&&"CR"!=a&&"MC"!=a&&"AN"!=a&&"HE"!=a||"sensor"!=b?(c.push({id:window.XC_Text.opened,cmd:"on"}),c.push({id:window.XC_Text.closed,cmd:"off"})):
(c.push({id:window.XC_Text.motion,cmd:"on"}),c.push({id:window.XC_Text.off,cmd:"off"})):c.push({id:window.XC_Text.firealarm,cmd:"opened"});else if("PV"!=a&&"SIAU"!=a||"smoke"!=b)if("SIAU"==a&&"glass"==b)c.push({id:window.XC_Text.alarm,cmd:"alarm"});else if("PV"==a&&"motion"==b)c.push({id:window.XC_Text.motion,cmd:"motion"});else if("HM"!=a||"0045"!=b&&"00B2"!=b)if("HM"!=a||"004A"!=b&&"00C1"!=b&&"00C0"!=b)if("HM"==a&&"0042"==b)c.push({id:window.XC_Text.firealarm,cmd:"opened"});else if("IT"!=a&&"FS20"!=
a&&"R2"!=a&&"HM"!=a||"button"!=b&&"button1"!=b&&"button2"!=b&&"button3"!=b&&"button4"!=b&&"button6"!=b&&"button12"!=b&&"button19"!=b)"RC"==a&&(c.push({id:window.XC_Text.alarm,cmd:"alarm"}),c.push({id:window.XC_Text.battery,cmd:"battery"}),c.push({id:window.XC_Text.timeout,cmd:"timeout"}),c.push({id:window.XC_Text.sabotage,cmd:"sabotage"}));else if("HM"==a){"button"==b&&(b="button4");for(var d=parseInt(b.match(/[0-9]+/)[0],10),e=1;e<=d;e++){var f,g=40;f=9>=e?"0"+e:e;g+=e;c.push({id:e,cmd:f});c.push({id:e+
"L",cmd:g})}}else"R2"==a?(c.push({id:window.XC_Text.on,cmd:"opened"}),c.push({id:window.XC_Text.off,cmd:"closed"})):(c.push({id:window.XC_Text.on,cmd:"on"}),c.push({id:window.XC_Text.off,cmd:"off"}),"FS20"==a&&c.push({id:window.XC_Text.toggle,cmd:"toggle"}));else c.push({id:window.XC_Text.motion,cmd:"opened"});else c.push({id:window.XC_Text.water,cmd:"opened"});else c.push({id:window.XC_Text.firealarm,cmd:"fire"});return c};
xnm.aio.gateway.TaskManager.prototype.getGatewayCommands=function(b,a,c){var d=[];XC.debugf("getGatewayCommands: "+b+" - "+a);if("L2"==b||"L3"==b)"L2"==b?d.push({id:window.XC_Text.power,cmd:"power"}):(d.push({id:window.XC_Text.on,cmd:"on"}),d.push({id:window.XC_Text.off,cmd:"off"})),c||(d.push({id:window.XC_Text.red,cmd:"red"}),d.push({id:window.XC_Text.purple,cmd:"purple"}),d.push({id:window.XC_Text.blue,cmd:"blue"}),d.push({id:window.XC_Text.cyan,cmd:"cyan"}),d.push({id:window.XC_Text.green,cmd:"green"}),
d.push({id:window.XC_Text.yellow,cmd:"yellow"}),d.push({id:window.XC_Text.orange,cmd:"orange"}),d.push({id:window.XC_Text.white,cmd:"white"}));else if("CF3"==b||"CF4"==b)d.push({id:window.XC_Text.on,cmd:"on"}),d.push({id:window.XC_Text.off,cmd:"off"}),c||(d.push({id:window.XC_Text.scene+" 1",cmd:"scene1"}),d.push({id:window.XC_Text.scene+" 2",cmd:"scene2"}),d.push({id:window.XC_Text.scene+" 3",cmd:"scene3"}));else if("IN"==b&&("fan"==a||"fanV2"==a))c?(d.push({id:window.XC_Text.level1,cmd:"level1"}),
d.push({id:window.XC_Text.turbo,cmd:"turbo"})):(d.push({id:window.XC_Text.level1,cmd:"level1"}),d.push({id:window.XC_Text.level2,cmd:"level2"}),d.push({id:window.XC_Text.level3,cmd:"level3"}),d.push({id:window.XC_Text.standby,cmd:"standby"}),d.push({id:window.XC_Text.auto,cmd:"auto"}),"fan"==a&&d.push({id:window.XC_Text.turbo,cmd:"turbo"}),"fanV2"==a&&(d.push({id:window.XC_Text.turbo_1,cmd:"turbo"}),d.push({id:window.XC_Text.turbo_2,cmd:"turbo_2"}),d.push({id:window.XC_Text.turbo_3,cmd:"turbo_3"}),
d.push({id:window.XC_Text.turbo_4,cmd:"turbo_4"}),d.push({id:window.XC_Text.night_mode_in_1,cmd:"night_mode_in_1"}),d.push({id:window.XC_Text.night_mode_in_2,cmd:"night_mode_in_2"}),d.push({id:window.XC_Text.night_mode_in_3,cmd:"night_mode_in_3"}),d.push({id:window.XC_Text.night_mode_out_1,cmd:"night_mode_out_1"}),d.push({id:window.XC_Text.night_mode_out_2,cmd:"night_mode_out_2"}),d.push({id:window.XC_Text.night_mode_out_3,cmd:"night_mode_out_3"})));else if("IN"==b&&"blind"==a){c||d.push({id:"I-Position",
cmd:"P1"});d.push({id:window.XC_Text.moveup,cmd:"moveUp"});if(!c)for(var e=0;100>=e;e+=10)d.push({id:window.XC_Text.moveto+" "+e+"%",cmd:"moveTo"+e+"%"});d.push({id:window.XC_Text.movedown,cmd:"moveDown"});c&&d.push({id:window.XC_Text.stop,cmd:"stop"});if(!c)for(e=1;16>=e;e++)d.push({id:window.XC_Text.lamellapos+" "+e,cmd:"L"+e})}else if(!("KOPP"!=b&&"FS20"!=b&&"IT"!=b&&"HE"!=b&&"ELRO"!=b&&"SL"!=b&&"CR"!=b&&"MC"!=b&&"AN"!=b||"shutter"!=a&&"blind"!=a&&"awning"!=a))"awning"==a?"SL"==b?(d.push({id:window.XC_Text.movein,
cmd:"up"}),d.push({id:window.XC_Text.moveout,cmd:"down"})):(d.push({id:window.XC_Text.movein,cmd:"on"}),d.push({id:window.XC_Text.moveout,cmd:"off"})):"SL"==b?"blind"==a?(d.push({id:window.XC_Text.moveup,cmd:"moveUp"}),d.push({id:window.XC_Text.movedown,cmd:"moveDown"})):(d.push({id:window.XC_Text.moveup,cmd:"up"}),d.push({id:window.XC_Text.movedown,cmd:"down"})):(d.push({id:window.XC_Text.moveup,cmd:"on"}),d.push({id:window.XC_Text.movedown,cmd:"off"}));else if("DB2"==b)d.push({id:window.XC_Text.moveup,
cmd:"up"}),d.push({id:window.XC_Text.movedown,cmd:"down"});else if("GQ"==b||"R2"==b&&"shutter"==a)d.push({id:window.XC_Text.moveup,cmd:"up"}),d.push({id:window.XC_Text.movedown,cmd:"down"}),d.push({id:window.XC_Text.stop,cmd:"stop"});else if(("IA"==b||"WA"==b)&&"shutter"==a)c?(d.push({id:window.XC_Text.up,cmd:"up"}),d.push({id:window.XC_Text.down,cmd:"down"})):(d.push({id:window.XC_Text.moveup,cmd:"moveUp"}),d.push({id:window.XC_Text.movedown,cmd:"moveDown"}));else if("EO"==b&&("shutter"==a||"blind"==
a))d.push({id:window.XC_Text.moveup,cmd:"holdOn"}),d.push({id:window.XC_Text.movedown,cmd:"holdOff"}),c&&"shutter"==a&&d.push({id:window.XC_Text.stop,cmd:"stop"});else if("BS"==b&&"heater"==a)d.push({id:window.XC_Text.day,cmd:"day"}),d.push({id:window.XC_Text.night,cmd:"night"});else if(!("HM"!=b&&"FS20"!=b&&"IT"!=b&&"HE"!=b&&"ELRO"!=b&&"CR"!=b&&"MC"!=b&&"IA"!=b&&"EO"!=b&&"SL"!=b&&"AN"!=b&&"R2"!=b||"switch"!=a&&"light"!=a&&"dimmer"!=a&&"0009"!=a&&"meteringSwitch"!=a)||"KOPP"==b&&("light"==a||"switch"==
a||"dimmer"==a)||("RC"==b||"HM"==b)&&"siren"==a||"PE"==b||"BS"==b||"fritz"==b){if(d.push({id:window.XC_Text.on,cmd:"on"}),d.push({id:window.XC_Text.off,cmd:"off"}),c&&"KOPP"==b&&"dimmer"==a&&d.push({id:window.XC_Text.toggle,cmd:"toggle"}),!c&&"dimmer"==a&&"KOPP"!=b&&"IA"!=b&&"EO"!=b)for(e=10;100>=e;e+=10)d.push({id:e+"%",cmd:e+"%"})}else if("RC"==b&&("window"==a||"door"==a||"sensor"==a))d.push({id:window.XC_Text.resetAllRC,cmd:"resetAll"});else if(!("HM"!=b&&"ER"!=b&&"UR"!=b&&"DY"!=b&&"WA"!=b&&"KN"!=
b&&"RT"!=b||"shutter"!=a&&"blind"!=a&&"venetian"!=a&&"raffstore"!=a)){d.push({id:window.XC_Text.moveup,cmd:"moveUp"});if(!c&&"HM"==b)for(e=90;10<=e;e-=10)d.push({id:window.XC_Text.moveto+" "+e+"%",cmd:"moveTo"+e+"%"});d.push({id:window.XC_Text.movedown,cmd:"moveDown"});c||"KN"!=b&&"RT"!=b||d.push({id:window.XC_Text.position,cmd:"pos1"});c||"ER"!=b||"shutter"!=a&&"blind"!=a||(d.push({id:window.XC_Text.b_shadow,cmd:"shadow"}),d.push({id:window.XC_Text.b_air,cmd:"air"}));c&&(d.push({id:window.XC_Text.stop,
cmd:"stop"}),"RT"==b&&d.push({id:window.XC_Text.t_startlearnmode,cmd:"learn"}))}else if("KN"==b&&("switch"==a||"light"==a))d.push({id:window.XC_Text.on,cmd:"moveUp"}),d.push({id:window.XC_Text.off,cmd:"moveDown"});else if("HM"==b&&"esco-window"==a){d.push({id:window.XC_Text.up,cmd:"0"});d.push({id:window.XC_Text.down,cmd:"100"});for(e=90;10<=e;e-=10)d.push({id:window.XC_Text.moveto+" "+e+"%",cmd:e});d.push({id:window.XC_Text.stop,cmd:"stop"})}else if("HM"==b&&"esco-door"==a)d.push({id:window.XC_Text.open,
cmd:"openEscoDoor"});else if(("HM"==b||"ER"==b)&&"awning"==a){d.push({id:window.XC_Text.movein,cmd:"moveUp"});if(!c&&"ER"!=b)for(e=90;10<=e;e-=10)d.push({id:window.XC_Text.moveto+" "+e+"%",cmd:"moveTo"+e+"%"});d.push({id:window.XC_Text.moveout,cmd:"moveDown"});c&&d.push({id:window.XC_Text.stop,cmd:"stop"})}else if("HM"==b&&"rooflight"==a)d.push({id:window.XC_Text.open,cmd:"moveDown"}),d.push({id:window.XC_Text.close,cmd:"moveUp"}),d.push({id:window.XC_Text.stop,cmd:"stop"});else if("HM"==b&&"esco-window"==
a)d.push({id:window.XC_Text.up,cmd:"0"}),d.push({id:window.XC_Text.down,cmd:"100"}),d.push({id:window.XC_Text.stop,cmd:"stop"});else if("HM"==b&&"0075"==a)c||(d.push({id:window.XC_Text.alarm,cmd:"vChannel02"}),d.push({id:window.XC_Text.door_opening,cmd:"vChannel04"}),d.push({id:window.XC_Text.door_closing,cmd:"vChannel05"}),d.push({id:window.XC_Text.door_stopped,cmd:"vChannel06"}));else if("HM"!=b||"wallthermostat"!=a&&"thermostat"!=a&&"thermocontrol"!=a)if("FHT80B"==b&&"heater"==a){if(!c)for(d.push({id:window.XC_Text.manu,
cmd:"setManu"}),d.push({id:window.XC_Text.auto,cmd:"setAuto"}),e=6;30>=e;e+=.5)d.push({id:e.toFixed(1)+"\u00b0C",cmd:Math.floor(2*e)})}else"CODE"==b&&this._systemData.$ircodesXML.find("ircodes device[id='"+a+"'] key").each(function(){var a=$(this).attr("id");window.XC_Text[a]?d.push({id:window.XC_Text[a],cmd:a}):d.push({id:a,cmd:a})});else if(!c)for(d.push({id:window.XC_Text.manu,cmd:"setManu"}),d.push({id:window.XC_Text.auto,cmd:"setAuto"}),"thermocontrol"!=a&&d.push({id:window.XC_Text.boost,cmd:"setBoost"}),
e=6;30>=e;e+=.5)d.push({id:e.toFixed(1)+"\u00b0C",cmd:Math.floor(2*e)});return d};
xnm.aio.gateway.TaskManager.prototype.getDeviceTrigger=function(b,a){var c=null;a=a.toUpperCase();XC.debugf("DEVICE: "+b+"->"+a);if("HM"==b&&10==a.length){var d=null,e=a.substr(8);"C8"==e?d="opened":"00"==e&&(d="closed");e=a.substr(0,8);e=this._systemData.getDeviceName(b,e);d&&e&&(c={device:e,trigger:d})}else if("HM"==b&&8==a.length)d=a.substr(6),e=a.substr(0,6)+"01",e=this._systemData.getDeviceName(b,e),d&&e&&(c={device:e,trigger:d});else if("CR"==b&&8==a.length){d="on";e=a.charAt(0);if("1"!=a.charAt(1)&&
("7"==e||"A"==e||"1"==e||"4"==e)||"1"==a.charAt(1)&&"7"!=e&&"A"!=e&&"1"!=e&&"4"!=e)e=(parseInt(e,16)-1).toString(16).toUpperCase(),d="off";e+=a.substr(1);e=this._systemData.getDeviceName(b,e);d&&e&&(c={device:e,trigger:d})}else"MC"==b&&6==a.length?(d="off","5"==a.charAt(5)&&(d="on"),e=a.substr(0,5),e=this._systemData.getDeviceName(b,e),d&&e&&(c={device:e,trigger:d})):"RC"==b&&6==a.length?(d=null,e=a.substr(4),"00"==e?d="ok":"01"==e?d="alarm":"02"==e?d="battery":"03"==e?d="sabotage":"05"==e&&(d="timeout"),
e=a.substr(0,4),e=this._systemData.getDeviceName(b,e),d&&e&&(c={device:e,trigger:d})):"KOPP"==b&&12==a.length?(d=null,e=a.substr(4,2),"20"==e?d="opened":"10"==e&&(d="closed"),e=a.substr(0,4)+"00"+a.substr(10,2),e=this._systemData.getDeviceName(b,e),d&&e&&(c={device:e,trigger:d})):"IT"==b?(e=d=null,3==a.length?("E"==a.charAt(2)?d="on":"6"==a.charAt(2)&&(d="off"),e=a.charAt(0)+"."+a.charAt(1)):8==a.length&&(e=parseInt(a.substr(6,1),16),d=e&1?"on":"off",e&=-2,e=a.substr(0,6)+e+"."+a.substr(7,1)),e=this._systemData.getDeviceName(b,
e),d&&e&&(c={device:e,trigger:d})):"FS20"==b&&10==a.length?(d=null,e=a.substr(6,2),"10"==e?d="on":"00"==e?d="off":"12"==e&&(d="toggle"),e=a.substr(0,2)+"."+a.substr(2,2)+"."+a.substr(4,2),e=this._systemData.getDeviceName(b,e),d&&e&&(c={device:e,trigger:d})):"AN"==b&&10==a.length?(d=null,e=a.substr(8,2),"00"==e?d="on":"10"==e&&(d="off"),e=a.substr(0,8),e=this._systemData.getDeviceName(b,e),d&&e&&(c={device:e,trigger:d})):"SIAU"!=b&&"SIAUD"!=b&&"SIAUR"!=b&&"SIAUG"!=b||8!=a.length?"IW"==b&&12==a.length?
(d=null,e=a.substr(8),"0100"==e?d="opened":"0102"==e?d="closed":"0101"==e&&(d="tilted"),e=a.substr(0,8),e=this._systemData.getDeviceName(b,e),d&&e&&(c={device:e,trigger:d})):"R2"!=b||10!=a.length&&8!=a.length?"PV"==b&&10==a.length?(d=null,e=a.substr(8,2),"04"==e?d="opened":"05"==e?d="closed":"08"==e?d="fire":"01"==e&&(d="motion"),e=a.substr(0,8),e=this._systemData.getDeviceName(b,e),d&&e&&(c={device:e,trigger:d})):"MX"==b||"GV"==b||"ELRO"==b&&8==a.length?(e=this._systemData.getDeviceName(b,a))&&(c=
{device:e,trigger:"opened"}):"HE"==b&&14==a.length?(d=null,e=parseInt(a.substr(10,2),16),0==(e&24)?(e&4?d="on":e&2&&(d="off"),e&=-7):(e&2?d="on":e&1&&(d="off"),e&=-4),e=a.substr(0,10)+XC.getHexVal(e,2)+a.substr(12,2),e=this._systemData.getDeviceName(b,e),d&&e&&(c={device:e,trigger:d})):"IRCODE"==b&&(c={ircode:a}):(d=null,e=a.substr(6),"0002"==e?d="off":"0001"==e&&(d="on"),"02"==e?d="closed":"01"==e&&(d="opened"),e=a.substr(0,6),e=this._systemData.getDeviceName(b,e),d&&e&&(c={device:e,trigger:d})):
(d=null,e=a.substr(6,2),"0F"==e?d="opened":"2F"==e?d="closed":"1F"==e&&(d="tilted"),e=a.substr(0,6),e=this._systemData.getDeviceName("SIAU",e),d&&e&&(c={device:e,trigger:d}));return c};
xnm.aio.gateway.TaskManager.prototype.getDeviceCommand=function(b,a,c,d){c=null;a=a.toUpperCase();XC.debugf("DEVICECOMMAND: "+b+"->"+a);if("PE"==b&&(10==a.length||12==a.length)){12==a.length&&(a=a.substr(0,2)+a.substr(4));var e=null,e="0"==a.charAt(9)?"off":"on",f=a.substr(0,8),g=this._systemData.getDeviceName(b,f);e&&g&&(c={device:g,command:e})}else if("HM"==b&&10<=a.length)e=null,12==a.length?"0"==a.charAt(8)&&"5"==a.charAt(9)?e=parseInt(a.substr(10),16)+"%":"0"==a.charAt(8)&&"A"==a.charAt(9)?e=
"moveTo"+parseInt(a.substr(10),16)+"%":"1"==a.charAt(8)&&"1"==a.charAt(9)?e=parseInt(a.substr(10),16):"1"==a.charAt(8)&&"C"==a.charAt(9)&&("01"==a.substr(10)?e="setManu":"00"==a.substr(10)?e="setAuto":"03"==a.substr(10)&&(e="setBoost")):10==a.length&&("0"==a.charAt(8)&&"1"==a.charAt(9)?e="on":"0"==a.charAt(8)&&"2"==a.charAt(9)?e="off":"0"==a.charAt(6)&&"2"==a.charAt(7)&&"1"==a.charAt(8)&&"9"==a.charAt(9)?(e="vChannel02",f=6):"0"==a.charAt(6)&&"4"==a.charAt(7)&&"1"==a.charAt(8)&&"9"==a.charAt(9)?(e=
"vChannel04",f=6):"0"==a.charAt(6)&&"5"==a.charAt(7)&&"1"==a.charAt(8)&&"9"==a.charAt(9)?(e="vChannel05",f=6):"0"==a.charAt(6)&&"6"==a.charAt(7)&&"1"==a.charAt(8)&&"9"==a.charAt(9)?(e="vChannel06",f=6):"2"==a.charAt(8)&&"2"==a.charAt(9)&&(e="openEscoDoor")),f=f&&6==f?a.substr(0,6):a.substr(0,8),g=this._systemData.getDeviceName(b,f),e&&g&&(c={device:g,command:e});else if("IN"==b&&6==a.length)e=null,f=a.substr(2),"000C"==f?e="moveUp":"000D"==f?e="moveDown":"0007"==f?e="stop":"0040"==f?e="level1":"0041"==
f?e="level2":"0042"==f?e="level3":"0043"==f?e="standby":"0044"==f?e="auto":"0046"==f?e="turbo":"0051"==f?e="turbo_2":"0052"==f?e="turbo_3":"0053"==f?e="turbo_4":"0054"==f?e="night_mode_in_1":"0055"==f?e="night_mode_in_2":"0056"==f?e="night_mode_in_3":"0057"==f?e="night_mode_out_1":"0058"==f?e="night_mode_out_2":"0059"==f?e="night_mode_out_3":"0148"==f?e="P1":"1"==a.charAt(2)&&"8"==a.charAt(3)?e="moveTo"+(100-parseInt(a.substr(4),16))+"%":"0"==a.charAt(2)&&"0"==a.charAt(3)&&(e="L"+(parseInt(a.substr(4),
16)-63)),f=a.substr(0,2),g=this._systemData.getDeviceName(b,f),e&&g&&(c={device:g,command:e});else if("ER"==b&&4==a.length)e=null,f=a.substr(2),"08"==f||"01"==f?e="moveUp":"09"==f||"00"==f?e="moveDown":"0B"==f?e="shadow":"0A"==f&&(e="air"),f=a.substr(0,2),g=this._systemData.getDeviceName(b,f),e&&g&&(c={device:g,command:e});else if("CF4"==b&&8==a.length||"CF3"==b&&4==a.length)e=null,f=a.substr(0,2),"04"==f?e="on":"05"==f?e="off":"06"==f?e="offSave":"07"==f?e="scene1":"08"==f?e="scene2":"09"==f&&(e=
"scene3"),f=a.substr(2),g=this._systemData.getDeviceName(b,f),e&&g&&(c={device:g,command:e});else if("L2"==b&&(8==a.length||6==a.length))g=e=null,8==a.length?(f=parseInt(a.substr(4),16)&511,2==f?e="power":408==f?e="red":40==f?e="purple":80==f?e="blue":152==f?e="cyan":240==f?e="green":336==f?e="yellow":368==f?e="orange":6==f&&(e="white"),f=XC.getHexVal(parseInt(a.substr(0,6),16)&16777214,6)):(f=a.substr(3),"FFF"==f?e="power":"33F"==f?e="red":"30F"==f?e="purple":"03F"==f?e="blue":"000"==f?e="cyan":
"F03"==f?e="green":"C33"==f?e="yellow":"C03"==f?e="orange":"FC3"==f&&(e="white"),f=a.substr(0,3)),g=this._systemData.getDeviceName(b,f),e&&g&&(c={device:g,command:e});else if("AN"==b&&8<a.length)e=null,f=a.charAt(8),"0"==f?e="on":"1"==f&&(e="off"),f=a.substr(0,8),g=this._systemData.getDeviceName(b,f),e&&g&&(c={device:g,command:e});else if(("DB"==b||"DB2"==b)&&2==a.length)e=null,"02"==a?e="up":"04"==a&&(e="down"),f="01",(g=this._systemData.getDeviceName("DB",f))||(g=this._systemData.getDeviceName("DB2",
f)),e&&g&&(c={device:g,command:e});else if("EO"==b&&12<=a.length)e=null,f=a.substr(2,2),12<a.length?"10"==f?e="on":"30"==f&&(e="off"):"10"==f?e="holdOn":"30"==f&&(e="holdOff"),f=a.substr(4,8),g=this._systemData.getDeviceName(b,f),e&&g&&(c={device:g,command:e});else if("INSTA"==b&&16==a.length)e=null,b="IA",f=a.substr(12),"0202"==f?e="on":"0102"==f?e="off":"0203"==f?e="moveUp":"0103"==f&&(e="moveDown"),f=a.substr(0,12),g=this._systemData.getDeviceName(b,f),e&&g&&(c={device:g,command:e});else if("NULL"==
b&&10==a.length)XC.debugf("WAREMA == NULL!"),b="WA",e=null,f=parseInt(a.substr(0,8),16),d=f&14942207,"01"==a.substr(8)&&(1947992064==f-d?e="moveUp":1947729920==f-d&&(e="moveDown")),f=XC.getHexVal(d,6),g=this._systemData.getDeviceName(b,f),e&&g&&(c={device:g,command:e});else if("SL"==b&&(6==a.length||8==a.length))e="on",f=parseInt(a.substr(3,2),16)>>2,0==(f&15)||8==(f&15)?(f+=2,e="off"):14==(f&15)&&(f-=3,e="off"),8==a.length&&(e="1"==a.charAt(6)?"off"==e?"moveDown":"moveUp":"off"==e?"down":"up"),f<<=
2,f=a.substr(0,3)+XC.getHexVal(f,2),g=this._systemData.getDeviceName(b,f),e&&g&&(c={device:g,command:e});else if("UR"==b&&6==a.length)e=null,f=a.substr(5),"1"==f?e="moveUp":"4"==f&&(e="moveDown"),f=a.substr(0,5),g=this._systemData.getDeviceName(b,f),e&&g&&(c={device:g,command:e});else if("DY"==b&&10==a.length)e=null,f=a.substr(8),"11"==f?e="moveUp":"33"==f&&(e="moveDown"),f=a.substr(0,8),g=this._systemData.getDeviceName(b,f),e&&g&&(c={device:g,command:e});else if("KN"==b&&16==a.length)e=null,f=a.substr(10,
2),"80"==f?e="moveUp":"20"==f?e="moveDown":"4C"==f&&(e="pos1"),f=a.substr(0,10),g=this._systemData.getDeviceName(b,f),e&&g&&(c={device:g,command:e});else if("RT"==b&&8==a.length)e=null,f=a.substr(0,2),"20"==f?e="moveUp":"40"==f?e="moveDown":"10"==f&&(e="pos1"),f=a.substr(2),g=this._systemData.getDeviceName(b,f),e&&g&&(c={device:g,command:e});else if("R2"==b&&10<=a.length)e=null,f=a.substr(6),"0002"==f?e="off":"0001"==f?e="on":"0101"==f?e="up":"0102"==f?e="down":"0003"==f?e="stop":8==f.length&&(e=
"0002AAAA"==f?"0":parseInt(f.substr(6),16)+"%"),f=a.substr(0,6),g=this._systemData.getDeviceName(b,f),e&&g&&(c={device:g,command:e});else if("FS20"==b&&10==a.length)e=null,f=a.substr(6,2),"10"==f?e="on":"00"==f?e="off":"12"==f?e="toggle":"11"==f?e="restore":"02"==f?e="10%":"03"==f?e="20%":"05"==f?e="30%":"06"==f?e="40%":"08"==f?e="50%":"09"==f?e="60%":"0B"==f?e="70%":"0D"==f?e="80%":"0E"==f&&(e="90%"),f=a.substr(0,2)+"."+a.substr(2,2)+"."+a.substr(4,2),g=this._systemData.getDeviceName(b,f),e&&g&&
(c={device:g,command:e});else if("ELRO"==b&&6==a.length)e=null,"1"==a.charAt(5)?e="on":"4"==a.charAt(5)&&(e="off"),f=a.substr(0,5)+"1",g=this._systemData.getDeviceName(b,f),e&&g&&(c={device:g,command:e});else if("CR"==b&&8==a.length){e="on";f=a.charAt(0);if("1"!=a.charAt(1)&&("7"==f||"A"==f||"1"==f||"4"==f)||"1"==a.charAt(1)&&"7"!=f&&"A"!=f&&"1"!=f&&"4"!=f)f=(parseInt(f,16)-1).toString(16).toUpperCase(),e="off";f+=a.substr(1);g=this._systemData.getDeviceName(b,f);e&&g&&(c={device:g,command:e})}else if("MC"==
b&&6==a.length)e="off","5"==a.charAt(5)&&(e="on"),f=a.substr(0,5),g=this._systemData.getDeviceName(b,f),e&&g&&(c={device:g,command:e});else if("HE"==b&&14==a.length)e=null,f=parseInt(a.substr(10,2),16),0==(f&24)?(f&4?e="on":f&2&&(e="off"),f&=-7):(f&2?e="on":f&1&&(e="off"),f&=-4),f=a.substr(0,10)+XC.getHexVal(f,2)+a.substr(12,2),g=this._systemData.getDeviceName(b,f),e&&g&&(c={device:g,command:e});else if("IT"==b&&(3==a.length||8==a.length||10==a.length))e=null,3==a.length&&("E"==a.charAt(2)?e="on":
"6"==a.charAt(2)&&(e="off")),f=a.charAt(0)+"."+a.charAt(1),8<=a.length&&(f=parseInt(a.substr(6,1),16),e=f&1?"on":"off",f&=-2,f=a.substr(0,6)+f+"."+a.substr(7,1)),10==a.length&&(a=a.charAt(8),"0"==a?e="10%":"1"==a?e="20%":"2"==a?e="30%":"3"==a?e="40%":"5"==a?e="50%":"7"==a?e="60%":"9"==a?e="70%":"B"==a?e="80%":"D"==a?e="90%":"F"==a&&(e="100%")),g=this._systemData.getDeviceName(b,f),e&&g&&(c={device:g,command:e});else if("KOPP"==b&&12==a.length)e=null,"2"==a.charAt(4)?e="off":"3"==a.charAt(4)?e="on":
"B"==a.charAt(4)?e="up":"A"==a.charAt(4)&&(e="down"),f=a.substr(0,4)+"1003",g=this._systemData.getDeviceName(b,f),e&&g&&(c={device:g,command:e});else if("RC"==b&&6==a.length)e=null,"2"==a.charAt(4)?e="on":"8"==a.charAt(4)&&(e="off"),f=a.substr(0,4),g=this._systemData.getDeviceName(b,f),e&&g&&(c={device:g,command:e});else if("FHT80B"==b&&8==a.length)e=null,f=a.substr(4,2),d=a.substr(6,2),e="FF"!=d?parseInt(d,16):"00"==f?"setManu":"setAuto",f=a.substr(0,2)+"."+a.substr(2,2),g=this._systemData.getDeviceName(b,
f),e&&g&&(c={device:g,command:e});else if("CODE"==b){var g=e=null,h=this;this._systemData.$ircodesXML.find("device key[code='"+a+"']").each(function(){var a=$(this),b=a.parent().attr("id");h._systemData.$devicesXML.find("locations location device[type='CODE']").each(function(){var c=$(this);c.attr("data")==b&&(e=a.attr("id"),g=c.parent().attr("id")+"."+c.attr("id"))})});e&&g&&(c={device:g,command:e})}return c};
xnm.aio.gateway.TaskManager.prototype._getAll=function(b,a){b._executeRequest("GetAll",null,{timeout:5E3},function(b,d){if(b)a&&a(b);else{var e={actions:[],triggers:[],tasks:[]};if(d&&0<d.length)for(var f=d.length;f--;)if(d[f]&&d[f].sys)switch(d[f].sys.toLowerCase()){case "action":e.actions.push(d[f]);break;case "task":case "event":case "astro":e.triggers.push(d[f]);break;case "group":e.tasks.push(d[f])}a&&a(null,e)}})};
xnm.aio.gateway.TaskManager.prototype._addAction=function(b,a,c,d){if(a&&c){for("number"==typeof a&&(a=xnm.aio.gateway.Util.getHexVal(a,2));2>a.length;)a="0"+a;c.id=a;if("undefined"==typeof c.active||null==c.active)c.active=1;b._executeRequest("AddAction",c,{timeout:5E3},function(a){d&&d(a)})}else d&&d(Error("function argument invalid"))};
xnm.aio.gateway.TaskManager.prototype._delAction=function(b,a,c){if(a){for("number"==typeof a&&(a=xnm.aio.gateway.Util.getHexVal(a,2));2>a.length;)a="0"+a;b._executeRequest("DelAction",{id:a},{timeout:5E3},function(a){c&&c(a)})}else c&&c(Error("function argument invalid"))};
xnm.aio.gateway.TaskManager.prototype._addTimeTrigger=function(b,a,c,d){if(a&&c&&c.days&&c.time&&c.dateStart&&c.dateEnd){for("number"==typeof a&&(a=xnm.aio.gateway.Util.getHexVal(a,2));2>a.length;)a="0"+a;c.id=a;if("undefined"==typeof c.active||null==c.active)c.active=1;b._executeRequest("AddTask",c,{timeout:5E3},function(a){d&&d(a)})}else d&&d(Error("function argument invalid"))};
xnm.aio.gateway.TaskManager.prototype._addAstroTrigger=function(b,a,c,d){if(a&&c&&c.days&&c.time&&c.dateStart&&c.dateEnd&&c.delay){for("number"==typeof a&&(a=xnm.aio.gateway.Util.getHexVal(a,2));2>a.length;)a="0"+a;c.id=a;if("undefined"==typeof c.active||null==c.active)c.active=1;b._executeRequest("AddAstro",c,{timeout:5E3},function(a){d&&d(a)})}else d&&d(Error("function argument invalid"))};
xnm.aio.gateway.TaskManager.prototype._addEventTrigger=function(b,a,c,d){if(a&&c&&c.type&&c.code){for("number"==typeof a&&(a=xnm.aio.gateway.Util.getHexVal(a,2));2>a.length;)a="0"+a;c.id=a;if("undefined"==typeof c.active||null==c.active)c.active=1;b._executeRequest("AddEvent",c,{timeout:5E3},function(a){d&&d(a)})}else d&&d(Error("function argument invalid"))};
xnm.aio.gateway.TaskManager.prototype._delTrigger=function(b,a,c){if(a){for("number"==typeof a&&(a=xnm.aio.gateway.Util.getHexVal(a,2));2>a.length;)a="0"+a;b._executeRequest("DelTask",{id:a},{timeout:5E3},function(a){c&&c(a)})}else c&&c(Error("function argument invalid"))};
xnm.aio.gateway.TaskManager.prototype._addTask=function(b,a,c,d){if(a&&c){c.triggerids||(c.triggerids="");c.actionids||(c.actionids="");for("number"==typeof a&&(a=xnm.aio.gateway.Util.getHexVal(a,2));2>a.length;)a="0"+a;c.id=a;if("undefined"==typeof c.active||null==c.active)c.active=1;b._executeRequest("AddGroup",c,{timeout:5E3},function(a){d&&d(a)})}else d&&d(Error("function argument invalid"))};
xnm.aio.gateway.TaskManager.prototype._delTask=function(b,a,c){if(a){for("number"==typeof a&&(a=xnm.aio.gateway.Util.getHexVal(a,2));2>a.length;)a="0"+a;b._executeRequest("DelGroup",{id:a},{timeout:5E3},function(a){c&&c(a)})}else c&&c(Error("function argument invalid"))};
xnm.aio.gateway.TaskManager.prototype._toggleTask=function(b,a,c){if(a){for("number"==typeof a&&(a=xnm.aio.gateway.Util.getHexVal(a,2));2>a.length;)a="0"+a;b._executeRequest("toggleEvent",{id:a},{timeout:5E3},function(a){c&&c(a)})}else c&&c(Error("function argument invalid"))};
xnm.aio.gateway.TaskManager.prototype._activateTask=function(b,a,c,d){if(a){for("number"==typeof a&&(a=xnm.aio.gateway.Util.getHexVal(a,2));2>a.length;)a="0"+a;b._executeRequest("saveGroup",{id:a,active:c?1:0},{timeout:5E3},function(a){d&&d(a)})}else d&&d(Error("function argument invalid"))};
xnm.aio.gateway.TaskManager.prototype._getMessage=function(b,a,c){xnm.aio.gateway.Admin.getGatewaySID(b,function(b,e){if(b)c&&c(b);else if(e){var f=new (require("xnm.aio.cloud.js").Server);f._url="http://messages.aio-control.com/ai2/m.php?";f.getMessage(e,a,function(a){if(a&&a.data)if(a.data.mail&&a.data.message){var b={};b.reception=a.data.mail;b.message=a.data.message;b.sns=a.data.snsType;c&&c(null,b)}else c&&c(Error("no such notification"));else c&&c(Error("get message from server error"))})}else c&&
c(Error("gateway has no sid"))},null,b.password)};xnm.aio.gateway.TaskManager.prototype._setMessage=function(b,a,c,d,e,f){xnm.aio.gateway.Admin.getGatewaySID(b,function(b,h){if(b)e&&e(b);else if(h){var m=new (require("xnm.aio.cloud.js").Server);m._url="http://messages.aio-control.com/ai2/m.php?";m.setMessage(h,a,c,d,function(a){a&&!a.error?e&&e():e&&e(Error(a.error))},f)}else e&&e(Error("gateway has no sid"))},null,b.password)};
xnm.aio.gateway.TaskManager.prototype._getFreeTaskID=function(b,a){this._getAll(b,function(b,d){if(b)a&&a(b);else if(d&&d.tasks){for(var e,f=1;200>f;f++){for(var g=!1,h=0;h<d.tasks.length;h++)if(d.tasks[h].id&&f==parseInt(d.tasks[h].id,16)){g=!0;break}if(!g){e=f;break}}a&&a(e?null:Error("no free id"),{id:e})}else a&&a(null,{id:1})})};
xnm.aio.gateway.TaskManager.prototype._getFreeTriggerID=function(b,a){this._getAll(b,function(b,d){if(b)a&&a(b);else if(d&&d.triggers){for(var e,f=1;255>f;f++){for(var g=!1,h=0;h<d.triggers.length;h++)if(d.triggers[h].id&&f==parseInt(d.triggers[h].id,16)){g=!0;break}if(!g){e=f;break}}a&&a(e?null:Error("no free id"),{id:e})}else a&&a(null,{id:1})})};
xnm.aio.gateway.TaskManager.prototype._getFreeActionID=function(b,a){this._getAll(b,function(b,d){if(b)a&&a(b);else if(d&&d.actions){for(var e,f=1;255>f;f++){for(var g=!1,h=0;h<d.actions.length;h++)if(d.actions[h].id&&f==parseInt(d.actions[h].id,16)){g=!0;break}if(!g){e=f;break}}a&&a(e?null:Error("no free id"),{id:e})}else a&&a(null,{id:1})})};
xnm.aio.gateway.Handler=function(b){this.CommandHandler=null;var a=30;"object"===typeof b&&null!==b&&("number"!==typeof b.interval||isNaN(b.interval)||(a=Math.max(10,b.interval)));var c=this;this._autoSearchInterval=setInterval(function(){c.discoverWithTimeout(1E3)},1E3*a);this.discoverWithTimeout(1E3)};xnm.aio.gateway.Handler.prototype.Admin=xnm.aio.gateway.Admin;xnm.aio.gateway.Handler.prototype.Gateway=xnm.aio.gateway.Gateway;xnm.aio.gateway.Handler.prototype.TaskManager=xnm.aio.gateway.TaskManager;
xnm.aio.gateway.Handler.prototype.Systems=xnm.aio.gateway.systems;xnm.aio.gateway.Handler.prototype.getGatewayType=function(b){var a="F1";b&&b.attr("hwv")&&("E2"==b.attr("hwv")||"F9"==b.attr("hwv")||"FA"==b.attr("hwv")||"FB"==b.attr("hwv")||"FC"==b.attr("hwv")||"FD"==b.attr("hwv")?a=b.attr("hwv"):"F3"==b.attr("hwv")&&("F3"==b.attr("swv")?a="F3":"F8"==b.attr("swv")?a="F8":"F5"==b.attr("swv")?a="F5":"F2"==b.attr("swv")&&(a="F2")));return a};
xnm.aio.gateway.Handler.prototype.getGatewayFunctionForType=function(b){return"HM"==b||"IN"==b||"PE"==b||"ELRO"==b||"FS20"==b||"IT"==b||"AN"==b||"R2"==b||"HE"==b||"KOPP"==b||"L2"==b||"ML"==b||"ER"==b||"SL"==b||"UR"==b||"RC"==b||"KN"==b||"DY"==b||"CR"==b||"IA"==b||"WA"==b||"EO"==b||"DB"==b||"DB2"==b||"GQ"==b||"RT"==b||"CF3"==b||"CF4"==b||"L3"==b||"L4"==b||"QA"==b||"MC"==b||"FX3"==b||"BK"==b||"B8"==b||"DY2"==b||"BG"==b?"SendSC":"FHT80B"==b?"SendFHT80b":"CODE"==b?"Send2":null};
xnm.aio.gateway.Handler.prototype._getINLamellaValue=function(b){b=parseInt(b)+63;79<b?b=79:64>b&&(b=64);b=b.toString(16).toUpperCase();2>b.length&&(b="0"+b);return b};
xnm.aio.gateway.Handler.prototype.getGatewayParams=function(b,a,c){var d=null;if("DY2"==b.type){var e=null;"moveUp"==a?e="01":"moveDown"==a?e="02":"stop"==a?e="03":"position"==a?e="06":"up"==a?e="09":"down"==a?e="0A":0<=parseInt(a)&&100>=parseInt(a)&&"lamella"!=b.channel?(e="40",d=parseInt(a).toString(16).toUpperCase(),e+=d):0<=parseInt(a)&&180>=parseInt(a)&&"lamella"==b.channel?(e="20",d=parseInt(a).toString(16).toUpperCase(),e+=d):"tiltto0"==a||"tiltto45"==a||"tiltto90"==a||"tiltto135"==a||"tiltto180"==
a?(e="20",d=parseInt(a.substr(6)).toString(16).toUpperCase(),e+=d):-1!=a.indexOf("moveTiltTo")&&(e="60",d=a.split(":"),a=("00"+(+d[2]).toString(16)).substr(-2).toUpperCase(),d=("00"+(+d[1]).toString(16)).substr(-2).toUpperCase(),e+=a+d);d={type:"DY2",data:"01"+b.address+e}}else if("B8"!=b.type||"window"!=b.data&&"door"!=b.data&&"temp"!=b.data&&"motion"!=b.data&&"brightness"!=b.data&&"smoke"!=b.data&&"water"!=b.data&&"remote"!=b.data&&"button"!=b.data||"reset"==a||"resetAlarm"==a)if("B8"==b.type)"on"==
a?(e="01","siren"==b.data&&(e="07")):"off"==a?(e="02","siren"==b.data&&(e="08")):"toggle"==a?e="03":"up"==a?e="04":"stop"==a?e="05":"down"==a?e="06":"reset"==a?e="09":"resetAlarm"==a&&(e="0A"),d={type:"B8",data:"01"+b.address+e};else if("PE"==b.type)e="03","on"==a?e="01":"off"==a&&(e="00"),d={type:"PE",data:b.address.substr(0,2)+"05"+b.address.substr(2)+e};else if("DB"==b.type||"DB2"==b.type)e="03","stop"==a?e="03":"up"==a?e="02":"down"==a?e="04":"lamelle"==b.channel?e="050"+(a-1):(e="00",10==a?e=
"0A":20==a?e="14":30==a?e="1E":40==a?e="28":50==a?e="32":60==a?e="3C":70==a?e="46":80==a?e="50":90==a?e="5A":100==a&&(e="64"),e="01"+e),e&&(d={type:"DB",data:e});else if("SIAU"==b.type){d="SIAU";"door"==b.data?d="SIAUD":"smoke"==b.data?d="SIAUR":"glass"==b.data&&(d="SIAUG");e="0F";if("closed"==a)e="2F";else if("tilted"==a||"fire"==a||"alarm"==a)e="1F";d={type:d,data:b.address+e}}else if("IW"==b.type)e="0100","closed"==a?e="0102":"tilted"==a&&(e="0101"),d={type:"IW",data:b.address+e};else if("GQ"==
b.type)e="55","stop"==a?e="55":"up"==a?e="11":"down"==a&&(e="33"),d={type:"GQ",data:b.address+e};else if("R2"==b.type){var e="",f=null;"on"==a?e="0001":"off"==a?e="0002":"up"==a?e="0101":"down"==a?e="0102":"stop"==a?e="0003":"opened"==a?e="01":"closed"==a?e="02":(0==a.indexOf("dimTo")&&(a=a.replace(/dimTo/g,"")),a=a.replace(/%/g,""),"0"==a?e="0002AAAA":(c=parseInt(a),0<c&&100>=c&&(e="01AAAA"+XC.getHexVal(c,2))));d={type:"R2",data:b.address+e}}else if("PV"==b.type)e=null,"opened"==a?e="04":"closed"==
a?e="05":"fire"==a?e="08":"motion"==a&&(e="01"),e&&(d={type:"PV",data:b.address+e});else if("EO"==b.type){var e="00",g="";if("on"==a||"dimUp"==a||"up"==a||"holdOn"==a)e="10";else if("off"==a||"dimDown"==a||"down"==a||"holdOff"==a)e="30";if("on"==a||"off"==a)g="05";else if("up"==a||"down"==a)g="0E";else if("dimUp"==a||"dimDown"==a)g="28";d={type:"EO",data:"F6"+e+b.address+g}}else if("ELRO"==b.type)e=null,8==b.address.length?e=b.address:(e="0","on"==a?e="1":"off"==a&&(e="4"),e=b.address.substr(0,5)+
e),e&&(d={type:"ELRO",data:e});else if("CR"==b.type)e=b.address,"off"==a&&(e=(parseInt(e.charAt(0),16)+1).toString(16).toUpperCase()+e.substr(1)),e&&(d={type:"CR",data:e});else if("MC"==b.type)e=b.address,d={type:"MC",data:"on"==a?e+"5":e+"4"};else if("RC"==b.type)e=null,"ok"==a?e=b.address+"00":"alarm"==a?e=b.address+"01":"battery"==a?e=b.address+"02":"sabotage"==a?e=b.address+"03":"timeout"==a?e=b.address+"05":"on"==a?e=b.address+"29":"off"==a&&(e=b.address+"89"),e&&(d={type:"RC",data:e});else if("MX"==
b.type)d={type:"MX",data:b.address};else if("GV"==b.type)d={type:"GV",data:b.address};else if("HE"==b.type&&14==b.address.length)c=parseInt(b.address.substr(10,2),16),0==(c&24)?(c&=-7,"on"==a?c|=4:"off"==a&&(c|=2)):(c&=-4,"on"==a?c|=2:"off"==a&&(c|=1)),a=c.toString(16).toUpperCase(),2>a.length&&(a="0"+a),d={type:"HE",data:b.address.substr(0,10)+a+b.address.substr(12,2)};else if("IT"==b.type)g=b.address.split("."),2==g.length&&(e=null,1==g[0].length?"on"==a?e=g[0]+g[1]+"E":"off"==a&&(e=g[0]+g[1]+"6"):
7==g[0].length&&(f=null,c=parseInt(g[0].substr(6,1),16),c&=-2,"on"==a?c|=1:(0==a.indexOf("dimTo")&&(c|=1,a=a.replace(/dimTo/g,"")),a=a.replace(/%/g,""),"10"==a?f="00":"20"==a?f="10":"30"==a?f="20":"40"==a?f="30":"50"==a?f="50":"60"==a?f="70":"70"==a?f="90":"80"==a?f="B0":"90"==a?f="D0":"100"==a&&(f="F0")),c=c.toString(16).toUpperCase(),e=null!=f?g[0].substr(0,6)+c+g[1]+f:g[0].substr(0,6)+c+g[1]),e&&(d={type:"IT",data:e}));else if("FS20"==b.type)g=b.address.split("."),3==g.length&&(e="00",c=g[0]+g[1]+
g[2],"on"==a?e="10":"off"==a?e="00":"restore"==a?e="11":"toggle"==a?e="12":"up"==a||"dimUp"==a?e="13":"down"==a||"dimDown"==a?e="14":(0==a.indexOf("dimTo")&&(a=a.replace(/dimTo/g,"")),a=a.replace(/%/g,""),"10"==a?e="02":"20"==a?e="03":"30"==a?e="05":"40"==a?e="06":"50"==a?e="08":"60"==a?e="09":"70"==a?e="0B":"80"==a?e="0D":"90"==a?e="0E":"100"==a&&(e="10")),d={type:"FS20",data:c+e+"00"});else if("KOPP"==b.type)c=b.address,8==c.length&&(e=null,g=c.substr(0,4),f=c.substr(6),"on"==a?e="30":"off"==a?
e="20":"toggle"==a?e="00":"stopDim"==a||"stop"==a?e="FF":"startDim"==a?(c=parseInt(e,16),e=XC.getHexVal(c|128,2)):"up"==a?e="B0":"down"==a?e="A0":"opened"==a?e="20":"closed"==a&&(e="10"),e&&(d={type:"KOPP",data:g+e+"CC0F"+f}));else if("SL"==b.type){if(c=b.address,5==c.length){d=parseInt(c.substr(3,2),16)>>2;if("on"!=a&&"up"!=a&&"moveUp"!=a&&("off"==a||"down"==a||"moveDown"==a))if(11==(d&15))d+=3;else if(10==(d&15)||2==(d&15))d-=2;d<<=2;e=c.substr(0,3)+XC.getHexVal(d,2)+"0";if("moveUp"==a||"moveDown"==
a)e+="15";else if("up"==a||"down"==a)e+="0A";d={type:"SL",data:e}}}else if("UR"==b.type)c=b.address,5==c.length&&(e=null,"moveUp"==a||"up"==a?e="1":"moveDown"==a||"down"==a?e="4":"stop"==a&&(e="2"),e&&(d={type:"UR",data:c+e}));else if("AN"==b.type)c=b.address,8==c.length&&(e=null,"on"==a?e="00":"off"==a&&(e="10"),e&&(d={type:"AN",data:c+e}));else if("DY"==b.type)c=b.address,8==c.length&&(e=null,"up"==a?e="11":"down"==a?e="33":"moveUp"==a?e="22":"moveDown"==a?e="44":"stop"==a&&(e="55"),e&&(d={type:"DY",
data:c+e}));else if("KN"==b.type)c=b.address,10==c.length&&(e=null,"up"==a||"moveUp"==a||"on"==a?e="80":"down"==a||"moveDown"==a||"off"==a?e="20":"stop"==a?e="40":"pos1"==a&&(e="4C"),e&&(d={type:"KN",data:c+e+"AEAE"}));else if("RT"==b.type)c=b.address,6==c.length&&(e=null,"up"==a?e="20":"moveUp"==a?e="2F":"down"==a?e="40":"moveDown"==a?e="4F":"stop"==a?e="10":"pos1"==a?e="10":"program"==a?e="80":"learn"==a&&(e="60"),e&&(d={type:"RT",data:e+c}));else if("ML"==b.type)e=null,"power"==a?e="80":"up"==
a?e="4b":"white"==a?e="ffffff":"0"==a?e="0":"10"==a?e="0A":"20"==a?e="14":"30"==a?e="1E":"40"==a?e="28":"50"==a?e="32":"60"==a?e="3C":"70"==a?e="46":"80"==a?e="50":"90"==a?e="5A":"100"==a&&(e="64"),"power"!=a&&"up"!=a&&"down"!=a&&"white"!=a&&"0"!=a&&"10"!=a&&"20"!=a&&"30"!=a&&"40"!=a&&"50"!=a&&"60"!=a&&"70"!=a&&"80"!=a&&"90"!=a&&"100"!=a&&(e=a),e&&(d={type:"ML",data:e,adr:b.address});else if("CF3"==b.type||"CF4"==b.type)e=null,g="","on"==a?e="04":"off"==a?e="05":"offSave"==a?e="06":"scene1"==a?e=
"07":"scene2"==a?e="08":"scene3"==a?e="09":"up"==a?e="0E":"down"==a?e="0F":"PrgUp"==a?e="0A":"PrgDown"==a?e="0B":6==a.length?(e="02",g=a+"00"):8==a.length?(e="02",g=a):(a=Math.round(parseInt(a)/100*255),255<a&&(a=255),"color"==b.channel?(e="02",g=XC.getHexVal(a,2)+XC.getHexVal(255-a,2)+"0000"):(e="01",4>a&&(a=4),g=XC.getHexVal(a,2))),e&&(d={type:b.type,data:e+b.address+g});else if("L2"==b.type){e=null;if(b.address&&3==b.address.length){if("power"==a)e="fff";else if("left"==a)e="ff3";else if("right"==
a||"white"==a)e="fc3";else if("up"==a)e="fcc";else if("down"==a)e="ff0";else if("red"==a)e="33f";else if("purple"==a)e="30f";else if("blue"==a)e="03f";else if("cyan"==a)e="000";else if("green"==a)e="f03";else if("yellow"==a)e="c33";else if("orange"==a)e="c03";else if(6==a.length){var h=parseInt(a.substr(0,2),16);255<h&&(h=255);c=parseInt(a.substr(2,2),16);255<c&&(c=255);a=parseInt(a.substr(4,2),16);255<a&&(a=255);e=0;g=h/255;c/=255;a/=255;f=Math.min(g,Math.min(c,a));h=Math.max(g,Math.max(c,a));f!=
h&&(e=60*((g==f?3:a==f?1:5)-(g==f?c-a:a==f?g-c:a-g)/(h-f))-180,0>e&&(e+=360));e="000 003 00c 00f 030 033 03c 03f 0c0 0c3 0cc 0cf 0f0 0f3 0fc 0ff 300 303 30c 30f 330 333 33c 33f 3c0 3c3 3cc 3cf 3f0 3f3 3fc 3ff c00 c03 c0c c0f c30 c33 c3c c3f cc0 cc3 ccc ccf cf0 cf3 cfc cff f00 f03 f0c f0f f30 f33 f3c f3f fc0".split(" ")[Math.floor(e/360*56)]}e&&(e=b.address+e)}else{if("power"==a)e=2;else if("left"==a)e=5;else if("right"==a||"white"==a)e=6;else if("up"==a)e=3;else if("down"==a)e=4;else if("red"==a)e=
408;else if("purple"==a)e=40;else if("blue"==a)e=80;else if("cyan"==a)e=152;else if("green"==a)e=240;else if("yellow"==a)e=336;else if("orange"==a)e=368;else if(6==a.length){h=parseInt(a.substr(0,2),16);255<h&&(h=255);c=parseInt(a.substr(2,2),16);255<c&&(c=255);a=parseInt(a.substr(4,2),16);255<a&&(a=255);var e=2128,m=2296,g=a,f=c;a<=h&&a<=c?(g=c,f=h,e=2304,m=2456):c<=h&&c<=a&&(g=h,f=a,e=2456,m=2640);c=Math.round((m-e)/8+1);a=Math.round(c/2);c-=a;a=255==g?Math.round(f/255*a):a+Math.round((1-g/255)*
c);a=e+8*a;2552<a&&(a-=512);e=a-2048}e&&(c=parseInt(b.address.substr(4),16)<<8,e=XC.getHexVal((c&65534)+e,4),e=b.address.substr(0,4)+e)}e&&(d={type:"L2",data:e})}else if("L3"==b.type)e=null,"on"==a?e="07":"off"==a?e="38":"white"==a?e="09":"color"==a?e="36":"red"==a?e="4f":"purple"==a?e="56":"blue"==a?e="60":"cyan"==a?e="68":"green"==a?e="70":"yellow"==a?e="41":"orange"==a?e="4a":6==a.length?(h=parseInt(a.substr(0,2),16),255<h&&(h=255),c=parseInt(a.substr(2,2),16),255<c&&(c=255),a=parseInt(a.substr(4,
2),16),255<a&&(a=255),e=0,g=h/255,c/=255,a/=255,f=Math.min(g,Math.min(c,a)),h=Math.max(g,Math.max(c,a)),f!=h&&(e=60*((g==f?3:a==f?1:5)-(g==f?c-a:a==f?g-c:a-g)/(h-f))-110,0>e&&(e+=360)),e=XC.getHexVal(50-Math.floor(e/360*50)+64,2)):(e=parseInt(a),e=XC.getHexVal(192+Math.floor(e/100*48),2)),e&&(d={type:"L3",data:b.address+e+"0"});else if("L4"==b.type)e=null,"power"==a?e="01017f":"left"==a?e="01017e":"right"==a||"white"==a?e="01017d":"up"==a?e="01017c":"down"==a?e="01017b":"red"==a?e="ff0000":"purple"==
a?e="ff00ff":"blue"==a?e="0000ff":"cyan"==a?e="00ffff":"green"==a?e="00ff00":"yellow"==a?e="ffdd00":"orange"==a?e="ff6600":6==a.length&&(h=parseInt(a.substr(0,2),16),255<h&&(h=255),1==h&&(h=2),c=parseInt(a.substr(2,2),16),255<c&&(c=255),1==c&&(c=2),a=parseInt(a.substr(4,2),16),255<a&&(a=255),1==a&&(a=2),e=XC.getHexVal(h,2)+XC.getHexVal(c,2)+XC.getHexVal(a,2)),e&&(d={type:"L4",data:b.address+e});else if("FHT80B"==b.type)e=null,e="setManu"==a?{p:"modus",v:"0"}:"setAuto"==a?{p:"modus",v:"1"}:{p:"tsoll",
v:a},d={type:"FHT80B",hc1:b.address.substr(0,2),hc2:b.address.substr(3,2)},d[e.p]=e.v;else if("FX3"==b.type){d=b.data.split(":");if("switch"==b.subtype||"light"==b.subtype)"on"==a?e=d[0]:"off"==a&&(e=d[1]);"shutter"==b.subtype?"up"==a?e=d[0]:"down"==a&&(e=d[1]):"dimmer"==b.subtype&&("on"==a?e=d[0]:"off"==a?e=d[1]:0==a?(e="00",e=d[0].substr(0,6)+"00"+e):10==a?(e="0A",e=d[0].substr(0,6)+"00"+e):20==a||30==a||40==a||50==a||60==a||70==a||80==a||90==a?(a=parseInt(a),e=a.toString(16),e=d[0].substr(0,6)+
"00"+e):100==a&&(e="64",e=d[0].substr(0,6)+"00"+e));d={type:"FX3",data:e}}else if("BK"==b.type){e="00";if("shutter"==b.subtype||"shutter"==b.data||"dimmer"==b.subtype||"dimmer"==b.data)"up"==a?e="01":"stop"==a?e="02":"pos1"==a?e="03":"pos2"==a?e="04":"down3s"==a?e="05":"up3s"==a?e="06":"brighter"==a?e="08":"darker"==a&&(e="09");d={type:"BK",data:"01"+b.address+e}}else if("IA"==b.type){e="0003";if("up"==a||"on"==a)e="0202";else if("down"==a||"off"==a)e="0102";else if("dimUp"==a)e="0201";else if("dimDown"==
a)e="0101";else if("moveUp"==a)e="0203";else if("moveDown"==a)e="0103";else if("scene"==a||"doScene"==a)e="0302";e&&(d={type:"IA",data:b.address+e})}else if("WA"==b.type)c=parseInt(b.address,16)&14942207,g="00","up"==a?c+=1947992064:"down"==a?c+=1947729920:"stop"==a?c+=872677376:"moveUp"==a?(c+=1947992064,g="01"):"moveDown"==a?(c+=1947729920,g="01"):"A"==a?c+=1946419200:"B"==a?c+=1946157056:"C"==a&&(c+=1947467776),d={type:"WA",data:XC.getHexVal(c,8)+g};else if("ER"==b.type)c=b.address,2==c.length&&
(e=null,e="moveUp"==a||"up"==a?"08":"moveDown"==a||"down"==a?"09":"stop"==a?"02":"stepUp"==a?"03":"stepDown"==a?"04":"shadow"==a?"0B":"air"==a?"0A":50<parseInt(a)?"09":"08",d={type:"ER",data:c+e});else if("HM"==b.type){e="00";if(b.channel&&"lamella"==b.channel)return null;"button1"==b.data||"button2"==b.data||"button3"==b.data||"button4"==b.data||"button6"==b.data||"button8"==b.data||"button12"==b.data||"button19"==b.data?d={type:"HM",data:b.address.substr(0,6)+a}:"wallthermostat"==b.data||"thermostat"==
b.data||"thermocontrol"==b.data?("setBoost"==a?e="1C03":"setManu"==a?e="1C01":"setAuto"==a?e="1C00":(e="15"==a||"14"==a||"13"==a||"12"==a?"0"+parseInt(a).toString(16):parseInt(a).toString(16),e="11"+e),d={type:"HM",data:b.address+e}):"esco-door"==b.data?("openEscoDoor"==a&&(e="22"),d={type:"HM",data:b.address+e}):"systroniq"==b.data?"openWindow"==a?d={type:"HM",data:b.address+"22"}:"closeWindow"==a&&(e="22",d={type:"HM",data:b.address.substr(0,6)+"02"+e}):("0056"==b.data?"normal"==a?e="00":"medium"==
a?e="64":"high"==a&&(e="C8"):"00A7"==b.data?"off"==a?e="00":"on"==a&&(e="C8"):"0043"==b.data?"off"==a?e="00":"on"==a&&(e="C8"):"opened"==a?e="C8":"closed"==a?e="00":"on"==a?e="01":"off"==a?e="02":"toggle"==a?e="03":"up"==a?e="blind"==b.data||"shutter"==b.data||"awning"==b.data||"venetian"==b.data||"raffstore"==b.data||"rooflight"==b.data?"08":"heater"==b.data||"0039"==b.data?"12":"0F":"down"==a?e="blind"==b.data||"shutter"==b.data||"awning"==b.data||"venetian"==b.data||"raffstore"==b.data||"rooflight"==
b.data?"09":"heater"==b.data||"0039"==b.data?"13":"10":"stepUp"==a?e="1414":"stepDown"==a?e="1514":5<a.length&&"upFor"==a.substr(0,5)?(a=parseInt(a.substr(5)),e="14"+XC.getHexVal(15*a,2)):7<a.length&&"downFor"==a.substr(0,7)?(a=parseInt(a.substr(7)),e="15"+XC.getHexVal(15*a,2)):"moveUp"==a?e="08":"moveDown"==a?e="09":"stop"==a?e="0B":a.match(/vChannel/)?(d=a.replace("vChannel",""),e=d+"19"):(e="blind"==b.data||"shutter"==b.data||"awning"==b.data||"venetian"==b.data||"raffstore"==b.data?"0A":"05",
a=parseInt(a.replace(/%/g,"").replace(/moveTo/g,"")),"0A"==e&&(a=100-a),100<a?a=100:0>a&&(a=0),a=a.toString(16).toUpperCase(),2>a.length&&(a="0"+a),e+=a),d={type:"HM",data:b.address+e})}else if("IN"==b.type)if(e="00",b.channel)"lamella"==b.channel&&(e="00"+this._getINLamellaValue(a),d={type:"IN",data:b.address+e});else if(!b.address&&b["native"]){if("moveUp"==a)e="7F61";else if("moveDown"==a||"turbo"==a)e="7F62";else if("stop"==a||"level1"==a)e="7F63";d={type:"IN",data:b["native"]+e}}else"moveUp"==
a?e="000C":"moveDown"==a?e="000D":"up"==a?e="000C":"down"==a?e="000D":"stop"==a?e="0007":"setP1"==a?e="0140":"level1"==a?e="0040":"level2"==a?e="0041":"level3"==a?e="0042":"standby"==a?e="0043":"auto"==a?e="0044":"manu"==a?e="0045":"turbo"==a?e="0046":"levelUp"==a?e="011B":"levelDown"==a?e="011D":"turbo_2"==a?e="0051":"turbo_3"==a?e="0052":"turbo_4"==a?e="0053":"night_mode_in_1"==a?e="0054":"night_mode_in_2"==a?e="0055":"night_mode_in_3"==a?e="0056":"night_mode_out_1"==a?e="0057":"night_mode_out_2"==
a?e="0058":"night_mode_out_3"==a?e="0059":1<a.length&&"L"==a.substr(0,1)?e="00"+this._getINLamellaValue(a.substr(1)):1<a.length&&"P"==a.substr(0,1)?(d=parseInt(a.substr(1)),d+=71,79<d?d=79:72>d&&(d=72),d=d.toString(16).toUpperCase(),2>d.length&&(d="0"+d),e="01"+d):6<a.length&&"moveTo"==a.substr(0,6)?(c=null,0<(d=a.indexOf("L"))&&(c=this._getINLamellaValue(a.substr(d+1)),a=a.substr(0,d)),a=100-parseInt(a.substr(6).replace(/%/g,"")),100<a&&(a=100),a=a.toString(16).toUpperCase(),2>a.length&&(a="0"+a),
e="18"+a,c&&(e+=c)):("string"==typeof a&&(a=a.replace(/%/g,"")),a=100-parseInt(a),100<a?a=100:0>a&&(a=0),a=a.toString(16).toUpperCase(),2>a.length&&(a="0"+a),e="18"+a),d={type:"IN",data:b.address+e};else"QA"==b.type?("evtOpenA"==a&&(e="01101000"),"evtOpenB"==a?e="01202000":"evtClose"==a?e="01300000":"open"==a?e="0C":"close"==a?e="0D":"stop"==a?e="0B":"permanentOpenOff3"==a?e="0703":"permanentOpenOn3"==a?e="0603":"permanentOpenOff4"==a?e="0704":"permanentOpenOn4"==a?e="0604":"stepUp"==a?e="0903E8":
"stepDown"==a?e="0A03E8":"R4Unlock5s"==a?e="10041388":"R4Unlock1s"==a?e="100403E8":"R3Unlock5s"==a?e="10031388":"R3Unlock1s"==a?e="100303E8":"0"==a?e="0E00":"10"==a?e="0E0A":"20"==a?e="0E14":"30"==a?e="0E1E":"40"==a?e="0E28":"50"==a?e="0E32":"60"==a?e="0E3C":"70"==a?e="0E46":"80"==a?e="0E50":"90"==a?e="0E5A":"100"==a&&(e="0E64"),d={type:"QA",data:b.address+e}):"CODE"==b.type&&(b.code||this.CommandHandler.SystemData.$ircodesXML.find("device[id='"+b.data+"'] key[id='"+a+"']").each(function(){b.code=
$(this).attr("code")}),e=b.code)&&(a="IR01",g=e.split(":"),2==g.length?(a=g[0].toUpperCase(),d={code:g[1]}):(b.address&&(a=b.address.replace(/:/g,"")),d={code:e}),4==a.length&&(0==a.indexOf("RF")?d.rf=a.substring(2):d.ir=a.substring(2)),d.type="CODE");else d=this.getGatewayThresholdParams(b,c);return d};
xnm.aio.gateway.Handler.prototype.createEventListenerSocket=function(b){this.CommandHandler=b;b=require("dgram").createSocket("udp4");b.on("error",function(a){XC.debugf("UDP error: "+a);this.close()});var a=this;b.on("message",function(b,d){var e=b.toString();XC.debugf("UDP msg ("+d.address+"): "+e);if(10<e.length&&"{XC_EVT}"==e.substr(0,8))try{var f=JSON.parse(e.substr(8));f&&f.type&&f.data&&a._receivedUDPState(f.type,f.data)}catch(g){}});b.bind(1902)};
xnm.aio.gateway.Handler.prototype._receivedUDPState=function(b,a){var c=null,d=null,e=new xnm.aio.gateway.Gateway,f=this;if(this.CommandHandler)if("SI"==b&&15==a.length){b="SIAU";var d=a.substr(0,6),g=a.substr(9,3),h=a.substr(6,2),c="111"==g||"222"==g?"111"==g?e.getSIAUState("SIAUG",h):e.getSIAUState("SIAUR",h):"333"==g?e.getSIAUState("SIAUD",h):e.getSIAUState("SIAU",h);d&&c&&this.CommandHandler.SystemData.$devicesXML.find("locations location device[type='"+b+"']").each(function(){var a=$(this);a.attr("data");
var b=a.parent().attr("id")+"."+a.attr("id");a.attr("address").toUpperCase()==d.toUpperCase()&&(XC.debugf("STATEUPDATE "+b+": "+c),f.CommandHandler.setState(b,c),f.CommandHandler.RemoteController&&f.CommandHandler.RemoteController.refreshStates&&f.CommandHandler.RemoteController.refreshStates())})}else"HM"==b&&10==a.length?(d=a.substr(0,8),h=a.substr(8,10),d&&h&&this.CommandHandler.SystemData.$devicesXML.find("locations location device[type='"+b+"']").each(function(){var a=$(this),b=a.attr("data"),
c=a.parent().attr("id")+"."+a.attr("id");a.attr("address").toUpperCase()==d.toUpperCase()&&(a=e.evaluateHMState(c,b,parseInt(h,16),null),XC.debugf("STATEUPDATE "+c+": "+a),f.CommandHandler.setState(c,a),f.CommandHandler.RemoteController&&f.CommandHandler.RemoteController.refreshStates&&f.CommandHandler.RemoteController.refreshStates())})):"HE"==b&&14==a.length?(c=e.getHEState(a.substr(10,2)),g=parseInt(a.substr(10,2),16),g=0==(g&24)?g&-7:g&-4,d=a.substr(0,10)+XC.getHexVal(g,2)+a.substr(12,2),c&&this.CommandHandler.SystemData.$devicesXML.find("locations location device[type='"+
b+"']").each(function(){var a=$(this);a.attr("data");var b=a.parent().attr("id")+"."+a.attr("id");a.attr("address").toUpperCase()==d.toUpperCase()&&(f.CommandHandler.setState(b,c),f.CommandHandler.RemoteController&&f.CommandHandler.RemoteController.refreshStates&&f.CommandHandler.RemoteController.refreshStates())})):"IT"==b?(6==a.length?(d=a.charAt(1)+"."+a.charAt(3),c=e.getITState(a.substr(4))):8==a.length&&(g=parseInt(a.substr(6,1),16),c=g&1?"on":"off",g&=-2,d=a.substr(0,6)+g+"."+a.substr(7,1)),
d&&this.CommandHandler.SystemData.$devicesXML.find("locations location device[type='"+b+"']").each(function(){var a=$(this);a.attr("data");var b=a.parent().attr("id")+"."+a.attr("id");a.attr("address").toUpperCase()==d.toUpperCase()&&(XC.debugf("STATEUPDATE "+b+": "+c),f.CommandHandler.setState(b,c),f.CommandHandler.RemoteController&&f.CommandHandler.RemoteController.refreshStates&&f.CommandHandler.RemoteController.refreshStates())})):"KP"==b&&18==a.length?(d=a.substr(2,4),this.CommandHandler.SystemData.$devicesXML.find("locations location device[type='KOPP']").each(function(){var b=
$(this),c=b.attr("data"),g=b.parent().attr("id")+"."+b.attr("id");b.attr("address").toUpperCase().substr(0,4)==d.toUpperCase()&&(b=e.getKOPPState(c,a.substr(8,2)),f.CommandHandler.setState(g,b),f.CommandHandler.RemoteController&&f.CommandHandler.RemoteController.refreshStates&&f.CommandHandler.RemoteController.refreshStates())})):"RC"==b&&6==a.length?(d=a.substr(0,4),this.CommandHandler.SystemData.$devicesXML.find("locations location device[type='"+b+"']").each(function(){var b=$(this),c=b.attr("data"),
g=b.parent().attr("id")+"."+b.attr("id");b.attr("address").toUpperCase()==d.toUpperCase()&&(b=e.getRCState(c,a.substr(4,2)),f.CommandHandler.setState(g,b),f.CommandHandler.RemoteController&&f.CommandHandler.RemoteController.refreshStates&&f.CommandHandler.RemoteController.refreshStates())})):"RV"==b&&20==a.length?(d=a.substr(0,6),this.CommandHandler.SystemData.$devicesXML.find("locations location device[type='"+b+"']").each(function(){var b=$(this),c=b.parent().attr("id")+"."+b.attr("id");b.attr("address").toUpperCase()==
d.toUpperCase()&&(b=""+(parseInt(a.substr(10,4),16)/10).toFixed(1),f.CommandHandler.setState(c+":current",b),f.CommandHandler.RemoteController&&f.CommandHandler.RemoteController.refreshStates&&f.CommandHandler.RemoteController.refreshStates())})):"IW"!=b||6!=a.length&&12!=a.length||(d=a.substr(a.length-6,2),this.CommandHandler.SystemData.$devicesXML.find("locations location device[type='"+b+"']").each(function(){var b=$(this),c=b.parent().attr("id")+"."+b.attr("id");b.attr("address")&&8==b.attr("address").length&&
b.attr("address").substr(6).toUpperCase()==d.toUpperCase()&&(e.CommandHandler=f.CommandHandler,e.evaluateIWState(c,a.substr(a.length-2,2)),f.CommandHandler.RemoteController&&f.CommandHandler.RemoteController.refreshStates&&f.CommandHandler.RemoteController.refreshStates())}))};xnm.aio.gateway.Admin.getGatewaySID=function(b,a){b?b._isV5()?this.V5.getSID(b,a):this.getSID(b._ip,function(b){var d=null;b||(d=Error("failed to get SID"));a&&a(d,b)},b._port,b.password):a&&a(Error("gateway is null"))};
xnm.aio.gateway.Admin.getGatewayEID=function(b,a){if(b){var c=this;b._executeRequest("GetSI",null,null,function(d,e){d?a&&a(d):e?e.EID&&"FFFFFF"!=e.EID&&"FFFFFFFFFFFF"!=e.EID?a&&a(null,e.EID):c.getGatewaySID(b,function(c,d){if(c)a&&a(c);else if(d){var e=new (require("xnm.aio.cloud.js").Server);e._url="http://webservice.aio-control.com/config?";e.getEleroKey(d,function(c){var d=null;c&&c.data&&c.data.adr?(d=c.data.adr,b._executeRequest("rfchipcmd",{type:"setERAdr",adr:d},null,function(b){a&&a(b,d)})):
a&&a(Error("get elero key from server error"))})}else a&&a(Error("gateway has no sid"))}):a&&a(Error("get si response format invalid"))})}else a&&a(Error("gateway is null"))};xnm.aio.gateway.Admin.getBeckerSerial=function(b,a){this.getGatewaySID(b,function(b,d){if(b)a&&a(b);else{var e=new (require("xnm.aio.cloud.js").Server);e._url="https://webservice.mediola.com";e.assignBeckerSeiral(d,function(b,c){a&&a(b,c)})}})};
xnm.aio.gateway.Gateway.prototype.executeCommandCreator=function(b,a,c){if(a&&a.value)if(!b||b.ip)if("led"==a.value.substr(0,3))this._setLED(a.value,c);else if("raOn"==a.value||"raOff"==a.value||"raAuto"==a.value){b=this.hashCode();var d="auto";"raOn"==a.value?d="on":"raOff"==a.value?d="off":"raAuto"==a.value&&(d="auto");xnm.aio.gateway.RemoteModeSetting.setRemoteModeSetting(b,d);c&&c()}else"cfOn"==a.value||"cfOff"==a.value?(b=this.hashCode(),"cfOn"==a.value?(this._cfSetting="on",xnm.aio.gateway.RemoteModeSetting.setRemoteModeSetting(b,
"on")):"cfOff"==a.value&&(this._cfSetting="off",xnm.aio.gateway.RemoteModeSetting.setRemoteModeSetting(b,"off")),c&&c()):c&&c(Error("no such gateway command"));else if(b.type){for(d in xnm.aio.gateway.systems)if(xnm.aio.gateway.systems.hasOwnProperty(d)){"HM"!=d||"v5+"!=b._ver&&"EA"!=this.toJSON().version||(d="HM_X");var e=xnm.aio.gateway.systems[d];if(e&&e.DM&&e.DM.TYPE&&e.DM.TYPE.toLocaleLowerCase()==b.type.toLowerCase()&&e.executeCommandCreator){e.executeCommandCreator(this,b,a,c);return}}c&&c(Error("device type unknow"))}else c&&
c(Error("invalid device format"));else c&&c(Error("command json invalid"))};
xnm.aio.gateway.Gateway.prototype.getStatesCreator=function(b,a,c){var d=[],e=[];b=[];for(var f=this,g=0;g<a.length;g++){var h=a[g];if(h){var m=h.device;if(m&&m.ip)b.push(h);else if(m&&m.type)switch(a[g].device.type){case "IN":e.push(a[g]);break;default:d.push(a[g])}}}var l=[];this._getGatewayStates(b,function(a,b){!a&&b&&(l=l.concat(b));f._getGeneralStates(d,function(a,b){!a&&b&&(l=l.concat(b));xnm.aio.gateway.systems.IN.getCurrentStateCreator(f,e,function(a,b){!a&&b&&(l=l.concat(b));c&&c(null,l)})})})};
xnm.aio.gateway.Gateway.prototype._getGeneralStates=function(b,a){if(b&&0!=b.length){var c=this;this._executeRequest("getStates",null,null,function(d,e){if(d)a&&a(d);else{var f=c._handleGeneralStatesRsp(e,b);a&&a(null,f)}})}else a&&a(null,null)};
xnm.aio.gateway.Gateway.prototype._handleGeneralStatesRsp=function(b,a){var c=[];if(b)for(var d=0;d<a.length;d++){var e=a[d].id,f=a[d].device,g=a[d].status;if(f.type){var h=xnm.aio.gateway.DM.getSystem(f,this.toJSON());if(h&&h.handleStateCreator)for(var m=0;m<b.length;m++){var l=b[m];l.type&&(l=h.handleStateCreator(f,g,l),null!=l&&"undefined"!=typeof l&&("object"==typeof l?(l.id=e,c.push(l)):c.push({id:e,status:l})))}}}return c};
xnm.aio.gateway.Gateway.prototype._getGatewayStates=function(b,a){if(b&&0!=b.length){for(var c=this._getRemoteModeInfo(),d=this._getCloudForwardInfo(),e=[],f=0;f<b.length;f++){var g=b[f],h=g.id,g=g.status;if(h){var m="?";g&&"raSetting"==g.value?m=c.raSetting:g&&"raState"==g.value?m=c.raState:g&&"cfSetting"==g.value&&(m=d.cfSetting);e.push({id:h,status:m})}}a&&a(null,e)}else a&&a(null,null)};
xnm.aio.gateway.Gateway.prototype._getRemoteModeInfo=function(){var b=this.hashCode(),a=xnm.aio.gateway.RemoteModeSetting.getRemoteModeSetting(b),b=xnm.aio.gateway.RemoteModeSetting.getRemoteModeState(b);return{raSetting:a,raState:b}};xnm.aio.gateway.Gateway.prototype._getCloudForwardInfo=function(){return{cfSetting:this._cfSetting?this._cfSetting:"off"}};
xnm.aio.gateway.Gateway.prototype.learn=function(b,a){if(b&&b.type){var c=b.type;"HM"==c&&"EA"==this.toJSON().version&&(c="HM_X");var d,e;for(e in xnm.aio.gateway.systems)if(xnm.aio.gateway.systems.hasOwnProperty(e)){var f=xnm.aio.gateway.systems[e];if(f&&f.DM&&f.DM.TYPE&&f.DM.TYPE.toUpperCase()==c.toUpperCase()&&f.learn){d=f;break}}d?d.learn(this,b,a):a&&a(Error("type "+b.type+" has no learn function"))}else a&&a(Error("learn option foramt invalid"))};
xnm.aio.gateway.Gateway.prototype.regist=function(b,a){if(b&&b.type){var c,d;for(d in xnm.aio.gateway.systems)if(xnm.aio.gateway.systems.hasOwnProperty(d)){var e=xnm.aio.gateway.systems[d];if(e&&e.DM&&e.DM.TYPE&&e.DM.TYPE.toUpperCase()==b.type.toUpperCase()&&e.regist){c=e;break}}c?c.regist(this,b,a):a&&a(Error("type "+b.type+" has no regist function"))}else a&&a(Error("regist device option foramt invalid"))};
xnm.aio.gateway.Gateway.prototype.sysSupported=function(b){switch(b){case "QA":if(!xnm.aio.gateway.Gateway._supportSystem(this.toJSON(),b))return!1;b=parseInt(this._hwv,16);var a=this._swv?parseInt(this._swv,16):0;if(243==b){if(!a||248!=a)return!1}else{if(225==b)return!0;if(249>b)return!1}return(b=this._getRFMode())&&!b.HMMODE?!1:!0;default:return xnm.aio.gateway.Gateway._supportSystem(this.toJSON(),b)}};
xnm.aio.gateway.Gateway.prototype.forcePollDevices=function(b,a){if(b&&b.length){for(var c=[],d=0;d<b.length;d++){var e=b[d];e&&"ZWAVE2"==e.type&&e.address&&c.push(e.address)}xnm.aio.gateway.systems.ZWAVE2.forcePollDevices(this,c,function(b,c){a&&a(b,c)})}else a&&a()};
xnm.aio.gateway.Gateway.prototype.toJSON=function(){return{sys:xnm.aio.gateway.DM.SYS,name:this._name,ip:this._ip,port:this._port,username:this.user,password:this.password,mac:this._mac,sid:this._sid,version:this._getGatewayVersion(),firmware:this._ver?this._ver:"",rfmode:this._rfm?this._rfm:"",gateway_vendor:this.gateway_vendor}};
xnm.aio.gateway.Gateway.prototype.hashCode=function(){var b=function(a){var b=0,c,g,h;if(!a)return b;c=0;for(h=a.length;c<h;c++)g=a.charCodeAt(c),b=31*b+g,b|=0;return b},a=this.toJSON(),c;c=0+b(a.ip);c=31*c+parseInt(a.port?a.port:80);c=31*c+b(a.username);c=31*c+b(a.password);c=31*c+b(a.version);return c=31*c+b(a.sid)};xnm.aio.gateway.Gateway.prototype.equalsTo=function(b){return b&&b instanceof xnm.aio.gateway.Gateway?this.hashCode()==b.hashCode():!1};
xnm.aio.gateway.Gateway.prototype.forwardExecuteCommand=function(b,a,c,d){c&&c.value?a||b?this._doV5RemoteRequest("POST","/executeCommand",null,JSON.stringify({data:{device:a,gateway:b,command:c}}),function(a){d&&d(a)}):d&&d(Error("both gateway and device json is null")):d&&d(Error("command json invalid"))};
xnm.aio.gateway.Gateway.prototype.forwardGetStates=function(b,a,c,d){c&&0!=c.length?a||b?this._doV5RemoteRequest("POST","/getStates",null,JSON.stringify({data:{device:a,gateway:b,deviceList:c}}),function(a,b){if(a)d&&d(a);else if(b&&b.data)try{var c=JSON.parse(b.data);d&&d(null,c)}catch(h){d&&d(h)}else d&&d(Error("response invalid"))}):d&&d(Error("both gateway and device json is null")):d&&d(Error("device list is invalid"))};
xnm.aio.gateway.Gateway.prototype._isV5=function(){return this._hwv&&"e"==this._hwv.charAt(0).toLowerCase()};xnm.aio.gateway.Gateway.prototype._isV5P=function(){return this._hwv&&"ea"==this._hwv.toLowerCase()};
xnm.aio.gateway.Gateway.prototype._executeRequest=function(b,a,c,d){var e=function(a){for(var b in xnm.aio.gateway.Admin.detectedGateways){var c=xnm.aio.gateway.Admin.detectedGateways[b];if(c&&c.IP==a)return!0}return!1};c||(c={});if("undefined"==typeof c.timeout||null==c.timeout)c.timeout=this.timeout;if(/\b(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\b/.test(this._ip)){var f=this;if(this._isV5()&&
this._sid){var g=this.hashCode(),h=xnm.aio.gateway.RemoteModeSetting.getRemoteModeSetting(g),m=xnm.aio.gateway.RemoteModeSetting.getRemoteModeState(g);switch(h){case "on":xnm.aio.gateway.RemoteModeSetting.setRemoteModeState(g,"remote");this._executeRequestRemote(b,a,c,d);break;case "off":xnm.aio.gateway.RemoteModeSetting.setRemoteModeState(g,"local");this._executeRequestLocal(b,a,c,d);break;case "auto":"remote"==m?e(this._ip)?(xnm.aio.gateway.RemoteModeSetting.setRemoteModeState(g,"local"),this._executeRequestLocal(b,
a,c,d)):this._executeRequestRemote(b,a,c,d):e(this._ip)?this._executeRequestLocal(b,a,c,d):this._executeRequestLocal(b,a,c,function(e,h){e?(xnm.aio.gateway.RemoteModeSetting.setRemoteModeState(g,"remote"),f._executeRequestRemote(b,a,c,d)):d&&d(e,h)})}}else this._executeRequestLocal(b,a,c,d)}else this._executeRequestLocal(b,a,c,d)};xnm.aio.gateway.Gateway.prototype._executeRequestLocal=function(b,a,c,d){this._isV5()?this._executeRequestV5(b,a,c,d):this._executeRequestLegacy(b,a,c,d)};
xnm.aio.gateway.Gateway.prototype._executeRequestLegacy=function(b,a,c,d){var e="/command?XC_FNC="+b;this.user&&this.password&&(e+="&XC_USER="+encodeURIComponent(this.user)+"&XC_PASS="+encodeURIComponent(this.password));if(a)for(var f in a)a.hasOwnProperty(f)&&(e+="&"+f+"="+encodeURIComponent(a[f]));var g=d;c||(c={});c.host=this._ip;c.port=this._port;c.path=e;c.method="GET";var h="",m=this,l=require("http").request(c,function(e){e.setEncoding("utf8");e.on("data",function(a){h+=a});e.on("end",function(){var f,
l;if(200!=e.statusCode)f=Error("request failed with status code:"+e.statusCode);else if(h&&8<=h.length&&"{XC_SUC}"==h.substr(0,8)){if(8<h.length)try{l=JSON.parse(h.substr(8))}catch(t){f=t}}else if(h&&8<=h.length&&"{XC_ERR}"==h.substr(0,8)){var q;8<h.length&&(q=h.substr(8));f=Error("request result error: "+q)}else if(h&&8<=h.length&&"{XC_AUT}"==h.substr(0,8))f=Error("request authentication error"),f.code="AUT";else{try{var r=JSON.parse(h);if(r&&(r.XC_ERR||r.XC_SUC)){m._hwv="e1";m._executeRequestV5(b,
a,c,d);return}}catch(v){}f=Error("request result invalid error: "+h)}g&&(g(f,l),g=null)})});c.timeout&&l.setTimeout&&l.setTimeout(c.timeout,function(){l.abort()});if(l.on&&"function"==typeof l.on)l.on("error",function(a){g&&g(a);g=null});l.end()};
xnm.aio.gateway.Gateway.prototype._executeRequestV5=function(b,a,c,d){var e;"/"==b.charAt(0)?e=b:(e="/cmd",a||(a={}),a.XC_FNC=b);if(this._pwdHash)a||(a={}),a.at=this._pwdHash;else if(this.user&&this.password){var f=xnm.aio.gateway.Admin.V5.hash(this.password);a||(a={});a.at=f}if(a){"?"!=e.charAt(e.length-1)&&(e+="?");var f="",g;for(g in a)a.hasOwnProperty(g)&&(f&&(f+="&"),f+=g+"="+encodeURIComponent(a[g]));e+=f}var h=this;e="http://"+this._ip+":"+this._port+e;this._logger.log("trace","send to url:"+
e);var m=d;$.ajax({url:e,type:"GET",timeout:c?c.timeout:2E3,dataType:"text",cache:!0,success:function(a){h._logger.log("trace","http request success:"+a);var b,c;try{if(c=JSON.parse(a),c.XC_ERR){var d=c.XC_ERR.code?c.XC_ERR.code:"-1";b=Error(c.XC_ERR.msg?c.XC_ERR.msg:"gateway request error");b.code=d;c=c.XC_ERR}else c.XC_SUC?c=c.XC_SUC:b=Error("gateway reponse format error")}catch(e){b=e}m&&m(b,c);m=null},error:function(e,f){var g="http request error:"+(e?e.status:"0")+"-"+f;h._logger.log("trace",
g);e&&404==e.status?(h._hmv="f9",h._executeRequestLegacy(b,a,c,d)):m&&(m(Error(g)),m=null)}})};
xnm.aio.gateway.Gateway.prototype._executeRequestV5_Post=function(b,a,c,d){var e;"/"==b.charAt(0)?e=b:(e="/cmd",a||(a={}),a.XC_FNC=b);if(this._pwdHash)a||(a={}),a.at=this._pwdHash;else if(this.user&&this.password){var f=xnm.aio.gateway.Admin.V5.hash(this.password);a||(a={});a.at=f}var g=this;e="http://"+this._ip+":"+this._port+e;this._logger.log("trace","send to url:"+e);this._logger.log("trace","with body:"+JSON.stringify(a));var h=d;$.ajax({url:e,type:"POST",timeout:c?c.timeout:2E3,contentType:"application/json; charset=utf-8",
data:JSON.stringify(a),dataType:"text",cache:!0,success:function(a){g._logger.log("trace","http request success:"+a);var b,c;try{if(c=JSON.parse(a),c.XC_ERR){var d=c.XC_ERR.code?c.XC_ERR.code:"-1";b=Error(c.XC_ERR.msg?c.XC_ERR.msg:"gateway request error");b.code=d;c=c.XC_ERR}else c.XC_SUC?c=c.XC_SUC:b=Error("gateway reponse format error")}catch(e){b=e}h&&h(b,c);h=null},error:function(e,f){var k="http request error:"+(e?e.status:"0")+"-"+f;g._logger.log("trace",k);e&&404==e.status?(g._hmv="f9",g._executeRequestLegacy(b,
a,c,d)):h&&(h(Error(k)),h=null)}})};xnm.aio.gateway.Gateway.prototype._executeRequestRemote=function(b,a,c,d){this._isV5()?this._executeV5Remote(b,a,c,d):d&&d()};xnm.aio.gateway.Gateway.prototype._executeV5Remote=function(b,a,c,d){var e;"/"==b.charAt(0)?e=b:(e="/cmd",a||(a={}),a.XC_FNC=b);if(a){"?"!=e.charAt(e.length-1)&&(e+="?");b="";for(var f in a)a.hasOwnProperty(f)&&(b&&(b+="&"),b+=f+"="+encodeURIComponent(a[f]));e+=b}this._doV5RemoteRequest("GET",e,c,null,d)};
xnm.aio.gateway.Gateway.prototype._doV5RemoteRequest=function(b,a,c,d,e){if(this._sid)if(this.password){c=xnm.aio.gateway.Admin.V5._cloudServerUrl+"/rapi/live/";c+=this._sid;this._pwdHash||(this._pwdHash=xnm.aio.gateway.Admin.V5.hash(this.password));var f=xnm.aio.gateway.Admin.V5._userName+":"+this._pwdHash,f=(new Buffer(f)).toString("base64");c+=a;var g=this;this._logger.log("trace","send to url:"+c);var h=e;$.ajax({headers:{Authorization:"Basic "+f},url:c,type:b,data:d,timeout:8E3,dataType:"text",
cache:!0,success:function(a){g._logger.log("trace","http request success:"+a);var b,c;try{c=JSON.parse(a),c.XC_ERR?(b=Error("gateway request error"),c=c.XC_ERR):c.XC_SUC?c=c.XC_SUC:b=Error("gateway reponse format error")}catch(d){b=d}h&&h(b,c);h=null},error:function(a,b){var c="http request error:"+(a?a.status:"0")+"-"+b;g._logger.log("trace",c);h&&(h(Error(c)),h=null)}})}else e&&e(Error("no password"));else e&&e(Error("no sid"))};
xnm.aio.gateway.Gateway.prototype._executeLegacyRemote=function(b,a,c,d){var e=XC.getHexVal(Math.floor(254*Math.random()+1),2)+"AA",e=e+XC.getHexVal(Math.round((new Date).getTime()/1E3),8),e=e+"01";c="c";var f="POST",g=null,h=null,m=null;"SendSC"==b?(h=a.data,(b=xnm.aio.gateway.SYSID[a.type])&&(g=XC.getHexVal(b,2))):"Send2"==b?(g="2b",h=a.code,m="",a.ir?m+=a.ir:m+="00",a.rf?m+=a.rf:m+="00"):"SendFHT80b"==b?(g="07",h=args.tsoll?args.hc1+args.hc2+"ff"+XC.getHexVal(parseInt(a.tsoll),2):args.hc1+args.hc2+
XC.getHexVal(a.modus,2)+"ff"):"saveGroup"==b?(g="2c",h=a.id+XC.getHexVal(a.active,2)):"GetStates"==b&&(g="getstates",f="GET",c="d");if(g){b=null;if(h){b=h.length;m&&(b+=m.length);e+=XC.getHexVal(Math.ceil(b/2)+2,2);e=e+g+XC.getHexVal(Math.ceil(b/2),2);e+=h;m&&(e+=m);!e.length%2&&(e+="0");for(g=0;g<e.length%32;g++)e+="0";g=require("x.crypt.js");g.AES.setSize(128);h=g.AES.h2a(this._rakey);m=g.AES.h2a("764c4518E9055b5239f5a3ff62937234");e=g.AES.encrypt(g.AES.h2a(e),h,m);b=g.AES.a2h(e)}XC.debugf("URL: http://webservice.aio-control.com/ra/"+
c+"?sid="+this._sid);$.ajax({type:f,url:"http://webservice.aio-control.com/ra/"+c+"?sid="+this._sid,data:b,contentType:"text/plain",timeout:5E3,cache:!1,complete:function(a){a.responseText&&(a=a.responseText);a&&8<=a.length&&"{XC_SUC}"==a.substr(0,8)&&8<a.length&&$.parseJSON(a.substr(8));d&&d()}})}else d&&d.call()};xnm.aio.gateway.Gateway.prototype._learnCode=function(b){xnm.aio.gateway.systems.Code.learn(this,null,b)};
xnm.aio.gateway.Gateway.prototype._executeFunc=function(b,a,c,d){b="http://"+this._ip+":"+this._port+"/command?XC_FNC="+b;this.user&&this.password&&(b+="&XC_USER="+this.user+"&XC_PASS="+this.password);if(a)for(var e in a)a.hasOwnProperty(e)&&(b+="&"+e+"="+a[e]);a=c;if(!a||0>a)a=this.timeout;if(!a||0>a)a=2E3;$.ajax({url:b,timeout:a,cache:!1,success:function(a){var b,c;if(!a||8>a.length)c=Error("gateway return:"+a);else if("{XC_ERR}"==a.substr(0,8))c="",8<a.length&&(c=a.substr(8)),c=Error("gateway return XC_ERR:"+
c);else if("{XC_AUT}"==a.substr(0,8))c=Error("gateway return XC_AUT"),c.reason="AUTH";else if("{XC_SUC}"==a.substr(0,8)){if(8<a.length)try{b=JSON.parse(a.substr(8))}catch(e){c=Error("gateway return not json:"+a)}}else c=Error("gateway return unknow:"+a);d&&d(c,b)},error:function(a,b,c){a=c?Error(c):b?Error(b):Error("http request error");d&&d(a)}})};
xnm.aio.gateway.Gateway.prototype._getVID=function(b){this._isV5()?this._getInfo(function(a,c){a?b&&b(a):c&&c.vid?b&&b(null,c.vid):b&&b(Error("data has no VID"))}):this._getSI(function(a,c){a?b&&b(a):c&&c.VID?b&&b(null,c.VID):b&&b(Error("data has no VID"))})};xnm.aio.gateway.Gateway.prototype._getSI=function(b){this._executeRequest("getSI",null,null,function(a,c){a?b&&b(a):c?b&&b(null,c):b&&b(Error("data is empty"))})};
xnm.aio.gateway.Gateway.prototype._getInfo=function(b){this._executeRequest("/info",null,null,function(a,c){a?b&&b(a):c?b&&b(null,c):b&&b(Error("data is empty"))})};xnm.aio.gateway.Gateway.prototype._getGatewayVersion=function(){return(this._hwv?this._hwv:"")+(this._swv?this._swv:"")};xnm.aio.gateway.Gateway.prototype._getRFMode=function(){return xnm.aio.gateway.Gateway._getRFMode(this._getGatewayVersion(),this._rfm)};
xnm.aio.gateway.Gateway.prototype._supportIrCodeTrigger=function(){var b=this._ver;b||(b=this._getGatewayVersion());if(!b)return!0;b=b.toUpperCase();if(2>b.length)return!0;var a=b.substr(0,2),c;4<=b.length&&(c=b.substr(2,2));return"F1"==a||"F2"==a||"F4"==a||"F3"==a&&"F8"!=c?!1:!0};
xnm.aio.gateway.Gateway.prototype._setLED=function(b,a){var c="01";switch(b){case "ledOn":c+="05";break;case "ledOff":c+="00";break;case "ledWhite":c+="05";break;case "ledRed":c=this._isV5()?c+"03":c+"01";break;case "ledGreen":c=this._isV5()?c+"01":c+"03";break;case "ledBlue":c+="02";break;case "ledYellow":c+="04";break;case "ledCyan":c+="07";break;case "ledPurple":c+="06";break;default:a&&a(Error("no such led command"));return}this._executeRequest("SendSC",{type:"RGB",data:c},null,function(b){a&&
a(b)})};
xnm.aio.gateway.Gateway.prototype.getVendor=function(b){var a;if(this._vid){var c=parseInt(this._vid,16);c==xnm.aio.gateway.VID.NUEVA?a="nueva":c==xnm.aio.gateway.VID.BRELAG?a="brelag":c==xnm.aio.gateway.VID.WIR&&(a="wir");if(a){b&&b(null,a);return}}a=this._getGatewayVersion();a=a.toUpperCase();"F3F2"==a||"FC"==a?b&&b(null,"siegenia"):"F3F5"==a||"FB"==a?b&&b(null,"internorm"):"FD"==a?b&&b(null,"nueva"):"E2"==a?b&&b(null,"kopp"):this._getVID(function(a,c){if(a)b&&b(a);else{var f="mediola";c&&(c=parseInt(c,
16),c==xnm.aio.gateway.VID.NUEVA?f="nueva":c==xnm.aio.gateway.VID.BRELAG?f="brelag":c==xnm.aio.gateway.VID.WIR&&(f="wir"));b&&b(null,f)}})};
xnm.aio.gateway.Gateway._getRFMode=function(b,a,c){var d={HMMODE:!1,FS20MODE:!1,KOPPMODE:!1,ABUSMODE:!1,RS2MODE:!1,WIRMODE:!1,SUPPORTS868:!0};if(!b)switch(c){case "siegenia":return d.HMMODE=!0,d.FS20MODE=!0,d;case "internorm":return d.HMMODE=!0,d;default:return{HMMODE:!0,FS20MODE:!0,KOPPMODE:!0,ABUSMODE:!0,RS2MODE:!0,WIRMODE:!1}}if(!b)return d;if(!a){if("E1"==b.toUpperCase()||"EA"==b.toUpperCase())return{HMMODE:!0,FS20MODE:!0,KOPPMODE:!0,ABUSMODE:!0,RS2MODE:!0,WIRMODE:!0,SUPPORTS868:!0};a=""}switch(b.toUpperCase()){case "F1":case "F3F0":case "F3":d.ABUSMODE=
!0;case "F2":case "F4":switch(a){case "03":d.KOPPMODE=!0;break;default:d.FS20MODE=!0}break;case "F3F3":d.ABUSMODE=!0;case "F3F6":case "F3F2":case "F3F5":d.HMMODE=!0;switch(a){case "03":d.KOPPMODE=!0;break;default:d.FS20MODE=!0}break;case "F3F8":case "F9":case "FA":"FA"==b.toUpperCase()&&(d.HMMODE=!0);switch(a){case "13":d.FS20MODE=!0;break;case "14":d.KOPPMODE=!0;break;case "15":d.ABUSMODE=!0;break;case "16":d.RS2MODE=!0;break;case "80":d.WIRMODE=!0;break;default:d.HMMODE=!0}break;case "E1":case "EA":b=
a.substr(0,2);a.substr(2,2);d.HMMODE=!0;d.SUPPORTS868=!0;switch(b){case "13":d.FS20MODE=!0;break;case "14":d.KOPPMODE=!0;break;case "15":d.ABUSMODE=!0;break;case "16":d.RS2MODE=!0;break;case "80":d.WIRMODE=!0;break;default:d.HMMODE=!0}break;case "FB":d.HMMODE=!0;break;case "FC":d.HMMODE=!0;break;case "FD":d.SUPPORTS868=!1}return d};xnm.aio.gateway.Gateway._supportRemoteMode=function(b){return b&&b.version&&"E"==b.version.toUpperCase().charAt(0)?b.sid:!1};
xnm.aio.gateway.Gateway._supportSystem=function(b,a){var c;if(b.gateway_vendor){if(c=b.version,!c)switch(b.gateway_vendor){case "siegenia":c="F3F2";break;case "internorm":c="F3F5";break;case "wir":c="E1";break;default:c="F9"}}else(c=b.version)||(c="F9");return 1==function(a,b){if(-1!=["ENOCEAN","KNX","ZIGBEE","ZWAVE","ZWAVE2"].indexOf(b.toUpperCase()))return"EA"==a.toUpperCase()?1:0;if("E2"==a.toUpperCase()&&("GV"==b.toUpperCase()||"MX"==b.toUpperCase()))return-1;var c=xnm.aio.gateway.REV_SYS_MAP[0].indexOf(a.toUpperCase());
if(-1==c)return 1;for(var g=1;g<xnm.aio.gateway.REV_SYS_MAP.length;g++){var h=xnm.aio.gateway.REV_SYS_MAP[g];if(h&&h[0]==b.toUpperCase()&&h.length>c)return h[c]}return 1}(c,a)};
xnm.aio.gateway.GatewayV5Plus=function(){var b=function(a,b){xnm.aio.gateway.Gateway.call(this,a,b);this._hwv="EA"};b.prototype=new xnm.aio.gateway.Gateway;b.prototype.constructor=b;b.prototype.learn=function(a,b){a&&a.type?"HM"==a.type.toUpperCase()?xnm.aio.gateway.systems.HM_X.learn(this,a,b):xnm.aio.gateway.Gateway.prototype.learn.call(this,a,b):b&&b(Error("learn option foramt invalid"))};return b}();
xnm.aio.gateway.Util={contains:function(b,a){if(!b)return null;for(var c=b.length;c--;)if(b[c]===a)return!0;return!1},getHexVal:function(b,a){for(var c=0>b,d=(0>b?4294967295+b+1:b).toString(16).toUpperCase();d.length<a;)d=(c?"F":"0")+d;return d},compareSoftwareVersion:function(b,a){var c,d,e,f;e=b.split(".");f=a.split(".");c=parseInt(e[0]);d=parseInt(f[0]);if(c!=d)return c>d?1:-1;c=parseInt(e[1]);d=parseInt(f[1]);if(c!=d)return c>d?1:-1;e=parseInt(e[2].replace(/\D/g,""));f=parseInt(f[2].replace(/\D/g,
""));return e!=f?e>f?1:-1:0}};
xnm.aio.gateway.systems.NTH={addSensor:function(b,a,c){b._executeRequest("addSensor",{type:this.DM.TYPE,adr:a},{timeout:2E4},function(a){c&&c(a)})},delSensor:function(b,a,c){b._executeRequest("delSensor",{type:this.DM.TYPE,adr:a},{timeout:2E4},function(a){c&&c(a)})},regist:function(b,a,c){!a||!a.address||"01"!=a.address&&"02"!=a.address&&"03"!=a.address?c&&c(Error("regist device option foramt invalid")):this.addSensor(b,a.address,c)},handleStateCreator:function(b,a,c){return a&&a.value?(b=this._handleState(b,
c))?b[a.value]:null:null},_handleState:function(b,a){if(!(a&&a.type&&"nth"==a.type.toLowerCase()&&a.adr&&a.state&&b&&b.address&&b.type&&"nth"==b.type.toLowerCase())||b.address.toLowerCase()!=a.adr.toLowerCase())return null;var c=a.state;0<a.state.indexOf(":")&&(c=a.state.split(":")[0]);var d=null;6<=c.length&&(d=parseInt(c.substr(0,4),16),c=parseInt(c.substr(4,2),16),32768<=d&&(d=0-(d^65535)),d=(d/10).toFixed(1),d={temp:d,hum:c});return d},parseTriggerCode:function(b,a){if(!b||18>b.length||!a)return null;
var c=b.substr(0,2);if(!a.address||a.address.toUpperCase()!=c.toUpperCase())return null;var d=b.substr(2,8),c=parseInt(d.substr(0,2),16);switch(c){case 1:c=">";break;case 2:c=">=";break;case 3:c="<";break;case 4:c="<=";break;case 5:c="!=";break;default:c="=="}var e=parseInt(d.substr(2,2),16),d=parseInt(d.substr(4,4),16);switch(e){case 1:32768<=d&&(d=0-(d^65535)),d=(d/10).toFixed(1)}return{value:d,comparator:c,dpt:e}},generateTriggerCode:function(b,a){if(!(b&&null!=b.value&&"undefined"!=typeof b.value&&
b.comparator&&b.dpt&&a&&a.address))return null;var c=a.address,d=0,e=5;switch(b.comparator){case ">":d=1;e=4;break;case ">=":d=2;e=3;break;case "<":d=3;e=2;break;case "<=":d=4;e=1;break;case "!=":d=5;e=0;break;default:d=0,e=5}var d=xnm.aio.gateway.Util.getHexVal(d,2),e=xnm.aio.gateway.Util.getHexVal(e,2),f=xnm.aio.gateway.Util.getHexVal(parseInt(b.dpt),2),g=parseFloat(b.value);1==b.dpt&&(g=Math.round(10*g),0>g&&(g=0-g^65535));g=xnm.aio.gateway.Util.getHexVal(g,4);return c+(d+f+g)+(e+f+g)},DM:{TYPE:"NTH",
MAP:{status:[{type:"float",name:"temperature",ref:{value:"temp",ext:"%f"}},{type:"int",name:"humidity",ref:{value:"hum",ext:"%d",extMeta:"0-100"}}],event:[{type:"float",name:"temperature",ref:{dpt:1,value:"%f",comparator:"=="}},{type:"int",name:"humidity",ref:{dpt:2,value:"%d",comparator:"=="}}]},getGatewayDeviceType:function(b){return{type:this.TYPE,name:"NUEVA Temperature Sensor"}},getCommandStatusMap:function(){return this.MAP},createDevice:function(b,a,c){a=xnm.aio.gateway.DM.DMError;var d=xnm.aio.gateway.DM.DMError.ERROR_CODE;
!b.address||"01"!=b.address&&"02"!=b.address&&"03"!=b.address?c(new a(d.INVALID,"parameter address is invalid")):(b=JSON.parse(JSON.stringify(b)),c(null,b))},updateDevice:function(b,a,c){a=xnm.aio.gateway.DM.DMError;var d=xnm.aio.gateway.DM.DMError.ERROR_CODE;!b.address||"01"!=b.address&&"02"!=b.address&&"03"!=b.address?c(new a(d.INVALID,"parameter address is invalid")):(b=JSON.parse(JSON.stringify(b)),c(null,b))},deleteDevice:function(b,a,c,d){d&&d(null,JSON.parse(JSON.stringify(a)));xnm.aio.gateway.systems.NTH.delSensor(b,
a.address,function(){})}}};
xnm.aio.gateway.systems.RC={regist:function(b,a,c){a&&a.address?"siren"==a.data?c&&c():this.addSensor(b,a.address,c):c&&c(Error("regist device option foramt invalid"))},delSensor:function(b,a,c){b._executeRequest("delSensor",{type:this.DM.TYPE,adr:a},{timeout:2E4},function(a){c&&c(a)})},addSensor:function(b,a,c){b._executeRequest("AddSensor",{type:this.DM.TYPE,adr:a},{timeout:2E4},function(a){c&&c(a)})},learn:function(b,a,c){if(b){var d,e=[],f=this;if(a&&a.devices)for(d=a.devices.length;d--;)a.devices[d]&&
a.devices[d].address&&e.push(a.devices[d].address);switch(a?a.type:null){case "siren":this._learnSiren(b,e,c);break;default:this._learnSensor(b,function(a,d){a?c&&c(a):f.addSensor(b,d.address,function(a){c&&c(a,{address:d.address})})})}}else c&&c(Error("gateway is null"))},_learnSiren:function(b,a,c){var d=this._generateFreeAdr(a);b._executeRequest("SendSC",{type:this.DM.TYPE,adr:d,data:d+"29"},{timeout:2E4},function(a){a?c&&c(a):c&&c(a,{address:d})})},_learnSensor:function(b,a){b._executeRequest("LearnSC",
{type:this.DM.TYPE},{timeout:2E4},function(b,d){b?a&&a(b):!d.CODE||4>=d.CODE.length?a&&a(Error("response format invalid")):a&&a(null,{address:d.CODE.substr(0,4)})})},_generateFreeAdr:function(b){for(var a,c=!1;!c;)a=this._getHexVal(Math.floor(65535*Math.random()),4),c=!this._contains(b,a);return a},executeCommandCreator:function(b,a,c,d){a?c&&c.value?a&&a.address?this._executeCommand(b,a,c,d):d&&d(Error("it device address is empty")):d&&d(Error("it device command is empty")):d&&d(Error("it device is null"))},
_executeCommand:function(b,a,c,d){var e;if("resetAll"==c.value)e="resetROIS",a={};else{e="SendSC";a=this._buildData(b,a,c);if(!a){d&&d(Error("command format invalid"));return}a={type:this.DM.TYPE,data:a}}b._executeRequest(e,a,null,function(a){d&&d(a)})},buildQuery:function(b,a,c){var d;if("resetAll"==c.value)d="resetROIS",b={};else{d="SendSC";b=this._buildData(b,a,c);if(!b)return null;b={type:this.DM.TYPE,data:b}}b.XC_FNC=d;return b},_buildData:function(b,a,c){if(a&&a.address){var d;"on"==c.value?
d="29":"off"==c.value&&(d="89");return d?a.address+d:null}},_parseData:function(b,a){if(!b||2>=b.length||!a||!a.address||!a.type||a.type.toUpperCase()!=this.DM.TYPE)return null;var c=b.substr(0,b.length-2),d=b.substr(b.length-2);if(c.toUpperCase()!=a.address.toUpperCase())return null;c={};switch(d){case "29":c.value="on";break;case "89":c.value="off"}return c.value?c:null},handleStateCreator:function(b,a,c){if(!a||!a.value)return null;c=this._handleState(b,c);if(!c)return null;b={status:c[a.value]};
if(a.extra){var d;if(a=c[a.extra]){switch(a){case "sabotage":d="notification";break;case "battery":d="battery";break;case "timeout":d="clock"}b.info=d}return b}return c[a.value]},_handleState:function(b,a){if(!(a.type&&"rc"==a.type.toLowerCase()&&a.adr&&a.state&&b.address&&b.address&&b.address.toLowerCase()==a.adr.toLowerCase()))return null;var c={},d=a.state,e=d.indexOf(":");0<e&&(d=d.substr(0,e));d=parseInt(d,16);e=d>>6&1;switch(b.data){case "contact":c.state=e?"open":"closed";break;default:c.alarm=
e?"alarm":"ok"}c.error=d>>1&1?"sabotage":d>>2&1?"timeout":d&1?"battary":"no_error";return c},_handleUdpState:function(b,a){if(!a||!a.data||6>a.data.length||!b||!b.type||b.type.toUpperCase()!=this.DM.TYPE||!b.address)return null;var c=a.data.substr(0,4),d=a.data.substr(4,2);if(b.address.toUpperCase()!=c.toUpperCase())return null;c={};"00"==d.value?"contact"==b.data?c.state="closed":c.alarm="ok":"01"==d.value?"contact"==b.data?c.state="open":c.alarm="alarm":"02"==d.value?c.error="battery":"03"==d.value?
c.error="sabotage":"05"==d.value&&(c.error="timeout");return c},parseTriggerCode:function(b,a){if(!b||6>b.length||!a||!a.address)return null;var c=b.substr(0,4);if(a.address.toUpperCase()!=c.toUpperCase())return null;var c=b.substr(4,2),d={};"00"==c?d.value="contact"==a.data?"closed":"ok":"01"==c?d.value="contact"==a.data?"open":"alarm":"02"==c?d.value="battery":"03"==c?d.value="sabotage":"05"==c&&(d.value="timeout");return d.value?d:null},generateTriggerCode:function(b,a){if(!(b&&b.value&&a&&a.address))return null;
var c;switch(b.value){case "ok":case "closed":c="00";break;case "alarm":case "open":c="01";break;case "battery":c="02";break;case "sabotage":c="03";break;case "timeout":c="05"}return c?a.address+c:null},generateActionCode:function(b,a){return this._buildData(null,a,b)},parseActionCode:function(b,a){return this._parseData(b,a)},_contains:xnm.aio.gateway.Util.contains,_getHexVal:xnm.aio.gateway.Util.getHexVal,DM:{TYPE:"RC",MAP:{siren:{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",
ref:{value:"off"}}]},contact:{command:[{type:"enum",name:"reset sensor",ref:{value:"resetAll"}}],status:[{type:"enum",name:"state",ref:{value:"state",options:["closed","open"]}},{type:"enum",name:"error",ref:{value:"error",options:["no_error","battery","timeout","sabotage"]}}],event:[{type:"enum",name:"closed",ref:{value:"closed"}},{type:"enum",name:"open",ref:{value:"open"}},{type:"enum",name:"battery low",ref:{value:"battery"}},{type:"enum",name:"sabotage",ref:{value:"sabotage"}},{type:"enum",name:"timeout",
ref:{value:"timeout"}}],ipevt:[{type:"enum",name:"state",ref:{value:"state",options:["closed","open"]}},{type:"enum",name:"error",ref:{value:"error",options:["no_error","battery","timeout","sabotage"]}}]},sensor:{command:[{type:"enum",name:"reset sensor",ref:{value:"resetAll"}}],status:[{type:"enum",name:"alarm",ref:{value:"alarm",options:["ok","alarm"]}},{type:"enum",name:"error",ref:{value:"error",options:["no_error","battery","timeout","sabotage"]}}],event:[{type:"enum",name:"alarm",ref:{value:"alarm"}},
{type:"enum",name:"battery low",ref:{value:"battery"}},{type:"enum",name:"sabotage",ref:{value:"sabotage"}},{type:"enum",name:"timeout",ref:{value:"timeout"}}],ipevt:[{type:"enum",name:"alarm",ref:{value:"alarm",options:["ok","alarm"]}},{type:"enum",name:"error",ref:{value:"error",options:["no_error","battery","timeout","sabotage"]}}]}},getGatewayDeviceType:function(){return[{type:this.TYPE,name:"Roiscok",subtypes:[{id:"Siren",data:"siren"},{id:"Contact Sensor",data:"contact"},{id:"Motion Sensor",
data:"motion"},{id:"Smoke Sensor",data:"smoke"},{id:"General Sensor",data:"sensor"}]},{type:this.TYPE,name:"Nueva",subtypes:[{id:"Contact Sensor",data:"contact"},{id:"Motion Sensor",data:"motion"},{id:"Smoke Sensor",data:"smoke"}]}]},getCommandStatusMap:function(b){if(!b||!b.data)return null;var a=b.data;if("smoke"==b.data||"motion"==b.data)a="sensor";a=this.MAP[a];if(!a)return null;a=JSON.parse(JSON.stringify(a));if(a.status)for(var c=0;c<a.status.length;c++)"error"!=a.status[c].ref.value&&(a.status[c].ref.extra=
"error");if("smoke"==b.data&&a.event){b=-1;for(c=0;c<a.event.length;c++)if(a.event[c]&&a.event[c].ref&&"sabotage"==a.event[c].ref.value){b=c;break}-1!=b&&a.event.splice(b,1)}return a},getIPevtMap:function(b){if(!b||!b.data)return null;var a=b.data;if("smoke"==b.data||"motion"==b.data)a="sensor";return(b=this.MAP[a])?{ipevt:b.ipevt}:null},getActionMap:function(b){if(!b||!b.data)return null;var a=b.data;if("smoke"==b.data||"motion"==b.data)a="sensor";b=this.MAP[a];if(!b)return null;b=JSON.parse(JSON.stringify(b));
a={command:[],status:b.status};if(b.command)for(var c=0;c<b.command.length;c++)"resetAll"!=b.command[c].ref.value&&a.command.push(b.command[c]);return a},createDevice:function(b,a,c){a=xnm.aio.gateway.DM.DMError;var d=xnm.aio.gateway.DM.DMError.ERROR_CODE;b.address?b.data?(b=JSON.parse(JSON.stringify(b)),c(null,b)):c(new a(d.INVALID,"parameter data is invalid")):c(new a(d.INVALID,"parameter address is invalid"))},updateDevice:function(b,a,c){a=xnm.aio.gateway.DM.DMError;var d=xnm.aio.gateway.DM.DMError.ERROR_CODE;
b.address?b.data?(b=JSON.parse(JSON.stringify(b)),c(null,b)):c(new a(d.INVALID,"parameter data is invalid")):c(new a(d.INVALID,"parameter address is invalid"))},deleteDevice:function(b,a,c,d){d&&d(null,JSON.parse(JSON.stringify(a)));xnm.aio.gateway.systems.RC.delSensor(b,a.address,function(){})}}};
xnm.aio.gateway.systems.RV={delSensor:function(b,a,c){b._executeRequest("delSensor",{type:this.DM.TYPE,adr:a},{timeout:2E4},function(a){c&&c(a)})},learn:function(b,a,c){a||(a={});var d=this;a.timeout=2E4;b._executeRequest("LearnSC",{type:this.DM.TYPE},a,function(a,f){if(a)c&&c(a);else if(f.CODE){var g=d._resolveAddress(f.CODE);g?d._addSensor(b,g,function(a){c&&c(a,{address:g})}):c&&c(Error("gateway result address invalid"))}else c&&c(Error("response format invalid"))})},_resolveAddress:function(b){return 6<
b.length?b.substr(0,6):null},_addSensor:function(b,a,c){b._executeRequest("addSensor",{type:this.DM.TYPE,adr:a},{timeout:2E4},function(a){c&&c(a)})},handleStateCreator:function(b,a,c){return a&&a.value?(b=this._handleState(b,c))?b[a.value]:null:null},_handleState:function(b,a){if(!(a.type&&a.adr&&a.state&&a.type==this.DM.TYPE&&b.type&&b.type==this.DM.TYPE&&b.address&&b.address.toLowerCase()==a.adr.toLowerCase()))return null;var c=a.state.split(":");if(3>c.length)return null;var d=(parseInt(c[0],16)/
10).toFixed(1),e=(parseInt(c[1],16)/100).toFixed(1),f=c[2].substr(0,2),f=parseInt(f,16),g=100*f,f=c[2].substring(2),f=parseInt(f,16),c=((g+f)/100).toFixed(1);return{power:d,consumption:e,current:c}},_handleUdpState:function(b,a){if(!(a&&a.data&&b&&b.address&&b.type&&b.type.toUpperCase()==this.DM.TYPE)||a.data.substr(0,6).toUpperCase()!=b.address.toUpperCase())return null;var c=(parseInt(a.data.substr(10,4),16)/10).toFixed(1),d=(parseInt(a.data.substr(16,4),16)/100).toFixed(1),e=a.data.substr(6,2),
e=parseInt(e,16),f=100*e,e=a.data.substr(8,2),e=parseInt(e,16),f=((f+e)/100).toFixed(1);return{power:c,consumption:d,current:f}},DM:{TYPE:"RV",MAP:{status:[{type:"float",name:"power",ref:{value:"power"}},{type:"float",name:"consumption",ref:{value:"consumption"}},{type:"float",name:"current",ref:{value:"current"}}]},getGatewayDeviceType:function(b){return{type:this.TYPE,name:"revolt"}},getCommandStatusMap:function(){return this.MAP},createDevice:function(b,a,c){a=xnm.aio.gateway.DM.DMError;var d=
xnm.aio.gateway.DM.DMError.ERROR_CODE;b.address?(b=JSON.parse(JSON.stringify(b)),c(null,b)):c(new a(d.INVALID,"parameter address is invalid"))},updateDevice:function(b,a,c){a=xnm.aio.gateway.DM.DMError;var d=xnm.aio.gateway.DM.DMError.ERROR_CODE;b.address?(b=JSON.parse(JSON.stringify(b)),c(null,b)):c(new a(d.INVALID,"parameter address is invalid"))},deleteDevice:function(b,a,c,d){d&&d(null,JSON.parse(JSON.stringify(a)));xnm.aio.gateway.systems.RV.delSensor(b,a.address,function(){})}}};
xnm.aio.gateway.systems.PV={learn:function(b,a,c){a||(a={});var d=this;a.timeout=2E4;b._executeRequest("LearnSC",{type:this.DM.TYPE},a,function(a,b){if(a)c&&c(a);else if(b.CODE){var g=d._resolveAddress(b.CODE);g?c&&c(null,{address:g}):c&&c(Error("gateway result address invalid"))}else c&&c(Error("response format invalid"))})},_resolveAddress:function(b){return 8<b.length?b.substr(0,8):null},parseTriggerCode:function(b,a){if(!b||10>b.length||!a||!a.address)return null;var c=b.substr(0,8);if(a.address.toUpperCase()!=
c.toUpperCase())return null;var c=b.substr(8,2),d={};"04"==c?d.value="open":"05"==c?d.value="closed":"08"==c?d.value="fire":"01"==c&&(d.value="motion");return d.value?d:null},generateTriggerCode:function(b,a){if(!(b&&b.value&&a&&a.address))return null;var c;switch(b.value){case "fire":c="08";break;case "motion":c="01";break;case "open":c="04";break;case "closed":c="05"}return c?a.address+c:null},DM:{TYPE:"PV",MAP:{contact:{event:[{type:"enum",name:"open",ref:{value:"open"}},{type:"enum",name:"closed",
ref:{value:"closed"}}]},smoke:{event:[{type:"enum",name:"fire",ref:{value:"fire"}}]},motion:{event:[{type:"enum",name:"motion",ref:{value:"motion"}}]}},getGatewayDeviceType:function(b){var a=xnm.aio.gateway.Gateway._getRFMode(b.version,b.rfmode,b.gateway_vendor);b=!1;a&&a.ABUSMODE||(b=!0);a={type:this.TYPE,name:"ABUS Privest",subtypes:[]};a.subtypes.push({id:"Contact Sensor",data:"contact",rfmismatch:b});a.subtypes.push({id:"Smoke Detector",data:"smoke",rfmismatch:b});a.subtypes.push({id:"Motion Detector",
data:"motion",rfmismatch:b});return a},getCommandStatusMap:function(b){return b.data?this.MAP[b.data]:null},createDevice:function(b,a,c){a=xnm.aio.gateway.DM.DMError;var d=xnm.aio.gateway.DM.DMError.ERROR_CODE;b.address?(b=JSON.parse(JSON.stringify(b)),c(null,b)):c(new a(d.INVALID,"parameter address is invalid"))},updateDevice:function(b,a,c){a=xnm.aio.gateway.DM.DMError;var d=xnm.aio.gateway.DM.DMError.ERROR_CODE;b.address?(b=JSON.parse(JSON.stringify(b)),c(null,b)):c(new a(d.INVALID,"parameter address is invalid"))}}};
xnm.aio.gateway.systems.WS300={delSensor:function(b,a,c){b._executeRequest("delSensor",{type:this.DM.TYPE,adr:a},{timeout:2E4},function(a){c&&c(a)})},regist:function(b,a,c){if(a&&a.address&&a.manufacturer){switch(a.manufacturer){case "ks300":if("71"!=a.address){c&&c(Error("ks300 device address must be 71"));return}break;default:var d=parseInt(a.address);if(11>d||18<d){c&&c(Error("device address must be winthin 11-18"));return}}b._executeRequest("addSensor",{type:this.DM.TYPE,adr:a.address},null,function(a){c&&
c(a)})}else c&&c(Error("regist device option foramt invalid"))},_handleUdpState:function(b,a){if(!a||!a.data||10>a.data.length||!b||!b.type||b.type.toUpperCase()!=this.DM.TYPE)return null;var c=a.data.substr(0,2);if(!b.address||b.address!=c)return null;var d,e;d=a.data.substr(2,4);e=a.data.substr(6,4);d=[d,e];"71"==c&&(c=a.data.substr(10,4),e=a.data.substr(14,4),d.push(c),d.push(e));return this._handleState(b,d.join(":"))},handleStateCreator:function(b,a,c){return a&&a.value?(b=this._handleState(b,
c))?b[a.value]:null:null},_handleState:function(b,a){if(!a.type||"ws300"!=a.type.toLowerCase()||!a.adr||!a.state||b.address.toLowerCase()!=a.adr.toLowerCase())return null;var c=a.state.split(":");if(3==c.length||5==c.length){var d=parseInt(c[0],16);0<(d&32768)&&(d-=65536);var d=(d/10).toFixed(1),e=(parseInt(c[1],16)/10).toFixed(1),f,g;5==c.length&&(f=parseInt(c[2],16),g=parseInt(c[3],16));return 3==c.length&&5<parseInt(c[2],16)||5==c.length&&5<parseInt(c[4],16)?null:{temp:d,hum:e,wind:f,rain:g}}return null},
DM:{TYPE:"WS300",MAP:{ks300:{status:[{type:"float",name:"temperature",ref:{value:"temp",ext:"%f"}},{type:"float",name:"humidity",ref:{value:"hum",ext:"%f"}},{type:"int",name:"wind",ref:{value:"wind",ext:"%d"}},{type:"int",name:"rain",ref:{value:"rain",ext:"%d"}}]},general:{status:[{type:"float",name:"temperature",ref:{value:"temp",ext:"%f"}},{type:"float",name:"humidity",ref:{value:"hum",ext:"%f"}}]}},getGatewayDeviceType:function(b){return(b=xnm.aio.gateway.Gateway._getRFMode(b.version,b.rfmode,
b.gateway_vendor))&&b.FS20MODE?[{type:this.TYPE,name:"ASH 2200"},{type:this.TYPE,name:"S 300 TH"},{type:this.TYPE,name:"KS300"}]:null},getCommandStatusMap:function(b){return b&&"ks300"==b.manufacturer?this.MAP.ks300:this.MAP.general},createDevice:function(b,a,c){a=xnm.aio.gateway.DM.DMError;var d=xnm.aio.gateway.DM.DMError.ERROR_CODE;b.address?(b=JSON.parse(JSON.stringify(b)),c(null,b)):c(new a(d.INVALID,"parameter address is invalid"))},updateDevice:function(b,a,c){a=xnm.aio.gateway.DM.DMError;var d=
xnm.aio.gateway.DM.DMError.ERROR_CODE;b.address?(b=JSON.parse(JSON.stringify(b)),c(null,b)):c(new a(d.INVALID,"parameter address is invalid"))},deleteDevice:function(b,a,c,d){d&&d(null,JSON.parse(JSON.stringify(a)));xnm.aio.gateway.systems.ER.delSensor(b,a.address,function(){})}}};
xnm.aio.gateway.systems.ER={COMMAND:"down up stop stepUp stepDown manu auto toggle 3sUp 3sDown doubleUp doubleDown learn pulseUp pulseDown closeAS moveAS".split(" "),STATUS:["no information","top position stop","bottom position stop","intermediate position stop","tilt position stop","blocking stop","overheated stop","timeout stop","start to move up","start to move down","moving up","moving down",null,"stopped in undefined position","top tilt position stop","bottom intermediate position stop","switching device switched off",
"switching device switched on","scene set","scene start","scene stop","scene error"],delSensor:function(b,a,c){b._executeRequest("delSensor",{type:this.DM.TYPE,adr:a},{timeout:2E4},function(a){c&&c(a)})},startLearnER:function(b,a,c){if(a){var d=this;xnm.aio.gateway.Admin.getGatewayEID(b,function(e,f){e?c&&c(e):f?b._executeRequest("LearnSC",{type:d.DM.TYPE,adr:a},{timeout:2E4},function(b,e){if(b)c&&c(b);else if(e&&0!=e.length)if((e=e[0])&&e.adr&&e.type){var f=d._resolveType(e.type);f.address=a;f.subadr=
e.adr;c&&c(null,f)}else c&&c(Error("learn result format error"));else c&&c(Error("do not find elero device"))}):c&&c(Error("gateway has no eid"))})}else c&&c(Error("address invalid"))},learnERUp:function(b,a,c){a?b._executeRequest("SendSC",{type:this.DM.TYPE,data:a+"01"},{timeout:2E3},function(a,b){var f=!1;b&&b[0]&&b[0].adr&&(f=!0);c&&c(a,f)}):c&&c(Error("address invalid"))},learnERDown:function(b,a,c){a?b._executeRequest("SendSC",{type:this.DM.TYPE,data:a+"00"},{timeout:2E3},function(a,b){var f=
!1;b&&b[0]&&b[0].adr&&(f=!0);c&&c(a,f)}):c&&c(Error("address invalid"))},stopLearnER:function(b,a){b._executeRequest("stopLearn",{type:this.DM.TYPE},null,function(b){a&&a(b)})},getERDevicesAddress:function(b,a){xnm.aio.gateway.Admin.getGatewayEID(b,function(b,d){b?a&&a(b):d?a&&a(null,[]):a&&a(Error("gateway has no elero id"))})},_getERdevicesFromGateway:function(b,a){b._executeRequest("getStates",null,{timeout:2E3},function(b,d){if(b)a(b);else{for(var e=[],f=0;f<d.length;f++)d[f]&&"ER"==d[f].type&&
e.push(d[f]);a(null,e)}})},_getEleroId:function(b,a){b._executeRequest("GetSI",null,{timeout:2E3},function(b,d){a&&a(b,d?d.EID:null)})},_resolveType:function(b){b=b.split(":");var a={data:null,subtype:null};a.data=[null,"shutter","blind","awning","shade","dimmer",null,"switch"][parseInt(b[1],16)];a.data||(a.data="general");a.subtype=["RevoLine","CombioRM","CombioJA","CombioLI","VariEco","VariEcoDC","CombioML","VariEcoS","CombioLiMt","CombioLiEt","CombioLiSw","CombioJAPulse",null,null,null,"Revio",
"UniLogic","RevoLineDC","CombioDCRM","CombioDCJA","CombioDCJAPuls",null,null,null,null,"CombioMvl",null,"RevioSW","CombioMVLed","CombioMLed","CombioJAPulsePLUS","CombioLed","PowerSwitch","CombioJAPulse2"][parseInt(b[0],16)-96];return a},executeCommandCreator:function(b,a,c,d){a?c&&c.value?a&&a.address?this._executeCommand(b,a,c,d):d&&d(Error("it device address is empty")):d&&d(Error("it device command is empty")):d&&d(Error("it device is null"))},_executeCommand:function(b,a,c,d){(a=this._buildData(b,
a,c))?b._executeRequest("SendSC",{type:this.DM.TYPE,data:a},null,function(a){d&&d(a)}):d&&d(Error("command format invalid"))},buildQuery:function(b,a,c){return(b=this._buildData(b,a,c))?{type:this.DM.TYPE,data:b,XC_FNC:"SendSC"}:null},_buildData:function(b,a,c){if(!(a&&a.address&&c&&c.value))return null;switch(c.value){case "on":c="01";break;case "off":c="00";break;default:b=!1;for(var d=this.COMMAND.length;d--;)if(this.COMMAND[d]==c.value){b=!0;break}if(!b)return null;c=xnm.aio.gateway.Util.getHexVal(d,
2)}return a.address+c},_parseData:function(b,a){if(!(b&&a&&a.address&&a.type&&a.type.toUpperCase()==this.DM.TYPE)||4>b.length)return null;var c=b.substr(0,2);if(a.address.toLowerCase()!=c.toLowerCase())return null;var c=b.substr(2,2),c=parseInt(c,16),d={};if("switch"==a.data)d.value=0==c?"off":1==c?"on":this.COMMAND[c];else if(d.value=this.COMMAND[c],!d.value)return null;return d},handleStateCreator:function(b,a,c){return a&&a.value?(b=this._handleState(b,c))?b[a.value]:null:null},_handleState:function(b,
a){if(!(a.type&&a.adr&&a.state&&"ER"==a.type&&b.address&&b.address.toLowerCase()==a.adr.toLowerCase()))return null;var c={};if(4==a.state.length){var d=parseInt(a.state.substr(2),16);c.state=this.STATUS[d];c.pos=2==d||15==d?100:1==d||14==d?0:50}return c},generateActionCode:function(b,a){return this._buildData(null,a,b)},parseActionCode:function(b,a){return this._parseData(b,a)},DM:{TYPE:"ER",MAP:{"switch":{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}},
{type:"enum",name:"mode auto",ref:{value:"auto"}},{type:"enum",name:"mode manu",ref:{value:"manu"}},{type:"enum",name:"mode toogle",ref:{value:"toggle"}}],status:[{type:"enum",name:"state",ref:{value:"state",options:[]}}]},general:{command:[{type:"enum",name:"up",ref:{value:"up"}},{type:"enum",name:"down",ref:{value:"down"}},{type:"enum",name:"stop",ref:{value:"stop"}},{type:"enum",name:"up step bit",ref:{value:"stepUp"}},{type:"enum",name:"down step bit",ref:{value:"stepDown"}},{type:"enum",name:"mode auto",
ref:{value:"auto"}},{type:"enum",name:"mode manu",ref:{value:"manu"}},{type:"enum",name:"mode toogle",ref:{value:"toggle"}},{type:"enum",name:"move up",ref:{value:"3sUp"}},{type:"enum",name:"move down",ref:{value:"3sDown"}},{type:"enum",name:"double up",ref:{value:"doubleUp"}},{type:"enum",name:"double down",ref:{value:"doubleDown"}},{type:"enum",name:"move up pulse",ref:{value:"pulseUp"}},{type:"enum",name:"move down pulse",ref:{value:"pulseDown"}},{type:"enum",name:"closeAS",ref:{value:"closeAS"}},
{type:"enum",name:"moveAS",ref:{value:"moveAS"}}],status:[{type:"enum",name:"state",ref:{value:"state",options:[]}},{type:"int",name:"position",ref:{value:"pos",extMeta:"0-100",step:"50",scale:"50"}}]}},getGatewayDeviceType:function(b){if((b=xnm.aio.gateway.Gateway._getRFMode(b.version,b.rfmode,b.gateway_vendor))&&!b.SUPPORTS868)return null;b={type:this.TYPE,name:"elero",subtypes:[]};b.subtypes.push({id:"Switch",data:"switch"});b.subtypes.push({id:"Dimmer",data:"dimmer"});b.subtypes.push({id:"Shutter",
data:"shutter"});b.subtypes.push({id:"Blind",data:"blind"});b.subtypes.push({id:"Awning",data:"awning"});b.subtypes.push({id:"Shade",data:"shade"});b.subtypes.push({id:"General",data:"general"});return b},getCommandStatusMap:function(b){if(!b.data)return null;b=b.data;"switch"!=b&&(b="general");return this.MAP[b]},createDevice:function(b,a,c){a=xnm.aio.gateway.DM.DMError;var d=xnm.aio.gateway.DM.DMError.ERROR_CODE;b.address?b.data?(b=JSON.parse(JSON.stringify(b)),c(null,b)):c(new a(d.INVALID,"parameter data is invalid")):
c(new a(d.INVALID,"parameter address is invalid"))},updateDevice:function(b,a,c){a=xnm.aio.gateway.DM.DMError;var d=xnm.aio.gateway.DM.DMError.ERROR_CODE;b.address?b.data?(b=JSON.parse(JSON.stringify(b)),c(null,b)):c(new a(d.INVALID,"parameter data is invalid")):c(new a(d.INVALID,"parameter address is invalid"))},deleteDevice:function(b,a,c,d){d&&d(null,JSON.parse(JSON.stringify(a)));xnm.aio.gateway.systems.ER.delSensor(b,a.address,function(){})}}};
xnm.aio.gateway.systems.HM={configBlind:function(b,a,c){var d=xnm.aio.gateway.Util.getHexVal(10*a.down,4),d=d+xnm.aio.gateway.Util.getHexVal(10*a.up,4),d=d+xnm.aio.gateway.Util.getHexVal(10*a.motorswitch,2),d=d+xnm.aio.gateway.Util.getHexVal(a.calibrate,2);b._executeRequest("hmblindcal",{adr:a.address,data:d.toUpperCase()},{timeout:2E4},function(a){c&&c(a)})},delSensor:function(b,a,c){b._executeRequest("delSensor",{type:this.DM.TYPE,adr:a},{timeout:2E4},function(a){c&&c(a)})},learn:function(b,a,c){a||
(a={});this.learnWithSnr(b,a.snr,c)},learnWithSnr:function(b,a,c){var d=this,e={type:this.DM.TYPE};a&&(e.adr=a);b._executeRequest("LearnSC",e,{timeout:2E4},function(e,g){if(e)c&&c(e);else if(g.adr&&g.type)if(a||(a=g.snr),a){for(var h=d._resolveTypecode(g.type),m=d._resolveChannel(g.type),l=[],k=0;k<m.length;k++)l.push({address:g.adr+m[k],data:h,snr:a,typecode:g.type});(h=b._getGatewayVersion())&&"f3"==h.toLowerCase().substr(0,2)?d._registDevices(b,g.type,l,function(a){c&&c(a,l)}):c&&c(e,l)}else c&&
c(Error("no serial number"));else c&&c(Error("response format invalid"))})},_resolveTypecode:function(b){return"0078"==b||"0050"==b||"004E"==b||"0061"==b||"0004"==b||"0014"==b||"0052"==b||"00CE"==b||"00C8"==b||"00D0"==b||"00A1"==b||"0015"==b||"00CC"==b||"0011"==b||"0002"==b||"005C"==b||"00CF"==b||"0009"==b||"0062"==b||"0069"==b||"0003"==b||"00C9"==b||"0066"==b||"006C"==b||"00CB"==b||"00CD"==b||"002D"==b||"00BE"==b||"0001"==b||"0051"==b||"00CA"==b||"000A"==b||"00AB"==b||"00F0"==b||"00EB"==b||"00D8"==
b||"00E6"==b||"00E7"==b||"00E8"==b||"00E9"==b?"switch":"0068"==b||"002E"==b||"00B4"==b||"0070"==b||"0059"==b||"00B6"==b||"0071"==b||"0013"==b||"0073"==b||"00A3"==b||"0067"==b||"0058"==b||"00BB"==b||"00A4"==b||"006E"==b||"00B7"==b||"00B9"==b||"0072"==b||"0057"==b||"0012"==b||"00B8"==b||"0016"==b||"0074"==b||"005A"==b||"00B5"==b||"006F"==b||"00BA"==b||"00B3"==b||"00FC"==b?"dimmer":"00AC"==b||"00F6"==b||"00D7"==b||"00E2"==b||"00E3"==b||"00E4"==b||"00E5"==b||"00EA"==b?"powerswitch":"00D2"==b||"006A"==
b||"0053"==b||"00D1"==b||"0005"==b||"0006"==b?"blind":"001A"==b?"button":"00BF"==b||"006B"==b||"00C2"==b||"0036"==b||"00E0"==b||"00DC"==b?"button":"001B"==b||"001D"==b||"001C"==b||"001E"==b?"button":"0008"==b||"00A6"==b||"00A5"==b||"00A0"==b||"003B"==b||"0035"==b||"0034"==b||"0060"==b?"button":"00A9"==b?"button":"004C"==b||"0029"==b||"002A"==b?"button":"0038"==b||"0037"==b||"004D"==b?"button":"000B"==b||"000D"==b||"000E"==b||"000F"==b||"001F"==b||"002B"==b||"002C"==b||"0031"==b||"0032"==b||"0033"==
b||"003C"==b||"003D"==b||"003E"==b||"003F"==b||"0041"==b||"0048"==b||"0093"==b||"0094"==b||"00BC"==b?"weather":"0040"==b?"weather_station":"0045"==b||"00B2"==b?"water":"0042"==b||"0056"==b||"0084"==b||"0091"==b||"00AA"==b?"smoke":"0030"==b||"0081"==b?"window":"002F"==b||"00B1"==b||"00C7"==b||"005F"==b||"0082"==b||"00B1"==b?"contact":"0043"==b?"tilt":"00A7"==b?"rain":"004A"==b||"004F"==b||"005D"==b||"0090"==b||"00C0"==b||"00C1"==b||"00DB"==b||"00F7"==b?"motion":"0039"==b?"thermostat":"0095"==b?"thermocontrol":
"00AD"==b?"wallthermostat":"0046"==b?"switch_interface":"sensor"},isDimmer:function(b){return"dimmer"==this._resolveTypecode(b)?!0:!1},isSwitch:function(b){return"switch"==this._resolveTypecode(b)?!0:!1},isMeteringSwitch:function(b){return"powerswitch"==this._resolveTypecode(b)?!0:!1},isBlind:function(b){return"blind"==this._resolveTypecode(b)?!0:!1},getButtonChannels:function(b){var a=null;if("001A"==b||"00DC"==b)a=1;else if("00BF"==b||"006B"==b||"00C2"==b||"0036"==b||"00E0"==b)a=2;else if("001B"==
b||"001D"==b||"001C"==b||"001E"==b)a=3;else if("0008"==b||"00A6"==b||"00A5"==b||"00A0"==b||"003B"==b||"0035"==b||"0034"==b||"0060"==b)a=4;else if("00A9"==b)a=6;else if("004C"==b||"0029"==b||"002A"==b)a=12;else if("0038"==b||"0037"==b||"004D"==b)a=19;return a},getDeviceChannels:function(b){var a=null;"005F"==b&&(a=3);return a},_resolveChannel:function(b){var a=["01"];switch(b.toUpperCase()){case "0009":case "000A":case "0016":case "002E":case "0044":case "0052":case "005A":case "0062":case "0070":case "0074":case "00B8":case "00BB":case "00CB":case "00CC":a.push("02");
break;case "0046":case "005F":a=a.concat(["02","03"]);break;case "0003":case "0015":case "002D":case "0061":case "0066":case "00AB":case "00CD":case "00CE":case "00CF":case "00D0":case "8001":a=a.concat(["02","03","04"]);break;case "00BE":a=a.concat("02 03 04 05 06 07 08".split(" "))}return a},_registDevices:function(b,a,c,d){if(!c||1>=c.length)d&&d();else{var e=this,f=0,g=function(a){f+=1;a?d&&d(a):f<c.length?(a=c[f].typecode+c[f].address,a=c[f].address,e._addSensor(b,a,g)):d&&d()};this._addSensor(b,
c[0].address,g)}},_addSensor:function(b,a,c){b._executeRequest("addSensor",{type:this.DM.TYPE,adr:a},{timeout:2E4},function(a){c&&c(a)})},_getButtonChannels:function(b){var a=0;if("001A"==b)a=1;else if("00BF"==b||"006B"==b||"00C2"==b||"0036"==b)a=2;else if("001B"==b||"001D"==b||"001C"==b||"001E"==b)a=3;else if("0008"==b||"00A6"==b||"00A5"==b||"00A0"==b||"003B"==b||"0035"==b||"0034"==b||"0060"==b)a=4;else if("00A9"==b)a=6;else if("004C"==b||"0029"==b||"002A"==b)a=12;else if("0038"==b||"0037"==b||"004D"==
b)a=19;return a},executeCommandCreator:function(b,a,c,d){a?c&&c.value?a&&a.address?this._executeCommand(b,a,c,d):d&&d(Error("it device address is empty")):d&&d(Error("it device command is empty")):d&&d(Error("it device is null"))},_executeCommand:function(b,a,c,d){(a=this._buildData(b,a,c))?b._executeRequest("SendSC",{type:this.DM.TYPE,data:a},null,function(a){d&&d(a)}):d&&d(Error("command format invalid"))},buildQuery:function(b,a,c){return(b=this._buildData(b,a,c))?{type:this.DM.TYPE,data:b,XC_FNC:"SendSC"}:
null},_buildData:function(b,a,c){if(!(a&&a.address&&c&&c.value))return null;var d;a=a.address;switch(c.value){case "on":d="01";break;case "off":d="02";break;case "toggle":d="03";break;case "dimUp":d="0F";break;case "dimDown":d="10";break;case "onTo":case "toggleTo":b=parseInt(c.ext);100<b&&(b=100);0>b&&(b=0);d="onTo"==c.value?"05":"04";d+=xnm.aio.gateway.Util.getHexVal(b,2);break;case "stepUp":d="1414";break;case "stepDown":d="1514";break;case "upFor":b=parseInt(c.ext);d="14"+xnm.aio.gateway.Util.getHexVal(b/
10,2);break;case "downFor":b=parseInt(c.ext);d="15"+xnm.aio.gateway.Util.getHexVal(b/10,2);break;case "moveUp":d="08";break;case "moveDown":d="09";break;case "stop":d="0B";break;case "moveTo":b=parseInt(c.ext);b=100-b;100<b&&(b=100);0>b&&(b=0);d="0A"+xnm.aio.gateway.Util.getHexVal(b,2);break;case "tempUp":d="12";break;case "tempDown":d="13";break;case "tempTo":b=parseFloat(c.ext);d="11"+xnm.aio.gateway.Util.getHexVal(2*b,2);break;case "setAuto":d="1C00";break;case "setManu":d="1C01";break;case "setBoost":d=
"1C03";break;case "heaterOn":a=a.substr(0,6)+"02";d="01";break;case "heaterOff":a=a.substr(0,6)+"02";d="02";break;case "smokeRst":d="23"}return a+d},_parseData:function(b,a){if(!b||10>b.length||!a||!a.address||!a.type||a.type.toUpperCase()!=this.DM.TYPE)return null;var c=b.substr(0,8),d=b.substr(8).toUpperCase();if("rain"==a.data){if(!a.address||a.address.substr(0,6).toUpperCase()!=c.substr(0,6).toUpperCase())return null}else if(!a.address||a.address.toUpperCase()!=c.toUpperCase())return null;c=a.data;
if("thermostat"==c||"thermocontrol"==c||"wallthermostat"==c)c="heater";switch(c){case "switch":case "dimmer":case "powerswitch":case "blind":case "heater":case "rain":break;default:return null}var e={};switch(d){case "01":e.value="rain"==a.data?"heaterOn":"on";break;case "02":e.value="rain"==a.data?"heaterOff":"off";break;case "03":e.value="toggle";break;case "0F":e.value="dimUp";break;case "10":e.value="dimDown";break;case "1414":e.value="stepUp";break;case "1514":e.value="stepDown";break;case "08":e.value=
"moveUp";break;case "09":e.value="moveDown";break;case "0B":e.value="stop";break;case "12":e.value="tempUp";break;case "13":e.value="tempDown";break;case "1C00":e.value="setAuto";break;case "1C01":e.value="setManu";break;case "1C03":e.value="setBoost";break;default:if(4<=d.length)switch(c=parseInt(d.substr(2,2),16),d=d.substr(0,2),d){case "04":e.value="toggleTo";e.ext=c;break;case "05":e.value="onTo";e.ext=c;break;case "14":e.value="upFor";e.ext=10*c;break;case "15":e.value="downFor";e.ext=10*c;break;
case "0A":e.value="moveTo";e.ext=100-c;break;case "11":e.value="tempTo",e.ext=c/2}}return e.value?e:null},handleStateCreator:function(b,a,c){return a&&a.value?(b=this._handleState(b,c))?b[a.value]:null:null},_handleState:function(b,a){if(!a.type||!a.adr||!a.state||"HM"!=a.type&&"HMFHT"!=a.type||"HM"!=b.type||!b.address||b.address.toLowerCase()!=a.adr.toLowerCase())return null;var c=b.data;if("thermostat"==c||"thermocontrol"==c||"wallthermostat"==c)c="heater";var d=a.state.split(":"),e,f={};1<d.length&&
(e=parseInt(d[d.length-1],16),f.error=254==e?"low_bat":255==e?"timeout":"no_error");switch(c){case "switch":e=parseInt(d[0],16);f.switchState=200==e?"on":0==e?"off":"?";break;case "dimmer":e=parseInt(d[0],16);f.dimmerState=5*Math.floor(e/2/5);break;case "blind":e=parseInt(d[0],16);e/=2;f.blindState=100-Math.round(e);break;case "powerswitch":8<=d.length&&(f.ernergy=(parseInt(d[1],16)/10).toFixed(1),f.power=(parseInt(d[2],16)/100).toFixed(1),f.current=parseInt(d[3],16),f.volt=(parseInt(d[4],16)/10).toFixed(1),
e=parseInt(d[5],16),0<(e&32768)&&(e-=65536),e=(50+e).toFixed(2),f.freq=e,e=parseInt(d[6],16),200==e?f.switchState="on":0==e&&(f.switchState="off"));break;case "weather":3<=d.length&&(e=parseInt(d[0],16),0<(e&32768)&&(e&=32767),0<(e&16384)&&(e-=32768),f.temp=(e/10).toFixed(1),f.hum=parseInt(d[1],16),e=parseInt(d[2],16),f.error=254==e?"low_bat":255==e?"timeout":"no_error");break;case "weather_station":12<=d.length&&(e=parseInt(d[0],16),0<(e&32768)&&(e&=32767),0<(e&16384)&&(e-=32768),f.temp=(e/10).toFixed(1),
f.hum=parseInt(d[1],16),f.winS=(parseInt(d[2],16)/10).toFixed(1),f.winDR=(5.5*parseInt(d[3],16)).toFixed(1),f.winDG=5*parseInt(d[4],16),f.rainC=(.295*parseInt(d[5],16)).toFixed(1),f.rainCT=(.295*parseInt(d[6],16)).toFixed(1),f.rainCY=(.295*parseInt(d[7],16)).toFixed(1),f.sunT=parseInt(d[8],16),f.bri=parseInt(d[9],16),f.rain=1==parseInt(d[10],16)?"on":"off",f.winD="N",e=5*parseInt(d[4],16),23>e?f.winD="N":68>e?f.winD="NO":113>e?f.winD="O":158>e?f.winD="SO":203>e?f.winD="S":248>e?f.winD="SW":293>e?
f.winD="W":338>e&&(f.winD="NW"));break;case "heater":if(6<=d.length){e=d[0];"0"==e?f.error="no_error":"B"==e?f.error="low_bat":"I"==e?f.error="timeout":"E"==e&&(f.error="comm_break");switch(d[1]){case "M":f.mode="manu";break;case "A":f.mode="auto";break;case "B":f.mode="boost";break;case "U":f.mode="vacation"}f.setTempState=(parseInt(d[2],16)/10).toFixed(1);e=parseInt(d[3],16);0<(e&16384)&&(e-=32768);f.currentTempState=(e/10).toFixed(1);f.hum=parseInt(d[4],16);f.valve=parseInt(d[5],16)}break;case "window":case "contact":case "tilt":case "water":case "switch_interface":e=
parseInt(d[0],16);switch(e){case 0:f.state="water"==c?"dry":"closed";break;case 100:f.state="water"==c?"moist":"tilted";break;case 200:f.state="water"==c?"water":"open"}e=parseInt(d[1],16);f.error=254==e?"low_bat":255==e?"timeout":"no_error";break;case "rain":e=parseInt(d[0].substr(0,2),16);switch(e){case 0:f.state="dry";break;case 200:f.state="raining"}e=parseInt(d[0].substr(2,2),16);switch(e){case 0:f.heaterState="off";break;case 200:f.heaterState="on"}e=parseInt(d[1],16);f.error=254==e?"low_bat":
255==e?"timeout":"no_error";break;case "motion":case "smoke":case "sensor":e=parseInt(d[0],16);switch(e){case 0:switch(c){case "motion":case "smoke":f.state="ok";break;case "switch_interface":case "sensor":f.state="off"}break;case 200:switch(c){case "motion":f.state="motion";break;case "smoke":f.state="smoke";break;case "switch_interface":case "sensor":f.state="on"}}e=parseInt(d[1],16);f.error=254==e?"low_bat":255==e?"timeout":"no_error";break;default:return null}return f},_handleUdpState:function(b,
a){if(!(a&&a.data&&b&&b.type&&b.type.toUpperCase()==this.DM.TYPE))return null;var c;if(8==a.data.length&&"button"==b.data)c=a.data.substr(0,6).toUpperCase()+"01";else if(8==a.data.length&&"switch_interface"==b.data)c=a.data;else if(10==a.data.length)c=a.data.substr(0,8).toUpperCase();else return null;if("rain"==b.data){if(!b.address||b.address.substr(0,6).toUpperCase()!=a.data.substr(0,6).toUpperCase())return null}else if(!b.address||b.address.toUpperCase()!=c)return null;var d,e={};switch(b.data){case "rain":d=
parseInt(a.data.substr(6,2),16);c=parseInt(a.data.substr(8,2),16);switch(c){case 0:1==d?e.state="dry":2==d&&(e.heaterState="off");break;case 200:1==d?e.state="raining":2==d&&(e.heaterState="on")}break;case "window":case "contact":case "smoke":case "blind":case "tilt":case "motion":case "water":case "switch_interface":return this._handleState(b,{type:"HM",adr:c,state:a.data.substr(8,2)+":00"});case "dimmer":c=parseInt(a.data.substr(8,2),16);e.dimmerState=5*Math.floor(c/2/5);break;case "button":c=a.data.substr(6,
2);d="0"+c.charAt(1);d=("0"==c.charAt(0)?"press":"pressL")+d;e[d]="true";break;case "switch":d||(d="switchState");default:if(d||(d="state"),c=a.data.substr(8,2).toUpperCase(),"C8"==c)e[d]="on";else if("00"==c)e[d]="off";else return null}return e},parseTriggerCode:function(b,a){var c=this._handleUdpState(a,{type:this.DM.TYPE,data:b});if(!c)return null;var d,e={};switch(a.data){case "dimmer":return null;case "button":for(var f in c)if(c.hasOwnProperty(f)){e.value=f;break}break;case "rain":case "tilt":case "window":case "smoke":case "contact":case "motion":case "water":case "switch_interface":d||
(d="state");case "switch":d||(d="switchState");default:d||(d="state");if(!c[d])return null;e.value=c[d]}return e},generateTriggerCode:function(b,a){if(!(b&&b.value&&a&&a.address))return null;var c=a.address,d;switch(a.data){case "button":c=a.address.substr(0,6);0==b.value.indexOf("pressL")?d="4"+b.value.substr(6,2).charAt(1):0==b.value.indexOf("press")&&(d=b.value.substr(5,2));break;case "smoke":"smoke"==b.value&&(d="C8");break;case "motion":"motion"==b.value&&(d="C8");break;case "contact":case "tilt":case "switch_interface":"open"==
b.value?d="C8":"closed"==b.value&&(d="00");break;case "window":"open"==b.value?d="C8":"tilted"==b.value?d="64":"closed"==b.value&&(d="00");break;case "rain":"dry"==b.value?d="00":"raining"==b.value&&(d="C8");break;case "water":"dry"==b.value?d="00":"moist"==b.value?d="64":"water"==b.value&&(d="C8");break;default:c=a.address,"on"==b.value?d="C8":"off"==b.value&&(d="00")}return c&&d?c+d:null},generateActionCode:function(b,a){return this._buildData(null,a,b)},parseActionCode:function(b,a){return this._parseData(b,
a)},DM:{TYPE:"HM",MAP:{"switch":{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}},{type:"enum",name:"toggle",ref:{value:"toggle"}}],status:[{type:"enum",name:"state",ref:{value:"switchState",options:["on","off"]}},{type:"enum",name:"error",ref:{value:"error",options:["no_error","low_bat","timeout"]}}],event:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}}],ipevt:[{type:"enum",name:"state",ref:{value:"switchState",options:["on",
"off"]}}]},dimmer:{command:[{type:"enum",name:"off",ref:{value:"off"}},{type:"enum",name:"dim up",ref:{value:"dimUp"}},{type:"enum",name:"dim down",ref:{value:"dimDown"}},{type:"int",name:"dim to",ref:{value:"onTo",ext:"%d",extMeta:"0-100",step:"5"}},{type:"int",name:"toggle to",ref:{value:"toggleTo",ext:"%d",extMeta:"0-100",step:"5"}}],status:[{type:"int",name:"state",ref:{value:"dimmerState"}},{type:"enum",name:"error",ref:{value:"error",options:["no_error","low_bat","timeout"]}}],ipevt:[{type:"int",
name:"state",ref:{value:"dimmerState"}}]},powerswitch:{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}},{type:"enum",name:"toggle",ref:{value:"toggle"}}],status:[{type:"enum",name:"state",ref:{value:"switchState",options:["on","off"]}},{type:"float",name:"frequency",ref:{value:"freq",ext:"%f",scale:"0.1"}},{type:"float",name:"voltage",ref:{value:"volt",ext:"%f",scale:"0.1"}},{type:"int",name:"current",ref:{value:"current",ext:"%d"}},{type:"float",name:"power",
ref:{value:"power",ext:"%f",scale:"0.1"}},{type:"float",name:"consumption",ref:{value:"ernergy",ext:"%f",scale:"0.1"}},{type:"enum",name:"error",ref:{value:"error",options:["no_error","low_bat","timeout"]}}],event:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}}],ipevt:[{type:"enum",name:"state",ref:{value:"switchState",options:["on","off"]}},{type:"float",name:"frequency",ref:{value:"freq",ext:"%f",scale:"0.1"}},{type:"float",name:"voltage",ref:{value:"volt",ext:"%f",
scale:"0.1"}},{type:"int",name:"current",ref:{value:"current",ext:"%d"}},{type:"float",name:"power",ref:{value:"power",ext:"%f",scale:"0.1"}},{type:"float",name:"consumption",ref:{value:"ernergy",ext:"%f",scale:"0.1"}},{type:"enum",name:"error",ref:{value:"error",options:["no_error","low_bat","timeout"]}}]},blind:{command:[{type:"enum",name:"step up",ref:{value:"stepUp"}},{type:"enum",name:"step down",ref:{value:"stepDown"}},{type:"enum",name:"move up",ref:{value:"moveUp"}},{type:"enum",name:"move down",
ref:{value:"moveDown"}},{type:"enum",name:"stop",ref:{value:"stop"}},{type:"int",name:"move to",ref:{value:"moveTo",ext:"%d",extMeta:"0-100",step:"1"}}],status:[{type:"int",name:"state",ref:{value:"blindState"}},{type:"enum",name:"error",ref:{value:"error",options:["no_error","low_bat","timeout"]}}],ipevt:[{type:"int",name:"state",ref:{value:"blindState"}}]},weather:{status:[{type:"float",name:"temperature",ref:{value:"temp",extMeta:"5-30",scale:"0.1"}},{type:"int",name:"humidity",ref:{value:"hum"}},
{type:"enum",name:"error",ref:{value:"error",options:["no_error","low_bat","timeout"]}}],ipevt:[{type:"float",name:"temperature",ref:{value:"temp",extMeta:"5-30",scale:"0.1"}},{type:"int",name:"humidity",ref:{value:"hum"}},{type:"enum",name:"error",ref:{value:"error",options:["no_error","low_bat","timeout"]}}]},weather_station:{status:[{type:"float",name:"temperature",ref:{value:"temp",extMeta:"5-30",scale:"0.1"}},{type:"int",name:"humidity",ref:{value:"hum"}},{type:"int",name:"wind direction",ref:{value:"winD",
options:"N NO O SO S SW W NW".split(" ")}},{type:"int",name:"wind direction degree",ref:{value:"winDG",extMeta:"0-360"}},{type:"float",name:"wind direction range",ref:{value:"winDR",scale:"0.5"}},{type:"float",name:"wind speed",ref:{value:"winS",scale:"0.1"}},{type:"float",name:"rain count",ref:{value:"rainC",scale:"0.1"}},{type:"float",name:"rain count today",ref:{value:"rainCT",scale:"0.1"}},{type:"float",name:"rain count yesterday",ref:{value:"rainCY",scale:"0.1"}},{type:"int",name:"sunshine time",
ref:{value:"sunT",unit:"min"}},{type:"int",name:"brightness",ref:{value:"bri"}},{type:"enum",name:"raining",ref:{value:"rain",options:["on","off"]}},{type:"enum",name:"error",ref:{value:"error",options:["no_error","low_bat","timeout"]}}],ipevt:[{type:"float",name:"temperature",ref:{value:"temp",extMeta:"5-30",scale:"0.1"}},{type:"int",name:"humidity",ref:{value:"hum"}},{type:"int",name:"wind direction",ref:{value:"winD",options:"N NO O SO S SW W NW".split(" ")}},{type:"int",name:"wind direction degree",
ref:{value:"winDG",extMeta:"0-360"}},{type:"float",name:"wind direction range",ref:{value:"winDR",scale:"0.5"}},{type:"float",name:"wind speed",ref:{value:"winS",scale:"0.1"}},{type:"float",name:"rain count",ref:{value:"rainC",scale:"0.1"}},{type:"float",name:"rain count today",ref:{value:"rainCT",scale:"0.1"}},{type:"float",name:"rain count yesterday",ref:{value:"rainCY",scale:"0.1"}},{type:"int",name:"sunshine time",ref:{value:"sunT",unit:"min"}},{type:"int",name:"brightness",ref:{value:"bri"}},
{type:"enum",name:"raining",ref:{value:"rain",options:["on","off"]}},{type:"enum",name:"error",ref:{value:"error",options:["no_error","low_bat","timeout"]}}]},heater:{command:[{type:"enum",name:"temperature up",ref:{value:"tempUp"}},{type:"enum",name:"temperature down",ref:{value:"tempDown"}},{type:"float",name:"set temperature",ref:{value:"tempTo",ext:"%f",extMeta:"5-30",scale:"0.5",step:"0.5"}},{type:"enum",name:"auto mode",ref:{value:"setAuto"}},{type:"enum",name:"manu mode",ref:{value:"setManu"}},
{type:"enum",name:"boost mode",ref:{value:"setBoost"}}],status:[{type:"float",name:"set temperature",ref:{value:"setTempState",extMeta:"5-30",scale:"0.5"}},{type:"float",name:"current temperature",ref:{value:"currentTempState",extMeta:"-30-30",scale:"0.1"}},{type:"int",name:"humidity",ref:{value:"hum"}},{type:"int",name:"valve postion",ref:{value:"valve"}},{type:"enum",name:"mode",ref:{value:"mode",options:["auto","manu","boost","vacation"]}},{type:"enum",name:"error",ref:{value:"error",options:["no_error",
"low_bat","timeout","comm_break"]}}],ipevt:[{type:"float",name:"set temperature",ref:{value:"setTempState",extMeta:"5-30",scale:"0.5"}},{type:"float",name:"current temperature",ref:{value:"currentTempState",extMeta:"-30-30",scale:"0.1"}},{type:"int",name:"humidity",ref:{value:"hum"}},{type:"int",name:"valve postion",ref:{value:"valve"}},{type:"enum",name:"mode",ref:{value:"mode",options:["auto","manu","boost","vacation"]}},{type:"enum",name:"error",ref:{value:"error",options:["no_error","low_bat",
"timeout","comm_break"]}}]},water:{status:[{type:"enum",name:"state",ref:{value:"state",options:["dry","moist","water"]}},{type:"enum",name:"error",ref:{value:"error",options:["no_error","low_bat","timeout"]}}],event:[{type:"enum",name:"dry",ref:{value:"dry"}},{type:"enum",name:"moist",ref:{value:"moist"}},{type:"enum",name:"water",ref:{value:"water"}}],ipevt:[{type:"enum",name:"state",ref:{value:"state",options:["dry","moist","water"]}}]},smoke:{comamnd:[{type:"enum",name:"reset",ref:{value:"smokeRst"}}],
status:[{type:"enum",name:"state",ref:{value:"state",options:["ok","smoke"]}},{type:"enum",name:"error",ref:{value:"error",options:["no_error","low_bat","timeout"]}}],event:[{type:"enum",name:"smoke",ref:{value:"smoke"}}],ipevt:[{type:"enum",name:"state",ref:{value:"state",options:["smoke"]}}]},window:{status:[{type:"enum",name:"state",ref:{value:"state",options:["open","closed","tilted"]}},{type:"enum",name:"error",ref:{value:"error",options:["no_error","low_bat","timeout"]}}],event:[{type:"enum",
name:"open",ref:{value:"open"}},{type:"enum",name:"tilted",ref:{value:"tilted"}},{type:"enum",name:"closed",ref:{value:"closed"}}],ipevt:[{type:"enum",name:"state",ref:{value:"state",options:["open","closed","tilted"]}}]},contact:{status:[{type:"enum",name:"state",ref:{value:"state",options:["open","closed"]}},{type:"enum",name:"error",ref:{value:"error",options:["no_error","low_bat","timeout"]}}],event:[{type:"enum",name:"open",ref:{value:"open"}},{type:"enum",name:"closed",ref:{value:"closed"}}],
ipevt:[{type:"enum",name:"state",ref:{value:"state",options:["open","closed"]}}]},tilt:{status:[{type:"enum",name:"state",ref:{value:"state",options:["open","closed"]}},{type:"enum",name:"error",ref:{value:"error",options:["no_error","low_bat","timeout"]}}],event:[{type:"enum",name:"open",ref:{value:"open"}},{type:"enum",name:"closed",ref:{value:"closed"}}],ipevt:[{type:"enum",name:"state",ref:{value:"state",options:["open","closed"]}}]},rain:{command:[{type:"enum",name:"heater on",ref:{value:"heaterOn"}},
{type:"enum",name:"heater off",ref:{value:"heaterOff"}}],status:[{type:"enum",name:"state",ref:{value:"state",options:["dry","raining"]}},{type:"enum",name:"heater state",ref:{value:"heaterState",options:["on","off"]}},{type:"enum",name:"error",ref:{value:"error",options:["no_error","low_bat","timeout"]}}],event:[{type:"enum",name:"dry",ref:{value:"dry"}},{type:"enum",name:"raining",ref:{value:"raining"}}],ipevt:[{type:"enum",name:"state",ref:{value:"state",options:["dry","raining"]}}]},motion:{status:[{type:"enum",
name:"state",ref:{value:"state",options:["ok","motion"]}},{type:"enum",name:"error",ref:{value:"error",options:["no_error","low_bat","timeout"]}}],event:[{type:"enum",name:"motion",ref:{value:"motion"}}],ipevt:[{type:"enum",name:"state",ref:{value:"state",options:["motion"]}}]},switch_interface:{status:[{type:"enum",name:"state",ref:{value:"state",options:["open","closed"]}},{type:"enum",name:"error",ref:{value:"error",options:["no_error","low_bat","timeout"]}}],event:[{type:"enum",name:"open",ref:{value:"open"}},
{type:"enum",name:"closed",ref:{value:"closed"}}],ipevt:[{type:"enum",name:"state",ref:{value:"state",options:["open","closed"]}}]},sensor:{status:[{type:"enum",name:"state",ref:{value:"state",options:["on","off"]}},{type:"enum",name:"error",ref:{value:"error",options:["no_error","low_bat","timeout"]}}]}},getGatewayDeviceType:function(b){if((b=xnm.aio.gateway.Gateway._getRFMode(b.version,b.rfmode,b.gateway_vendor))&&!b.SUPPORTS868)return null;var a={type:this.TYPE,name:"HomeMatic",subtypes:[]};a.subtypes.push({id:"Switch",
data:"switch"});a.subtypes.push({id:"Dimmer",data:"dimmer"});a.subtypes.push({id:"Blind",data:"blind"});var c=!1;b&&b.HMMODE||(c=!0);a.subtypes.push({id:"Switch Power Meter",data:"powerswitch",rfmismatch:c});a.subtypes.push({id:"Button",data:"button",rfmismatch:c});a.subtypes.push({id:"Weather",data:"weather",rfmismatch:c});a.subtypes.push({id:"Weather Station (HM-WDS100-C6-O)",data:"weather_station",rfmismatch:c});a.subtypes.push({id:"Thermostat ()",data:"thermostat",rfmismatch:c});a.subtypes.push({id:"Thermostat Contoller",
data:"thermocontrol",rfmismatch:c});a.subtypes.push({id:"Wall Thermostat",data:"wallthermostat",rfmismatch:c});a.subtypes.push({id:"Water Sensor",data:"water",rfmismatch:c});a.subtypes.push({id:"Smoke Detector",data:"smoke",rfmismatch:c});a.subtypes.push({id:"Window Senor",data:"window",rfmismatch:c});a.subtypes.push({id:"Contact Sensor",data:"contact",rfmismatch:c});a.subtypes.push({id:"Tilt Sensor",data:"tilt",rfmismatch:c});a.subtypes.push({id:"Rain Sensor",data:"rain",rfmismatch:c});a.subtypes.push({id:"Motion Detector",
data:"motion",rfmismatch:c});a.subtypes.push({id:"Switch Interface",data:"switch_interface",rfmismatch:c});a.subtypes.push({id:"General Sensor",data:"sensor",rfmismatch:c});return a},getCommandStatusMap:function(b){if(!b.data)return null;var a=b.data;if("thermostat"==a||"thermocontrol"==a||"wallthermostat"==a)a="heater";if("button"==a){(b=b.typecode)||(b="");(b=xnm.aio.gateway.systems.HM.getButtonChannels(b))||(b=0);for(var a={event:[]},c=1;c<=b;c++){for(var d=c.toString();2>d.length;)d="0"+d;a.event.push({type:"enum",
name:"button"+d+" press",ref:{value:"press"+d}});a.event.push({type:"enum",name:"button"+d+" long press",ref:{value:"pressL"+d}})}return a}return this.MAP[a]},getIPevtMap:function(b,a){if(!b.data)return null;var c=null,d=!1;a&&(c=require("xnm.aio.gateway.js").resolveGateway(a))&&(d=c._isV5());c=b.data;if("thermostat"==c||"thermocontrol"==c||"wallthermostat"==c)c="heater";if("button"==c){(d=b.typecode)||(d="");(d=xnm.aio.gateway.systems.HM.getButtonChannels(d))||(d=0);for(var c={ipevt:[]},e=1;e<=d;e++){for(var f=
e.toString();2>f.length;)f="0"+f;c.ipevt.push({type:"enum",name:"button"+f+" press",ref:{value:"press"+f,options:["true"]}});c.ipevt.push({type:"enum",name:"button"+f+" long press",ref:{value:"pressL"+f,options:["true"]}})}return c}e=this.MAP[c];if(!e)return null;e=JSON.parse(JSON.stringify(e));d||("weather"==c||"weather_station"==c||"heater"==c?delete e.ipevt:"powerswitch"==c&&(e.ipevt=[{type:"enum",name:"state",ref:{value:"switchState",options:["on","off"]}}]));return e},createDevice:function(b,
a,c){a=xnm.aio.gateway.DM.DMError;var d=xnm.aio.gateway.DM.DMError.ERROR_CODE;b.address?b.data?b.typecode?(b=JSON.parse(JSON.stringify(b)),c(null,b)):c(new a(d.INVALID,"parameter typecode is invalid")):c(new a(d.INVALID,"parameter data is invalid")):c(new a(d.INVALID,"parameter address is invalid"))},updateDevice:function(b,a,c){a=xnm.aio.gateway.DM.DMError;var d=xnm.aio.gateway.DM.DMError.ERROR_CODE;b.address?b.data?b.typecode?(b=JSON.parse(JSON.stringify(b)),c(null,b)):c(new a(d.INVALID,"parameter typecode is invalid")):
c(new a(d.INVALID,"parameter data is invalid")):c(new a(d.INVALID,"parameter address is invalid"))},deleteDevice:function(b,a,c,d){d&&d(null,JSON.parse(JSON.stringify(a)));xnm.aio.gateway.systems.HM.delSensor(b,a.address,function(){})}}};
xnm.aio.gateway.systems.HM_X={IP_SEIREN_ACOUSTIC_ALARM_SELECTION:"DISABLE_ACOUSTIC_SIGNAL FREQUENCY_RISING FREQUENCY_FALLING FREQUENCY_RISING_AND_FALLING FREQUENCY_ALTERNATING_LOW_HIGH FREQUENCY_ALTERNATING_LOW_MID_HIGH FREQUENCY_HIGHON_OFF FREQUENCY_HIGHON_LONGOFF FREQUENCY_LOWON_OFF_HIGHON_OFF FREQUENCY_LOWON_LONGOFF_HIGHON_LONGOFF LOW_BATTERY DISARMED INTERNALLY_ARMED EXTERNALLY_ARMED DELAYED_INTERNALLY_ARMED DELAYED_EXTERNALLY_ARMED EVENT ERROR".split(" "),IP_SEIREN_OPTICAL_ALARM_SELECTION:"DISABLE_OPTICAL_SIGNAL BLINKING_ALTERNATELY_REPEATING BLINKING_BOTH_REPEATING DOUBLE_FLASHING_REPEATING FLASHING_BOTH_REPEATING CONFIRMATION_SIGNAL_0 CONFIRMATION_SIGNAL_1 CONFIRMATION_SIGNAL_2".split(" "),
IP_SEIREN_DURATION_UNIT:["S","M","H","D"],listDevices:function(b,a){b._executeRequest("GetHmDevices",null,{timeout:5E3},function(b,d){a&&a(b,d)})},getHMConfig:function(b,a,c){a&&a.address?b._executeRequest("gethmconfig",{address:a.address},{timeout:2E4},function(a,b){a?c&&c(a):b&&b.config?c&&c(null,b.config):c&&c(Error("response format invalid"))}):c&&c(Error("device format error"))},setHMConfig:function(b,a,c,d){a&&a.address?b._executeRequestV5_Post("sethmconfig",{address:a.address,config:c},{timeout:2E4},
function(a){d&&d(a)}):d&&d(Error("device format error"))},delSensor:function(b,a,c){b._executeRequest("delSensor",{type:this.DM.TYPE,adr:a},{timeout:2E4},function(a){c&&c(a)})},learn:function(b,a,c){var d={type:this.DM.TYPE},e={timeout:4E4};a&&a.key&&a.sgtin&&(d.key=a.key,d.sgtin=a.sgtin,e.timeout=6E4);a&&a.snr&&(d.adr=a.snr);b._executeRequest("LearnSC",d,e,function(a,b){if(a)c&&c(a);else if(b.devices){for(var d=[],e=0;e<b.devices.length;e++){var l=b.devices[e],k=l.address.split("."),n;3<=k.length&&
(n=k[2]);d.push({address:l.address,data:l.type,snr:n,_ver:"v5+"})}c&&c(null,d)}else c&&c(Error("response format invalid"))})},executeCommandCreator:function(b,a,c,d){a?c&&c.value?a&&a.address?this._executeCommand(b,a,c,d):d&&d(Error("it device address is empty")):d&&d(Error("it device command is empty")):d&&d(Error("it device is null"))},_executeCommand:function(b,a,c,d){c=this._buildData(b,a,c);"undefined"==typeof c||null==c?d&&d(Error("command format invalid")):b._executeRequest("SendSC",{type:this.DM.TYPE,
address:a.address,data:c},null,function(a){d&&d(a)})},buildQuery:function(b,a,c){b=this._buildData(b,a,c);return"undefined"==typeof b||null==b?null:{type:this.DM.TYPE,address:a.address,data:b,XC_FNC:"SendSC"}},_buildData:function(b,a,c){if(!(a&&a.address&&c&&c.value))return null;if("ip_dimmer"==a.data||"ip_dimmer2"==a.data||"ip_dimmer3"==a.data)if(-1!=c.value.indexOf("dimTo")||-1!=c.value.indexOf("dimUp")||-1!=c.value.indexOf("dimDown")||-1!=c.value.indexOf("toggleTo"))return"undefined"==typeof c.ext||
null==c.ext?c.value:c.value+c.ext;if("ip_siren"==a.data&&"triggerAlarm"==c.value){var d,e,f,g;if(!c.ext)return null;for(b=0;b<c.ext.length;b++)if(a=c.ext[b])switch(a.value){case "alarmAudio":d=a.ext;break;case "alarmVisual":e=a.ext;break;case "alarmDur":g=a.ext;break;case "alarmDurUnit":f=a.ext}if("undefined"==typeof d||null==d||"undefined"==typeof e||null==e||"undefined"==typeof g||null==g||"undefined"==typeof f||null==f)return null;d=this.IP_SEIREN_ACOUSTIC_ALARM_SELECTION.indexOf(d);e=this.IP_SEIREN_OPTICAL_ALARM_SELECTION.indexOf(e);
f=this.IP_SEIREN_DURATION_UNIT.indexOf(f);return"triggerAlarm"+d+","+e+","+g+","+f}if("ip_wallthermo"==a.data||"ip_heater"==a.data)if(-1!=c.value.indexOf("tempTo")||-1!=c.value.indexOf("tempUp")||-1!=c.value.indexOf("tempDown")||-1!=c.value.indexOf("setProfile"))return"undefined"==typeof c.ext||null==c.ext?c.value:c.value+c.ext;if("ip_heater"==a.data&&(-1!=c.value.indexOf("setValve")||-1!=c.value.indexOf("valveUp")||-1!=c.value.indexOf("valveDown"))||"ip_blind"==a.data&&(-1!=c.value.indexOf("moveTo")||
-1!=c.value.indexOf("stepUp")||-1!=c.value.indexOf("stepDown"))||"ip_jalousie"==a.data&&(-1!=c.value.indexOf("moveTo")||-1!=c.value.indexOf("stepUp")||-1!=c.value.indexOf("stepDown")||-1!=c.value.indexOf("lamellaTo")||-1!=c.value.indexOf("lamellaStepUp")||-1!=c.value.indexOf("lamellaStepDown")))return"undefined"==typeof c.ext||null==c.ext?c.value:c.value+c.ext;if("ou_led16"==a.data)return c.value;if("rgb"==a.data&&"setProg"==c.value){if(!c.ext)return null;c="off slow_cycle normal_cycle fast_cycle bonfire waterfall tv_simualtion".split(" ").indexOf(c.ext);
return-1==c?null:"setProg"+c}if("ip_analog_output"==a.data&&(-1!=c.value.indexOf("outputTo")||-1!=c.value.indexOf("outputUp")||-1!=c.value.indexOf("outputDown")||-1!=c.value.indexOf("toggleTo")))return"undefined"==typeof c.ext||null==c.ext?c.value:c.value+c.ext;switch(c.value){case "onTo":case "moveTo":case "tempTo":case "rgb":return"undefined"==typeof c.ext||null==c.ext?null:c.ext;case "onFor":return"undefined"==typeof c.ext||null==c.ext?null:"onFor"+c.ext;case "lamellaTo":return"undefined"==typeof c.ext||
null==c.ext?null:"lamellaTo"+c.ext;case "setWeekProfile":return"undefined"==typeof c.ext||null==c.ext?null:"setWeekProfile"+c.ext;case "vChannel":case "ledRed":case "ledGreen":case "dimTo":case "colorTo":return"undefined"==typeof c.ext||null==c.ext?null:c.value+c.ext;default:return c.value}},handleStateCreator:function(b,a,c){return a&&a.value?(b=this._handleState(b,c))?b[a.value]:null:null},_handleState:function(b,a){if(!a.type||!a.adr||!a.state||"HM"!=a.type&&"HMFHT"!=a.type||"HM"!=b.type||!b.address||
b.address.toLowerCase()!=a.adr.toLowerCase())return null;var c=a.state;switch(b.data){case "rgb":var c=JSON.parse(JSON.stringify(a.state)),d=parseInt(a.state.program);c.program="off slow_cycle normal_cycle fast_cycle bonfire waterfall tv_simualtion".split(" ")[d];break;case "weather_station":c.windDN="?";d=parseInt(a.state.windD);23>d?c.windDN="N":68>d?c.windDN="NO":113>d?c.windDN="O":158>d?c.windDN="SO":203>d?c.windDN="S":248>d?c.windDN="SW":293>d?c.windDN="W":338>d&&(c.windDN="NW");break;case "ip_wallthermo2":c.cl_fd_emergencyOP=
c.cl_fd_emergencyOP?"emergency":"ok";break;case "ip_weather4":c.weatherWindDN="?",d=parseInt(a.state.weatherWindD),23>d?c.weatherWindDN="N":68>d?c.weatherWindDN="NO":113>d?c.weatherWindDN="O":158>d?c.weatherWindDN="SO":203>d?c.weatherWindDN="S":248>d?c.weatherWindDN="SW":293>d?c.weatherWindDN="W":338>d&&(c.weatherWindDN="NW")}return c},DM:{TYPE:"HM",MAP:{maintenance:{status:[{type:"enum",name:"lowbat",ref:{value:"lowbat",options:["true","false"]}},{type:"enum",name:"timeout",ref:{value:"timeout",
options:["true","false"]}}],ipevt:[{type:"enum",name:"lowbat",ref:{value:"lowbat",options:["true","false"]}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}}]},button:{status:[{type:"enum",name:"lowbat",ref:{value:"lowbat",options:["true","false"]}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}}],ipevt:[{type:"enum",name:"lowbat",ref:{value:"lowbat",options:["true","false"]}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}},
{type:"enum",name:"short press",ref:{value:"pressShort",options:["true"]}},{type:"enum",name:"long press",ref:{value:"pressLong",options:["true"]}}]},"switch":{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}},{type:"enum",name:"toggle",ref:{value:"toggle"}},{type:"float",name:"on for",ref:{value:"onFor",ext:"%f",unit:"s"}}],status:[{type:"enum",name:"state",ref:{value:"state",options:["on","off"]}},{type:"enum",name:"lowbat",ref:{value:"lowbat",options:["true",
"false"]}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}}],ipevt:[{type:"enum",name:"state",ref:{value:"state",options:["on","off"]}},{type:"enum",name:"lowbat",ref:{value:"lowbat",options:["true","false"]}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}}]},dimmer:{command:[{type:"enum",name:"off",ref:{value:"off"}},{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"dim up",ref:{value:"dimUp"}},{type:"enum",name:"dim down",ref:{value:"dimDown"}},
{type:"int",name:"dim to",ref:{value:"onTo",ext:"%d",extMeta:"0-100",step:"1"}}],status:[{type:"int",name:"state",ref:{value:"state"}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}}],ipevt:[{type:"int",name:"state",ref:{value:"state"}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}}]},powerswitch:{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}},{type:"enum",name:"toggle",ref:{value:"toggle"}}],status:[{type:"enum",
name:"state",ref:{value:"state",options:["on","off"]}},{type:"float",name:"frequency",ref:{value:"frequency",ext:"%f",scale:"0.1"}},{type:"float",name:"voltage",ref:{value:"voltage",ext:"%f",scale:"0.1"}},{type:"int",name:"current",ref:{value:"current",ext:"%d"}},{type:"float",name:"power",ref:{value:"power",ext:"%f",scale:"0.1"}},{type:"float",name:"consumption",ref:{value:"energy_counter",ext:"%f",scale:"0.1"}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}}],ipevt:[{type:"enum",
name:"state",ref:{value:"state",options:["on","off"]}},{type:"float",name:"frequency",ref:{value:"frequency",ext:"%f",scale:"0.1"}},{type:"float",name:"voltage",ref:{value:"voltage",ext:"%f",scale:"0.1"}},{type:"int",name:"current",ref:{value:"current",ext:"%d"}},{type:"float",name:"power",ref:{value:"power",ext:"%f",scale:"0.1"}},{type:"float",name:"consumption",ref:{value:"energy_counter",ext:"%f",scale:"0.1"}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}}]},blind:{command:[{type:"enum",
name:"step up",ref:{value:"stepUp"}},{type:"enum",name:"step down",ref:{value:"stepDown"}},{type:"enum",name:"move up",ref:{value:"up"}},{type:"enum",name:"move down",ref:{value:"down"}},{type:"enum",name:"stop",ref:{value:"stop"}},{type:"int",name:"move to",ref:{value:"moveTo",ext:"%d",extMeta:"0-100",step:"1"}}],status:[{type:"int",name:"state",ref:{value:"state"}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}}],ipevt:[{type:"int",name:"state",ref:{value:"state"}},{type:"enum",
name:"timeout",ref:{value:"timeout",options:["true","false"]}}]},weather:{status:[{type:"float",name:"temperature",ref:{value:"temp",extMeta:"5-30",scale:"0.1"}},{type:"int",name:"humidity",ref:{value:"hum"}},{type:"enum",name:"lowbat",ref:{value:"lowbat",options:["true","false"]}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}}],ipevt:[{type:"float",name:"temperature",ref:{value:"temp",extMeta:"5-30",scale:"0.1"}},{type:"int",name:"humidity",ref:{value:"hum"}},{type:"enum",
name:"lowbat",ref:{value:"lowbat",options:["true","false"]}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}}]},weather2:{status:[{type:"float",name:"temperature",ref:{value:"temp",extMeta:"5-30",scale:"0.1"}},{type:"int",name:"humidity",ref:{value:"hum"}},{type:"int",name:"air pressure",ref:{value:"air"}},{type:"enum",name:"lowbat",ref:{value:"lowbat",options:["true","false"]}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}}],ipevt:[{type:"float",
name:"temperature",ref:{value:"temp",extMeta:"5-30",scale:"0.1"}},{type:"int",name:"humidity",ref:{value:"hum"}},{type:"int",name:"air pressure",ref:{value:"air"}},{type:"enum",name:"lowbat",ref:{value:"lowbat",options:["true","false"]}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}}]},weatherstation:{status:[{type:"float",name:"temperature",ref:{value:"temp",extMeta:"5-30",scale:"0.1"}},{type:"int",name:"humidity",ref:{value:"hum"}},{type:"enum",name:"raining",ref:{value:"rain",
options:["true","false"]}},{type:"float",name:"rain count",ref:{value:"rainC",scale:"0.1"}},{type:"float",name:"wind speed",ref:{value:"windS",scale:"0.1"}},{type:"enum",name:"wind direction",ref:{value:"windDN",options:"N NO O SO S SW W NW".split(" ")}},{type:"int",name:"wind direction degree",ref:{value:"windD",extMeta:"0-360"}},{type:"float",name:"wind direction range",ref:{value:"windDR",scale:"0.5"}},{type:"int",name:"sunshine time",ref:{value:"sunD",unit:"min"}},{type:"int",name:"brightness",
ref:{value:"bri"}},{type:"enum",name:"lowbat",ref:{value:"lowbat",options:["true","false"]}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}}],ipevt:[{type:"float",name:"temperature",ref:{value:"temp",extMeta:"5-30",scale:"0.1"}},{type:"int",name:"humidity",ref:{value:"hum"}},{type:"enum",name:"raining",ref:{value:"rain",options:["true","false"]}},{type:"float",name:"rain count",ref:{value:"rainC",scale:"0.1"}},{type:"float",name:"wind speed",ref:{value:"windS",scale:"0.1"}},
{type:"enum",name:"wind direction",ref:{value:"windDN",options:"N NO O SO S SW W NW".split(" ")}},{type:"int",name:"wind direction degree",ref:{value:"windD",extMeta:"0-360"}},{type:"float",name:"wind direction range",ref:{value:"windDR",scale:"0.5"}},{type:"int",name:"sunshine time",ref:{value:"sunD",unit:"min"}},{type:"int",name:"brightness",ref:{value:"bri"}},{type:"enum",name:"lowbat",ref:{value:"lowbat",options:["true","false"]}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true",
"false"]}}]},heater:{status:[{type:"int",name:"valve postion",ref:{value:"state"}},{type:"enum",name:"error",ref:{value:"error",options:["no_error","lowbat","VALVE_DRIVE_BLOCKED","VALVE_DRIVE_LOOSE","ADJUSTING_RANGE_TO_SMALL"]}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}}],ipevt:[{type:"int",name:"valve postion",ref:{value:"state"}},{type:"enum",name:"error",ref:{value:"error",options:["no_error","lowbat","VALVE_DRIVE_BLOCKED","VALVE_DRIVE_LOOSE","ADJUSTING_RANGE_TO_SMALL"]}},
{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}}]},thermostat:{command:[{type:"float",name:"set temperature",ref:{value:"tempTo",ext:"%f",extMeta:"5-30",scale:"0.5",step:"0.5"}},{type:"enum",name:"temperature up",ref:{value:"tempUp"}},{type:"enum",name:"temperature down",ref:{value:"tempDown"}},{type:"enum",name:"auto mode",ref:{value:"setAuto"}},{type:"enum",name:"manu mode",ref:{value:"setManu"}},{type:"enum",name:"boost mode",ref:{value:"setBoost"}}],status:[{type:"float",
name:"set temperature",ref:{value:"state",extMeta:"5-30",scale:"0.5"}},{type:"float",name:"current temperature",ref:{value:"act_temp",extMeta:"-30-30",scale:"0.1"}},{type:"float",name:"battery level",ref:{value:"batLvl"}},{type:"int",name:"valve postion",ref:{value:"valveLvl"}},{type:"int",name:"boost time",ref:{value:"boostTime"}},{type:"enum",name:"mode",ref:{value:"mode",options:["auto","manu","boost","party"]}},{type:"enum",name:"error",ref:{value:"error",options:["no_error","low_bat","timeout",
"comm_break"]}}],ipevt:[{type:"float",name:"set temperature",ref:{value:"state",extMeta:"5-30",scale:"0.5"}},{type:"float",name:"current temperature",ref:{value:"act_temp",extMeta:"-30-30",scale:"0.1"}},{type:"float",name:"battery level",ref:{value:"batLvl"}},{type:"int",name:"valve postion",ref:{value:"valveLvl"}},{type:"int",name:"boost time",ref:{value:"boostTime"}},{type:"enum",name:"mode",ref:{value:"mode",options:["auto","manu","boost","party"]}},{type:"enum",name:"error",ref:{value:"error",
options:["no_error","low_bat","timeout","comm_break"]}}]},wallthermo:{command:[{type:"float",name:"set temperature",ref:{value:"tempTo",ext:"%f",extMeta:"6-30",scale:"0.5",step:"0.5"}},{type:"enum",name:"temperature up",ref:{value:"tempUp"}},{type:"enum",name:"temperature down",ref:{value:"tempDown"}}],status:[{type:"float",name:"set temperature",ref:{value:"state",extMeta:"6-30",scale:"0.5"}},{type:"float",name:"current temperature",ref:{value:"temp",extMeta:"-30-30",scale:"0.1"}},{type:"int",name:"humidity",
ref:{value:"hum"}},{type:"enum",name:"lowbat",ref:{value:"lowbat",options:["true","false"]}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}}],ipevt:[{type:"float",name:"set temperature",ref:{value:"state",extMeta:"6-30",scale:"0.5"}},{type:"float",name:"current temperature",ref:{value:"temp",extMeta:"-30-30",scale:"0.1"}},{type:"int",name:"humidity",ref:{value:"hum"}},{type:"enum",name:"lowbat",ref:{value:"lowbat",options:["true","false"]}},{type:"enum",name:"timeout",
ref:{value:"timeout",options:["true","false"]}}]},wallthermostat:{command:[{type:"float",name:"set temperature",ref:{value:"tempTo",ext:"%f",extMeta:"5-30",scale:"0.5",step:"0.5"}},{type:"enum",name:"temperature up",ref:{value:"tempUp"}},{type:"enum",name:"temperature down",ref:{value:"tempDown"}},{type:"enum",name:"auto mode",ref:{value:"setAuto"}},{type:"enum",name:"manu mode",ref:{value:"setManu"}},{type:"enum",name:"boost mode",ref:{value:"setBoost"}},{type:"int",name:"set week profile",ref:{value:"setWeekProfile",
ext:"%d",extMeta:"1-3"}}],status:[{type:"enum",name:"mode",ref:{value:"mode",options:["auto","manu","boost","party"]}},{type:"enum",name:"lowbat",ref:{value:"lowbat",options:["true","false"]}},{type:"enum",name:"comm error",ref:{value:"comm",options:["true","false"]}},{type:"enum",name:"window open",ref:{value:"window",options:["true","false"]}},{type:"float",name:"battery level",ref:{value:"batLvl"}},{type:"int",name:"boost time",ref:{value:"boostTime"}},{type:"float",name:"current temperature",
ref:{value:"temp",extMeta:"-30-30",scale:"0.1"}},{type:"int",name:"humidity",ref:{value:"hum"}},{type:"float",name:"set temperature",ref:{value:"state",extMeta:"5-30",scale:"0.5"}}],ipevt:[{type:"enum",name:"mode",ref:{value:"mode",options:["auto","manu","boost","party"]}},{type:"enum",name:"lowbat",ref:{value:"lowbat",options:["true","false"]}},{type:"enum",name:"comm error",ref:{value:"comm",options:["true","false"]}},{type:"enum",name:"window open",ref:{value:"window",options:["true","false"]}},
{type:"float",name:"battery level",ref:{value:"batLvl"}},{type:"int",name:"boost time",ref:{value:"boostTime"}},{type:"float",name:"current temperature",ref:{value:"temp",extMeta:"-30-30",scale:"0.1"}},{type:"int",name:"humidity",ref:{value:"hum"}},{type:"float",name:"set temperature",ref:{value:"state",extMeta:"5-30",scale:"0.5"}}]},contact:{status:[{type:"enum",name:"state",ref:{value:"state",options:["open","closed"]}},{type:"enum",name:"lowbat",ref:{value:"lowbat",options:["true","false"]}},{type:"enum",
name:"sabotage",ref:{value:"error",options:["sabotage","no_error"]}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}}],ipevt:[{type:"enum",name:"state",ref:{value:"state",options:["open","closed"]}},{type:"enum",name:"lowbat",ref:{value:"lowbat",options:["true","false"]}},{type:"enum",name:"sabotage",ref:{value:"error",options:["sabotage","no_error"]}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}}]},rain:{command:[{type:"enum",name:"heater on",
ref:{value:"heaterOn"}},{type:"enum",name:"heater off",ref:{value:"heaterOff"}},{type:"enum",name:"heater toggle",ref:{value:"heaterToggle"}}],status:[{type:"enum",name:"state",ref:{value:"rain",options:["dry","rain"]}},{type:"enum",name:"heater state",ref:{value:"heat",options:["on","off"]}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}}],ipevt:[{type:"enum",name:"state",ref:{value:"rain",options:["dry","rain"]}},{type:"enum",name:"heater state",ref:{value:"heat",options:["on",
"off"]}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}}]},gong2:{command:[{type:"enum",name:"led on",ref:{value:"ledOn"}},{type:"enum",name:"led off",ref:{value:"ledOff"}},{type:"enum",name:"chime on",ref:{value:"chimeOn"}},{type:"enum",name:"chime off",ref:{value:"chimeOff"}}],status:[{type:"enum",name:"led state",ref:{value:"led",options:["on","off"]}},{type:"enum",name:"chime state",ref:{value:"chime",options:["on","off"]}},{type:"enum",name:"timeout",ref:{value:"timeout",
options:["true","false"]}}],ipevt:[{type:"enum",name:"led state",ref:{value:"led",options:["on","off"]}},{type:"enum",name:"chime state",ref:{value:"chime",options:["on","off"]}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}}]},gong:{command:[{type:"enum",name:"led on",ref:{value:"ledOn"}},{type:"enum",name:"led off",ref:{value:"ledOff"}},{type:"enum",name:"chime on",ref:{value:"chimeOn"}},{type:"enum",name:"chime off",ref:{value:"chimeOff"}},{type:"int",name:"play channel",
ref:{value:"vChannel",ext:"%d"}},{type:"int",name:"led red on for",ref:{value:"ledRed",ext:"%d",unit:"s"}},{type:"int",name:"led green on for",ref:{value:"ledGreen",ext:"%d",unit:"s"}}],status:[{type:"enum",name:"led state",ref:{value:"led",options:["on","off"]}},{type:"enum",name:"chime state",ref:{value:"chime",options:["on","off"]}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}}],ipevt:[{type:"enum",name:"led state",ref:{value:"led",options:["on","off"]}},{type:"enum",
name:"chime state",ref:{value:"chime",options:["on","off"]}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}}]},window:{status:[{type:"enum",name:"state",ref:{value:"state",options:["open","closed","tilted"]}},{type:"enum",name:"sabotage",ref:{value:"error",options:["no_error","sabotage"]}},{type:"enum",name:"battery low",ref:{value:"lowbat",options:["false","true"]}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}}],ipevt:[{type:"enum",name:"state",
ref:{value:"state",options:["open","closed","tilted"]}},{type:"enum",name:"sabotage",ref:{value:"error",options:["no_error","sabotage"]}},{type:"enum",name:"battery low",ref:{value:"lowbat",options:["false","true"]}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}}]},temp:{status:[{type:"float",name:"temperature",ref:{value:"temp"}},{type:"enum",name:"lowbat",ref:{value:"lowbat",options:["true","false"]}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true",
"false"]}}],ipevt:[{type:"float",name:"temperature",ref:{value:"temp"}},{type:"enum",name:"lowbat",ref:{value:"lowbat",options:["true","false"]}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}}]},temp2:{status:[{type:"float",name:"temperature 1 (T1)",ref:{value:"temp1",extMeta:"-150.0-150.0",scale:"0.1"}},{type:"float",name:"temperature 2 (T1)",ref:{value:"temp2",extMeta:"-150.0-150.0",scale:"0.1"}},{type:"float",name:"temp. differ (T1 -T2)",ref:{value:"tempDiff12",extMeta:"-150.0-150.0",
scale:"0.1"}},{type:"float",name:"temp. differ (T2 -T1)",ref:{value:"tempDiff21",extMeta:"-150.0-150.0",scale:"0.1"}},{type:"enum",name:"lowbat",ref:{value:"lowbat",options:["true","false"]}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}}],ipevt:[{type:"float",name:"temperature 1 (T1)",ref:{value:"temp1",extMeta:"-150.0-150.0",scale:"0.1"}},{type:"float",name:"temperature 2 (T1)",ref:{value:"temp2",extMeta:"-150.0-150.0",scale:"0.1"}},{type:"float",name:"temp. differ (T1 -T2)",
ref:{value:"tempDiff12",extMeta:"-150.0-150.0",scale:"0.1"}},{type:"float",name:"temp. differ (T2 -T1)",ref:{value:"tempDiff21",extMeta:"-150.0-150.0",scale:"0.1"}},{type:"enum",name:"lowbat",ref:{value:"lowbat",options:["true","false"]}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}}]},co2:{status:[{type:"enum",name:"state",ref:{value:"state",options:["normal","medium","high"]}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}}],ipevt:[{type:"enum",
name:"state",ref:{value:"state",options:["normal","medium","high"]}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}}]},motion:{status:[{type:"enum",name:"state",ref:{value:"state",options:["ok","motion"]}},{type:"int",name:"brightness",ref:{value:"bri"}},{type:"enum",name:"sabotage",ref:{value:"error",options:["no_error","sabotage"]}},{type:"enum",name:"lowbat",ref:{value:"lowbat",options:["true","false"]}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true",
"false"]}}],ipevt:[{type:"enum",name:"state",ref:{value:"state",options:["ok","motion"]}},{type:"int",name:"brightness",ref:{value:"bri"}},{type:"enum",name:"sabotage",ref:{value:"error",options:["no_error","sabotage"]}},{type:"enum",name:"lowbat",ref:{value:"lowbat",options:["true","false"]}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}}]},smoke:{status:[{type:"enum",name:"state",ref:{value:"state",options:["ok","smoke"]}},{type:"enum",name:"lowbat",ref:{value:"lowbat",
options:["true","false"]}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}}],ipevt:[{type:"enum",name:"state",ref:{value:"state",options:["ok","smoke"]}},{type:"enum",name:"lowbat",ref:{value:"lowbat",options:["true","false"]}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}}]},siren:{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}},{type:"enum",name:"toggle",ref:{value:"toggle"}}],status:[{type:"enum",
name:"state",ref:{value:"state",options:["on","off"]}},{type:"enum",name:"power error",ref:{value:"error_power",options:["power_failure","no_error"]}},{type:"enum",name:"sabotage",ref:{value:"error_sabotage",options:["sabotage","no_error"]}},{type:"enum",name:"battery error",ref:{value:"error_battery",options:["battery_defect","no_error"]}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}}],ipevt:[{type:"enum",name:"state",ref:{value:"state",options:["on","off"]}},{type:"enum",
name:"power error",ref:{value:"error_power",options:["power_failure","no_error"]}},{type:"enum",name:"sabotage",ref:{value:"error_sabotage",options:["sabotage","no_error"]}},{type:"enum",name:"battery error",ref:{value:"error_battery",options:["battery_defect","no_error"]}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}}]},capacity:{status:[{type:"int",name:"state",ref:{value:"state"}},{type:"enum",name:"lowbat",ref:{value:"lowbat",options:["true","false"]}},{type:"enum",
name:"timeout",ref:{value:"timeout",options:["true","false"]}}],ipevt:[{type:"int",name:"state",ref:{value:"state"}},{type:"enum",name:"lowbat",ref:{value:"lowbat",options:["true","false"]}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}}]},switch_interface:{status:[{type:"enum",name:"lowbat",ref:{value:"lowbat",options:["true","false"]}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}}],ipevt:[{type:"enum",name:"lowbat",ref:{value:"lowbat",options:["true",
"false"]}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}},{type:"enum",name:"press",ref:{value:"press",options:["true"]}}]},tilt:{status:[{type:"enum",name:"state",ref:{value:"state",options:["open","closed"]}},{type:"enum",name:"lowbat",ref:{value:"lowbat",options:["true","false"]}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}}],ipevt:[{type:"enum",name:"state",ref:{value:"state",options:["open","closed"]}},{type:"enum",name:"lowbat",ref:{value:"lowbat",
options:["true","false"]}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}}]},water:{status:[{type:"enum",name:"state",ref:{value:"state",options:["ok","moist","water"]}},{type:"enum",name:"lowbat",ref:{value:"lowbat",options:["true","false"]}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}}],ipevt:[{type:"enum",name:"state",ref:{value:"state",options:["ok","moist","water"]}},{type:"enum",name:"lowbat",ref:{value:"lowbat",options:["true","false"]}},
{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}}]},energymeter:{status:[{type:"enum",name:"boot",ref:{value:"boot",options:["true","false"]}},{type:"float",name:"gas energy",ref:{value:"gas_energy"}},{type:"float",name:"gas power",ref:{value:"gas_power"}},{type:"float",name:"energy",ref:{value:"energy"}},{type:"float",name:"power",ref:{value:"power"}},{type:"enum",name:"lowbat",ref:{value:"lowbat",options:["true","false"]}},{type:"enum",name:"timeout",ref:{value:"timeout",
options:["true","false"]}}],ipevt:[{type:"enum",name:"boot",ref:{value:"boot",options:["true","false"]}},{type:"float",name:"gas energy",ref:{value:"gas_energy"}},{type:"float",name:"gas power",ref:{value:"gas_power"}},{type:"float",name:"energy",ref:{value:"energy"}},{type:"float",name:"power",ref:{value:"power"}},{type:"enum",name:"lowbat",ref:{value:"lowbat",options:["true","false"]}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}}]},rgb:{command:[{type:"enum",name:"on",
ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}},{type:"enum",name:"dim up",ref:{value:"dimUp"}},{type:"enum",name:"dim down",ref:{value:"dimDown"}},{type:"int",name:"dim to",ref:{value:"onTo",ext:"%d",extMeta:"0-100",step:"1"}},{type:"enum",name:"white",ref:{value:"white"}},{type:"rgb",name:"rgb color",ref:{value:"rgb",ext:"%s"}},{type:"enum",name:"set program",ref:{value:"setProg",ext:"%e",extMeta:"off slow_cycle normal_cycle fast_cycle bonfire waterfall tv_simualtion".split(" ")}}],
status:[{type:"int",name:"state",ref:{value:"state"}},{type:"int",name:"color",ref:{value:"color"}},{type:"enum",name:"program",ref:{value:"program",options:"off slow_cycle normal_cycle fast_cycle bonfire waterfall tv_simualtion".split(" ")}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}}],ipevt:[{type:"int",name:"state",ref:{value:"state"}},{type:"int",name:"color",ref:{value:"color"}},{type:"enum",name:"program",ref:{value:"program",options:"off slow_cycle normal_cycle fast_cycle bonfire waterfall tv_simualtion".split(" ")}},
{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}}]},lux:{status:[{type:"float",name:"state",ref:{value:"state"}},{type:"enum",name:"lowbat",ref:{value:"lowbat",options:["true","false"]}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}}],ipevt:[{type:"float",name:"state",ref:{value:"state"}},{type:"enum",name:"lowbat",ref:{value:"lowbat",options:["true","false"]}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}}]},siren2:{command:[{type:"enum",
name:"internal alarm on",ref:{value:"switchSensorInOn"}},{type:"enum",name:"internal alarm off",ref:{value:"switchSensorInOff"}},{type:"enum",name:"internal alarm toggle",ref:{value:"switchSensorInToggle"}},{type:"enum",name:"external alarm on",ref:{value:"switchSensorExOn"}},{type:"enum",name:"external alarm off",ref:{value:"switchSensorExOff"}},{type:"enum",name:"external alarm toggle",ref:{value:"switchSensorExToggle"}},{type:"enum",name:"panic alarm on",ref:{value:"switchPanicOn"}},{type:"enum",
name:"panic alarm off",ref:{value:"switchPanicOff"}},{type:"enum",name:"panic alarm toggle",ref:{value:"switchPanicToggle"}},{type:"enum",name:"disarmed",ref:{value:"armingDisarm"}},{type:"enum",name:"internal armed",ref:{value:"armingIntern"}},{type:"enum",name:"all armed",ref:{value:"armingAll"}}],status:[{type:"enum",name:"internal alarm status",ref:{value:"switchSensorInState",options:["off","on"]}},{type:"enum",name:"external alarm status",ref:{value:"switchSensorExState",options:["off","on"]}},
{type:"enum",name:"panic alarm status",ref:{value:"switchPanicState",options:["off","on"]}},{type:"enum",name:"arming status",ref:{value:"arming",options:["disarmed","internal_armed","all_armed","alarm_blocked"]}},{type:"enum",name:"sabotage",ref:{value:"sabotage",options:["no_error","sabotage"]}},{type:"enum",name:"low battery",ref:{value:"lowbat",options:["true","false"]}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}}],ipevt:[{type:"enum",name:"internal alarm status",
ref:{value:"switchSensorInState",options:["off","on"]}},{type:"enum",name:"external alarm status",ref:{value:"switchSensorExState",options:["off","on"]}},{type:"enum",name:"panic alarm status",ref:{value:"switchPanicState",options:["off","on"]}},{type:"enum",name:"arming status",ref:{value:"arming",options:["disarmed","internal_armed","all_armed","alarm_blocked"]}},{type:"enum",name:"sabotage",ref:{value:"sabotage",options:["no_error","sabotage"]}},{type:"enum",name:"low battery",ref:{value:"lowbat",
options:["true","false"]}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}}]},jalousie:{command:[{type:"enum",name:"step up",ref:{value:"stepUp"}},{type:"enum",name:"step down",ref:{value:"stepDown"}},{type:"enum",name:"move up",ref:{value:"moveUp"}},{type:"enum",name:"move down",ref:{value:"moveDown"}},{type:"enum",name:"stop",ref:{value:"stop"}},{type:"int",name:"move to",ref:{value:"moveTo",ext:"%d",extMeta:"0-100",step:"1"}},{type:"enum",name:"lamella up",ref:{value:"lamellaUp"}},
{type:"enum",name:"lamella down",ref:{value:"lamellaDown"}},{type:"enum",name:"lamella step up",ref:{value:"lamellaStepUp"}},{type:"enum",name:"lamella step down",ref:{value:"lamellaStepDown"}},{type:"int",name:"lamella to",ref:{value:"lamellaTo",ext:"%d",extMeta:"0-100",step:"1"}}],status:[{type:"int",name:"state",ref:{value:"jalState"}},{type:"int",name:"lamella state",ref:{value:"jalLmlState"}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}}],ipevt:[{type:"int",name:"state",
ref:{value:"jalState"}},{type:"int",name:"lamella state",ref:{value:"jalLmlState"}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}}]},mod_em_8bit:{command:[{type:"enum",name:"ch.1 short press",ref:{value:"ch1pressShort"}},{type:"enum",name:"ch.1 long press",ref:{value:"ch1pressLong"}},{type:"enum",name:"ch.2 short press",ref:{value:"ch2pressShort"}},{type:"enum",name:"ch.2 long press",ref:{value:"ch2pressLong"}}],status:[{type:"int",name:"state",ref:{value:"state8bit"}},
{type:"enum",name:"low battery",ref:{value:"lowbat",options:["true","false"]}}],ipevt:[{type:"int",name:"state",ref:{value:"state8bit"}},{type:"enum",name:"low battery",ref:{value:"lowbat",options:["true","false"]}},{type:"enum",name:"ch.1 short press",ref:{value:"ch1pressShort",options:["true"]}},{type:"enum",name:"ch.1 long press",ref:{value:"ch1pressLong",options:["true"]}},{type:"enum",name:"ch.2 short press",ref:{value:"ch2pressShort",options:["true"]}},{type:"enum",name:"ch.2 long press",ref:{value:"ch2pressLong",
options:["true"]}}]},mod_em_8:{command:[{type:"enum",name:"short press",ref:{value:"pressShort"}},{type:"enum",name:"long press",ref:{value:"pressLong"}},{type:"enum",name:"press",ref:{value:"press"}}],status:[{type:"enum",name:"state",ref:{value:"state",options:["open","closed"]}},{type:"enum",name:"lowbat",ref:{value:"lowbat",options:["true","false"]}}],ipevt:[{type:"enum",name:"state",ref:{value:"state",options:["open","closed"]}},{type:"enum",name:"low battery",ref:{value:"lowbat",options:["true",
"false"]}},{type:"enum",name:"press",ref:{value:"press",options:["true"]}},{type:"enum",name:"short press",ref:{value:"pressShort",options:["true"]}},{type:"enum",name:"long press",ref:{value:"pressLong",options:["true"]}}]},keymatic:{command:[{type:"enum",name:"open",ref:{value:"open"}},{type:"enum",name:"close",ref:{value:"close"}},{type:"enum",name:"open door",ref:{value:"openDoor"}}],status:[{type:"enum",name:"state",ref:{value:"state",options:["open","closed"]}},{type:"enum",name:"state uncertain",
ref:{value:"uncertain",options:["true","false"]}},{type:"enum",name:"error",ref:{value:"error",options:["no_error","cluth_failure","motor_aborted"]}},{type:"enum",name:"low battery",ref:{value:"lowbat",options:["true","false"]}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}}],ipevt:[{type:"enum",name:"state",ref:{value:"state",options:["open","closed"]}},{type:"enum",name:"state uncertain",ref:{value:"uncertain",options:["true","false"]}},{type:"enum",name:"error",ref:{value:"error",
options:["no_error","cluth_failure","motor_aborted"]}},{type:"enum",name:"low battery",ref:{value:"lowbat",options:["true","false"]}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}}]},ou_led16:{command:[{type:"enum",name:"press short",ref:{value:"pressShort"}},{type:"enum",name:"led off",ref:{value:"ledOff"}},{type:"enum",name:"led red",ref:{value:"ledRed"}},{type:"enum",name:"led green",ref:{value:"ledGreen"}},{type:"enum",name:"led orange",ref:{value:"ledOrange"}},{type:"enum",
name:"led sleep mode off",ref:{value:"ledSleepOff"}},{type:"enum",name:"led sleep mode on",ref:{value:"ledSleepOn"}}],status:[{type:"enum",name:"led status",ref:{value:"led",options:["off","red","green","orange"]}}],ipevt:[{type:"enum",name:"press short",ref:{value:"pressShort",options:["true"]}},{type:"enum",name:"led status",ref:{value:"led",options:["off","red","green","orange"]}}]},dualwhite:{command:[{type:"enum",name:"off",ref:{value:"off"}},{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",
name:"toggle",ref:{value:"toggle"}},{type:"enum",name:"dim up",ref:{value:"dimUp"}},{type:"enum",name:"dim down",ref:{value:"dimDown"}},{type:"int",name:"dim to",ref:{value:"dimTo",ext:"%d",extMeta:"0-100",step:"1"}},{type:"enum",name:"color off",ref:{value:"colorOff"}},{type:"enum",name:"color on",ref:{value:"colorOn"}},{type:"enum",name:"color toggle",ref:{value:"colorToggle"}},{type:"enum",name:"color up",ref:{value:"colorUp"}},{type:"enum",name:"color down",ref:{value:"colorDown"}},{type:"int",
name:"color to",ref:{value:"colorTo",ext:"%d",extMeta:"0-100",step:"1"}}],status:[{type:"int",name:"brightness",ref:{value:"bri"}},{type:"int",name:"color",ref:{value:"color"}},{type:"enum",name:"error overheat",ref:{value:"error_overheat",options:["true","false"]}},{type:"enum",name:"error reduced",ref:{value:"error_reduced",options:["true","false"]}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}}],ipevt:[{type:"int",name:"brightness",ref:{value:"bri"}},{type:"int",name:"color",
ref:{value:"color"}},{type:"enum",name:"error overheat",ref:{value:"error_overheat",options:["true","false"]}},{type:"enum",name:"error reduced",ref:{value:"error_reduced",options:["true","false"]}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}}]},ip_switch:{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}},{type:"enum",name:"toggle",ref:{value:"toggle"}},{type:"float",name:"on for",ref:{value:"onFor",ext:"%f",unit:"s"}}],status:[{type:"enum",
name:"state",ref:{value:"state",options:["on","off"]}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}}],ipevt:[{type:"enum",name:"state",ref:{value:"state",options:["on","off"]}},{type:"enum",name:"lowbat",ref:{value:"lowbat",options:["true","false"]}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}}]},ip_contact:{status:[{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}},{type:"enum",name:"battery low",ref:{value:"lowbat",
options:["true","false"]}},{type:"enum",name:"sabotage",ref:{value:"sabotage",options:["true","false"]}},{type:"enum",name:"state",ref:{value:"state",options:["open","closed"]}}],ipevt:[{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}},{type:"enum",name:"battery low",ref:{value:"lowbat",options:["true","false"]}},{type:"enum",name:"sabotage",ref:{value:"sabotage",options:["true","false"]}},{type:"enum",name:"state",ref:{value:"state",options:["open","closed"]}}]},ip_heater:{command:[{type:"enum",
name:"auto mode",ref:{value:"auto"}},{type:"enum",name:"manu mode",ref:{value:"manu"}},{type:"enum",name:"boost on",ref:{value:"boostOn"}},{type:"enum",name:"boost off",ref:{value:"boostOff"}},{type:"enum",name:"window open",ref:{value:"winOpen"}},{type:"enum",name:"window close",ref:{value:"winClose"}},{type:"float",name:"set temperature",ref:{value:"tempTo",ext:"%f",extMeta:"4.5-30.5",scale:"0.5",unit:"\u00b0C"}},{type:"float",name:"temperature up",ref:{value:"tempUp",ext:"%f",extMeta:"0.5-30.5",
scale:"0.5",unit:"\u00b0C"}},{type:"float",name:"temperature down",ref:{value:"tempDown",ext:"%f",extMeta:"0.5-30.5",scale:"0.5",unit:"\u00b0C"}},{type:"int",name:"set profile",ref:{value:"setProfile",ext:"%d",extMeta:"1-3"}},{type:"int",name:"set valve",ref:{value:"setValve",ext:"%d",extMeta:"0-100",unit:"%"}},{type:"int",name:"valve up",ref:{value:"valveUp",ext:"%d",extMeta:"1-100",unit:"%"}},{type:"int",name:"valve down",ref:{value:"valveDown",ext:"%d",extMeta:"1-100",unit:"%"}}],status:[{type:"float",
name:"set temperature",ref:{value:"state",extMeta:"4.5-30.5",scale:"0.5"}},{type:"int",name:"valve",ref:{value:"valve",extMeta:"0-100"}},{type:"enum",name:"frost protection",ref:{value:"frost",options:["true","false"]}},{type:"enum",name:"mode",ref:{value:"mode",options:["auto","manu"]}},{type:"enum",name:"active profile",ref:{value:"profile",options:["1","2","3"]}},{type:"enum",name:"window state",ref:{value:"window",options:["open","closed"]}},{type:"float",name:"current temperature",ref:{value:"temp",
extMeta:"-3276.8-3276.7",scale:"0.1"}},{type:"enum",name:"boost mode",ref:{value:"boost",options:["true","false"]}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}},{type:"enum",name:"battery low",ref:{value:"lowbat",options:["true","false"]}}],ipevt:[{type:"float",name:"set temperature",ref:{value:"state",extMeta:"4.5-30.5",scale:"0.5"}},{type:"int",name:"valve",ref:{value:"valve",extMeta:"0-100"}},{type:"enum",name:"frost protection",ref:{value:"frost",options:["true",
"false"]}},{type:"enum",name:"mode",ref:{value:"mode",options:["auto","manu"]}},{type:"enum",name:"active profile",ref:{value:"profile",options:["1","2","3"]}},{type:"enum",name:"window state",ref:{value:"window",options:["open","closed"]}},{type:"float",name:"current temperature",ref:{value:"temp",extMeta:"-3276.8-3276.7",scale:"0.1"}},{type:"enum",name:"boost mode",ref:{value:"boost",options:["true","false"]}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}},{type:"enum",
name:"battery low",ref:{value:"lowbat",options:["true","false"]}}]},ip_powerswitch:{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}},{type:"enum",name:"toggle",ref:{value:"toggle"}},{type:"float",name:"on for",ref:{value:"onFor",ext:"%f",unit:"s"}}],status:[{type:"enum",name:"state",ref:{value:"switchState",options:["on","off"]}},{type:"float",name:"frequency",ref:{value:"meterFrequency",ext:"%f",scale:"0.1"}},{type:"float",name:"voltage",ref:{value:"meterVoltage",
ext:"%f",scale:"0.1"}},{type:"int",name:"current",ref:{value:"meterCurrent",ext:"%d"}},{type:"float",name:"power",ref:{value:"meterPower",ext:"%f",scale:"0.1"}},{type:"float",name:"consumption",ref:{value:"meterEnergyCounter",ext:"%f",scale:"0.1"}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}}],ipevt:[{type:"enum",name:"state",ref:{value:"switchState",options:["on","off"]}},{type:"float",name:"frequency",ref:{value:"meterFrequency",ext:"%f",scale:"0.1"}},{type:"float",
name:"voltage",ref:{value:"meterVoltage",ext:"%f",scale:"0.1"}},{type:"int",name:"current",ref:{value:"meterCurrent",ext:"%d"}},{type:"float",name:"power",ref:{value:"meterPower",ext:"%f",scale:"0.1"}},{type:"float",name:"consumption",ref:{value:"meterEnergyCounter",ext:"%f",scale:"0.1"}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}}]},ip_energyactor:{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}},{type:"enum",name:"toggle",
ref:{value:"toggle"}},{type:"enum",name:"ch.4 on",ref:{value:"ch4on"}},{type:"enum",name:"ch.4 off",ref:{value:"ch4off"}},{type:"enum",name:"ch.4 toggle",ref:{value:"ch4toggle"}},{type:"enum",name:"ch.5 on",ref:{value:"ch5on"}},{type:"enum",name:"ch.5 off",ref:{value:"ch5off"}},{type:"enum",name:"ch.5 toggle",ref:{value:"ch5toggle"}},{type:"enum",name:"ch.6 on",ref:{value:"ch6on"}},{type:"enum",name:"ch.6 off",ref:{value:"ch6off"}},{type:"enum",name:"ch.6 toggle",ref:{value:"ch6toggle"}}],status:[{type:"enum",
name:"state",ref:{value:"switchState",options:["on","off"]}},{type:"enum",name:"ch.4 state",ref:{value:"ch4State",options:["on","off"]}},{type:"enum",name:"ch.5 state",ref:{value:"ch5State",options:["on","off"]}},{type:"enum",name:"ch.6 state",ref:{value:"ch6State",options:["on","off"]}},{type:"float",name:"frequency",ref:{value:"meterFrequency",ext:"%f",scale:"0.1"}},{type:"float",name:"voltage",ref:{value:"meterVoltage",ext:"%f",scale:"0.1"}},{type:"int",name:"current",ref:{value:"meterCurrent",
ext:"%d"}},{type:"float",name:"power",ref:{value:"meterPower",ext:"%f",scale:"0.1"}},{type:"float",name:"consumption",ref:{value:"meterEnergyCounter",ext:"%f",scale:"0.1"}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}}],ipevt:[{type:"enum",name:"state",ref:{value:"switchState",options:["on","off"]}},{type:"enum",name:"ch.4 state",ref:{value:"ch4State",options:["on","off"]}},{type:"enum",name:"ch.5 state",ref:{value:"ch5State",options:["on","off"]}},{type:"enum",name:"ch.6 state",
ref:{value:"ch6State",options:["on","off"]}},{type:"float",name:"frequency",ref:{value:"meterFrequency",ext:"%f",scale:"0.1"}},{type:"float",name:"voltage",ref:{value:"meterVoltage",ext:"%f",scale:"0.1"}},{type:"int",name:"current",ref:{value:"meterCurrent",ext:"%d"}},{type:"float",name:"power",ref:{value:"meterPower",ext:"%f",scale:"0.1"}},{type:"float",name:"consumption",ref:{value:"meterEnergyCounter",ext:"%f",scale:"0.1"}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}}]},
ip_energyactor2:{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}},{type:"enum",name:"toggle",ref:{value:"toggle"}},{type:"enum",name:"ch.2 on",ref:{value:"ch2on"}},{type:"enum",name:"ch.2 off",ref:{value:"ch2off"}},{type:"enum",name:"ch.2 toggle",ref:{value:"ch2toggle"}},{type:"enum",name:"ch.3 on",ref:{value:"ch3on"}},{type:"enum",name:"ch.3 off",ref:{value:"ch3off"}},{type:"enum",name:"ch.3 toggle",ref:{value:"ch3toggle"}},{type:"enum",name:"ch.4 on",
ref:{value:"ch4on"}},{type:"enum",name:"ch.4 off",ref:{value:"ch4off"}},{type:"enum",name:"ch.4 toggle",ref:{value:"ch4toggle"}}],status:[{type:"enum",name:"state",ref:{value:"switchState",options:["on","off"]}},{type:"enum",name:"ch.2 state",ref:{value:"ch2State",options:["on","off"]}},{type:"enum",name:"ch.3 state",ref:{value:"ch3State",options:["on","off"]}},{type:"enum",name:"ch.4 state",ref:{value:"ch4State",options:["on","off"]}},{type:"float",name:"frequency",ref:{value:"meterFrequency",ext:"%f",
scale:"0.1"}},{type:"float",name:"voltage",ref:{value:"meterVoltage",ext:"%f",scale:"0.1"}},{type:"int",name:"current",ref:{value:"meterCurrent",ext:"%d"}},{type:"float",name:"power",ref:{value:"meterPower",ext:"%f",scale:"0.1"}},{type:"float",name:"consumption",ref:{value:"meterEnergyCounter",ext:"%f",scale:"0.1"}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}}],ipevt:[{type:"enum",name:"state",ref:{value:"switchState",options:["on","off"]}},{type:"enum",name:"ch.2 state",
ref:{value:"ch2State",options:["on","off"]}},{type:"enum",name:"ch.3 state",ref:{value:"ch3State",options:["on","off"]}},{type:"enum",name:"ch.4 state",ref:{value:"ch4State",options:["on","off"]}},{type:"float",name:"frequency",ref:{value:"meterFrequency",ext:"%f",scale:"0.1"}},{type:"float",name:"voltage",ref:{value:"meterVoltage",ext:"%f",scale:"0.1"}},{type:"int",name:"current",ref:{value:"meterCurrent",ext:"%d"}},{type:"float",name:"power",ref:{value:"meterPower",ext:"%f",scale:"0.1"}},{type:"float",
name:"consumption",ref:{value:"meterEnergyCounter",ext:"%f",scale:"0.1"}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}}]},ip_dimmer:{command:[{type:"enum",name:"dim off",ref:{value:"dimOff"}},{type:"int",name:"dim up",ref:{value:"dimUp",ext:"%d",extMeta:"1-100",step:"1"}},{type:"int",name:"dim down",ref:{value:"dimDown",ext:"%d",extMeta:"1-100",step:"1"}},{type:"int",name:"dim to",ref:{value:"dimTo",ext:"%d",extMeta:"0-100",step:"1"}},{type:"int",name:"toggle to",ref:{value:"toggleTo",
ext:"%d",extMeta:"0-100",step:"1"}},{type:"enum",name:"ch.4 dim off",ref:{value:"ch4dimOff"}},{type:"int",name:"ch.4 dim up",ref:{value:"ch4dimUp",ext:"%d",extMeta:"1-100",step:"1"}},{type:"int",name:"ch.4 dim down",ref:{value:"ch4dimDown",ext:"%d",extMeta:"1-100",step:"1"}},{type:"int",name:"ch.4 dim to",ref:{value:"ch4dimTo",ext:"%d",extMeta:"0-100",step:"1"}},{type:"int",name:"ch.4 toggle to",ref:{value:"ch4toggleTo",ext:"%d",extMeta:"0-100",step:"1"}},{type:"enum",name:"ch.5 dim off",ref:{value:"ch5dimOff"}},
{type:"int",name:"ch.5 dim up",ref:{value:"ch5dimUp",ext:"%d",extMeta:"1-100",step:"1"}},{type:"int",name:"ch.5 dim down",ref:{value:"ch5dimDown",ext:"%d",extMeta:"1-100",step:"1"}},{type:"int",name:"ch.5 dim to",ref:{value:"ch5dimTo",ext:"%d",extMeta:"0-100",step:"1"}},{type:"int",name:"ch.5 toggle to",ref:{value:"ch5toggleTo",ext:"%d",extMeta:"0-100",step:"1"}},{type:"enum",name:"ch.6 dim off",ref:{value:"ch6dimOff"}},{type:"int",name:"ch.6 dim up",ref:{value:"ch6dimUp",ext:"%d",extMeta:"1-100",
step:"1"}},{type:"int",name:"ch.6 dim down",ref:{value:"ch6dimDown",ext:"%d",extMeta:"1-100",step:"1"}},{type:"int",name:"ch.6 dim to",ref:{value:"ch6dimTo",ext:"%d",extMeta:"0-100",step:"1"}},{type:"int",name:"ch.6 toggle to",ref:{value:"ch6toggleTo",ext:"%d",extMeta:"0-100",step:"1"}}],status:[{type:"int",name:"dimmer state",ref:{value:"dimmerLevel"}},{type:"int",name:"ch.4 state",ref:{value:"ch4Level"}},{type:"int",name:"ch.5 state",ref:{value:"ch5Level"}},{type:"int",name:"ch.6 state",ref:{value:"ch6Level"}},
{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}}],ipevt:[{type:"int",name:"dimmer state",ref:{value:"dimmerLevel"}},{type:"int",name:"ch.4 state",ref:{value:"ch4Level"}},{type:"int",name:"ch.5 state",ref:{value:"ch5Level"}},{type:"int",name:"ch.6 state",ref:{value:"ch6Level"}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}}]},ip_dimmer2:{command:[{type:"enum",name:"dim off",ref:{value:"dimOff"}},{type:"int",name:"dim up",ref:{value:"dimUp",ext:"%d",
extMeta:"1-100",step:"1"}},{type:"int",name:"dim down",ref:{value:"dimDown",ext:"%d",extMeta:"1-100",step:"1"}},{type:"int",name:"dim to",ref:{value:"dimTo",ext:"%d",extMeta:"0-100",step:"1"}},{type:"int",name:"toggle to",ref:{value:"toggleTo",ext:"%d",extMeta:"0-100",step:"1"}},{type:"enum",name:"ch.3 dim off",ref:{value:"ch3dimOff"}},{type:"int",name:"ch.3 dim up",ref:{value:"ch3dimUp",ext:"%d",extMeta:"1-100",step:"1"}},{type:"int",name:"ch.3 dim down",ref:{value:"ch3dimDown",ext:"%d",extMeta:"1-100",
step:"1"}},{type:"int",name:"ch.3 dim to",ref:{value:"ch3dimTo",ext:"%d",extMeta:"0-100",step:"1"}},{type:"int",name:"ch.3 toggle to",ref:{value:"ch3toggleTo",ext:"%d",extMeta:"0-100",step:"1"}},{type:"enum",name:"ch.4 dim off",ref:{value:"ch4dimOff"}},{type:"int",name:"ch.4 dim up",ref:{value:"ch4dimUp",ext:"%d",extMeta:"1-100",step:"1"}},{type:"int",name:"ch.4 dim down",ref:{value:"ch4dimDown",ext:"%d",extMeta:"1-100",step:"1"}},{type:"int",name:"ch.4 dim to",ref:{value:"ch4dimTo",ext:"%d",extMeta:"0-100",
step:"1"}},{type:"int",name:"ch.4 toggle to",ref:{value:"ch4toggleTo",ext:"%d",extMeta:"0-100",step:"1"}},{type:"enum",name:"ch.5 dim off",ref:{value:"ch5dimOff"}},{type:"int",name:"ch.5 dim up",ref:{value:"ch5dimUp",ext:"%d",extMeta:"1-100",step:"1"}},{type:"int",name:"ch.5 dim down",ref:{value:"ch5dimDown",ext:"%d",extMeta:"1-100",step:"1"}},{type:"int",name:"ch.5 dim to",ref:{value:"ch5dimTo",ext:"%d",extMeta:"0-100",step:"1"}},{type:"int",name:"ch.5 toggle to",ref:{value:"ch5toggleTo",ext:"%d",
extMeta:"0-100",step:"1"}}],status:[{type:"int",name:"dimmer state",ref:{value:"dimmerLevel"}},{type:"int",name:"ch.3 state",ref:{value:"ch3Level"}},{type:"int",name:"ch.4 state",ref:{value:"ch4Level"}},{type:"int",name:"ch.5 state",ref:{value:"ch5Level"}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}}],ipevt:[{type:"int",name:"dimmer state",ref:{value:"dimmerLevel"}},{type:"int",name:"ch.3 state",ref:{value:"ch3Level"}},{type:"int",name:"ch.4 state",ref:{value:"ch4Level"}},
{type:"int",name:"ch.5 state",ref:{value:"ch5Level"}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}}]},ip_dimmer3:{command:[{type:"enum",name:"dim off",ref:{value:"dimOff"}},{type:"int",name:"dim up",ref:{value:"dimUp",ext:"%d",extMeta:"1-100",step:"1"}},{type:"int",name:"dim down",ref:{value:"dimDown",ext:"%d",extMeta:"1-100",step:"1"}},{type:"int",name:"dim to",ref:{value:"dimTo",ext:"%d",extMeta:"0-100",step:"1"}},{type:"int",name:"toggle to",ref:{value:"toggleTo",
ext:"%d",extMeta:"0-100",step:"1"}},{type:"enum",name:"ch.2 dim off",ref:{value:"ch2dimOff"}},{type:"int",name:"ch.2 dim up",ref:{value:"ch2dimUp",ext:"%d",extMeta:"1-100",step:"1"}},{type:"int",name:"ch.2 dim down",ref:{value:"ch2dimDown",ext:"%d",extMeta:"1-100",step:"1"}},{type:"int",name:"ch.2 dim to",ref:{value:"ch2dimTo",ext:"%d",extMeta:"0-100",step:"1"}},{type:"int",name:"ch.2 toggle to",ref:{value:"ch2toggleTo",ext:"%d",extMeta:"0-100",step:"1"}},{type:"enum",name:"ch.3 dim off",ref:{value:"ch3dimOff"}},
{type:"int",name:"ch.3 dim up",ref:{value:"ch3dimUp",ext:"%d",extMeta:"1-100",step:"1"}},{type:"int",name:"ch.3 dim down",ref:{value:"ch3dimDown",ext:"%d",extMeta:"1-100",step:"1"}},{type:"int",name:"ch.3 dim to",ref:{value:"ch3dimTo",ext:"%d",extMeta:"0-100",step:"1"}},{type:"int",name:"ch.3 toggle to",ref:{value:"ch3toggleTo",ext:"%d",extMeta:"0-100",step:"1"}},{type:"enum",name:"ch.4 dim off",ref:{value:"ch4dimOff"}},{type:"int",name:"ch.4 dim up",ref:{value:"ch4dimUp",ext:"%d",extMeta:"1-100",
step:"1"}},{type:"int",name:"ch.4 dim down",ref:{value:"ch4dimDown",ext:"%d",extMeta:"1-100",step:"1"}},{type:"int",name:"ch.4 dim to",ref:{value:"ch4dimTo",ext:"%d",extMeta:"0-100",step:"1"}},{type:"int",name:"ch.4 toggle to",ref:{value:"ch4toggleTo",ext:"%d",extMeta:"0-100",step:"1"}}],status:[{type:"int",name:"dimmer state",ref:{value:"dimmerLevel"}},{type:"int",name:"ch.2 state",ref:{value:"ch2Level"}},{type:"int",name:"ch.3 state",ref:{value:"ch3Level"}},{type:"int",name:"ch.4 state",ref:{value:"ch4Level"}},
{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}}],ipevt:[{type:"int",name:"dimmer state",ref:{value:"dimmerLevel"}},{type:"int",name:"ch.2 state",ref:{value:"ch2Level"}},{type:"int",name:"ch.3 state",ref:{value:"ch3Level"}},{type:"int",name:"ch.4 state",ref:{value:"ch4Level"}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}}]},ip_motion:{command:[{type:"enum",name:"reset",ref:{value:"reset"}},{type:"enum",name:"activate",ref:{value:"activate"}},
{type:"enum",name:"deactivate",ref:{value:"deactivate"}},{type:"enum",name:"toggleActivate",ref:{value:"toggleActivate"}}],status:[{type:"enum",name:"state",ref:{value:"state",options:["on","off"]}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}},{type:"enum",name:"battery low",ref:{value:"lowbat",options:["true","false"]}},{type:"enum",name:"sabotage",ref:{value:"sabotage",options:["true","false"]}},{type:"float",name:"illumination",ref:{value:"illumination",extMeta:"0.0-163830.0"}},
{type:"enum",name:"active",ref:{value:"active",options:["true","false"]}}],ipevt:[{type:"enum",name:"state",ref:{value:"state",options:["on","off"]}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}},{type:"enum",name:"battery low",ref:{value:"lowbat",options:["true","false"]}},{type:"enum",name:"sabotage",ref:{value:"sabotage",options:["true","false"]}},{type:"float",name:"illumination",ref:{value:"illumination",extMeta:"0.0-163830.0"}},{type:"enum",name:"active",ref:{value:"active",
options:["true","false"]}}]},ip_motion2:{status:[{type:"enum",name:"state",ref:{value:"state",options:["on","off"]}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}},{type:"enum",name:"battery low",ref:{value:"lowbat",options:["true","false"]}},{type:"float",name:"illumination",ref:{value:"illumination",extMeta:"0.0-163830.0"}},{type:"enum",name:"active",ref:{value:"active",options:["true","false"]}}],ipevt:[{type:"enum",name:"state",ref:{value:"state",options:["on","off"]}},
{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}},{type:"enum",name:"battery low",ref:{value:"lowbat",options:["true","false"]}},{type:"float",name:"illumination",ref:{value:"illumination",extMeta:"0.0-163830.0"}},{type:"enum",name:"active",ref:{value:"active",options:["true","false"]}},{type:"enum",name:"button 1 short press",ref:{value:"btn1pressShort",options:["true"]}},{type:"enum",name:"button 1 long press",ref:{value:"btn1pressLong",options:["true"]}},{type:"enum",
name:"button 2 short press",ref:{value:"btn2pressShort",options:["true"]}},{type:"enum",name:"button 2 long press",ref:{value:"btn2pressLong",options:["true"]}}]},ip_button2:{status:[{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}},{type:"enum",name:"battery low",ref:{value:"lowbat",options:["true","false"]}}],ipevt:[{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}},{type:"enum",name:"battery low",ref:{value:"lowbat",options:["true","false"]}},
{type:"enum",name:"button 1 short press",ref:{value:"btn1pressShort",options:["true"]}},{type:"enum",name:"button 1 long press",ref:{value:"btn1pressLong",options:["true"]}},{type:"enum",name:"button 2 short press",ref:{value:"btn2pressShort",options:["true"]}},{type:"enum",name:"button 2 long press",ref:{value:"btn2pressLong",options:["true"]}}]},ip_button4:{status:[{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}},{type:"enum",name:"battery low",ref:{value:"lowbat",options:["true",
"false"]}}],ipevt:[{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}},{type:"enum",name:"battery low",ref:{value:"lowbat",options:["true","false"]}},{type:"enum",name:"button 1 short press",ref:{value:"btn1pressShort",options:["true"]}},{type:"enum",name:"button 1 long press",ref:{value:"btn1pressLong",options:["true"]}},{type:"enum",name:"button 2 short press",ref:{value:"btn2pressShort",options:["true"]}},{type:"enum",name:"button 2 long press",ref:{value:"btn2pressLong",
options:["true"]}},{type:"enum",name:"button 3 short press",ref:{value:"btn3pressShort",options:["true"]}},{type:"enum",name:"button 3 long press",ref:{value:"btn3pressLong",options:["true"]}},{type:"enum",name:"button 4 short press",ref:{value:"btn4pressShort",options:["true"]}},{type:"enum",name:"button 4 long press",ref:{value:"btn4pressLong",options:["true"]}}]},ip_button6:{status:[{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}},{type:"enum",name:"battery low",ref:{value:"lowbat",
options:["true","false"]}}],ipevt:[{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}},{type:"enum",name:"battery low",ref:{value:"lowbat",options:["true","false"]}},{type:"enum",name:"button 1 short press",ref:{value:"btn1pressShort",options:["true"]}},{type:"enum",name:"button 1 long press",ref:{value:"btn1pressLong",options:["true"]}},{type:"enum",name:"button 2 short press",ref:{value:"btn2pressShort",options:["true"]}},{type:"enum",name:"button 2 long press",ref:{value:"btn2pressLong",
options:["true"]}},{type:"enum",name:"button 3 short press",ref:{value:"btn3pressShort",options:["true"]}},{type:"enum",name:"button 3 long press",ref:{value:"btn3pressLong",options:["true"]}},{type:"enum",name:"button 4 short press",ref:{value:"btn4pressShort",options:["true"]}},{type:"enum",name:"button 4 long press",ref:{value:"btn4pressLong",options:["true"]}},{type:"enum",name:"button 5 short press",ref:{value:"btn5pressShort",options:["true"]}},{type:"enum",name:"button 5 long press",ref:{value:"btn5pressLong",
options:["true"]}},{type:"enum",name:"button 6 short press",ref:{value:"btn6pressShort",options:["true"]}},{type:"enum",name:"button 6 long press",ref:{value:"btn6pressLong",options:["true"]}}]},ip_siren:{command:[{type:"multi",name:"trigger alarm",ref:{value:"triggerAlarm",ext:"%multi",extMeta:[{type:"enum",name:"set audio",ref:{value:"alarmAudio",ext:"%e",extMeta:"DISABLE_ACOUSTIC_SIGNAL FREQUENCY_RISING FREQUENCY_FALLING FREQUENCY_RISING_AND_FALLING FREQUENCY_ALTERNATING_LOW_HIGH FREQUENCY_ALTERNATING_LOW_MID_HIGH FREQUENCY_HIGHON_OFF FREQUENCY_HIGHON_LONGOFF FREQUENCY_LOWON_OFF_HIGHON_OFF FREQUENCY_LOWON_LONGOFF_HIGHON_LONGOFF LOW_BATTERY DISARMED INTERNALLY_ARMED EXTERNALLY_ARMED DELAYED_INTERNALLY_ARMED DELAYED_EXTERNALLY_ARMED EVENT ERROR".split(" ")}},
{type:"enum",name:"set visual",ref:{value:"alarmVisual",ext:"%e",extMeta:"DISABLE_OPTICAL_SIGNAL BLINKING_ALTERNATELY_REPEATING BLINKING_BOTH_REPEATING DOUBLE_FLASHING_REPEATING FLASHING_BOTH_REPEATING CONFIRMATION_SIGNAL_0 CONFIRMATION_SIGNAL_1 CONFIRMATION_SIGNAL_2".split(" ")}},{type:"int",name:"set duration",ref:{value:"alarmDur",ext:"%d",extMeta:"0-16343"}},{type:"enum",name:"set duration unit",ref:{value:"alarmDurUnit",ext:"%e",extMeta:["S","M","H","D"]}}]}}],status:[{type:"enum",name:"timeout",
ref:{value:"timeout",options:["true","false"]}},{type:"enum",name:"battery low",ref:{value:"lowbat",options:["true","false"]}},{type:"enum",name:"sabotage",ref:{value:"sabotage",options:["true","false"]}},{type:"enum",name:"state",ref:{value:"state",options:["on","off"]}}],ipevt:[{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}},{type:"enum",name:"battery low",ref:{value:"lowbat",options:["true","false"]}},{type:"enum",name:"sabotage",ref:{value:"sabotage",options:["true",
"false"]}},{type:"enum",name:"state",ref:{value:"state",options:["on","off"]}}]},ip_wallthermo:{command:[{type:"enum",name:"auto mode",ref:{value:"auto"}},{type:"enum",name:"manu mode",ref:{value:"manu"}},{type:"enum",name:"boost on",ref:{value:"boostOn"}},{type:"enum",name:"boost off",ref:{value:"boostOff"}},{type:"enum",name:"window open",ref:{value:"winOpen"}},{type:"enum",name:"window close",ref:{value:"winClose"}},{type:"float",name:"set temperature",ref:{value:"tempTo",ext:"%f",extMeta:"4.5-30.5",
scale:"0.5",unit:"\u00b0C"}},{type:"float",name:"temperature up",ref:{value:"tempUp",ext:"%f",extMeta:"0.5-30.5",scale:"0.5",unit:"\u00b0C"}},{type:"float",name:"temperature down",ref:{value:"tempDown",ext:"%f",extMeta:"0.5-30.5",scale:"0.5",unit:"\u00b0C"}},{type:"int",name:"set profile",ref:{value:"setProfile",ext:"%d",extMeta:"1-3"}}],status:[{type:"float",name:"set temperature",ref:{value:"state",extMeta:"4.5-30.5",scale:"0.5"}},{type:"int",name:"humidity",ref:{value:"hum",extMeta:"0-100"}},{type:"enum",
name:"frost protection",ref:{value:"frost",options:["true","false"]}},{type:"enum",name:"mode",ref:{value:"mode",options:["auto","manu"]}},{type:"enum",name:"active profile",ref:{value:"profile",options:["1","2","3"]}},{type:"enum",name:"window state",ref:{value:"window",options:["open","closed"]}},{type:"float",name:"current temperature",ref:{value:"temp",extMeta:"-3276.8-3276.7",scale:"0.1"}},{type:"enum",name:"boost mode",ref:{value:"boost",options:["true","false"]}},{type:"enum",name:"timeout",
ref:{value:"timeout",options:["true","false"]}},{type:"enum",name:"battery low",ref:{value:"lowbat",options:["true","false"]}}],ipevt:[{type:"float",name:"set temperature",ref:{value:"state",extMeta:"4.5-30.5",scale:"0.5"}},{type:"int",name:"humidity",ref:{value:"hum",extMeta:"0-100"}},{type:"enum",name:"frost protection",ref:{value:"frost",options:["true","false"]}},{type:"enum",name:"mode",ref:{value:"mode",options:["auto","manu"]}},{type:"enum",name:"active profile",ref:{value:"profile",options:["1",
"2","3"]}},{type:"enum",name:"window state",ref:{value:"window",options:["open","closed"]}},{type:"float",name:"current temperature",ref:{value:"temp",extMeta:"-3276.8-3276.7",scale:"0.1"}},{type:"enum",name:"boost mode",ref:{value:"boost",options:["true","false"]}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}},{type:"enum",name:"battery low",ref:{value:"lowbat",options:["true","false"]}}]},ip_window:{status:[{type:"enum",name:"state",ref:{value:"state",options:["closed",
"tilted","open"]}},{type:"enum",name:"sabotage",ref:{value:"sabotage",options:["true","false"]}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}},{type:"enum",name:"battery low",ref:{value:"lowbat",options:["true","false"]}}],ipevt:[{type:"enum",name:"state",ref:{value:"state",options:["closed","tilted","open"]}},{type:"enum",name:"sabotage",ref:{value:"sabotage",options:["true","false"]}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}},{type:"enum",
name:"battery low",ref:{value:"lowbat",options:["true","false"]}}]},ip_smoke:{command:[{type:"enum",name:"intrusion alarm off",ref:{value:"intrusionAlarmOff"}},{type:"enum",name:"intrusion alarm on",ref:{value:"intrusionAlarmOn"}}],status:[{type:"enum",name:"state",ref:{value:"state",options:["smoke","ok"]}},{type:"int",name:"alarm detail",ref:{value:"alarmDetail",extMeta:"0-3"}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}},{type:"enum",name:"battery low",ref:{value:"lowbat",
options:["true","false"]}}],ipevt:[{type:"enum",name:"state",ref:{value:"state",options:["smoke","ok"]}},{type:"int",name:"alarm detail",ref:{value:"alarmDetail",extMeta:"0-3"}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}},{type:"enum",name:"battery low",ref:{value:"lowbat",options:["true","false"]}}]},ip_blind:{command:[{type:"enum",name:"stop",ref:{value:"stop"}},{type:"enum",name:"move up",ref:{value:"moveUp"}},{type:"enum",name:"move down",ref:{value:"moveDown"}},
{type:"int",name:"step up",ref:{value:"stepUp",ext:"%d",extMeta:"1-10",step:"1"}},{type:"int",name:"step down",ref:{value:"stepDown",ext:"%d",extMeta:"1-10",step:"1"}},{type:"int",name:"move to",ref:{value:"moveTo",ext:"%d",extMeta:"0-100",step:"1"}},{type:"enum",name:"ch.4 stop",ref:{value:"ch4stop"}},{type:"enum",name:"ch.4 move up",ref:{value:"ch4moveUp"}},{type:"enum",name:"ch.4 move down",ref:{value:"ch4moveDown"}},{type:"int",name:"ch.4 step up",ref:{value:"ch4stepUp",ext:"%d",extMeta:"1-10",
step:"1"}},{type:"int",name:"ch.4 step down",ref:{value:"ch4stepDown",ext:"%d",extMeta:"1-10",step:"1"}},{type:"int",name:"ch.4 move to",ref:{value:"ch4moveTo",ext:"%d",extMeta:"0-100",step:"1"}},{type:"enum",name:"ch.5 stop",ref:{value:"ch5stop"}},{type:"enum",name:"ch.5 move up",ref:{value:"ch5moveUp"}},{type:"enum",name:"ch.5 move down",ref:{value:"ch5moveDown"}},{type:"int",name:"ch.5 step up",ref:{value:"ch5stepUp",ext:"%d",extMeta:"1-10",step:"1"}},{type:"int",name:"ch.5 step down",ref:{value:"ch5stepDown",
ext:"%d",extMeta:"1-10",step:"1"}},{type:"int",name:"ch.5 move to",ref:{value:"ch5moveTo",ext:"%d",extMeta:"0-100",step:"1"}},{type:"enum",name:"ch.6 stop",ref:{value:"ch6stop"}},{type:"enum",name:"ch.6 move up",ref:{value:"ch6moveUp"}},{type:"enum",name:"ch.6 move down",ref:{value:"ch6moveDown"}},{type:"int",name:"ch.6 step up",ref:{value:"ch6stepUp",ext:"%d",extMeta:"1-10",step:"1"}},{type:"int",name:"ch.6 step down",ref:{value:"ch6stepDown",ext:"%d",extMeta:"1-10",step:"1"}},{type:"int",name:"ch.6 move to",
ref:{value:"ch6moveTo",ext:"%d",extMeta:"0-100",step:"1"}}],status:[{type:"int",name:"blind state",ref:{value:"blindLevel"}},{type:"int",name:"ch.4 state",ref:{value:"ch4Level"}},{type:"int",name:"ch.5 state",ref:{value:"ch5Level"}},{type:"int",name:"ch.6 state",ref:{value:"ch6Level"}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}}],ipevt:[{type:"int",name:"blind state",ref:{value:"blindLevel"}},{type:"int",name:"ch.4 state",ref:{value:"ch4Level"}},{type:"int",name:"ch.5 state",
ref:{value:"ch5Level"}},{type:"int",name:"ch.6 state",ref:{value:"ch6Level"}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}}]},ip_jalousie:{command:[{type:"enum",name:"stop",ref:{value:"stop"}},{type:"enum",name:"move up",ref:{value:"moveUp"}},{type:"enum",name:"move down",ref:{value:"moveDown"}},{type:"int",name:"step up",ref:{value:"stepUp",ext:"%d",extMeta:"1-10",step:"1"}},{type:"int",name:"step down",ref:{value:"stepDown",ext:"%d",extMeta:"1-10",step:"1"}},{type:"int",
name:"move to",ref:{value:"moveTo",ext:"%d",extMeta:"0-100",step:"1"}},{type:"enum",name:"lamella up",ref:{value:"lamellaUp"}},{type:"enum",name:"lamella down",ref:{value:"lamellaDown"}},{type:"int",name:"lamella step up",ref:{value:"lamellaStepUp",ext:"%d",extMeta:"1-10",step:"1"}},{type:"int",name:"lamella step down",ref:{value:"lamellaStepDown",ext:"%d",extMeta:"1-10",step:"1"}},{type:"int",name:"lamella to",ref:{value:"lamellaTo",ext:"%d",extMeta:"0-100",step:"1"}},{type:"enum",name:"ch.4 stop",
ref:{value:"ch4stop"}},{type:"enum",name:"ch.4 move up",ref:{value:"ch4moveUp"}},{type:"enum",name:"ch.4 move down",ref:{value:"ch4moveDown"}},{type:"int",name:"ch.4 step up",ref:{value:"ch4stepUp",ext:"%d",extMeta:"1-10",step:"1"}},{type:"int",name:"ch.4 step down",ref:{value:"ch4stepDown",ext:"%d",extMeta:"1-10",step:"1"}},{type:"int",name:"ch.4 move to",ref:{value:"ch4moveTo",ext:"%d",extMeta:"0-100",step:"1"}},{type:"enum",name:"ch.4 lamella up",ref:{value:"ch4lamellaUp"}},{type:"enum",name:"ch.4 lamella down",
ref:{value:"ch4lamellaDown"}},{type:"int",name:"ch.4 lamella step up",ref:{value:"ch4lamellaStepUp",ext:"%d",extMeta:"1-10",step:"1"}},{type:"int",name:"ch.4 lamella step down",ref:{value:"ch4lamlellaStepDown",ext:"%d",extMeta:"1-10",step:"1"}},{type:"int",name:"ch.4 lamella to",ref:{value:"ch4lamellaTo",ext:"%d",extMeta:"0-100",step:"1"}},{type:"enum",name:"ch.5 stop",ref:{value:"ch5stop"}},{type:"enum",name:"ch.5 move up",ref:{value:"ch5moveUp"}},{type:"enum",name:"ch.5 move down",ref:{value:"ch5moveDown"}},
{type:"int",name:"ch.5 step up",ref:{value:"ch5stepUp",ext:"%d",extMeta:"1-10",step:"1"}},{type:"int",name:"ch.5 step down",ref:{value:"ch5stepDown",ext:"%d",extMeta:"1-10",step:"1"}},{type:"int",name:"ch.5 move to",ref:{value:"ch5moveTo",ext:"%d",extMeta:"0-100",step:"1"}},{type:"enum",name:"ch.5 lamella up",ref:{value:"ch5lamellaUp"}},{type:"enum",name:"ch.5 lamella down",ref:{value:"ch5lamellaDown"}},{type:"int",name:"ch.5 lamella step up",ref:{value:"ch5lamellaStepUp",ext:"%d",extMeta:"1-10",
step:"1"}},{type:"int",name:"ch.5 lamella step down",ref:{value:"ch5lamlellaStepDown",ext:"%d",extMeta:"1-10",step:"1"}},{type:"int",name:"ch.5 lamella to",ref:{value:"ch5lamellaTo",ext:"%d",extMeta:"0-100",step:"1"}},{type:"enum",name:"ch.6 stop",ref:{value:"ch6stop"}},{type:"enum",name:"ch.6 move up",ref:{value:"ch6moveUp"}},{type:"enum",name:"ch.6 move down",ref:{value:"ch6moveDown"}},{type:"int",name:"ch.6 step up",ref:{value:"ch6stepUp",ext:"%d",extMeta:"1-10",step:"1"}},{type:"int",name:"ch.6 step down",
ref:{value:"ch6stepDown",ext:"%d",extMeta:"1-10",step:"1"}},{type:"int",name:"ch.6 move to",ref:{value:"ch6moveTo",ext:"%d",extMeta:"0-100",step:"1"}},{type:"enum",name:"ch.6 lamella up",ref:{value:"ch6lamellaUp"}},{type:"enum",name:"ch.6 lamella down",ref:{value:"ch6lamellaDown"}},{type:"int",name:"ch.6 lamella step up",ref:{value:"ch6lamellaStepUp",ext:"%d",extMeta:"1-10",step:"1"}},{type:"int",name:"ch.6 lamella step down",ref:{value:"ch6lamlellaStepDown",ext:"%d",extMeta:"1-10",step:"1"}},{type:"int",
name:"ch.6 lamella to",ref:{value:"ch6lamellaTo",ext:"%d",extMeta:"0-100",step:"1"}}],status:[{type:"int",name:"blind state",ref:{value:"blindLevel"}},{type:"int",name:"lamella state",ref:{value:"lamellaLevel"}},{type:"int",name:"ch.4 blind state",ref:{value:"ch4blindLevel"}},{type:"int",name:"ch.4 lamella state",ref:{value:"ch4lamellaLevel"}},{type:"int",name:"ch.5 blind state",ref:{value:"ch5blindLevel"}},{type:"int",name:"ch.5 lamella state",ref:{value:"ch5lamellaLevel"}},{type:"int",name:"ch.6 blind state",
ref:{value:"ch6blindLevel"}},{type:"int",name:"ch.6 lamella state",ref:{value:"ch6lamellaLevel"}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}}],ipevt:[{type:"int",name:"blind state",ref:{value:"blindLevel"}},{type:"int",name:"lamella state",ref:{value:"lamellaLevel"}},{type:"int",name:"ch.4 blind state",ref:{value:"ch4blindLevel"}},{type:"int",name:"ch.4 lamella state",ref:{value:"ch4lamellaLevel"}},{type:"int",name:"ch.5 blind state",ref:{value:"ch5blindLevel"}},{type:"int",
name:"ch.5 lamella state",ref:{value:"ch5lamellaLevel"}},{type:"int",name:"ch.6 blind state",ref:{value:"ch6blindLevel"}},{type:"int",name:"ch.6 lamella state",ref:{value:"ch6lamellaLevel"}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}}]},ip_presence:{command:[{type:"enum",name:"reset",ref:{value:"reset"}},{type:"enum",name:"activate",ref:{value:"activate"}},{type:"enum",name:"deactivate",ref:{value:"deactivate"}},{type:"enum",name:"toggleActivate",ref:{value:"toggleActivate"}}],
status:[{type:"enum",name:"state",ref:{value:"state",options:["on","off"]}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}},{type:"enum",name:"battery low",ref:{value:"lowbat",options:["true","false"]}},{type:"enum",name:"sabotage",ref:{value:"sabotage",options:["true","false"]}},{type:"float",name:"illumination",ref:{value:"illumination",extMeta:"0.0-163830.0"}},{type:"enum",name:"active",ref:{value:"active",options:["true","false"]}}],ipevt:[{type:"enum",name:"state",
ref:{value:"state",options:["on","off"]}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}},{type:"enum",name:"battery low",ref:{value:"lowbat",options:["true","false"]}},{type:"enum",name:"sabotage",ref:{value:"sabotage",options:["true","false"]}},{type:"float",name:"illumination",ref:{value:"illumination",extMeta:"0.0-163830.0"}},{type:"enum",name:"active",ref:{value:"active",options:["true","false"]}}]},ip_wallthermo2:{command:[{type:"enum",name:"auto mode",ref:{value:"auto"}},
{type:"enum",name:"manu mode",ref:{value:"manu"}},{type:"enum",name:"boost on",ref:{value:"boostOn"}},{type:"enum",name:"boost off",ref:{value:"boostOff"}},{type:"enum",name:"window open",ref:{value:"winOpen"}},{type:"enum",name:"window close",ref:{value:"winClose"}},{type:"float",name:"set temperature",ref:{value:"tempTo",ext:"%f",extMeta:"4.5-30.5",scale:"0.5",unit:"\u00b0C"}},{type:"float",name:"temperature up",ref:{value:"tempUp",ext:"%f",extMeta:"0.5-30.5",scale:"0.5",unit:"\u00b0C"}},{type:"float",
name:"temperature down",ref:{value:"tempDown",ext:"%f",extMeta:"0.5-30.5",scale:"0.5",unit:"\u00b0C"}},{type:"int",name:"set profile",ref:{value:"setProfile",ext:"%d",extMeta:"1-3"}}],status:[{type:"float",name:"set temperature",ref:{value:"state",extMeta:"4.5-30.5",scale:"0.5"}},{type:"int",name:"humidity",ref:{value:"hum",extMeta:"0-100"}},{type:"enum",name:"frost protection",ref:{value:"frost",options:["true","false"]}},{type:"enum",name:"mode",ref:{value:"mode",options:["auto","manu"]}},{type:"enum",
name:"active profile",ref:{value:"profile",options:["1","2","3"]}},{type:"enum",name:"window state",ref:{value:"window",options:["open","closed"]}},{type:"float",name:"current temperature",ref:{value:"temp",extMeta:"-3276.8-3276.7",scale:"0.1"}},{type:"enum",name:"boost mode",ref:{value:"boost",options:["true","false"]}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}},{type:"enum",name:"battery low",ref:{value:"lowbat",options:["true","false"]}},{type:"enum",name:"room control connection",
ref:{value:"cl_fd_emergencyOP",options:["ok","emergency"]}},{type:"enum",name:"frost protection active",ref:{value:"cl_fd_frostProtection",options:["true","false"]}},{type:"enum",name:"switching state",ref:{value:"cl_fd_state",options:["on","off"]}},{type:"enum",name:"humidity alarm",ref:{value:"cl_fd_humidityAlarm",options:["true","false"]}},{type:"enum",name:"valve state",ref:{value:"valveState",options:["on","off"]}}],ipevt:[{type:"float",name:"set temperature",ref:{value:"state",extMeta:"4.5-30.5",
scale:"0.5"}},{type:"int",name:"humidity",ref:{value:"hum",extMeta:"0-100"}},{type:"enum",name:"frost protection",ref:{value:"frost",options:["true","false"]}},{type:"enum",name:"mode",ref:{value:"mode",options:["auto","manu"]}},{type:"enum",name:"active profile",ref:{value:"profile",options:["1","2","3"]}},{type:"enum",name:"window state",ref:{value:"window",options:["open","closed"]}},{type:"float",name:"current temperature",ref:{value:"temp",extMeta:"-3276.8-3276.7",scale:"0.1"}},{type:"enum",
name:"boost mode",ref:{value:"boost",options:["true","false"]}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}},{type:"enum",name:"battery low",ref:{value:"lowbat",options:["true","false"]}},{type:"enum",name:"room control connection",ref:{value:"cl_fd_emergencyOP",options:["ok","emergency"]}},{type:"enum",name:"frost protection active",ref:{value:"cl_fd_frostProtection",options:["true","false"]}},{type:"enum",name:"switching state",ref:{value:"cl_fd_state",options:["on",
"off"]}},{type:"enum",name:"humidity alarm",ref:{value:"cl_fd_humidityAlarm",options:["true","false"]}},{type:"enum",name:"valve state",ref:{value:"valveState",options:["on","off"]}}]},ip_floor_heater:{status:[{type:"enum",name:"controlling",ref:{value:"cl_f_state",options:["on","off"]}},{type:"enum",name:"frost protection active",ref:{value:"cl_f_frostProtection",options:["true","false"]}},{type:"enum",name:"emergency operation",ref:{value:"cl_f_emergencyOP",options:["true","false"]}},{type:"enum",
name:"humidity limiter",ref:{value:"cl_f_humidityLimiter",options:["true","false"]}}],ipevt:[{type:"enum",name:"controlling",ref:{value:"cl_f_state",options:["on","off"]}},{type:"enum",name:"frost protection active",ref:{value:"cl_f_frostProtection",options:["true","false"]}},{type:"enum",name:"emergency operation",ref:{value:"cl_f_emergencyOP",options:["true","false"]}},{type:"enum",name:"humidity limiter",ref:{value:"cl_f_humidityLimiter",options:["true","false"]}}]},ip_floor_pump_heater:{status:[{type:"enum",
name:"controlling",ref:{value:"cl_fp_state",options:["on","off"]}},{type:"enum",name:"frost protection active",ref:{value:"cl_fp_frostProtection",options:["true","false"]}},{type:"enum",name:"emergency operation",ref:{value:"cl_fp_emergencyOP",options:["true","false"]}},{type:"enum",name:"humidity limiter",ref:{value:"cl_fp_humidityLimiter",options:["true","false"]}}],ipevt:[{type:"enum",name:"controlling",ref:{value:"cl_fp_state",options:["on","off"]}},{type:"enum",name:"frost protection active",
ref:{value:"cl_fp_frostProtection",options:["true","false"]}},{type:"enum",name:"emergency operation",ref:{value:"cl_fp_emergencyOP",options:["true","false"]}},{type:"enum",name:"humidity limiter",ref:{value:"cl_fp_humidityLimiter",options:["true","false"]}}]},ip_weather:{status:[{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}},{type:"enum",name:"battery low",ref:{value:"lowbat",options:["true","false"]}},{type:"float",name:"temperature",ref:{value:"weatherActualTemp",extMeta:"-3276.8-3276.7",
scale:"0.1"}},{type:"int",name:"humidity",ref:{value:"weatherHum",extMeta:"0-100"}},{type:"int",name:"brightness",ref:{value:"weatherIllu",extMeta:"0.0-163830.0",scale:"0.1"}},{type:"int",name:"sunshine  duration",ref:{value:"weatherSunD",extMeta:"0-16383"}},{type:"enum",name:"sunshine  duration overflow",ref:{value:"weatherSunDOF",options:["true","false"]}},{type:"enum",name:"sunshine threhold overflow",ref:{value:"weatherSunTOR",options:["true","false"]}},{type:"float",name:"wind speed",ref:{value:"weatherWindS",
extMeta:"0.0-200.0",scale:"0.1"}},{type:"enum",name:"wind threhold overflow",ref:{value:"weatherWindTOR",options:["true","false"]}}],ipevt:[{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}},{type:"enum",name:"battery low",ref:{value:"lowbat",options:["true","false"]}},{type:"float",name:"temperature",ref:{value:"weatherActualTemp",extMeta:"-3276.8-3276.7",scale:"0.1"}},{type:"int",name:"humidity",ref:{value:"weatherHum",extMeta:"0-100"}},{type:"int",name:"brightness",ref:{value:"weatherIllu",
extMeta:"0.0-163830.0",scale:"0.1"}},{type:"int",name:"sunshine  duration",ref:{value:"weatherSunD",extMeta:"0-16383"}},{type:"enum",name:"sunshine  duration overflow",ref:{value:"weatherSunDOF",options:["true","false"]}},{type:"enum",name:"sunshine threhold overflow",ref:{value:"weatherSunTOR",options:["true","false"]}},{type:"float",name:"wind speed",ref:{value:"weatherWindS",extMeta:"0.0-200.0",scale:"0.1"}},{type:"enum",name:"wind threhold overflow",ref:{value:"weatherWindTOR",options:["true",
"false"]}}]},ip_weather2:{status:[{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}},{type:"enum",name:"battery low",ref:{value:"lowbat",options:["true","false"]}},{type:"float",name:"temperature",ref:{value:"weatherActualTemp",extMeta:"-3276.8-3276.7",scale:"0.1"}},{type:"int",name:"humidity",ref:{value:"weatherHum",extMeta:"0-100"}},{type:"int",name:"brightness",ref:{value:"weatherIllu",extMeta:"0.0-163830.0",scale:"0.1"}},{type:"int",name:"sunshine  duration",ref:{value:"weatherSunD",
extMeta:"0-16383"}},{type:"enum",name:"sunshine  duration overflow",ref:{value:"weatherSunDOF",options:["true","false"]}},{type:"enum",name:"sunshine threhold overflow",ref:{value:"weatherSunTOR",options:["true","false"]}},{type:"float",name:"wind speed",ref:{value:"weatherWindS",extMeta:"0.0-200.0",scale:"0.1"}},{type:"enum",name:"wind threhold overflow",ref:{value:"weatherWindTOR",options:["true","false"]}},{type:"enum",name:"raining",ref:{value:"weatherRain",options:["true","false"]}},{type:"float",
name:"rain counter",ref:{value:"weatherRainC",extMeta:"0.0-1638.0",scale:"0.1"}},{type:"enum",name:"rain counter overflow",ref:{value:"weatherRainCOF",options:["true","false"]}}],ipevt:[{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}},{type:"enum",name:"battery low",ref:{value:"lowbat",options:["true","false"]}},{type:"float",name:"temperature",ref:{value:"weatherActualTemp",extMeta:"-3276.8-3276.7",scale:"0.1"}},{type:"int",name:"humidity",ref:{value:"weatherHum",extMeta:"0-100"}},
{type:"int",name:"brightness",ref:{value:"weatherIllu",extMeta:"0.0-163830.0",scale:"0.1"}},{type:"int",name:"sunshine  duration",ref:{value:"weatherSunD",extMeta:"0-16383"}},{type:"enum",name:"sunshine  duration overflow",ref:{value:"weatherSunDOF",options:["true","false"]}},{type:"enum",name:"sunshine threhold overflow",ref:{value:"weatherSunTOR",options:["true","false"]}},{type:"float",name:"wind speed",ref:{value:"weatherWindS",extMeta:"0.0-200.0",scale:"0.1"}},{type:"enum",name:"wind threhold overflow",
ref:{value:"weatherWindTOR",options:["true","false"]}},{type:"enum",name:"raining",ref:{value:"weatherRain",options:["true","false"]}},{type:"float",name:"rain counter",ref:{value:"weatherRainC",extMeta:"0.0-1638.0",scale:"0.1"}},{type:"enum",name:"rain counter overflow",ref:{value:"weatherRainCOF",options:["true","false"]}}]},ip_weather3:{status:[{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}},{type:"enum",name:"battery low",ref:{value:"lowbat",options:["true","false"]}},
{type:"float",name:"temperature",ref:{value:"temperature",extMeta:"-3276.8-3276.7",scale:"0.1"}},{type:"int",name:"humidity",ref:{value:"humidity",extMeta:"0-100"}}],ipevt:[{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}},{type:"enum",name:"battery low",ref:{value:"lowbat",options:["true","false"]}},{type:"float",name:"temperature",ref:{value:"temperature",extMeta:"-3276.8-3276.7",scale:"0.1"}},{type:"int",name:"humidity",ref:{value:"humidity",extMeta:"0-100"}}]},ip_weather4:{status:[{type:"enum",
name:"timeout",ref:{value:"timeout",options:["true","false"]}},{type:"enum",name:"battery low",ref:{value:"lowbat",options:["true","false"]}},{type:"float",name:"temperature",ref:{value:"weatherActualTemp",extMeta:"-3276.8-3276.7",scale:"0.1"}},{type:"int",name:"humidity",ref:{value:"weatherHum",extMeta:"0-100"}},{type:"int",name:"brightness",ref:{value:"weatherIllu",extMeta:"0.0-163830.0",scale:"0.1"}},{type:"int",name:"sunshine  duration",ref:{value:"weatherSunD",extMeta:"0-16383"}},{type:"enum",
name:"sunshine  duration overflow",ref:{value:"weatherSunDOF",options:["true","false"]}},{type:"enum",name:"sunshine threhold overflow",ref:{value:"weatherSunTOR",options:["true","false"]}},{type:"float",name:"wind speed",ref:{value:"weatherWindS",extMeta:"0.0-200.0",scale:"0.1"}},{type:"enum",name:"wind threhold overflow",ref:{value:"weatherWindTOR",options:["true","false"]}},{type:"enum",name:"wind direction",ref:{value:"weatherWindDN",options:"N NO O SO S SW W NW".split(" ")}},{type:"float",name:"wind direction degree",
ref:{value:"weatherWindD",extMeta:"0.0-357.5",scale:"0.1"}},{type:"float",name:"wind direction range",ref:{value:"weatherWindDR",extMeta:"0.0-146.25",scale:"0.01"}},{type:"enum",name:"raining",ref:{value:"weatherRain",options:["true","false"]}},{type:"float",name:"rain counter",ref:{value:"weatherRainC",extMeta:"0.0-1638.0",scale:"0.1"}},{type:"enum",name:"rain counter overflow",ref:{value:"weatherRainCOF",options:["true","false"]}}],ipevt:[{type:"enum",name:"timeout",ref:{value:"timeout",options:["true",
"false"]}},{type:"enum",name:"battery low",ref:{value:"lowbat",options:["true","false"]}},{type:"float",name:"temperature",ref:{value:"weatherActualTemp",extMeta:"-3276.8-3276.7",scale:"0.1"}},{type:"int",name:"humidity",ref:{value:"weatherHum",extMeta:"0-100"}},{type:"int",name:"brightness",ref:{value:"weatherIllu",extMeta:"0.0-163830.0",scale:"0.1"}},{type:"int",name:"sunshine  duration",ref:{value:"weatherSunD",extMeta:"0-16383"}},{type:"enum",name:"sunshine  duration overflow",ref:{value:"weatherSunDOF",
options:["true","false"]}},{type:"enum",name:"sunshine threhold overflow",ref:{value:"weatherSunTOR",options:["true","false"]}},{type:"float",name:"wind speed",ref:{value:"weatherWindS",extMeta:"0.0-200.0",scale:"0.1"}},{type:"enum",name:"wind threhold overflow",ref:{value:"weatherWindTOR",options:["true","false"]}},{type:"enum",name:"wind direction",ref:{value:"weatherWindDN",options:"N NO O SO S SW W NW".split(" ")}},{type:"float",name:"wind direction degree",ref:{value:"weatherWindD",extMeta:"0.0-357.5",
scale:"0.1"}},{type:"float",name:"wind direction range",ref:{value:"weatherWindDR",extMeta:"0.0-146.25",scale:"0.01"}},{type:"enum",name:"raining",ref:{value:"weatherRain",options:["true","false"]}},{type:"float",name:"rain counter",ref:{value:"weatherRainC",extMeta:"0.0-1638.0",scale:"0.1"}},{type:"enum",name:"rain counter overflow",ref:{value:"weatherRainCOF",options:["true","false"]}}]},ip_direction:{status:[{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}},{type:"enum",
name:"battery low",ref:{value:"lowbat",options:["true","false"]}},{type:"enum",name:"current direction",ref:{value:"current_direction",options:["right_to_left","left_to_right"]}},{type:"enum",name:"last direction",ref:{value:"last_direction",options:["right_to_left","left_to_right"]}},{type:"int",name:"passage count right to left",ref:{value:"r2l_passage_counter",extMeta:"0-127"}},{type:"int",name:"passage count left to right",ref:{value:"l2r_passage_counter",extMeta:"0-127"}},{type:"enum",name:"passage count overflow right to left",
ref:{value:"r2l_passage_counter_overflow",options:["true","false"]}},{type:"enum",name:"passage count overflow left to right",ref:{value:"l2r_passage_counter_overflow",options:["true","false"]}}],ipevt:[{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}},{type:"enum",name:"battery low",ref:{value:"lowbat",options:["true","false"]}},{type:"enum",name:"current direction",ref:{value:"current_direction",options:["right_to_left","left_to_right"]}},{type:"enum",name:"last direction",
ref:{value:"last_direction",options:["right_to_left","left_to_right"]}},{type:"int",name:"passage count right to left",ref:{value:"r2l_passage_counter",extMeta:"0-127"}},{type:"int",name:"passage count left to right",ref:{value:"l2r_passage_counter",extMeta:"0-127"}},{type:"enum",name:"passage count overflow right to left",ref:{value:"r2l_passage_counter_overflow",options:["true","false"]}},{type:"enum",name:"passage count overflow left to right",ref:{value:"l2r_passage_counter_overflow",options:["true",
"false"]}}]},ip_button8:{status:[{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}},{type:"enum",name:"battery low",ref:{value:"lowbat",options:["true","false"]}}],ipevt:[{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}},{type:"enum",name:"battery low",ref:{value:"lowbat",options:["true","false"]}},{type:"enum",name:"button 1 short press",ref:{value:"btn1pressShort",options:["true"]}},{type:"enum",name:"button 1 long press",ref:{value:"btn1pressLong",
options:["true"]}},{type:"enum",name:"button 2 short press",ref:{value:"btn2pressShort",options:["true"]}},{type:"enum",name:"button 2 long press",ref:{value:"btn2pressLong",options:["true"]}},{type:"enum",name:"button 3 short press",ref:{value:"btn3pressShort",options:["true"]}},{type:"enum",name:"button 3 long press",ref:{value:"btn3pressLong",options:["true"]}},{type:"enum",name:"button 4 short press",ref:{value:"btn4pressShort",options:["true"]}},{type:"enum",name:"button 4 long press",ref:{value:"btn4pressLong",
options:["true"]}},{type:"enum",name:"button 5 short press",ref:{value:"btn5pressShort",options:["true"]}},{type:"enum",name:"button 5 long press",ref:{value:"btn5pressLong",options:["true"]}},{type:"enum",name:"button 6 short press",ref:{value:"btn6pressShort",options:["true"]}},{type:"enum",name:"button 6 long press",ref:{value:"btn6pressLong",options:["true"]}},{type:"enum",name:"button 7 short press",ref:{value:"btn7pressShort",options:["true"]}},{type:"enum",name:"button 7 long press",ref:{value:"btn7pressLong",
options:["true"]}},{type:"enum",name:"button 8 short press",ref:{value:"btn8pressShort",options:["true"]}},{type:"enum",name:"button 8 long press",ref:{value:"btn8pressLong",options:["true"]}}]},ip_generic_input:{status:[{type:"enum",name:"change over",ref:{value:"genInputChangeOver",options:["true","false"]}},{type:"enum",name:"external clockK",ref:{value:"genInputExtClock",options:["true","false"]}},{type:"enum",name:"humidity limiter",ref:{value:"genInputHumidityLimiter",options:["true","false"]}},
{type:"enum",name:"state",ref:{value:"genInputState",options:["on","off"]}},{type:"enum",name:"tactile switch",ref:{value:"genInputTactileSwitch",options:["true","false"]}},{type:"enum",name:"temperature limiter",ref:{value:"genInputTempLimiter",options:["true","false"]}}],ipevt:[{type:"enum",name:"change over",ref:{value:"genInputChangeOver",options:["true","false"]}},{type:"enum",name:"external clockK",ref:{value:"genInputExtClock",options:["true","false"]}},{type:"enum",name:"humidity limiter",
ref:{value:"genInputHumidityLimiter",options:["true","false"]}},{type:"enum",name:"state",ref:{value:"genInputState",options:["on","off"]}},{type:"enum",name:"tactile switch",ref:{value:"genInputTactileSwitch",options:["true","false"]}},{type:"enum",name:"temperature limiter",ref:{value:"genInputTempLimiter",options:["true","false"]}}]},ip_analog_output:{command:[{type:"enum",name:"off",ref:{value:"outputOff"}},{type:"int",name:"up",ref:{value:"outputUp",ext:"%d",extMeta:"1-100",step:"1"}},{type:"int",
name:"down",ref:{value:"outputDown",ext:"%d",extMeta:"1-100",step:"1"}},{type:"int",name:"move to",ref:{value:"outputTo",ext:"%d",extMeta:"0-100",step:"1"}},{type:"int",name:"toggle to",ref:{value:"toggleTo",ext:"%d",extMeta:"0-100",step:"1"}}],status:[{type:"int",name:"output state",ref:{value:"outputLevel"}}],ipevt:[{type:"int",name:"output state",ref:{value:"outputLevel"}}]}},getGatewayDeviceType:function(b){b={type:this.TYPE,name:"HomeMatic",subtypes:[]};b.subtypes.push({id:"Switch",data:"switch"});
b.subtypes.push({id:"Dimmer",data:"dimmer"});b.subtypes.push({id:"Blind",data:"blind"});b.subtypes.push({id:"Switch Power Meter",data:"powerswitch"});b.subtypes.push({id:"Button",data:"button"});b.subtypes.push({id:"Weather",data:"weather"});b.subtypes.push({id:"Weather Station (HM-WDS100-C6-O)",data:"weather_station"});b.subtypes.push({id:"Thermostat ()",data:"thermostat"});b.subtypes.push({id:"Thermostat Contoller",data:"thermocontrol"});b.subtypes.push({id:"Wall Thermostat",data:"wallthermostat"});
b.subtypes.push({id:"Water Sensor",data:"water"});b.subtypes.push({id:"Smoke Detector",data:"smoke"});b.subtypes.push({id:"Window Senor",data:"window"});b.subtypes.push({id:"Contact Sensor",data:"contact"});b.subtypes.push({id:"Tilt Sensor",data:"tilt"});b.subtypes.push({id:"Rain Sensor",data:"rain"});b.subtypes.push({id:"Motion Detector",data:"motion"});b.subtypes.push({id:"Switch Interface",data:"switch_interface"});b.subtypes.push({id:"General Sensor",data:"sensor"});return b},getCommandStatusMap:function(b){if(!b.data)return null;
var a=b.data;return"ip_motion"==b.data&&b.address&&-1!=b.address.indexOf("HmIP-SMO")?(b=JSON.parse(JSON.stringify(this.MAP[a])),b.status.splice(3,1),b.ipevt.splice(3,1),b):this.MAP[a]},getIPevtMap:function(b){if(!b.data)return null;var a=b.data;return"ip_motion"==b.data&&b.address&&-1!=b.address.indexOf("HmIP-SMO")?(b=JSON.parse(JSON.stringify(this.MAP[a])),b.status.splice(3,1),b.ipevt.splice(3,1),b):this.MAP[a]},createDevice:function(b,a,c){a=xnm.aio.gateway.DM.DMError;var d=xnm.aio.gateway.DM.DMError.ERROR_CODE;
b.address?b.data?(b=JSON.parse(JSON.stringify(b)),c(null,b)):c(new a(d.INVALID,"parameter data is invalid")):c(new a(d.INVALID,"parameter address is invalid"))},updateDevice:function(b,a,c){a=xnm.aio.gateway.DM.DMError;var d=xnm.aio.gateway.DM.DMError.ERROR_CODE;b.address?b.data?(b=JSON.parse(JSON.stringify(b)),c(null,b)):c(new a(d.INVALID,"parameter data is invalid")):c(new a(d.INVALID,"parameter address is invalid"))},deleteDevice:function(b,a,c,d){d&&d(null,JSON.parse(JSON.stringify(a)));xnm.aio.gateway.systems.HM_X.delSensor(b,
a.address,function(){})}}};
xnm.aio.gateway.systems.WA={learn:function(b,a,c){a||(a={});var d=this;a.timeout=2E4;b._executeRequest("LearnSC",{type:this.DM.TYPE},a,function(a,b){if(a)c&&c(a);else if(b.CODE){var g=d._resolveAddress(b.CODE);c&&c(null,{address:g})}else c&&c(Error("response format invalid"))})},_resolveAddress:function(b){return this._getHexVal(parseInt(b,16)&14942207,6)},executeCommandCreator:function(b,a,c,d){a?c&&c.value?a&&a.address?this._executeCommand(b,a,c,d):d&&d(Error("it device address is empty")):d&&d(Error("it device command is empty")):
d&&d(Error("it device is null"))},_executeCommand:function(b,a,c,d){(a=this._buildData(b,a,c))?b._executeRequest("SendSC",{type:this.DM.TYPE,data:a},null,function(a){d&&d(a)}):d&&d(Error("command format invalid"))},buildQuery:function(b,a,c){return(b=this._buildData(b,a,c))?{type:this.DM.TYPE,data:b,XC_FNC:"SendSC"}:null},_buildData:function(b,a,c){if(!a.address)return null;b=parseInt(a.address,16)&14942207;a="00";if("up"==c.value)b+=1947992064;else if("down"==c.value)b+=1947729920;else if("stop"==
c.value)b+=872677376;else if("moveUp"==c.value)b+=1947992064,a="01";else if("moveDown"==c.value)b+=1947729920,a="01";else if("A"==c.value)b+=1946419200;else if("B"==c.value)b+=1946157056;else if("C"==c.value)b+=1947467776;else return null;return this._getHexVal(b,8)+a},_parseData:function(b,a){if(!b||10>b.length||!a||!a.address||!a.type||a.type.toUpperCase()!=this.DM.TYPE)return null;var c=b.substr(0,b.length-2),d=parseInt(c,16)&14942207,e=parseInt(a.address,16)&14942207;if(d!=e)return null;c=parseInt(c,
16)-d;d=parseInt(b.substr(b.length-2,2),16);e={};switch(c){case 1947992064:e.value=1==d?"moveUp":"up";break;case 1947729920:e.value=1==d?"moveDown":"down";break;case 872677376:e.value="stop";break;case 1946419200:e.value="A";break;case 1946157056:e.value="B";break;case 1947467776:e.value="C"}return e.value?e:null},_getHexVal:xnm.aio.gateway.Util.getHexVal,generateActionCode:function(b,a){return this._buildData(null,a,b)},parseActionCode:function(b,a){return this._parseData(b,a)},DM:{TYPE:"WA",MAP:{shutter:{command:[{type:"enum",
name:"step up",ref:{value:"up"}},{type:"enum",name:"step down",ref:{value:"down"}},{type:"enum",name:"move up",ref:{value:"moveUp"}},{type:"enum",name:"move down",ref:{value:"moveDown"}},{type:"enum",name:"stop",ref:{value:"stop"}},{type:"enum",name:"A",ref:{value:"A"}},{type:"enum",name:"B",ref:{value:"B"}},{type:"enum",name:"C",ref:{value:"C"}}]}},getGatewayDeviceType:function(b){return(b=xnm.aio.gateway.Gateway._getRFMode(b.version,b.rfmode,b.gateway_vendor))&&!b.SUPPORTS868?null:{type:this.TYPE,
name:"Warema EWFS"}},getCommandStatusMap:function(){return this.MAP.shutter},createDevice:function(b,a,c){a=xnm.aio.gateway.DM.DMError;var d=xnm.aio.gateway.DM.DMError.ERROR_CODE;b.address?(b=JSON.parse(JSON.stringify(b)),c(null,b)):c(new a(d.INVALID,"parameter address is invalid"))},updateDevice:function(b,a,c){a=xnm.aio.gateway.DM.DMError;var d=xnm.aio.gateway.DM.DMError.ERROR_CODE;b.address?(b=JSON.parse(JSON.stringify(b)),c(null,b)):c(new a(d.INVALID,"parameter address is invalid"))}}};
xnm.aio.gateway.systems.IA={learn:function(b,a,c){a||(a={});a.timeout=2E4;b._executeRequest("LearnSC",{type:this.DM.TYPE},a,function(a,b){a?c&&c(a):b.CODE?c&&c(null,{address:b.CODE}):c&&c(Error("response format invalid"))})},executeCommandCreator:function(b,a,c,d){a?c&&c.value?a&&a.address?this._executeCommand(b,a,c,d):d&&d(Error("it device address is empty")):d&&d(Error("it device command is empty")):d&&d(Error("it device is null"))},_executeCommand:function(b,a,c,d){(a=this._buildData(b,a,c))?b._executeRequest("SendSC",
{type:this.DM.TYPE,data:a},null,function(a){d&&d(a)}):d&&d(Error("command format invalid"))},buildQuery:function(b,a,c){return(b=this._buildData(b,a,c))?{type:this.DM.TYPE,data:b,XC_FNC:"SendSC"}:null},_buildData:function(b,a,c){if(!a.address)return null;b="0003";"up"==c.value||"on"==c.value?b="0202":"down"==c.value||"off"==c.value?b="0102":"dimUp"==c.value?b="0201":"dimDown"==c.value?b="0101":"moveUp"==c.value?b="0203":"moveDown"==c.value?b="0103":"scene"==c.value?b="0302":"stop2"==c.value&&(b="0000");
if(b)return a.address+b},_parseData:function(b,a){if(4>=b.length)return null;var c=b.substr(0,b.length-4);if(a.address.toUpperCase()!=c.toUpperCase())return null;c={};switch(b.substr(b.length-4)){case "0003":c.value="stop";break;case "0202":c.value="shutter"==a.data?"up":"on";break;case "0102":c.value="shutter"==a.data?"down":"off";break;case "0201":c.value="dimUp";break;case "0101":c.value="dimDown";break;case "0203":c.value="moveUp";break;case "0103":c.value="moveDown";break;case "0302":c.value=
"scene";break;case "0000":c.value="stop2"}return c.value?c:null},generateActionCode:function(b,a){return this._buildData(null,a,b)},parseActionCode:function(b,a){return this._parseData(b,a)},DM:{TYPE:"IA",MAP:{shutter:{command:[{type:"enum",name:"step up",ref:{value:"up"}},{type:"enum",name:"step down",ref:{value:"down"}},{type:"enum",name:"move up",ref:{value:"moveUp"}},{type:"enum",name:"move down",ref:{value:"moveDown"}},{type:"enum",name:"stop",ref:{value:"stop"}},{type:"enum",name:"stop 2",ref:{value:"stop2"}},
{type:"enum",name:"do scene",ref:{value:"scene"}}]},"switch":{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}},{type:"enum",name:"do scene",ref:{value:"scene"}}]},dimmer:{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}},{type:"enum",name:"dim up",ref:{value:"dimUp"}},{type:"enum",name:"dim down",ref:{value:"dimDown"}},{type:"enum",name:"do scene",ref:{value:"scene"}}]}},getGatewayDeviceType:function(){return[{type:this.TYPE,
name:"Berker",subtypes:[{id:"Shutter",data:"shutter"},{id:"Dimmer",data:"dimmer"},{id:"Switch",data:"switch"}]},{type:this.TYPE,name:"Gira",subtypes:[{id:"Shutter",data:"shutter"},{id:"Dimmer",data:"dimmer"},{id:"Switch",data:"switch"}]},{type:this.TYPE,name:"Insta",subtypes:[{id:"Shutter",data:"shutter"},{id:"Dimmer",data:"dimmer"},{id:"Switch",data:"switch"}]},{type:this.TYPE,name:"Jung",subtypes:[{id:"Shutter",data:"shutter"},{id:"Dimmer",data:"dimmer"},{id:"Switch",data:"switch"}]}]},getCommandStatusMap:function(b){return b&&
b.data?this.MAP[b.data]:null},createDevice:function(b,a,c){a=xnm.aio.gateway.DM.DMError;var d=xnm.aio.gateway.DM.DMError.ERROR_CODE;b.address?(b=JSON.parse(JSON.stringify(b)),c(null,b)):c(new a(d.INVALID,"parameter address is invalid"))},updateDevice:function(b,a,c){a=xnm.aio.gateway.DM.DMError;var d=xnm.aio.gateway.DM.DMError.ERROR_CODE;b.address?(b=JSON.parse(JSON.stringify(b)),c(null,b)):c(new a(d.INVALID,"parameter address is invalid"))}}};
xnm.aio.gateway.systems.L3={learn:function(b,a,c){a||(a={});var d=this;a.timeout=2E4;b._executeRequest("LearnSC",{type:this.DM.TYPE},a,function(a,b){if(a)c&&c(a);else if(b.CODE){var g=d._resolveAddress(b.CODE);g?c&&c(null,{address:g}):c&&c(Error("gateway result address invalid"))}else c&&c(Error("response format invalid"))})},_resolveAddress:function(b){return 8==b.length?b.substr(0,5):null},executeCommandCreator:function(b,a,c,d){a?c&&c.value?a&&a.address?this._executeCommand(b,a,c,d):d&&d(Error("it device address is empty")):
d&&d(Error("it device command is empty")):d&&d(Error("it device is null"))},_executeCommand:function(b,a,c,d){(a=this._buildData(b,a,c))?b._executeRequest("SendSC",{type:this.DM.TYPE,data:a},null,function(a){d&&d(a)}):d&&d(Error("command format invalid"))},buildQuery:function(b,a,c){return(b=this._buildData(b,a,c))?{type:this.DM.TYPE,data:b,XC_FNC:"SendSC"}:null},_buildData:function(b,a,c){if(!a.address)return null;b=null;if("on"==c.value)b="07";else if("off"==c.value)b="38";else if("white"==c.value)b=
"09";else if("color"==c.value)b="36";else if("red"==c.value)b="4f";else if("purple"==c.value)b="56";else if("blue"==c.value)b="60";else if("cyan"==c.value)b="68";else if("green"==c.value)b="70";else if("yellow"==c.value)b="41";else if("orange"==c.value)b="4a";else if("rgb"==c.value){if(!c.ext||6>c.ext.length)return null;b=parseInt(c.ext.substr(0,2),16);255<b&&(b=255);var d=parseInt(c.ext.substr(2,2),16);255<d&&(d=255);var e=parseInt(c.ext.substr(4,2),16);255<e&&(e=255);c=0;b/=255;var d=d/255,e=e/
255,f=Math.min(b,Math.min(d,e)),g=Math.max(b,Math.max(d,e));f!=g&&(c=60*((b==f?3:e==f?1:5)-(b==f?d-e:e==f?b-d:e-b)/(g-f))-110,0>c&&(c+=360));b=this._getHexVal(50-Math.floor(c/360*50)+64,2)}else if("bri"==c.value){if(null==c.ext||"undefined"==typeof c.ext)return null;c=parseInt(c.ext);b=this._getHexVal(192+Math.floor(c/100*48),2)}else return null;return a.address+b+"0"},_getHexVal:function(b,a){for(var c=b.toString(16).toUpperCase();c.length<a;)c="0"+c;return c},_parseData:function(b,a){if(!b||3>b.length||
!a||!a.address||b.substr(0,b.length-3).toUpperCase()!=a.address.toUpperCase())return null;var c=b.substr(a.address.length,2),d={};switch(c.toUpperCase()){case "07":d.value="on";break;case "38":d.value="off";break;case "09":d.value="white";break;case "36":d.value="color";break;case "4F":d.value="red";break;case "56":d.value="purple";break;case "60":d.value="blue";break;case "68":d.value="cyan";break;case "70":d.value="green";break;case "41":d.value="yellow";break;case "4A":d.value="orange";break;default:c=
parseInt(c,16),192<c?(d.value="bri",d.ext=Math.floor((c-192)/48*100)):64<c&&(d.value="rgb")}return d.value?d:null},generateActionCode:function(b,a){return this._buildData(null,a,b)},parseActionCode:function(b,a){return this._parseData(b,a)},DM:{TYPE:"L3",MAP:{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}},{type:"enum",name:"color",ref:{value:"color"}},{type:"enum",name:"white",ref:{value:"white"}},{type:"enum",name:"red",ref:{value:"red"}},{type:"enum",
name:"purple",ref:{value:"purple"}},{type:"enum",name:"blue",ref:{value:"blue"}},{type:"enum",name:"cyan",ref:{value:"cyan"}},{type:"enum",name:"green",ref:{value:"green"}},{type:"enum",name:"yellow",ref:{value:"yellow"}},{type:"enum",name:"orange",ref:{value:"orange"}},{type:"int",name:"brightness",ref:{value:"bri",ext:"%d",extMeta:"0-100",step:"10"}},{type:"rgb",name:"rgb color",ref:{value:"rgb",ext:"%s"}}]},getGatewayDeviceType:function(b){return{type:this.TYPE,name:"Konine RGB"}},getCommandStatusMap:function(){return this.MAP},
createDevice:function(b,a,c){a=xnm.aio.gateway.DM.DMError;var d=xnm.aio.gateway.DM.DMError.ERROR_CODE;b.address?(b=JSON.parse(JSON.stringify(b)),c(null,b)):c(new a(d.INVALID,"parameter address is invalid"))},updateDevice:function(b,a,c){a=xnm.aio.gateway.DM.DMError;var d=xnm.aio.gateway.DM.DMError.ERROR_CODE;b.address?(b=JSON.parse(JSON.stringify(b)),c(null,b)):c(new a(d.INVALID,"parameter address is invalid"))}}};
xnm.aio.gateway.systems.L2={learn:function(b,a,c){a||(a={});var d=this;a.timeout=2E4;b._executeRequest("LearnSC",{type:this.DM.TYPE},a,function(a,b){if(a)c&&c(a);else if(b.CODE){var g=d._resolveAddress(b.CODE);c&&c(null,{address:g})}else c&&c(Error("response format invalid"))})},_resolveAddress:function(b){return 6==b.length?b.substr(0,3):b.substr(0,6)},executeCommandCreator:function(b,a,c,d){a?c&&c.value?a&&a.address?this._executeCommand(b,a,c,d):d&&d(Error("it device address is empty")):d&&d(Error("it device command is empty")):
d&&d(Error("it device is null"))},_executeCommand:function(b,a,c,d){(a=this._buildData(b,a,c))?b._executeRequest("SendSC",{type:this.DM.TYPE,data:a},null,function(a){d&&d(a)}):d&&d(Error("command format invalid"))},buildQuery:function(b,a,c){return(b=this._buildData(b,a,c))?{type:this.DM.TYPE,data:b,XC_FNC:"SendSC"}:null},_buildData:function(b,a,c){if(!a.address)return null;var d,e;b=null;if(3==a.address.length){if("power"==c.value)b="fff";else if("left"==c.value)b="ff3";else if("right"==c.value||
"white"==c.value)b="fc3";else if("up"==c.value)b="fcc";else if("down"==c.value)b="ff0";else if("red"==c.value)b="33f";else if("purple"==c.value)b="30f";else if("blue"==c.value)b="03f";else if("cyan"==c.value)b="000";else if("green"==c.value)b="f03";else if("yellow"==c.value)b="c33";else if("orange"==c.value)b="c03";else if("rgb"==c.value){if(!c.ext)return null;d=parseInt(c.ext.substr(0,2),16);255<d&&(d=255);b=parseInt(c.ext.substr(2,2),16);255<b&&(b=255);e=parseInt(c.ext.substr(4,2),16);255<e&&(e=
255);c=0;var f=d/255;b/=255;e/=255;var g=Math.min(f,Math.min(b,e));d=Math.max(f,Math.max(b,e));g!=d&&(c=60*((f==g?3:e==g?1:5)-(f==g?b-e:e==g?f-b:e-f)/(d-g))-180,0>c&&(c+=360));b="000 003 00c 00f 030 033 03c 03f 0c0 0c3 0cc 0cf 0f0 0f3 0fc 0ff 300 303 30c 30f 330 333 33c 33f 3c0 3c3 3cc 3cf 3f0 3f3 3fc 3ff c00 c03 c0c c0f c30 c33 c3c c3f cc0 cc3 ccc ccf cf0 cf3 cfc cff f00 f03 f0c f0f f30 f33 f3c f3f fc0".split(" ")[Math.floor(c/360*56)]}else return null;return a.address+b}if("power"==c.value)b=2;
else if("left"==c.value)b=5;else if("right"==c.value||"white"==c.value)b=6;else if("up"==c.value)b=3;else if("down"==c.value)b=4;else if("red"==c.value)b=408;else if("purple"==c.value)b=40;else if("blue"==c.value)b=80;else if("cyan"==c.value)b=152;else if("green"==c.value)b=240;else if("yellow"==c.value)b=336;else if("orange"==c.value)b=368;else if("rgb"==c.value){if(!c.ext)return null;d=parseInt(c.ext.substr(0,2),16);255<d&&(d=255);b=parseInt(c.ext.substr(2,2),16);255<b&&(b=255);e=parseInt(c.ext.substr(4,
2),16);255<e&&(e=255);c=2128;var h=2296,f=e,g=b;e<=d&&e<=b?(f=b,g=d,c=2304,h=2456):b<=d&&b<=e&&(f=d,g=e,c=2456,h=2640);e=Math.round((h-c)/8+1);b=Math.round(e/2);e-=b;b=255==f?Math.round(g/255*b):b+Math.round((1-f/255)*e);b=c+8*b;2552<b&&(b-=512);b-=2048}else return null;c=parseInt(a.address.substr(4),16)<<8;b=this._getHexVal((c&65534)+b,4);return b=a.address.substr(0,4)+b},_getHexVal:xnm.aio.gateway.Util.getHexVal,_parseData:function(b,a){if(!b||!a||!a.address)return null;var c,d={};if(3==a.address.length){if(5>
b.length||b.substr(0,3).toUpperCase()!=a.address.toUpperCase())return null;c=b.substr(3,3);switch(c){case "fff":d.value="power";break;case "ff3":d.value="left";break;case "fc3":d.value="right";break;case "fcc":d.value="up";break;case "ff0":d.value="down";break;case "33f":d.value="red";break;case "30f":d.value="purple";break;case "03f":d.value="blue";break;case "000":d.value="cyan";break;case "f03":d.value="green";break;case "c33":d.value="yellow";break;case "c03":d.value="orange";break;default:d.value=
"rgb"}}else{if(8>b.length||b.substr(0,4).toUpperCase()!=a.address.substr(0,4).toUpperCase())return null;var e=parseInt(a.address.substr(4),16)<<8;c=parseInt(b.substr(4,4),16);switch(c-(e&65534)){case 2:d.value="power";break;case 5:d.value="left";break;case 6:d.value="right";break;case 3:d.value="up";break;case 4:d.value="down";break;case 408:d.value="red";break;case 40:d.value="purple";break;case 80:d.value="blue";break;case 152:d.value="cyan";break;case 240:d.value="green";break;case 336:d.value=
"yellow";break;case 368:d.value="orange";break;default:d.value="rgb"}}return d.value?d:null},generateActionCode:function(b,a){return this._buildData(null,a,b)},parseActionCode:function(b,a){return this._parseData(b,a)},DM:{TYPE:"L2",MAP:{command:[{type:"enum",name:"power",ref:{value:"power"}},{type:"enum",name:"left",ref:{value:"left"}},{type:"enum",name:"right",ref:{value:"right"}},{type:"enum",name:"up",ref:{value:"up"}},{type:"enum",name:"down",ref:{value:"down"}},{type:"enum",name:"white",ref:{value:"white"}},
{type:"enum",name:"red",ref:{value:"red"}},{type:"enum",name:"purple",ref:{value:"purple"}},{type:"enum",name:"blue",ref:{value:"blue"}},{type:"enum",name:"cyan",ref:{value:"cyan"}},{type:"enum",name:"green",ref:{value:"green"}},{type:"enum",name:"yellow",ref:{value:"yellow"}},{type:"enum",name:"orange",ref:{value:"orange"}},{type:"rgb",name:"rgb color",ref:{value:"rgb",ext:"%s"}}]},getGatewayDeviceType:function(){return{type:this.TYPE,name:"RGB Controller"}},getCommandStatusMap:function(){return this.MAP},
createDevice:function(b,a,c){a=xnm.aio.gateway.DM.DMError;var d=xnm.aio.gateway.DM.DMError.ERROR_CODE;b.address?(b=JSON.parse(JSON.stringify(b)),c(null,b)):c(new a(d.INVALID,"parameter address is invalid"))},updateDevice:function(b,a,c){a=xnm.aio.gateway.DM.DMError;var d=xnm.aio.gateway.DM.DMError.ERROR_CODE;b.address?(b=JSON.parse(JSON.stringify(b)),c(null,b)):c(new a(d.INVALID,"parameter address is invalid"))}}};
xnm.aio.gateway.systems.ML={executeCommandCreator:function(b,a,c,d){a?c&&c.value?a&&a.address?this._executeCommand(b,a,c,d):d&&d(Error("it device address is empty")):d&&d(Error("it device command is empty")):d&&d(Error("it device is null"))},_executeCommand:function(b,a,c,d){(c=this._buildData(b,a,c))?b._executeRequest("SendSC",{type:this.DM.TYPE,adr:a.address,data:c},null,function(a){d&&d(a)}):d&&d(Error("command format invalid"))},buildQuery:function(b,a,c){return(b=this._buildData(b,a,c))?{type:this.DM.TYPE,
adr:a.address,data:b,XC_FNC:"SendSC"}:null},_buildData:function(b,a,c){b=null;switch(c.value){case "power":b="80";break;case "up":b="4b";break;case "white":b="ffffff";break;case "bri":if("number"==typeof c.ext)c=parseInt(c.ext);else if(c.ext.match(/^[-+]?[0-9]+$/))c=parseInt(c.ext);else return null;100<c&&(c=100);0>c&&(c=0);b=this._getHexVal(c,2);break;case "rgb":case "rgbS":if(!c.ext)return null;b=c.ext;break;default:return null}return b},_getHexVal:xnm.aio.gateway.Util.getHexVal,DM:{TYPE:"ML",MAP:{command:[{type:"enum",
name:"power",ref:{value:"power"}},{type:"int",name:"brightness",ref:{value:"bri",ext:"%d",extMeta:"0-100",step:"10"}},{type:"rgb",name:"rgb color",ref:{value:"rgb",ext:"%s"}},{type:"string",name:"rgb color",ref:{value:"rgbS",ext:"%s"}}]},getGatewayDeviceType:function(b){return(b=xnm.aio.gateway.Gateway._getRFMode(b.version,b.rfmode,b.gateway_vendor))&&!b.SUPPORTS868?null:{type:this.TYPE,name:"mediola LM Pro"}},getCommandStatusMap:function(){return this.MAP},getActionMap:function(){return{}},createDevice:function(b,
a,c){a=xnm.aio.gateway.DM.DMError;var d=xnm.aio.gateway.DM.DMError.ERROR_CODE;b.address?(b=JSON.parse(JSON.stringify(b)),c(null,b)):c(new a(d.INVALID,"parameter address is invalid"))},updateDevice:function(b,a,c){a=xnm.aio.gateway.DM.DMError;var d=xnm.aio.gateway.DM.DMError.ERROR_CODE;b.address?(b=JSON.parse(JSON.stringify(b)),c(null,b)):c(new a(d.INVALID,"parameter address is invalid"))}}};
xnm.aio.gateway.systems.RT={delSensor:function(b,a,c){b._executeRequest("delSensor",{type:this.DM.TYPE,adr:a},{timeout:2E4},function(a){c&&c(a)})},executeCommandCreator:function(b,a,c,d){a?c&&c.value?a&&a.address?this._executeCommand(b,a,c,d):d&&d(Error("it device address is empty")):d&&d(Error("it device command is empty")):d&&d(Error("it device is null"))},_executeCommand:function(b,a,c,d){(a=this._buildData(b,a,c))?b._executeRequest("SendSC",{type:this.DM.TYPE,data:a},null,function(a){d&&d(a)}):
d&&d(Error("command format invalid"))},buildQuery:function(b,a,c){return(b=this._buildData(b,a,c))?{type:this.DM.TYPE,data:b,XC_FNC:"SendSC"}:null},_buildData:function(b,a,c){if(!a||!a.address||6!=a.address.length)return null;b=a.address;a=null;"up"==c.value||"moveUp"==c.value?a="20":"down"==c.value||"moveDown"==c.value?a="40":"fullUp"==c.value?a="2F":"fullDown"==c.value?a="4F":"stop"==c.value?a="10":"pos1"==c.value?a="10":"program"==c.value?a="80":"learn"==c.value?a="60":"up_stop"==c.value?a="30":
"down_stop"==c.value?a="50":"sunOn"==c.value?a="90":"sunOff"==c.value&&(a="A0");return a+b},_parseData:function(b,a){if(2>=b.length)return null;var c=b.substr(2);if(a.address.toUpperCase()!=c.toUpperCase())return null;c={};switch(b.substr(0,2)){case "20":c.value="shutter"==a.data?"moveUp":"switch"==a.data?"on":"up";break;case "40":c.value="shutter"==a.data?"moveDown":"switch"==a.data?"off":"down";break;case "2F":c.value="fullUp";break;case "4F":c.value="fullDown";break;case "10":c.value="stop";case "90":c.value=
"sunOn";break;case "A0":c.value="sunOff"}return c.value?c:null},generateAddress:function(b){var a=[];if(b)for(var c=b.length;c--;)b[c].address&&a.push(b[c].address);return this._generateFreeAdr(a)},teach:function(b,a,c){a?a.address?b._executeRequest("SendSC",{type:this.DM.TYPE,data:"80"+a.address},null,function(b){c&&c(b,{address:a.address})}):c&&c(Error("options address is null")):c&&c(Error("options is null"))},setLearnMode:function(b,a,c){a?a.address?b._executeRequest("SendSC",{type:this.DM.TYPE,
data:"60"+a.address},null,function(b){c&&c(b,{address:a.address})}):c&&c(Error("options address is null")):c&&c(Error("options is null"))},_generateFreeAdr:function(b){for(var a,c=!1;!c;)a=Math.floor(15658734*Math.random())+1118481,204==(a&255)&&a++,a=this._getHexVal(a,6),c=!this._contains(b,a);return a},_contains:xnm.aio.gateway.Util.contains,_getHexVal:xnm.aio.gateway.Util.getHexVal,generateActionCode:function(b,a){return this._buildData(null,a,b)},parseActionCode:function(b,a){return this._parseData(b,
a)},DM:{TYPE:"RT",MAP:{shutter:{command:[{type:"enum",name:"move up",ref:{value:"moveUp"}},{type:"enum",name:"move down",ref:{value:"moveDown"}},{type:"enum",name:"stop",ref:{value:"stop"}},{type:"enum",name:"sun detector on",ref:{value:"sunOn"}},{type:"enum",name:"sun detector off",ref:{value:"sunOff"}}]},jalousie:{command:[{type:"enum",name:"move up",ref:{value:"fullUp"}},{type:"enum",name:"move down",ref:{value:"fullDown"}},{type:"enum",name:"step up",ref:{value:"up"}},{type:"enum",name:"step down",
ref:{value:"down"}},{type:"enum",name:"stop",ref:{value:"stop"}},{type:"enum",name:"sun detector on",ref:{value:"sunOn"}},{type:"enum",name:"sun detector off",ref:{value:"sunOff"}}]},"switch":{command:[{type:"enum",name:"on",ref:{value:"moveUp"}},{type:"enum",name:"off",ref:{value:"moveDown"}}]}},getGatewayDeviceType:function(b){b={type:this.TYPE,name:"Somfy RTS",subtypes:[]};b.subtypes.push({id:"Switch",data:"switch"});b.subtypes.push({id:"Shutter",data:"shutter"});b.subtypes.push({id:"Blind",data:"jalousie"});
return b},getCommandStatusMap:function(b){return b&&b.data?this.MAP[b.data]:null},createDevice:function(b,a,c){a=xnm.aio.gateway.DM.DMError;var d=xnm.aio.gateway.DM.DMError.ERROR_CODE;b.address?(b=JSON.parse(JSON.stringify(b)),c(null,b)):c(new a(d.INVALID,"parameter address is invalid"))},updateDevice:function(b,a,c){a=xnm.aio.gateway.DM.DMError;var d=xnm.aio.gateway.DM.DMError.ERROR_CODE;b.address?(b=JSON.parse(JSON.stringify(b)),c(null,b)):c(new a(d.INVALID,"parameter address is invalid"))},deleteDevice:function(b,
a,c,d){d&&d(null,JSON.parse(JSON.stringify(a)));xnm.aio.gateway.systems.RT.delSensor(b,a.address,function(){})}}};
xnm.aio.gateway.systems.KN={learn:function(b,a,c){a||(a={});a.freq&&"868"!=a.freq?this._learn433(b,a,c):this._learn868(b,a,c)},_learn868:function(b,a,c){a||(a={});var d=this;a.timeout=2E4;b._executeRequest("LearnSC",{type:this.DM.TYPE},a,function(a,b){if(a)c&&c(a);else if(b.CODE){var g=d._resolveAddress(b.CODE);c&&c(null,{address:g})}else c&&c(Error("response format invalid"))})},_learn433:function(b,a,c){xnm.aio.gateway.systems.Code.learn(b,a,c)},_resolveAddress:function(b){var a=b.substr(0,10);
"7"==a.charAt(0)&&(a="F"+b.substr(1,9));return a},executeCommandCreator:function(b,a,c,d){a?c&&c.value?a&&a.address?this._executeCommand(b,a,c,d):d&&d(Error("it device address is empty")):d&&d(Error("it device command is empty")):d&&d(Error("it device is null"))},_executeCommand:function(b,a,c,d){a.freq&&"868"!=a.freq?this._executeCommand433(b,a,c,d):this._executeCommand868(b,a,c,d)},_executeCommand868:function(b,a,c,d){(a=this._buildData(b,a,c))?b._executeRequest("SendSC",{type:this.DM.TYPE,data:a},
null,function(a){d&&d(a)}):d&&d(Error("command format invalid"))},_executeCommand433:function(b,a,c,d){xnm.aio.gateway.systems.Code.executeCommandCreator(b,a,c,d)},_buildData:function(b,a,c){if(!a||!a.address||10!=a.address.length)return null;b=a.address;a=null;switch(c.value){case "up":case "moveUp":case "on":a="80";break;case "down":case "moveDown":case "off":a="20";break;case "stop":a="40";break;case "pos1":a="4C"}return b+a+"AEAE"},_parseData:function(b,a){if(6>=b.length)return null;var c=b.substr(0,
b.length-6);if(a.address.toUpperCase()!=c.toUpperCase())return null;c={};switch(b.substr(b.length-6,2)){case "80":"switch"==a.data?c.value="on":"shutter"==a.data&&(c.value="up");break;case "20":"switch"==a.data?c.value="off":"shutter"==a.data&&(c.value="down");break;case "40":c.value="stop";break;case "4C":c.value="pos1"}return c.value?c:null},generateActionCode:function(b,a){return a?a.freq&&"868"!=a.freq?xnm.aio.gateway.systems.Code.generateActionCode(b,a):this._buildData(null,a,b):null},parseActionCode:function(b,
a){return a?a.freq&&"868"!=a.freq?xnm.aio.gateway.systems.Code.parseActionCode(b,a):this._parseData(b,a):null},DM:{TYPE:"KN",MAP:{"switch":{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}}]},shutter:{command:[{type:"enum",name:"up",ref:{value:"up"}},{type:"enum",name:"down",ref:{value:"down"}},{type:"enum",name:"stop",ref:{value:"stop"}},{type:"enum",name:"position",ref:{value:"pos1"}}]}},getGatewayDeviceType:function(b){return{type:this.TYPE,name:"Kaiser Nienhaus",
subtypes:[{id:"Shutter",data:"shutter"},{id:"Switch",data:"switch"}]}},getCommandStatusMap:function(b){if(!b||!b.data)return null;if(b.freq&&"868"!=b.freq){var a={command:[]};if(b&&b.ircodes&&b.ircodes.codes){for(var c=0;c<b.ircodes.codes.length;c++){var d=b.ircodes.codes[c];a.command.push({type:"enum",name:d.key,ref:{value:d.key}})}return a}return null}return b.data?this.MAP[b.data]:null},createDevice:function(b,a,c){a=xnm.aio.gateway.DM.DMError;var d=xnm.aio.gateway.DM.DMError.ERROR_CODE;b.address?
b.data?(b=JSON.parse(JSON.stringify(b)),c(null,b)):c(new a(d.INVALID,"parameter data is invalid")):c(new a(d.INVALID,"parameter address is invalid"))},updateDevice:function(b,a,c){a=xnm.aio.gateway.DM.DMError;var d=xnm.aio.gateway.DM.DMError.ERROR_CODE;b.address?b.data?(b=JSON.parse(JSON.stringify(b)),c(null,b)):c(new a(d.INVALID,"parameter data is invalid")):c(new a(d.INVALID,"parameter address is invalid"))}}};
xnm.aio.gateway.systems.DY={learn:function(b,a,c){a||(a={});var d=this;a.timeout=2E4;b._executeRequest("LearnSC",{type:this.DM.TYPE},a,function(a,b){if(a)c&&c(a);else if(b.CODE){var g=d._resolveAddress(b.CODE);c&&c(null,{address:g})}else c&&c(Error("response format invalid"))})},_resolveAddress:function(b){return b.substr(0,8)},executeCommandCreator:function(b,a,c,d){a?c&&c.value?a&&a.address?this._executeCommand(b,a,c,d):d&&d(Error("it device address is empty")):d&&d(Error("it device command is empty")):
d&&d(Error("it device is null"))},_executeCommand:function(b,a,c,d){(a=this._buildData(b,a,c))?b._executeRequest("SendSC",{type:this.DM.TYPE,data:a},null,function(a){d&&d(a)}):d&&d(Error("command format invalid"))},buildQuery:function(b,a,c){return(b=this._buildData(b,a,c))?{type:this.DM.TYPE,data:b,XC_FNC:"SendSC"}:null},_buildData:function(b,a,c){if(!a||!a.address||8!=a.address.length)return null;b=a.address;a=null;"up"==c.value?a="11":"down"==c.value?a="33":"moveUp"==c.value?a="22":"moveDown"==
c.value?a="44":"stop"==c.value&&(a="55");return b+a},_parseData:function(b,a){if(2>=b.length)return null;var c=b.substr(0,b.length-2);if(a.address.toUpperCase()!=c.toUpperCase())return null;c={};switch(b.substr(b.length-2,2)){case "11":c.value="up";break;case "33":c.value="down";break;case "22":c.value="moveUp";break;case "44":c.value="moveDown";break;case "55":c.value="stop"}return c.value?c:null},generateActionCode:function(b,a){return this._buildData(null,a,b)},parseActionCode:function(b,a){return this._parseData(b,
a)},DM:{TYPE:"DY",MAP:{blind:{command:[{type:"enum",name:"step up",ref:{value:"up"}},{type:"enum",name:"step down",ref:{value:"down"}},{type:"enum",name:"move up",ref:{value:"moveUp"}},{type:"enum",name:"move down",ref:{value:"moveDown"}},{type:"enum",name:"stop",ref:{value:"stop"}}]},shutter:{command:[{type:"enum",name:"move up",ref:{value:"moveUp"}},{type:"enum",name:"move down",ref:{value:"moveDown"}},{type:"enum",name:"stop",ref:{value:"stop"}}]}},getGatewayDeviceType:function(){return[{type:this.TYPE,
name:"Dooya",subtypes:[{id:"Shutter",data:"shutter"},{id:"Blind",data:"blind"}]},{type:this.TYPE,name:"rohrmotor24",subtypes:[{id:"Shutter",data:"shutter"},{id:"Blind",data:"blind"}]}]},getCommandStatusMap:function(b){return b&&b.data?this.MAP[b.data]:null},createDevice:function(b,a,c){a=xnm.aio.gateway.DM.DMError;var d=xnm.aio.gateway.DM.DMError.ERROR_CODE;b.address?(b=JSON.parse(JSON.stringify(b)),c(null,b)):c(new a(d.INVALID,"parameter address is invalid"))},updateDevice:function(b,a,c){a=xnm.aio.gateway.DM.DMError;
var d=xnm.aio.gateway.DM.DMError.ERROR_CODE;b.address?(b=JSON.parse(JSON.stringify(b)),c(null,b)):c(new a(d.INVALID,"parameter address is invalid"))}}};
xnm.aio.gateway.systems.AN={learn:function(b,a,c){a||(a={});var d=this;a.timeout=2E4;b._executeRequest("LearnSC",{type:this.DM.TYPE},a,function(a,b){if(a)c&&c(a);else if(b.CODE){var g=d._resolveAddress(b.CODE);c&&c(null,{address:g})}else c&&c(Error("response format invalid"))})},_resolveAddress:function(b){return b.substr(0,8)},executeCommandCreator:function(b,a,c,d){a?c&&c.value?a&&a.address?this._executeCommand(b,a,c,d):d&&d(Error("it device address is empty")):d&&d(Error("it device command is empty")):
d&&d(Error("it device is null"))},_executeCommand:function(b,a,c,d){(a=this._buildData(b,a,c))?b._executeRequest("SendSC",{type:this.DM.TYPE,data:a},null,function(a){d&&d(a)}):d&&d(Error("command format invalid"))},buildQuery:function(b,a,c){return(b=this._buildData(b,a,c))?{type:this.DM.TYPE,data:b,XC_FNC:"SendSC"}:null},_buildData:function(b,a,c){if(!a||!a.address||8!=a.address.length)return null;b=a.address;a=null;"on"==c.value?a="00":"off"==c.value&&(a="10");return b+a},parseTriggerCode:function(b,
a){if(!b||10>b.length||!a||!a.address)return null;var c=b.substr(8,2),d={},e=b.substr(0,8).toUpperCase();if(a.address.toUpperCase()!=e)return null;switch(a.data){case "motion":"00"==c?d.value="motion":"10"==c&&(d.value="off");break;default:return null}return d},generateTriggerCode:function(b,a){if(!(b&&b.value&&a&&a.address))return null;var c=a.address,d;switch(a.data){case "motion":"motion"==b.value?d="00":"off"==b.value&&(d="10")}return c&&d?c+d:null},_parseData:function(b,a){if(2>=b.length)return null;
var c=b.substr(0,b.length-2);if(a.address.toUpperCase()!=c.toUpperCase())return null;c={};switch(b.substr(b.length-2,2)){case "00":c.value="on";break;case "10":c.value="off"}return c.value?c:null},generateActionCode:function(b,a){return this._buildData(null,a,b)},parseActionCode:function(b,a){return this._parseData(b,a)},DM:{TYPE:"AN",MAP:{"switch":{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}}]},shutter:{command:[{type:"enum",name:"up",ref:{value:"on"}},
{type:"enum",name:"down",ref:{value:"off"}}]},motion:{event:[{type:"enum",name:"motion",ref:{value:"motion"}},{type:"enum",name:"off",ref:{value:"off"}}]}},getGatewayDeviceType:function(){return[{type:this.TYPE,name:"Avidsen",subtypes:[{id:"Switch",data:"switch"},{id:"Motion",data:"motion"}]},{type:this.TYPE,name:"blyss",subtypes:[{id:"Shutter",data:"shutter"}]}]},getCommandStatusMap:function(b){return b&&b.data?this.MAP[b.data]:null},createDevice:function(b,a,c){a=xnm.aio.gateway.DM.DMError;var d=
xnm.aio.gateway.DM.DMError.ERROR_CODE;b.address?b.data?(b=JSON.parse(JSON.stringify(b)),c(null,b)):c(new a(d.INVALID,"parameter data is invalid")):c(new a(d.INVALID,"parameter address is invalid"))},updateDevice:function(b,a,c){a=xnm.aio.gateway.DM.DMError;var d=xnm.aio.gateway.DM.DMError.ERROR_CODE;b.address?b.data?(b=JSON.parse(JSON.stringify(b)),c(null,b)):c(new a(d.INVALID,"parameter data is invalid")):c(new a(d.INVALID,"parameter address is invalid"))}}};
xnm.aio.gateway.systems.UR={learn:function(b,a,c){a||(a={});var d=this;a.timeout=2E4;b._executeRequest("LearnSC",{type:this.DM.TYPE},a,function(a,b){if(a)c&&c(a);else if(b.CODE){var g=d._resolveAddress(b.CODE);c&&c(null,{address:g})}else c&&c(Error("response format invalid"))})},_resolveAddress:function(b){return b.substr(0,5)},executeCommandCreator:function(b,a,c,d){a?c&&c.value?a&&a.address?this._executeCommand(b,a,c,d):d&&d(Error("it device address is empty")):d&&d(Error("it device command is empty")):
d&&d(Error("it device is null"))},_executeCommand:function(b,a,c,d){(a=this._buildData(b,a,c))?b._executeRequest("SendSC",{type:this.DM.TYPE,data:a},null,function(a){d&&d(a)}):d&&d(Error("command format invalid"))},buildQuery:function(b,a,c){return(b=this._buildData(b,a,c))?{type:this.DM.TYPE,data:b,XC_FNC:"SendSC"}:null},_buildData:function(b,a,c){if(!a||!a.address||5!=a.address.length)return null;b=a.address;a=null;"moveUp"==c.value||"up"==c.value?a="1":"moveDown"==c.value||"down"==c.value?a="4":
"stop"==c.value&&(a="2");return b+a},_parseData:function(b,a){if(1>=b.length)return null;var c=b.substr(0,b.length-1);if(a.address.toUpperCase()!=c.toUpperCase())return null;c={};switch(b.substr(b.length-1,1)){case "1":c.value="moveUp";break;case "4":c.value="moveDown";break;case "2":c.value="stop"}return c.value?c:null},generateActionCode:function(b,a){return this._buildData(null,a,b)},parseActionCode:function(b,a){return this._parseData(b,a)},DM:{TYPE:"UR",MAP:{shutter:{command:[{type:"enum",name:"move up",
ref:{value:"moveUp"}},{type:"enum",name:"move down",ref:{value:"moveDown"}},{type:"enum",name:"stop",ref:{value:"stop"}}]}},getGatewayDeviceType:function(b){return(b=xnm.aio.gateway.Gateway._getRFMode(b.version,b.rfmode,b.gateway_vendor))&&!b.SUPPORTS868?null:[{type:this.TYPE,name:"Uniroll"},{type:this.TYPE,name:"Bauer"}]},getCommandStatusMap:function(b){return this.MAP.shutter},createDevice:function(b,a,c){a=xnm.aio.gateway.DM.DMError;var d=xnm.aio.gateway.DM.DMError.ERROR_CODE;b.address?(b=JSON.parse(JSON.stringify(b)),
c(null,b)):c(new a(d.INVALID,"parameter address is invalid"))},updateDevice:function(b,a,c){a=xnm.aio.gateway.DM.DMError;var d=xnm.aio.gateway.DM.DMError.ERROR_CODE;b.address?(b=JSON.parse(JSON.stringify(b)),c(null,b)):c(new a(d.INVALID,"parameter address is invalid"))}}};
xnm.aio.gateway.systems.SL={learn:function(b,a,c){a||(a={});var d=this;a.timeout=2E4;b._executeRequest("LearnSC",{type:this.DM.TYPE},a,function(a,b){if(a)c&&c(a);else if(b.CODE){var g=d._resolveAddress(b.CODE);c&&c(null,{address:g})}else c&&c(Error("response format invalid"))})},_resolveAddress:function(b){var a=parseInt(b.substr(3,2),16)>>2;0==(a&15)||8==(a&15)?a+=2:14==(a&15)&&(a-=3);a<<=2;return b.substr(0,3)+this._getHexVal(a,2)},executeCommandCreator:function(b,a,c,d){a?c&&c.value?a&&a.address?
this._executeCommand(b,a,c,d):d&&d(Error("it device address is empty")):d&&d(Error("it device command is empty")):d&&d(Error("it device is null"))},_executeCommand:function(b,a,c,d){(a=this._buildData(b,a,c))?b._executeRequest("SendSC",{type:this.DM.TYPE,data:a},null,function(a){d&&d(a)}):d&&d(Error("command format invalid"))},buildQuery:function(b,a,c){return(b=this._buildData(b,a,c))?{type:this.DM.TYPE,data:b,XC_FNC:"SendSC"}:null},_buildData:function(b,a,c){if(!a||!a.address||5!=a.address.length)return null;
b=a.address;a=parseInt(b.substr(3,2),16)>>2;if("on"!=c.value&&"moveUp"!=c.value&&("off"==c.value||"moveDown"==c.value))if(11==(a&15))a+=3;else if(10==(a&15)||2==(a&15))a-=2;a<<=2;b=b.substr(0,3)+this._getHexVal(a,2)+"0";if("moveUp"==c.value||"moveDown"==c.value)b+="15";if("up"==c.value||"down"==c.value)b+="0A";return b},_parseData:function(b,a){if(5>=b.length)return null;var c=b.substr(0,3);if(a.address.substr(0,3).toUpperCase()!=c.toUpperCase())return null;var d=c=!1;"15"==b.substr(b.length-2,2)&&
(c=!0);"0A"==b.substr(b.length-2,2)&&(d=!0);var e=!1,f={};b.substr(0,5).toUpperCase()==a.address.toUpperCase()&&(e=!0);f.value=e?c?"moveUp":d?"up":"on":c?"moveDown":d?"down":"off";return f.value?f:null},generateActionCode:function(b,a){return this._buildData(null,a,b)},parseActionCode:function(b,a){return this._parseData(b,a)},_getHexVal:xnm.aio.gateway.Util.getHexVal,DM:{TYPE:"SL",MAP:{"switch":{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}}]},dimmer:{command:[{type:"enum",
name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}}]},blind:{command:[{type:"enum",name:"step up",ref:{value:"on"}},{type:"enum",name:"step down",ref:{value:"off"}},{type:"enum",name:"move up",ref:{value:"moveUp"}},{type:"enum",name:"move down",ref:{value:"moveDown"}}]},shutter:{command:[{type:"enum",name:"move up",ref:{value:"up"}},{type:"enum",name:"move down",ref:{value:"down"}}]},shutter12:{command:[{type:"enum",name:"move up",ref:{value:"moveUp"}},{type:"enum",name:"move down",
ref:{value:"moveDown"}}]},awning:{command:[{type:"enum",name:"move in",ref:{value:"up"}},{type:"enum",name:"move out",ref:{value:"down"}}]}},getGatewayDeviceType:function(b){b={type:this.TYPE,name:"Siral",subtypes:[]};b.subtypes.push({id:"Switch",data:"switch"});b.subtypes.push({id:"Dimmer",data:"dimmer"});b.subtypes.push({id:"Blind",data:"blind"});b.subtypes.push({id:"Shutter",data:"shutter"});b.subtypes.push({id:"Shutter (12V)",data:"shutter12"});b.subtypes.push({id:"Awning",data:"awning"});return b},
getCommandStatusMap:function(b){return b.data?this.MAP[b.data]:null},createDevice:function(b,a,c){a=xnm.aio.gateway.DM.DMError;var d=xnm.aio.gateway.DM.DMError.ERROR_CODE;b.address?b.data?(b=JSON.parse(JSON.stringify(b)),c(null,b)):c(new a(d.INVALID,"parameter data is invalid")):c(new a(d.INVALID,"parameter address is invalid"))},updateDevice:function(b,a,c){a=xnm.aio.gateway.DM.DMError;var d=xnm.aio.gateway.DM.DMError.ERROR_CODE;b.address?b.data?(b=JSON.parse(JSON.stringify(b)),c(null,b)):c(new a(d.INVALID,
"parameter data is invalid")):c(new a(d.INVALID,"parameter address is invalid"))}}};
xnm.aio.gateway.systems.KOPP={delSensor:function(b,a,c){b._executeRequest("delSensor",{type:this.DM.TYPE,adr:a},{timeout:2E4},function(a){c&&c(a)})},learn:function(b,a,c){if(b){var d,e=[],f=this;if(a&&a.devices)for(d=a.devices.length;d--;)a.devices[d]&&a.devices[d].address&&e.push(a.devices[d].address);switch(a?a.type:null){case "switch":case "dimmer":case "shutter":this._learnActuator(b,e,c);break;case "contact":case "motion":case "smoke":case "sensor":case "button2":case "button4":this._learnSensor(b,function(a,
d){a?c&&c(a):f._addSensor(b,d.address,function(a){c&&c(a,{address:d.address})})})}}else c&&c(Error("gateway is null"))},_addSensor:function(b,a,c){b._executeRequest("AddSensor",{type:this.DM.TYPE,adr:a.substr(0,4)},{timeout:2E4},function(a){c&&c(a)})},_learnActuator:function(b,a,c){var d=this._generateFreeAdr(a),e=d+"20CC0F03",f=this,g={timeout:2E4};b._executeRequest("SendSC",{type:this.DM.TYPE,data:d+"30CC0F03"},g,function(a){a?c&&c(a):setTimeout(function(){b._executeRequest("SendSC",{type:f.DM.TYPE,
data:e},g,function(a){c&&c(a,{address:d+"1003"})})},1E3)})},_learnSensor:function(b,a){b._executeRequest("LearnSC",{type:this.DM.TYPE},{timeout:2E4},function(b,d){if(b)a&&a(b);else if(d.CODE&&18==d.CODE.length){var e=d.CODE;a&&a(null,{address:e.substr(2,4)+"00"+e.substr(14,2)})}else a&&a(Error("response format invalid"))})},learnDimmerStep2:function(b,a,c){if(a){var d=a.substr(0,4)+"00CC0F03";b._executeRequest("SendSC",{type:this.DM.TYPE,data:d},{timeout:2E4},function(b){c&&c(b,{address:a.substr(0,
4)+"1003"})})}else c&&c(Error("dimmer address invalid"))},_generateFreeAdr:function(b){for(var a,c=!1;!c;)a=this._getHexVal(Math.floor(58624*Math.random()+4096),4),c=!this._contains(b,a);return a},_contains:xnm.aio.gateway.Util.contains,_getHexVal:xnm.aio.gateway.Util.getHexVal,executeCommandCreator:function(b,a,c,d){a?c&&c.value?a&&a.address?this._executeCommand(b,a,c,d):d&&d(Error("it device address is empty")):d&&d(Error("it device command is empty")):d&&d(Error("it device is null"))},_executeCommand:function(b,
a,c,d){(a=this._buildData(b,a,c))?b._executeRequest("SendSC",{type:this.DM.TYPE,data:a},null,function(a){d&&d(a)}):d&&d(Error("command format invalid"))},buildQuery:function(b,a,c){return(b=this._buildData(b,a,c))?{type:this.DM.TYPE,data:b,XC_FNC:"SendSC"}:null},_buildData:function(b,a,c){if(a&&a.address&&8==a.address.length){var d;b=a.address.substr(0,4);a=a.address.substr(6);"on"==c.value?d="30":"off"==c.value?d="20":"stopDim"==c.value||"stop"==c.value?d="FF":"startDim"==c.value&&(d="80");return b+
d+"CC0F"+a}},handleStateCreator:function(b,a,c){return a&&a.value?(b=this._handleState(b,c))?b[a.value]:null:null},_handleState:function(b,a){if(!a.type||"kopp"!=a.type.toLowerCase()||!a.adr||!a.state||b.address.substr(0,4).toLowerCase()!=a.adr.toLowerCase())return null;var c=a.state;0<a.state.indexOf(":")&&(c=a.state.split(":")[0]);switch(b.data){case "contact":if("10"==c)return{contactState:"closed"};if("20"==c)return{contactState:"open"};break;case "motion":if("10"==c)return{state:"motion"};if("20"==
c)return{state:"ok"};break;case "smoke":if("10"==c)return{state:"fire"};if("20"==c)return{state:"ok"};break;case "sensor":if("10"==c)return{state:"on"};if("20"==c)return{state:"off"};break;case "button2":case "button4":return"00"==c?{press:"channel1"}:"10"==c?{press:"channel2"}:"20"==c?{press:"channel3"}:"30"==c?{press:"channel4"}:null;default:return null}},_handleUdpState:function(b,a){if(!a||!a.data||10>a.data.length||!b||!b.type||b.type.toUpperCase()!=this.DM.TYPE||!b.address)return null;var c=
a.data.substr(2,4),d=a.data.substr(8,2);return b.address.substr(0,4).toUpperCase()!=c.toUpperCase()?null:"button2"==b.data||"button4"==b.data?"00"==d?{press:"channel1"}:"10"==d?{press:"channel2"}:"20"==d?{press:"channel3"}:"30"==d?{press:"channel4"}:null:this._handleState(b,{type:this.DM.TYPE,adr:c.toUpperCase(),state:d.toUpperCase()+":00"})},parseTriggerCode:function(b,a){if(!b||12>b.length||!a||!a.address)return null;var c=b.substr(0,4)+"00"+b.substr(10,2);if((a.address.substr(0,4)+"00"+a.address.substr(6)).toUpperCase()!=
c.toUpperCase())return null;var d=b.substr(4,2),c={};switch(a.data){case "button2":case "button4":switch(d){case "00":c.value="press1";break;case "10":c.value="press2";break;case "20":c.value="press3";break;case "30":c.value="press4"}break;default:if(d=this._handleState(a,{type:this.DM.TYPE,adr:b.substr(0,4),state:d+":00"}),c)switch(a.data){case "contact":c.value=d.contactState;break;default:c.value=d.state}}return c.value?c:null},generateTriggerCode:function(b,a){if(!(b&&b.value&&a&&a.address)||
8>a.address)return null;var c=a.address.substr(0,4).toUpperCase(),d=a.address.substr(6).toUpperCase(),e;switch(a.data){case "contact":"open"==b.value?e="20":"closed"==b.value&&(e="10");break;case "smoke":"fire"==b.value?e="10":"ok"==b.value&&(e="20");break;case "motion":"motion"==b.value?e="10":"ok"==b.value&&(e="20");break;case "sensor":"on"==b.value?e="10":"off"==b.value&&(e="20");break;case "button2":case "button4":"press1"==b.value?e="00":"press2"==b.value?e="10":"press3"==b.value?e="20":"press4"==
b.value&&(e="30")}return e?c+e+"CC0F"+d:null},_parseData:function(b,a){if(12>b.length)return null;var c=b.substr(0,4)+b.substr(10,2);if((a.address.substr(0,4)+a.address.substr(6,2)).toUpperCase()!=c.toUpperCase())return null;c={};switch(b.substr(4,2).toUpperCase()){case "30":c.value="on";break;case "20":c.value="off";break;case "FF":c.value="stopDim";break;case "80":c.value="startDim"}return c.value?c:null},generateActionCode:function(b,a){return this._buildData(null,a,b)},parseActionCode:function(b,
a){return this._parseData(b,a)},DM:{TYPE:"KOPP",MAP:{"switch":{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}}]},dimmer:{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}},{type:"enum",name:"start dim",ref:{value:"startDim"}},{type:"enum",name:"stop dim",ref:{value:"stopDim"}}]},shutter:{command:[{type:"enum",name:"up",ref:{value:"on"}},{type:"enum",name:"down",ref:{value:"off"}}]},contact:{status:[{type:"enum",
name:"state",ref:{value:"contactState",options:["open","closed"]}}],event:[{type:"enum",name:"open",ref:{value:"open"}},{type:"enum",name:"closed",ref:{value:"closed"}}],ipevt:[{type:"enum",name:"state",ref:{value:"contactState",options:["open","closed"]}}]},motion:{status:[{type:"enum",name:"state",ref:{value:"state",options:["motion","ok"]}}],event:[{type:"enum",name:"motion",ref:{value:"motion"}},{type:"enum",name:"ok",ref:{value:"ok"}}],ipevt:[{type:"enum",name:"state",ref:{value:"state",options:["motion",
"ok"]}}]},smoke:{status:[{type:"enum",name:"state",ref:{value:"state",options:["fire","ok"]}}],event:[{type:"enum",name:"fire",ref:{value:"fire"}},{type:"enum",name:"ok",ref:{value:"ok"}}],ipevt:[{type:"enum",name:"state",ref:{value:"state",options:["fire","ok"]}}]},sensor:{status:[{type:"enum",name:"state",ref:{value:"state",options:["off","on"]}}],event:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}}],ipevt:[{type:"enum",name:"state",ref:{value:"state",options:["off",
"on"]}}]},button2:{event:[{type:"enum",name:"press 1.ch",ref:{value:"press1"}},{type:"enum",name:"press 2.ch",ref:{value:"press2"}}],ipevt:[{type:"enum",name:"press",ref:{value:"press",options:["channel1","channel2"]}}]},button4:{event:[{type:"enum",name:"press 1.ch",ref:{value:"press1"}},{type:"enum",name:"press 2.ch",ref:{value:"press2"}},{type:"enum",name:"press 3.ch",ref:{value:"press3"}},{type:"enum",name:"press 4.ch",ref:{value:"press4"}}],ipevt:[{type:"enum",name:"press",ref:{value:"press",
options:["channel1","channel2","channel3","channel4"]}}]}},getGatewayDeviceType:function(b){if((b=xnm.aio.gateway.Gateway._getRFMode(b.version,b.rfmode,b.gateway_vendor))&&!b.SUPPORTS868)return null;var a={type:this.TYPE,name:"Kopp",subtypes:[]};a.subtypes.push({id:"Switch",data:"switch"});a.subtypes.push({id:"Dimmer",data:"dimmer"});a.subtypes.push({id:"Shutter",data:"shutter"});var c=!1;b&&b.KOPPMODE||(c=!0);a.subtypes.push({id:"Contact Sensor",data:"contact",rfmismatch:c});a.subtypes.push({id:"Motion Detector",
data:"motion",rfmismatch:c});a.subtypes.push({id:"Smoke Detector",data:"smoke",rfmismatch:c});a.subtypes.push({id:"2 Channel Button",data:"button2",rfmismatch:c});a.subtypes.push({id:"4 Channel Button",data:"button4",rfmismatch:c});a.subtypes.push({id:"General Sensor",data:"sensor",rfmismatch:c});return a},getCommandStatusMap:function(b){return b&&b.data?this.MAP[b.data]:null},getIPevtMap:function(b){return b.data&&this.MAP[b.data]?{ipevt:this.MAP[b.data].ipevt}:null},createDevice:function(b,a,c){a=
xnm.aio.gateway.DM.DMError;var d=xnm.aio.gateway.DM.DMError.ERROR_CODE;b.address?b.data?(b=JSON.parse(JSON.stringify(b)),c(null,b)):c(new a(d.INVALID,"parameter data is invalid")):c(new a(d.INVALID,"parameter address is invalid"))},updateDevice:function(b,a,c){a=xnm.aio.gateway.DM.DMError;var d=xnm.aio.gateway.DM.DMError.ERROR_CODE;b.address?b.data?(b=JSON.parse(JSON.stringify(b)),c(null,b)):c(new a(d.INVALID,"parameter data is invalid")):c(new a(d.INVALID,"parameter address is invalid"))},deleteDevice:function(b,
a,c,d){d&&d(null,JSON.parse(JSON.stringify(a)));xnm.aio.gateway.systems.KOPP.delSensor(b,a.address,function(){})}}};
xnm.aio.gateway.systems.HE={learn:function(b,a,c){a||(a={});var d=this;a.timeout=2E4;b._executeRequest("LearnSC",{type:this.DM.TYPE},a,function(a,f){if(a)c&&c(a);else if(f.CODE){var g=d._resolveAddress(f.CODE);d.regist(b,{address:g},function(a){c&&c(a,{address:g})})}else c&&c(Error("response format invalid"))})},_resolveAddress:function(b){var a=parseInt(b.substr(10,2),16),a=(0==(a&24)?a&-7:a&-4).toString(16).toUpperCase();2>a.length&&(a="0"+a);return b.substr(0,10)+a+b.substr(12,2)},regist:function(b,
a,c){a&&a.address?(a=a.address.replace(/\./g,""),b._executeRequest("addSensor",{type:this.DM.TYPE,adr:a},null,function(a){c&&c(a)})):c&&c(Error("regist device option foramt invalid"))},delSensor:function(b,a,c){b._executeRequest("delSensor",{type:this.DM.TYPE,adr:a},null,function(a){c&&c(a)})},executeCommandCreator:function(b,a,c,d){a?c&&c.value?a&&a.address?this._executeCommand(b,a,c,d):d&&d(Error("it device address is empty")):d&&d(Error("it device command is empty")):d&&d(Error("it device is null"))},
_executeCommand:function(b,a,c,d){(a=this._buildData(b,a,c))?b._executeRequest("SendSC",{type:this.DM.TYPE,data:a},null,function(a){d&&d(a)}):d&&d(Error("command format invalid"))},buildQuery:function(b,a,c){return(b=this._buildData(b,a,c))?{type:this.DM.TYPE,data:b,XC_FNC:"SendSC"}:null},_buildData:function(b,a,c){if(a&&a.address&&14==a.address.length)return b=parseInt(a.address.substr(10,2),16),0==(b&24)?(b&=-7,"on"==c.value?b|=4:"off"==c.value&&(b|=2)):(b&=-4,"on"==c.value?b|=2:"off"==c.value&&
(b|=1)),c=b.toString(16).toUpperCase(),2>c.length&&(c="0"+c),a.address.substr(0,10)+c+a.address.substr(12,2)},handleStateCreator:function(b,a,c){return a&&a.value?(b=this._handleState(b,c))?b[a.value]:null:null},_handleState:function(b,a){if(!a.type||"he"!=a.type.toLowerCase()||!a.adr||!a.state||b.address.replace(/\./g,"").toLowerCase()!=a.adr.toLowerCase())return null;var c=a.state;if(0<a.state.indexOf(":"))var d=a.state.split(":");c=parseInt(d[0],16);if(0==(parseInt(b.address.substr(10,2),16)&24))return c&
4?{state:"open"}:c&2?{state:"closed"}:null;d={};switch(b.data){case "switch":case "motion":c&2?d.state="on":c&1&&(d.state="off");break;case "shutter":case "contact":c&2?d.state="open":c&1&&(d.state="closed");break;default:return null}return d.state?d:null},_handleUdpState:function(b,a){if(!a||!a.data||14>a.data.length||!b||!b.type||b.type.toUpperCase()!=this.DM.TYPE||!b.address)return null;var c=parseInt(a.data.substr(10,2),16),c=0==(c&24)?c&-7:c&-4,c=a.data.substr(0,10)+xnm.aio.gateway.Util.getHexVal(c,
2)+a.data.substr(12,2),d=a.data.substr(10,2);return b.address.toUpperCase()!=c.toUpperCase()?null:this._handleState(b,{type:this.DM.TYPE,adr:c.toUpperCase(),state:d.toUpperCase()+":00"})},parseTriggerCode:function(b,a){if(!b||14!=b.length||!a||!a.address)return null;var c=this._handleUdpState(a,{type:this.DM.TYPE,data:b});return c&&c.state?{value:c.state}:null},generateTriggerCode:function(b,a){if(!(b&&b.value&&a&&a.address)||14>a.address)return null;var c=parseInt(a.address.substr(10,2),16),d=b.value;
if(0==(c&24))c&=-7,"open"==d?c|=4:"closed"==d&&(c|=2);else if(c&=-4,"on"==d||"open"==d)c|=2;else if("off"==d||"closed"==d)c|=1;c=c.toString(16).toUpperCase();2>c.length&&(c="0"+c);return a.address.substr(0,10)+c+a.address.substr(12,2)},_parseData:function(b,a){if(14>b.length)return null;var c=b.substr(0,10)+b.substr(12,2);if((a.address.substr(0,10)+a.address.substr(12,2)).toUpperCase()!=c.toUpperCase())return null;var c=b.substr(0,14),d=this._buildData(null,a,{value:"on"});return d&&d.toUpperCase()==
c.toUpperCase()?{value:"on"}:(d=this._buildData(null,a,{value:"off"}))&&d.toUpperCase()==c.toUpperCase()?{value:"off"}:null},generateActionCode:function(b,a){return this._buildData(null,a,b)+"FF"},parseActionCode:function(b,a){return this._parseData(b,a)},DM:{TYPE:"HE",MAP:{"switch":{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}}],status:[{type:"enum",name:"state",ref:{value:"state",options:["on","off"]}}]},shutter:{command:[{type:"enum",name:"on",ref:{value:"on"}},
{type:"enum",name:"off",ref:{value:"off"}}],status:[{type:"enum",name:"state",ref:{value:"state",options:["open","closed"]}}]},motion:{status:[{type:"enum",name:"state",ref:{value:"state",options:["on","off"]}}],event:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}}],ipevt:[{type:"enum",name:"state",ref:{value:"state",options:["on","off"]}}]},contact:{status:[{type:"enum",name:"state",ref:{value:"state",options:["open","closed"]}}],event:[{type:"enum",name:"open",
ref:{value:"open"}},{type:"enum",name:"closed",ref:{value:"closed"}}],ipevt:[{type:"enum",name:"state",ref:{value:"state",options:["open","closed"]}}]}},getGatewayDeviceType:function(){var b={type:this.TYPE,name:"HOME easy",subtypes:[]};b.subtypes.push({id:"Switch",data:"switch"});b.subtypes.push({id:"Shutter",data:"shutter"});b.subtypes.push({id:"Motion Detector",data:"motion"});b.subtypes.push({id:"Contact Sensor",data:"contact"});return b},getCommandStatusMap:function(b){return b&&b.data?this.MAP[b.data]:
null},getIPevtMap:function(b){return b&&b.data?(b=this.MAP[b.data])?{ipevt:b.ipevt}:null:null},createDevice:function(b,a,c){a=xnm.aio.gateway.DM.DMError;var d=xnm.aio.gateway.DM.DMError.ERROR_CODE;b.address?b.data?(b=JSON.parse(JSON.stringify(b)),c(null,b)):c(new a(d.INVALID,"parameter data is invalid")):c(new a(d.INVALID,"parameter address is invalid"))},updateDevice:function(b,a,c){a=xnm.aio.gateway.DM.DMError;var d=xnm.aio.gateway.DM.DMError.ERROR_CODE;b.address?b.data?(b=JSON.parse(JSON.stringify(b)),
c(null,b)):c(new a(d.INVALID,"parameter data is invalid")):c(new a(d.INVALID,"parameter address is invalid"))},deleteDevice:function(b,a,c,d){d&&d(null,JSON.parse(JSON.stringify(a)));xnm.aio.gateway.systems.HE.delSensor(b,a.address,function(){})}}};
xnm.aio.gateway.systems.GV={learn:function(b,a,c){b._executeRequest("LearnSC",{type:this.DM.TYPE},{timeout:2E4},function(a,b){a?c&&c(a):b.CODE?c&&c(null,{address:b.CODE}):c&&c(Error("response format invalid"))})},_handleUdpState:function(b,a){return a&&a.data&&b&&b.type&&b.type.toUpperCase()==this.DM.TYPE&&b.address&&b.address.toUpperCase()==a.data.toUpperCase()?{state:"fire"}:null},parseTriggerCode:function(b,a){return b&&a&&a.address&&a.address.toUpperCase()==b.toUpperCase()?{value:"fire"}:null},
generateTriggerCode:function(b,a){return b&&b.value&&a&&a.address&&"fire"==b.value?a.address.toUpperCase():null},DM:{TYPE:"GV",MAP:{smoke:{event:[{type:"enum",name:"fire",ref:{value:"fire"}}],ipevt:[{type:"enum",name:"state",ref:{value:"state",options:["fire"]}}]}},getGatewayDeviceType:function(){return{type:this.TYPE,name:"GEV FSR 4160"}},getCommandStatusMap:function(){return this.MAP.smoke},getIPevtMap:function(b){return{ipevt:this.MAP.smoke.ipevt}},createDevice:function(b,a,c){a=xnm.aio.gateway.DM.DMError;
var d=xnm.aio.gateway.DM.DMError.ERROR_CODE;b.address?(b=JSON.parse(JSON.stringify(b)),c(null,b)):c(new a(d.INVALID,"parameter address is invalid"))},updateDevice:function(b,a,c){a=xnm.aio.gateway.DM.DMError;var d=xnm.aio.gateway.DM.DMError.ERROR_CODE;b.address?(b=JSON.parse(JSON.stringify(b)),c(null,b)):c(new a(d.INVALID,"parameter address is invalid"))}}};
xnm.aio.gateway.systems.MX={learn:function(b,a,c){b._executeRequest("LearnSC",{type:this.DM.TYPE},{timeout:2E4},function(a,b){a?c&&c(a):b.CODE?c&&c(null,{address:b.CODE}):c&&c(Error("response format invalid"))})},_handleUdpState:function(b,a){return a&&a.data&&b&&b.type&&b.type.toUpperCase()==this.DM.TYPE&&b.address&&b.address.toUpperCase()==a.data.toUpperCase()?{state:"fire"}:null},parseTriggerCode:function(b,a){return b&&a&&a.address&&a.address.toUpperCase()==b.toUpperCase()?{value:"fire"}:null},
generateTriggerCode:function(b,a){return b&&b.value&&a&&a.address&&"fire"==b.value?a.address.toUpperCase():null},DM:{TYPE:"MX",MAP:{smoke:{event:[{type:"enum",name:"fire",ref:{value:"fire"}}],ipevt:[{type:"enum",name:"state",ref:{value:"state",options:["fire"]}}]}},getGatewayDeviceType:function(){return{type:this.TYPE,name:"REV Minimax"}},getCommandStatusMap:function(){return this.MAP.smoke},getIPevtMap:function(b){return{ipevt:this.MAP.smoke.ipevt}},createDevice:function(b,a,c){a=xnm.aio.gateway.DM.DMError;
var d=xnm.aio.gateway.DM.DMError.ERROR_CODE;b.address?(b=JSON.parse(JSON.stringify(b)),c(null,b)):c(new a(d.INVALID,"parameter address is invalid"))},updateDevice:function(b,a,c){a=xnm.aio.gateway.DM.DMError;var d=xnm.aio.gateway.DM.DMError.ERROR_CODE;b.address?(b=JSON.parse(JSON.stringify(b)),c(null,b)):c(new a(d.INVALID,"parameter address is invalid"))}}};
xnm.aio.gateway.systems.ELRO={learn:function(b,a,c){var d=this;b._executeRequest("LearnSC",{type:this.DM.TYPE},{timeout:2E4},function(a,b){if(a)c&&c(a);else if(b.CODE){var g=d._resolveAddress(b.CODE);g?c&&c(null,{address:g}):c&&c(Error("gateway return code format invalid"))}else c&&c(Error("response format invalid"))})},addSensor:function(b,a,c){a=a.substr(0,a.length-1)+"0";b._executeRequest("addSensor",{type:this.DM.TYPE,adr:a},{timeout:2E4},function(a){c&&c(a)})},delSensor:function(b,a,c){a=a.substr(0,
a.length-1)+"0";b._executeRequest("delSensor",{type:this.DM.TYPE,adr:a},{timeout:2E4},function(a){c&&c(a)})},_resolveAddress:function(b){return 6==b.length?b.substr(0,5)+"1":b},executeCommandCreator:function(b,a,c,d){a?c&&c.value?a&&a.address?this._executeCommand(b,a,c,d):d&&d(Error("it device address is empty")):d&&d(Error("it device command is empty")):d&&d(Error("it device is null"))},_executeCommand:function(b,a,c,d){(a=this._buildData(b,a,c))?b._executeRequest("SendSC",{type:this.DM.TYPE,data:a},
null,function(a){d&&d(a)}):d&&d(Error("command format invalid"))},buildQuery:function(b,a,c){return(b=this._buildData(b,a,c))?{type:this.DM.TYPE,data:b,XC_FNC:"SendSC"}:null},_buildData:function(b,a,c){if(8==a.address.length)return null;switch(c.value){case "on":b="1";break;case "off":b="4";break;default:return null}return a.address.substr(0,5)+b},handleStateCreator:function(b,a,c){return a&&a.value?(b=this._handleState(b,c))?b[a.value]:null:null},_handleState:function(b,a){if(!(a.type&&"elro"==a.type.toLowerCase()&&
a.adr&&a.state&&b&&b.address)||b.address.substr(0,5).toLowerCase()!=a.adr.substr(0,5).toLowerCase()||"smoke"==b.data)return null;if(0<a.state.indexOf(":"))var c=a.state.split(":");switch(parseInt(c[0],16)){case 1:return{state:"on"};case 0:return{state:"off"};default:return null}},_handleUdpState:function(b,a){if(!a||!a.data||6>a.data.length||!b||!b.address||5>b.address.length||!b.type||b.type.toUpperCase()!=this.DM.TYPE)return null;var c=a.data.substr(0,5),d=a.data.substr(5,1);if(c!=b.address.substr(0,
5))return null;if("smoke"==b.data)return{fire:"true"};switch(d){case "1":return{state:"on"};case "4":return{state:"off"};default:return null}},parseTriggerCode:function(b,a){return b&&a&&a.address&&a.address.toUpperCase()==b.toUpperCase()?{value:"fire"}:null},generateTriggerCode:function(b,a){return b&&b.value&&a&&a.address&&"fire"==b.value?a.address.toUpperCase():null},_parseData:function(b,a){if(6>b.length)return null;var c=b.substr(0,5);if(a.address.substr(0,5).toUpperCase()!=c.toUpperCase())return null;
c={};switch(b.substr(5,1)){case "1":c.value="on";break;case "4":c.value="off"}return c.value?c:null},generateActionCode:function(b,a){return this._buildData(null,a,b)},parseActionCode:function(b,a){return this._parseData(b,a)},DM:{TYPE:"ELRO",MAP:{actuator:{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}}],status:[{type:"enum",name:"state",ref:{value:"state",options:["on","off"]}}],ipevt:[{type:"enum",name:"state",ref:{value:"state",options:["on","off"]}}]},
smoke:{event:[{type:"enum",name:"fire",ref:{value:"fire"}}],ipevt:[{type:"enum",name:"fire",ref:{value:"fire",options:["true"]}}]}},getGatewayDeviceType:function(){var b={type:this.TYPE,name:"ELRO",subtypes:[]};b.subtypes.push({id:"Switch",data:"switch"});b.subtypes.push({id:"Dimmer",data:"dimmer"});b.subtypes.push({id:"Shutter",data:"shutter"});b.subtypes.push({id:"ELRO RM150RF",data:"smoke"});var a={type:this.TYPE,name:"Flamingo FA20-RF",subtypes:[]};a.subtypes.push({id:"Smoke Detector",data:"smoke"});
var c={type:this.TYPE,name:"mumbi RMF",subtypes:[]};c.subtypes.push({id:"Smoke Detector",data:"smoke"});return[b,a,c]},getCommandStatusMap:function(b){if(!b)return null;switch(b.data){case "switch":case "dimmer":case "shutter":return JSON.parse(JSON.stringify(this.MAP.actuator));case "smoke":return this.MAP.smoke;default:return null}},getIPevtMap:function(b){if(!b||!b.data)return null;switch(b.data){case "switch":case "dimmer":case "shutter":b=JSON.parse(JSON.stringify(this.MAP.actuator));break;case "smoke":b=
this.MAP.smoke;break;default:return null}return{ipevt:b.ipevt}},createDevice:function(b,a,c,d){a=xnm.aio.gateway.DM.DMError;var e=xnm.aio.gateway.DM.DMError.ERROR_CODE;b.address?b.data?(a=JSON.parse(JSON.stringify(b)),d&&xnm.aio.gateway.systems.ELRO.addSensor(d,b.address,function(){}),c(null,a)):c(new a(e.INVALID,"parameter data is invalid")):c(new a(e.INVALID,"parameter address is invalid"))},updateDevice:function(b,a,c,d){a=xnm.aio.gateway.DM.DMError;var e=xnm.aio.gateway.DM.DMError.ERROR_CODE;
b.address?b.data?(a=JSON.parse(JSON.stringify(b)),d&&xnm.aio.gateway.systems.ELRO.addSensor(d,b.address,function(){}),c(null,a)):c(new a(e.INVALID,"parameter data is invalid")):c(new a(e.INVALID,"parameter address is invalid"))},deleteDevice:function(b,a,c,d){d&&d(null,JSON.parse(JSON.stringify(a)));xnm.aio.gateway.systems.ELRO.delSensor(b,a.address,function(){})}}};
xnm.aio.gateway.systems.CR={learn:function(b,a,c){var d=this;b._executeRequest("LearnSC",{type:this.DM.TYPE},null,function(a,b){if(a)c&&c(a);else if(b.CODE)if(6==b.CODE.length){var g=xnm.aio.gateway.systems.MC._resolveAddress(b.CODE);c&&c(null,{address:g,type:xnm.aio.gateway.systems.MC.DM.TYPE})}else(g=d._resolveAddress(b.CODE))?c&&c(null,{address:g}):c&&c(Error("gateway return code format invalid"));else c&&c(Error("response format invalid"))})},_resolveAddress:function(b){var a=b.charAt(0);this._isOffCommand(b)&&
(a=(parseInt(a,16)-1).toString(16).toUpperCase());return a+b.substr(1)},_isOffCommand:function(b){var a=b.charAt(0);return"1"!=b.charAt(1)&&("7"==a||"A"==a||"1"==a||"4"==a)||"1"==b.charAt(1)&&"7"!=a&&"A"!=a&&"1"!=a&&"4"!=a?!0:!1},executeCommandCreator:function(b,a,c,d){a?c&&c.value?a&&a.address?this._executeCommand(b,a,c,d):d&&d(Error("it device address is empty")):d&&d(Error("it device command is empty")):d&&d(Error("it device is null"))},_executeCommand:function(b,a,c,d){(a=this._buildData(b,a,
c))?b._executeRequest("SendSC",{type:this.DM.TYPE,data:a},null,function(a){d&&d(a)}):d&&d(Error("command format invalid"))},buildQuery:function(b,a,c){return(b=this._buildData(b,a,c))?{type:this.DM.TYPE,data:b,XC_FNC:"SendSC"}:null},_buildData:function(b,a,c){if(!a.address||!c)return null;b=a.address;"off"==c.value&&(b=(parseInt(b.charAt(0),16)+1).toString(16).toUpperCase()+b.substr(1));return b},_handleUdpState:function(b,a){if(!a||!a.data||6>a.data.length||!b||!b.address||6>b.address.length||!b.type||
b.type.toUpperCase()!=this.DM.TYPE||(6==a.data.length?xnm.aio.gateway.systems.MC._resolveAddress(a.data):this._resolveAddress(a.data)).toLowerCase()!=b.address.toLowerCase())return null;var c=this._isOffCommand(a.data);switch(b.data){case "contact":return{state:c?"closed":"open"};case "motion":return{state:c?"off":"motion"};default:return null}},parseTriggerCode:function(b,a){if(!b||8>b.length||!a||!a.address||8>a.address.length)return null;var c=b.charAt(0),d="on";if("1"!=b.charAt(1)&&("7"==c||"A"==
c||"1"==c||"4"==c)||"1"==b.charAt(1)&&"7"!=c&&"A"!=c&&"1"!=c&&"4"!=c)c=(parseInt(c,16)-1).toString(16).toUpperCase(),d="off";if((c+b.substr(1)).toUpperCase()!=a.address.toUpperCase())return null;c={};switch(a.data){case "contact":switch(d){case "on":c.value="open";break;case "off":c.value="closed";break}case "motion":switch(d){case "on":c.value="motion";break;case "off":c.value="off"}}return c.value?c:null},generateTriggerCode:function(b,a){if(!(b&&b.value&&a&&a.address))return null;var c;switch(a.data){case "contact":switch(b.value){case "open":c=
"on";break;case "closed":c="off"}break;case "motion":switch(b.value){case "motion":c="on";break;case "off":c="off"}}if(!c)return null;var d=a.address;"off"==c&&(d=(parseInt(d.charAt(0),16)+1).toString(16).toUpperCase()+d.substr(1));return d},_parseData:function(b,a){if(6>b.length)return null;var c=b.substr(1);return a.address.substr(1).toUpperCase()!=c.toUpperCase()?null:b.toUpperCase()==a.address.toUpperCase()?{value:"on"}:{value:"off"}},generateActionCode:function(b,a){return this._buildData(null,
a,b)},parseActionCode:function(b,a){return this._parseData(b,a)},DM:{TYPE:"CR",MAP:{general:{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}}]},blind:{command:[{type:"enum",name:"down",ref:{value:"on"}},{type:"enum",name:"up",ref:{value:"off"}}]},contact:{event:[{type:"enum",name:"open",ref:{value:"open"}},{type:"enum",name:"closed",ref:{value:"closed"}}],ipevt:[{type:"enum",name:"state",ref:{value:"state",options:["open","closed"]}}]},motion:{event:[{type:"enum",
name:"motion",ref:{value:"motion"}},{type:"enum",name:"off",ref:{value:"off"}}],ipevt:[{type:"enum",name:"state",ref:{value:"state",options:["motion","off"]}}]}},getGatewayDeviceType:function(){var b={type:this.TYPE,name:"RSL",subtypes:[]};b.subtypes.push({id:"Switch",data:"switch"});b.subtypes.push({id:"Blind",data:"blind"});b.subtypes.push({id:"Contact Sensor",data:"contact"});b.subtypes.push({id:"Motion Detector",data:"motion"});return b},getCommandStatusMap:function(b){if(!b)return null;switch(b.data){case "blind":case "contact":case "motion":return this.MAP[b.data];
default:return this.MAP.general}},getIPevtMap:function(b){return b&&b.data?(b=this.MAP[b.data])?{ipevt:b.ipevt}:null:null},createDevice:function(b,a,c){a=xnm.aio.gateway.DM.DMError;var d=xnm.aio.gateway.DM.DMError.ERROR_CODE;b.address?(b=JSON.parse(JSON.stringify(b)),c(null,b)):c(new a(d.INVALID,"parameter address is invalid"))},updateDevice:function(b,a,c){a=xnm.aio.gateway.DM.DMError;var d=xnm.aio.gateway.DM.DMError.ERROR_CODE;b.address?(b=JSON.parse(JSON.stringify(b)),c(null,b)):c(new a(d.INVALID,
"parameter address is invalid"))}}};
xnm.aio.gateway.systems.MC={learn:function(b,a,c){var d=this;b._executeRequest("LearnSC",{type:this.DM.TYPE},null,function(a,b){if(a)c&&c(a);else if(b.CODE){var g=d._resolveAddress(b.CODE);g?c&&c(null,{address:g}):c&&c(Error("gateway return code format invalid"))}else c&&c(Error("response format invalid"))})},_resolveAddress:function(b){return 6==b.length?b.substr(0,5):null},executeCommandCreator:function(b,a,c,d){a?c&&c.value?a&&a.address?this._executeCommand(b,a,c,d):d&&d(Error("it device address is empty")):
d&&d(Error("it device command is empty")):d&&d(Error("it device is null"))},_executeCommand:function(b,a,c,d){(a=this._buildData(b,a,c))?b._executeRequest("SendSC",{type:this.DM.TYPE,data:a},null,function(a){d&&d(a)}):d&&d(Error("command format invalid"))},buildQuery:function(b,a,c){return(b=this._buildData(b,a,c))?{type:this.DM.TYPE,data:b,XC_FNC:"SendSC"}:null},_buildData:function(b,a,c){if(!a.address||!c)return null;b=a.address;return b="on"==c.value?b+"5":b+"4"},_handleUdpState:function(b,a){if(!(a&&
a.data&&b&&b.address&&b.type&&b.type.toUpperCase()==this.DM.TYPE))return null;var c=this._resolveAddress(a.data);return c.toLowerCase()!=b.address.toLowerCase()?null:"5"==a.data.substr(c.length)?{state:"on"}:{state:"off"}},parseTriggerCode:function(b,a){return!b||6>b.length||!a||!a.address||5>a.address.length||b.substr(0,5).toUpperCase()!=a.address.toUpperCase()?null:"5"==b.charAt(5)?{value:"on"}:{value:"off"}},generateTriggerCode:function(b,a){if(!(b&&b.value&&a&&a.address))return null;var c=a.address;
return c="on"==b.value?c+"5":c+"4"},_parseData:function(b,a){if(6>b.length)return null;var c=b.substr(0,5);return a.address.toUpperCase()!=c.toUpperCase()?null:"5"==b.charAt(5)?{value:"on"}:{value:"off"}},generateActionCode:function(b,a){return this._buildData(null,a,b)},parseActionCode:function(b,a){return this._parseData(b,a)},DM:{TYPE:"MC",MAP:{general:{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}}],event:[{type:"enum",name:"on",ref:{value:"on"}},
{type:"enum",name:"off",ref:{value:"off"}}],ipevt:[{type:"enum",name:"state",ref:{value:"state",options:["on","off"]}}]}},getGatewayDeviceType:function(){return{type:this.TYPE,name:"Multi Comfort"}},getCommandStatusMap:function(b){return b?this.MAP.general:null},getIPevtMap:function(b){return{ipevt:this.MAP.general.ipevt}},createDevice:function(b,a,c){a=xnm.aio.gateway.DM.DMError;var d=xnm.aio.gateway.DM.DMError.ERROR_CODE;b.address?(b=JSON.parse(JSON.stringify(b)),c(null,b)):c(new a(d.INVALID,"parameter address is invalid"))},
updateDevice:function(b,a,c){a=xnm.aio.gateway.DM.DMError;var d=xnm.aio.gateway.DM.DMError.ERROR_CODE;b.address?(b=JSON.parse(JSON.stringify(b)),c(null,b)):c(new a(d.INVALID,"parameter address is invalid"))}}};
xnm.aio.gateway.systems.EO={teach:function(b,a,c){var d=[];if(a)for(var e=0;e<a.length;e++)a[e].address&&d.push(a[e].address);var f=this._generateFreeAdr(d);b._executeRequest("SendSC",{type:this.DM.TYPE,data:"F610"+f+"05"},null,function(a){c&&c(a,{address:f})})},executeCommandCreator:function(b,a,c,d){a?c&&c.value?a&&a.address?this._executeCommand(b,a,c,d):d&&d(Error("it device address is empty")):d&&d(Error("it device command is empty")):d&&d(Error("it device is null"))},_executeCommand:function(b,
a,c,d){(a=this._buildData(b,a,c))?b._executeRequest("SendSC",{type:this.DM.TYPE,data:a},null,function(a){d&&d(a)}):d&&d(Error("command format invalid"))},buildQuery:function(b,a,c){return(b=this._buildData(b,a,c))?{type:this.DM.TYPE,data:b,XC_FNC:"SendSC"}:null},_buildData:function(b,a,c){if(!a.address||!c||!c.value)return null;c=c.value;b="00";var d="";if("on"==c||"dimUp"==c||"up"==c||"holdOn"==c)b="10";else if("off"==c||"dimDown"==c||"down"==c||"holdOff"==c)b="30";if("on"==c||"off"==c)d="05";else if("up"==
c||"down"==c)d="0E";else if("dimUp"==c||"dimDown"==c)d="28";return"F6"+b+a.address+d},_generateFreeAdr:function(b){for(var a,c=!1;!c;)a="FF80"+this._getHexVal(Math.floor(61166*Math.random())+4369,4),c=!this._contains(b,a);return a},_contains:xnm.aio.gateway.Util.contains,_getHexVal:xnm.aio.gateway.Util.getHexVal,_parseData:function(b,a){if(6>b.length)return null;var c=b.substr(4,b.length-6);if(a.address.toUpperCase()!=c.toUpperCase())return null;var c=b.substr(2,2),d={},e="";b.length>a.address.length+
4&&(e=b.substr(b.length-2,2));switch((c+e).toUpperCase()){case "1005":d.value="on";break;case "3005":d.value="off";break;case "100E":d.value="up";break;case "300E":d.value="down";break;case "1028":d.value="dimUp";break;case "3028":d.value="dimDown";break;case "10":d.value="holdOn";break;case "30":d.value="holdOff";break;case "00":d.value="stop"}return d.value?d:null},generateActionCode:function(b,a){return this._buildData(null,a,b)},parseActionCode:function(b,a){return this._parseData(b,a)},DM:{TYPE:"EO",
MAP:{"switch":{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}},{type:"enum",name:"hold on",ref:{value:"holdOn"}},{type:"enum",name:"hold off",ref:{value:"holdOff"}},{type:"enum",name:"release",ref:{value:"stop"}}]},dimmer:{command:[{type:"enum",name:"off",ref:{value:"off"}},{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"dim up",ref:{value:"dimUp"}},{type:"enum",name:"dim down",ref:{value:"dimDown"}},{type:"enum",name:"hold up",ref:{value:"holdOn"}},
{type:"enum",name:"hold down",ref:{value:"holdOff"}},{type:"enum",name:"stop",ref:{value:"stop"}}]},shutter:{command:[{type:"enum",name:"stop",ref:{value:"stop"}},{type:"enum",name:"move down",ref:{value:"holdOff"}},{type:"enum",name:"move up",ref:{value:"holdOn"}}]},blind:{command:[{type:"enum",name:"move up",ref:{value:"holdOn"}},{type:"enum",name:"move down",ref:{value:"holdOff"}},{type:"enum",name:"up",ref:{value:"up"}},{type:"enum",name:"down",ref:{value:"down"}},{type:"enum",name:"stop",ref:{value:"stop"}}]}},
getGatewayDeviceType:function(b){if((b=xnm.aio.gateway.Gateway._getRFMode(b.version,b.rfmode,b.gateway_vendor))&&!b.SUPPORTS868)return null;b={type:this.TYPE,name:"EnOcean (embedded)",subtypes:[]};b.subtypes.push({id:"Switch",data:"switch"});b.subtypes.push({id:"Dimmer",data:"dimmer"});b.subtypes.push({id:"Shutter",data:"shutter"});b.subtypes.push({id:"Blind",data:"blind"});return b},getCommandStatusMap:function(b){return b&&b.data?this.MAP[b.data]:null},createDevice:function(b,a,c){a=xnm.aio.gateway.DM.DMError;
var d=xnm.aio.gateway.DM.DMError.ERROR_CODE;b.address?b.data?(b=JSON.parse(JSON.stringify(b)),c(null,b)):c(new a(d.INVALID,"parameter data is invalid")):c(new a(d.INVALID,"parameter address is invalid"))},updateDevice:function(b,a,c){a=xnm.aio.gateway.DM.DMError;var d=xnm.aio.gateway.DM.DMError.ERROR_CODE;b.address?b.data?(b=JSON.parse(JSON.stringify(b)),c(null,b)):c(new a(d.INVALID,"parameter data is invalid")):c(new a(d.INVALID,"parameter address is invalid"))}}};
xnm.aio.gateway.systems.ENOCEAN={addSensor:function(b,a,c){a&&a.data&&a.vendor?b._executeRequestV5_Post("AddEnoceanDevice",a,{timeout:2E4},function(a,b){c&&c(a,b)}):c&&c(Error("device format error"))},updateSensor:function(b,a,c,d){a?c&&c.data&&c.vendor?b._executeRequestV5_Post("UpdateEnoceanDevice",{address:a,device:c},{timeout:2E4},function(a,b){d&&d(a,b)}):d&&d(Error("device format error")):d&&d(Error("address invalid"))},delSensor:function(b,a,c){b._executeRequest("delSensor",{type:this.DM.TYPE,
address:a},{timeout:2E4},function(a){c&&c(a)})},teachin:function(b,a,c){a&&a.data?b._executeRequest("TeachinEnocean",a,{timeout:2E4},function(a,b){a?c&&c(a):c&&c(null,b)}):c&&c(Error("data is null"))},learn:function(b,a,c){var d={type:this.DM.TYPE};a&&a.vendor&&(d.vendor=a.vendor);a&&a.data&&(d.data=a.data);a&&a.address&&(d.address=a.address);a&&a.senderID&&(d.senderID=a.senderID);b._executeRequest("LearnSC",d,{timeout:2E4},function(a,b){a?c&&c(a):c&&c(null,b)})},genVirtualDevice:function(b,a,c){a&&
a.data?b._executeRequest("AddEnoceanVirtualDevice",a,{timeout:2E4},function(a,b){a?c&&c(a):c&&c(null,b)}):c&&c(Error("data is null"))},regist:function(b,a,c){this.addSensor(b,a,c)},executeCommandCreator:function(b,a,c,d){a?c&&c.value?a&&a.address?this._executeCommand(b,a,c,d):d&&d(Error("it device address is empty")):d&&d(Error("it device command is empty")):d&&d(Error("it device is null"))},_executeCommand:function(b,a,c,d){c=this._buildData(b,a,c);"undefined"==typeof c||null==c?d&&d(Error("command format invalid")):
b._executeRequest("SendSC",{type:"ENOCEAN",address:a.address,data:c},null,function(a){d&&d(a)})},buildQuery:function(b,a,c){b=this._buildData(b,a,c);return"undefined"==typeof b||null==b?null:{type:"ENOCEAN",address:a.address,data:b,XC_FNC:"SendSC"}},_buildData:function(b,a,c){if(!(a&&a.address&&c&&c.value))return null;if(-1!=c.value.indexOf("dimTo")||-1!=c.value.indexOf("toggleTo")||-1!=c.value.indexOf("setRampTime")||-1!=c.value.indexOf("moveTo")||-1!=c.value.indexOf("lamellaTo")||-1!=c.value.indexOf("setValve")||
-1!=c.value.indexOf("setDisplay")||-1!=c.value.indexOf("stepUp")||-1!=c.value.indexOf("stepDown")||-1!=c.value.indexOf("setRunTime")||-1!=c.value.indexOf("setRotationTime")||-1!=c.value.indexOf("setRV")||-1!=c.value.indexOf("setTo")||-1!=c.value.indexOf("setSensorUpdateInterval")||-1!=c.value.indexOf("setVacationBlinkInterval")||-1!=c.value.indexOf("setFanLevel"))return"undefined"==typeof c.ext||null==c.ext?c.value:c.value+c.ext;if("button"==c.value.substr(0,6))return(b=c.value.substr(6))||(b=""),
a=null,a="undefined"==typeof c.ext||null==c.ext?"shortPress":c.ext,a+b;if(-1!=c.value.indexOf("setWakeup")){if(!c.ext)return null;b=c.ext.substr(0,c.ext.length-1);b=parseInt(b);return-1!=c.ext.indexOf("s")?10==b?c.value+0:c.value+((b-60)/30+1):-1!=c.ext.indexOf("h")?c.value+((b-3)/3+50):null}return c.value},handleStateCreator:function(b,a,c){if(!a||!a.value)return null;b=this._handleState(b,c);return b?"wakeup_cycle"==a.value?(a=b[a.value],0==a?"10s":1<=a&&49>=a?30*(a-1)+60+"s":3*(a-50)+3+"h"):b[a.value]:
null},_handleState:function(b,a){if(!(a.type&&a.adr&&a.state&&b.type&&b.type.toLowerCase()==a.type.toLowerCase()&&b.address)||b.address.toLowerCase()!=a.adr.toLowerCase())return null;var c=a.state;if("d2-20-00"==b.data){var d=c.message_code;"undefined"!=typeof d&&null!=d&&d.toString&&(c.message_code_hex=d.toString(16));if(d=c.operating_time)d=d.split(":"),c.operating_time_y=d[0],c.operating_time_d=d[1],c.operating_time_h=d[2],c.operating_time_m=d[3];if(d=c.filter_remaining_time)d=d.split(":"),c.filter_remaining_time_y=
d[0],c.filter_remaining_time_d=d[1],c.filter_remaining_time_h=d[2],c.filter_remaining_time_m=d[3]}return c},DM:{TYPE:"ENOCEAN",MAP:{general:{"f6-01-01":{command:[{type:"enum",name:"button",ref:{value:"button",ext:"%e",extMeta:["press","release","shortPress","longPress"]}}],status:[{type:"enum",name:"button",ref:{value:"button",options:["pressed","released"]}}],ipevt:[{type:"enum",name:"button",ref:{value:"button",options:["pressed","released","shortPress","longPress"]}}]},"f6-02-01":{command:[{type:"enum",
name:"button AI",ref:{value:"buttonAI",ext:"%e",extMeta:["press","release","shortPress","longPress"]}},{type:"enum",name:"button AO",ref:{value:"buttonAO",ext:"%e",extMeta:["press","release","shortPress","longPress"]}},{type:"enum",name:"button BI",ref:{value:"buttonBI",ext:"%e",extMeta:["press","release","shortPress","longPress"]}},{type:"enum",name:"button BO",ref:{value:"buttonBO",ext:"%e",extMeta:["press","release","shortPress","longPress"]}}],status:[{type:"enum",name:"button AI",ref:{value:"buttonAI",
options:["pressed","released"]}},{type:"enum",name:"button AO",ref:{value:"buttonAO",options:["pressed","released"]}},{type:"enum",name:"button BI",ref:{value:"buttonBI",options:["pressed","released"]}},{type:"enum",name:"button BO",ref:{value:"buttonBO",options:["pressed","released"]}}],ipevt:[{type:"enum",name:"button AI",ref:{value:"buttonAI",options:["pressed","released","shortPress","longPress"]}},{type:"enum",name:"button AO",ref:{value:"buttonAO",options:["pressed","released","shortPress",
"longPress"]}},{type:"enum",name:"button BI",ref:{value:"buttonBI",options:["pressed","released","shortPress","longPress"]}},{type:"enum",name:"button BO",ref:{value:"buttonBO",options:["pressed","released","shortPress","longPress"]}}]},"f6-02-02":{command:[{type:"enum",name:"button AI",ref:{value:"buttonAI",ext:"%e",extMeta:["press","release","shortPress","longPress"]}},{type:"enum",name:"button AO",ref:{value:"buttonAO",ext:"%e",extMeta:["press","release","shortPress","longPress"]}},{type:"enum",
name:"button BI",ref:{value:"buttonBI",ext:"%e",extMeta:["press","release","shortPress","longPress"]}},{type:"enum",name:"button BO",ref:{value:"buttonBO",ext:"%e",extMeta:["press","release","shortPress","longPress"]}}],status:[{type:"enum",name:"button AI",ref:{value:"buttonAI",options:["pressed","released"]}},{type:"enum",name:"button AO",ref:{value:"buttonAO",options:["pressed","released"]}},{type:"enum",name:"button BI",ref:{value:"buttonBI",options:["pressed","released"]}},{type:"enum",name:"button BO",
ref:{value:"buttonBO",options:["pressed","released"]}}],ipevt:[{type:"enum",name:"button AI",ref:{value:"buttonAI",options:["pressed","released","shortPress","longPress"]}},{type:"enum",name:"button AO",ref:{value:"buttonAO",options:["pressed","released","shortPress","longPress"]}},{type:"enum",name:"button BI",ref:{value:"buttonBI",options:["pressed","released","shortPress","longPress"]}},{type:"enum",name:"button BO",ref:{value:"buttonBO",options:["pressed","released","shortPress","longPress"]}}]},
"f6-02-03":{command:[{type:"enum",name:"auto",ref:{value:"auto"}},{type:"enum",name:"manu",ref:{value:"manu"}},{type:"enum",name:"dimUp",ref:{value:"dimUp"}},{type:"enum",name:"dimDown",ref:{value:"dimDown"}}],status:[{type:"enum",name:"state",ref:{value:"state",options:["auto","manu","dimUp","dimDown"]}}]},"f6-02-04":{status:[{type:"enum",name:"button AI",ref:{value:"buttonAI",options:["pressed","released"]}},{type:"enum",name:"button AO",ref:{value:"buttonAO",options:["pressed","released"]}},{type:"enum",
name:"button BI",ref:{value:"buttonBI",options:["pressed","released"]}},{type:"enum",name:"button BO",ref:{value:"buttonBO",options:["pressed","released"]}},{type:"enum",name:"energy bow",ref:{value:"energyBow",options:["pressed","released"]}}],ipevt:[{type:"enum",name:"button AI",ref:{value:"buttonAI",options:["pressed","released","shortPress","longPress"]}},{type:"enum",name:"button AO",ref:{value:"buttonAO",options:["pressed","released","shortPress","longPress"]}},{type:"enum",name:"button BI",
ref:{value:"buttonBI",options:["pressed","released","shortPress","longPress"]}},{type:"enum",name:"button BO",ref:{value:"buttonBO",options:["pressed","released","shortPress","longPress"]}},{type:"enum",name:"energy bow",ref:{value:"energyBow",options:["pressed","released","shortPress","longPress"]}}]},"f6-03-01":{command:[{type:"enum",name:"button AI",ref:{value:"buttonAI",ext:"%e",extMeta:["press","release","shortPress","longPress"]}},{type:"enum",name:"button AO",ref:{value:"buttonAO",ext:"%e",
extMeta:["press","release","shortPress","longPress"]}},{type:"enum",name:"button BI",ref:{value:"buttonBI",ext:"%e",extMeta:["press","release","shortPress","longPress"]}},{type:"enum",name:"button BO",ref:{value:"buttonBO",ext:"%e",extMeta:["press","release","shortPress","longPress"]}},{type:"enum",name:"button CI",ref:{value:"buttonCI",ext:"%e",extMeta:["press","release","shortPress","longPress"]}},{type:"enum",name:"button CO",ref:{value:"buttonCO",ext:"%e",extMeta:["press","release","shortPress",
"longPress"]}},{type:"enum",name:"button DI",ref:{value:"buttonDI",ext:"%e",extMeta:["press","release","shortPress","longPress"]}},{type:"enum",name:"button DO",ref:{value:"buttonDO",ext:"%e",extMeta:["press","release","shortPress","longPress"]}}],status:[{type:"enum",name:"button AI",ref:{value:"buttonAI",options:["pressed","released"]}},{type:"enum",name:"button AO",ref:{value:"buttonAO",options:["pressed","released"]}},{type:"enum",name:"button BI",ref:{value:"buttonBI",options:["pressed","released"]}},
{type:"enum",name:"button BO",ref:{value:"buttonBO",options:["pressed","released"]}},{type:"enum",name:"button CI",ref:{value:"buttonCI",options:["pressed","released"]}},{type:"enum",name:"button CO",ref:{value:"buttonCO",options:["pressed","released"]}},{type:"enum",name:"button DI",ref:{value:"buttonDI",options:["pressed","released"]}},{type:"enum",name:"button DO",ref:{value:"buttonDO",options:["pressed","released"]}}],ipevt:[{type:"enum",name:"button AI",ref:{value:"buttonAI",options:["pressed",
"released","shortPress","longPress"]}},{type:"enum",name:"button AO",ref:{value:"buttonAO",options:["pressed","released","shortPress","longPress"]}},{type:"enum",name:"button BI",ref:{value:"buttonBI",options:["pressed","released","shortPress","longPress"]}},{type:"enum",name:"button BO",ref:{value:"buttonBO",options:["pressed","released","shortPress","longPress"]}},{type:"enum",name:"button CI",ref:{value:"buttonCI",options:["pressed","released","shortPress","longPress"]}},{type:"enum",name:"button CO",
ref:{value:"buttonCO",options:["pressed","released","shortPress","longPress"]}},{type:"enum",name:"button DI",ref:{value:"buttonDI",options:["pressed","released","shortPress","longPress"]}},{type:"enum",name:"button DO",ref:{value:"buttonDO",options:["pressed","released","shortPress","longPress"]}}]},"f6-03-02":{command:[{type:"enum",name:"button AI",ref:{value:"buttonAI",ext:"%e",extMeta:["press","release","shortPress","longPress"]}},{type:"enum",name:"button AO",ref:{value:"buttonAO",ext:"%e",extMeta:["press",
"release","shortPress","longPress"]}},{type:"enum",name:"button BI",ref:{value:"buttonBI",ext:"%e",extMeta:["press","release","shortPress","longPress"]}},{type:"enum",name:"button BO",ref:{value:"buttonBO",ext:"%e",extMeta:["press","release","shortPress","longPress"]}},{type:"enum",name:"button CI",ref:{value:"buttonCI",ext:"%e",extMeta:["press","release","shortPress","longPress"]}},{type:"enum",name:"button CO",ref:{value:"buttonCO",ext:"%e",extMeta:["press","release","shortPress","longPress"]}},
{type:"enum",name:"button DI",ref:{value:"buttonDI",ext:"%e",extMeta:["press","release","shortPress","longPress"]}},{type:"enum",name:"button DO",ref:{value:"buttonDO",ext:"%e",extMeta:["press","release","shortPress","longPress"]}}],status:[{type:"enum",name:"button AI",ref:{value:"buttonAI",options:["pressed","released"]}},{type:"enum",name:"button AO",ref:{value:"buttonAO",options:["pressed","released"]}},{type:"enum",name:"button BI",ref:{value:"buttonBI",options:["pressed","released"]}},{type:"enum",
name:"button BO",ref:{value:"buttonBO",options:["pressed","released"]}},{type:"enum",name:"button CI",ref:{value:"buttonCI",options:["pressed","released"]}},{type:"enum",name:"button CO",ref:{value:"buttonCO",options:["pressed","released"]}},{type:"enum",name:"button DI",ref:{value:"buttonDI",options:["pressed","released"]}},{type:"enum",name:"button DO",ref:{value:"buttonDO",options:["pressed","released"]}}],ipevt:[{type:"enum",name:"button AI",ref:{value:"buttonAI",options:["pressed","released",
"shortPress","longPress"]}},{type:"enum",name:"button AO",ref:{value:"buttonAO",options:["pressed","released","shortPress","longPress"]}},{type:"enum",name:"button BI",ref:{value:"buttonBI",options:["pressed","released","shortPress","longPress"]}},{type:"enum",name:"button BO",ref:{value:"buttonBO",options:["pressed","released","shortPress","longPress"]}},{type:"enum",name:"button CI",ref:{value:"buttonCI",options:["pressed","released","shortPress","longPress"]}},{type:"enum",name:"button CO",ref:{value:"buttonCO",
options:["pressed","released","shortPress","longPress"]}},{type:"enum",name:"button DI",ref:{value:"buttonDI",options:["pressed","released","shortPress","longPress"]}},{type:"enum",name:"button DO",ref:{value:"buttonDO",options:["pressed","released","shortPress","longPress"]}}]},"f6-04-01":{status:[{type:"enum",name:"key card",ref:{value:"keycard",options:["inserted","takeout"]}}]},"f6-04-02":{status:[{type:"enum",name:"key card",ref:{value:"keycard",options:["inserted","takeout"]}}]},"f6-05-00":{status:[{type:"enum",
name:"wind",ref:{value:"wind",options:["alarm","ok"]}},{type:"enum",name:"battery low",ref:{value:"lowbat",options:["true","false"]}}]},"f6-05-01":{command:[{type:"enum",name:"reset",ref:{value:"reset"}}],status:[{type:"enum",name:"water",ref:{value:"water",options:["alarm","ok"]}}]},"f6-05-02":{status:[{type:"enum",name:"smoke",ref:{value:"smoke",options:["alarm","ok"]}},{type:"enum",name:"battery low",ref:{value:"lowbat",options:["true","false"]}}]},"f6-10-00":{status:[{type:"enum",name:"window",
ref:{value:"window",options:["open","closed","tilted"]}},{type:"enum",name:"handle position",ref:{value:"handle_pos",options:["up","down","middle"]}},{type:"int",name:"handle raw",ref:{value:"handle_raw"}}]},"f6-10-01":{status:[{type:"enum",name:"window",ref:{value:"window",options:["open","closed","tilted"]}},{type:"enum",name:"handle position",ref:{value:"handle_pos",options:["up","down","middle"]}},{type:"int",name:"handle raw",ref:{value:"handle_raw"}}]},"d5-00-01":{status:[{type:"enum",name:"contact",
ref:{value:"contact",options:["open","closed"]}},{type:"int",name:"contact raw",ref:{value:"contact_raw"}}]},"a5-02-01":{status:[{type:"float",name:"temperature",ref:{value:"temperature",extMeta:"-40-0"}},{type:"int",name:"temperature raw",ref:{value:"temperature_raw",extMeta:"0-255"}}]},"a5-02-02":{status:[{type:"float",name:"temperature",ref:{value:"temperature",extMeta:"-30-10"}},{type:"int",name:"temperature raw",ref:{value:"temperature_raw",extMeta:"0-255"}}]},"a5-02-03":{status:[{type:"float",
name:"temperature",ref:{value:"temperature",extMeta:"-20-20"}},{type:"int",name:"temperature raw",ref:{value:"temperature_raw",extMeta:"0-255"}}]},"a5-02-04":{status:[{type:"float",name:"temperature",ref:{value:"temperature",extMeta:"-10-30"}},{type:"int",name:"temperature raw",ref:{value:"temperature_raw",extMeta:"0-255"}}]},"a5-02-05":{status:[{type:"float",name:"temperature",ref:{value:"temperature",extMeta:"0-40"}},{type:"int",name:"temperature raw",ref:{value:"temperature_raw",extMeta:"0-255"}}]},
"a5-02-06":{status:[{type:"float",name:"temperature",ref:{value:"temperature",extMeta:"10-50"}},{type:"int",name:"temperature raw",ref:{value:"temperature_raw",extMeta:"0-255"}}]},"a5-02-07":{status:[{type:"float",name:"temperature",ref:{value:"temperature",extMeta:"20-60"}},{type:"int",name:"temperature raw",ref:{value:"temperature_raw",extMeta:"0-255"}}]},"a5-02-08":{status:[{type:"float",name:"temperature",ref:{value:"temperature",extMeta:"30-70"}},{type:"int",name:"temperature raw",ref:{value:"temperature_raw",
extMeta:"0-255"}}]},"a5-02-09":{status:[{type:"float",name:"temperature",ref:{value:"temperature",extMeta:"40-80"}},{type:"int",name:"temperature raw",ref:{value:"temperature_raw",extMeta:"0-255"}}]},"a5-02-0a":{status:[{type:"float",name:"temperature",ref:{value:"temperature",extMeta:"50-90"}},{type:"int",name:"temperature raw",ref:{value:"temperature_raw",extMeta:"0-255"}}]},"a5-02-0b":{status:[{type:"float",name:"temperature",ref:{value:"temperature",extMeta:"60-100"}},{type:"int",name:"temperature raw",
ref:{value:"temperature_raw",extMeta:"0-255"}}]},"a5-02-10":{status:[{type:"float",name:"temperature",ref:{value:"temperature",extMeta:"-60-20"}},{type:"int",name:"temperature raw",ref:{value:"temperature_raw",extMeta:"0-255"}}]},"a5-02-11":{status:[{type:"float",name:"temperature",ref:{value:"temperature",extMeta:"-50-30"}},{type:"int",name:"temperature raw",ref:{value:"temperature_raw",extMeta:"0-255"}}]},"a5-02-12":{status:[{type:"float",name:"temperature",ref:{value:"temperature",extMeta:"-40-40"}},
{type:"int",name:"temperature raw",ref:{value:"temperature_raw",extMeta:"0-255"}}]},"a5-02-13":{status:[{type:"float",name:"temperature",ref:{value:"temperature",extMeta:"-30-50"}},{type:"int",name:"temperature raw",ref:{value:"temperature_raw",extMeta:"0-255"}}]},"a5-02-14":{status:[{type:"float",name:"temperature",ref:{value:"temperature",extMeta:"-20-60"}},{type:"int",name:"temperature raw",ref:{value:"temperature_raw",extMeta:"0-255"}}]},"a5-02-15":{status:[{type:"float",name:"temperature",ref:{value:"temperature",
extMeta:"-10-70"}},{type:"int",name:"temperature raw",ref:{value:"temperature_raw",extMeta:"0-255"}}]},"a5-02-16":{status:[{type:"float",name:"temperature",ref:{value:"temperature",extMeta:"0-80"}},{type:"int",name:"temperature raw",ref:{value:"temperature_raw",extMeta:"0-255"}}]},"a5-02-17":{status:[{type:"float",name:"temperature",ref:{value:"temperature",extMeta:"10-90"}},{type:"int",name:"temperature raw",ref:{value:"temperature_raw",extMeta:"0-255"}}]},"a5-02-18":{status:[{type:"float",name:"temperature",
ref:{value:"temperature",extMeta:"20-100"}},{type:"int",name:"temperature raw",ref:{value:"temperature_raw",extMeta:"0-255"}}]},"a5-02-19":{status:[{type:"float",name:"temperature",ref:{value:"temperature",extMeta:"30-110"}},{type:"int",name:"temperature raw",ref:{value:"temperature_raw",extMeta:"0-255"}}]},"a5-02-1a":{status:[{type:"float",name:"temperature",ref:{value:"temperature",extMeta:"40-120"}},{type:"int",name:"temperature raw",ref:{value:"temperature_raw",extMeta:"0-255"}}]},"a5-02-1b":{status:[{type:"float",
name:"temperature",ref:{value:"temperature",extMeta:"50-130"}},{type:"int",name:"temperature raw",ref:{value:"temperature_raw",extMeta:"0-255"}}]},"a5-02-20":{status:[{type:"float",name:"temperature",ref:{value:"temperature",extMeta:"-10-41.2"}},{type:"int",name:"temperature raw",ref:{value:"temperature_raw",extMeta:"0-1023"}}]},"a5-02-30":{status:[{type:"float",name:"temperature",ref:{value:"temperature",extMeta:"-40-62.3"}},{type:"int",name:"temperature raw",ref:{value:"temperature_raw",extMeta:"0-1023"}}]},
"a5-04-01":{status:[{type:"float",name:"temperature",ref:{value:"temperature",extMeta:"0-40"}},{type:"int",name:"temperature raw",ref:{value:"temperature_raw",extMeta:"0-250"}},{type:"float",name:"humidity",ref:{value:"humidity",extMeta:"0-100"}},{type:"int",name:"humidity raw",ref:{value:"humidity_raw",extMeta:"0-250"}}]},"a5-04-02":{status:[{type:"float",name:"temperature",ref:{value:"temperature",extMeta:"-20-60"}},{type:"int",name:"temperature raw",ref:{value:"temperature_raw",extMeta:"0-250"}},
{type:"float",name:"humidity",ref:{value:"humidity",extMeta:"0-100"}},{type:"int",name:"humidity raw",ref:{value:"humidity_raw",extMeta:"0-250"}}]},"a5-04-03":{status:[{type:"float",name:"temperature",ref:{value:"temperature",extMeta:"-20-60"}},{type:"int",name:"temperature raw",ref:{value:"temperature_raw",extMeta:"0-1023"}},{type:"float",name:"humidity",ref:{value:"humidity",extMeta:"0-10"}},{type:"int",name:"humidity raw",ref:{value:"humidity_raw",extMeta:"0-255"}}]},"a5-06-01":{status:[{type:"float",
name:"voltage",ref:{value:"voltage",extMeta:"0-5.1"}},{type:"int",name:"voltage raw",ref:{value:"voltage_raw",extMeta:"0-255"}},{type:"float",name:"illumination 1",ref:{value:"illumination1",extMeta:"600-60000"}},{type:"int",name:"illumination 1 raw",ref:{value:"illumination1_raw",extMeta:"0-255"}},{type:"float",name:"illumination 2",ref:{value:"illumination2",extMeta:"300-30000"}},{type:"int",name:"illumination 2 raw",ref:{value:"illumination2_raw",extMeta:"0-255"}},{type:"float",name:"illumination",
ref:{value:"illumination",extMeta:"300-60000"}},{type:"int",name:"illumination raw",ref:{value:"illumination_raw",extMeta:"0-255"}},{type:"enum",name:"range",ref:{value:"range",options:["db1","db2"]}},{type:"int",name:"range raw",ref:{value:"range_raw",extMeta:"0-1"}}]},"a5-06-02":{status:[{type:"float",name:"voltage",ref:{value:"voltage",extMeta:"0-5.1"}},{type:"int",name:"voltage raw",ref:{value:"voltage_raw",extMeta:"0-255"}},{type:"float",name:"illumination 1",ref:{value:"illumination1",extMeta:"0-1020"}},
{type:"int",name:"illumination 1 raw",ref:{value:"illumination1_raw",extMeta:"0-255"}},{type:"float",name:"illumination 2",ref:{value:"illumination2",extMeta:"0-510"}},{type:"int",name:"illumination 2 raw",ref:{value:"illumination2_raw",extMeta:"0-255"}},{type:"float",name:"illumination",ref:{value:"illumination",extMeta:"0-1020"}},{type:"int",name:"illumination raw",ref:{value:"illumination_raw",extMeta:"0-255"}},{type:"enum",name:"range",ref:{value:"range",options:["db1","db2"]}},{type:"int",name:"range raw",
ref:{value:"range_raw",extMeta:"0-1"}}]},"a5-06-03":{status:[{type:"float",name:"voltage",ref:{value:"voltage",extMeta:"0-5.0"}},{type:"int",name:"voltage raw",ref:{value:"voltage_raw",extMeta:"0-250"}},{type:"float",name:"illumination",ref:{value:"illumination",extMeta:"0-1000"}},{type:"int",name:"illumination raw",ref:{value:"illumination_raw",extMeta:"0-1000"}}]},"a5-06-04":{status:[{type:"float",name:"temperature",ref:{value:"temperature",extMeta:"-20-60"}},{type:"int",name:"temperature raw",
ref:{value:"temperature_raw",extMeta:"0-255"}},{type:"float",name:"energy",ref:{value:"energy",extMeta:"0-100"}},{type:"int",name:"energy raw",ref:{value:"energy_raw",extMeta:"0-15"}},{type:"float",name:"illumination",ref:{value:"illumination",extMeta:"0-65535"}},{type:"int",name:"illumination raw",ref:{value:"illumination_raw",extMeta:"0-65535"}},{type:"enum",name:"temperature available",ref:{value:"temperature_avail",options:["true","true"]}},{type:"enum",name:"energy available",ref:{value:"energy_avail",
options:["true","true"]}}]},"a5-06-05":{status:[{type:"float",name:"voltage",ref:{value:"voltage",extMeta:"0-5.1"}},{type:"int",name:"voltage raw",ref:{value:"voltage_raw",extMeta:"0-255"}},{type:"float",name:"illumination 1",ref:{value:"illumination1",extMeta:"0-10200"}},{type:"int",name:"illumination 1 raw",ref:{value:"illumination1_raw",extMeta:"0-255"}},{type:"float",name:"illumination 2",ref:{value:"illumination2",extMeta:"0-5100"}},{type:"int",name:"illumination 2 raw",ref:{value:"illumination2_raw",
extMeta:"0-255"}},{type:"float",name:"illumination",ref:{value:"illumination",extMeta:"0-10200"}},{type:"int",name:"illumination raw",ref:{value:"illumination_raw",extMeta:"0-255"}},{type:"enum",name:"range",ref:{value:"range",options:["db1","db2"]}},{type:"int",name:"range raw",ref:{value:"range_raw",extMeta:"0-1"}}]},"a5-07-01":{command:[{type:"enum",name:"reset",ref:{value:"reset"}}],status:[{type:"float",name:"voltage",ref:{value:"voltage",extMeta:"0-5.0"}},{type:"int",name:"voltage raw",ref:{value:"voltage_raw",
extMeta:"0-250"}},{type:"enum",name:"state",ref:{value:"state",options:["on","off"]}},{type:"int",name:"state raw",ref:{value:"state_raw",extMeta:"0-255"}},{type:"float",name:"voltage available",ref:{value:"voltage_avail",options:["true","false"]}}]},"a5-07-02":{command:[{type:"enum",name:"reset",ref:{value:"reset"}}],status:[{type:"float",name:"voltage",ref:{value:"voltage",extMeta:"0-5.0"}},{type:"int",name:"voltage raw",ref:{value:"voltage_raw",extMeta:"0-250"}},{type:"enum",name:"state",ref:{value:"state",
options:["on","off"]}},{type:"int",name:"state raw",ref:{value:"state_raw",extMeta:"0-1"}}]},"a5-07-03":{command:[{type:"enum",name:"reset",ref:{value:"reset"}}],status:[{type:"float",name:"voltage",ref:{value:"voltage",extMeta:"0-5.0"}},{type:"int",name:"voltage raw",ref:{value:"voltage_raw",extMeta:"0-250"}},{type:"float",name:"illumination",ref:{value:"illumination",extMeta:"0-1000"}},{type:"int",name:"illumination raw",ref:{value:"illumination_raw",extMeta:"0-1000"}},{type:"enum",name:"state",
ref:{value:"state",options:["on","off"]}},{type:"int",name:"state raw",ref:{value:"state_raw",extMeta:"0-1"}}]},"a5-08-01":{status:[{type:"float",name:"voltage",ref:{value:"voltage",extMeta:["0-5.1"]}},{type:"int",name:"voltage raw",ref:{value:"voltage_raw",extMeta:"0-255"}},{type:"float",name:"illumination",ref:{value:"illumination",extMeta:["0-510"]}},{type:"int",name:"illumination raw",ref:{value:"illumination_raw",extMeta:"0-255"}},{type:"float",name:"temperature",ref:{value:"temperature",extMeta:"0-51"}},
{type:"int",name:"temperature raw",ref:{value:"temperature_raw",extMeta:"0-255"}},{type:"enum",name:"state",ref:{value:"state",options:["on","off"]}},{type:"int",name:"state raw",ref:{value:"state_raw",extMeta:"0-1"}},{type:"enum",name:"button",ref:{value:"button",options:["pressed","released"]}},{type:"int",name:"button raw",ref:{value:"button_raw",extMeta:"0-1"}}]},"a5-08-02":{status:[{type:"float",name:"voltage",ref:{value:"voltage",extMeta:["0-5.1"]}},{type:"int",name:"voltage raw",ref:{value:"voltage_raw",
extMeta:"0-255"}},{type:"float",name:"illumination",ref:{value:"illumination",extMeta:["0-1020"]}},{type:"int",name:"illumination raw",ref:{value:"illumination_raw",extMeta:"0-255"}},{type:"float",name:"temperature",ref:{value:"temperature",extMeta:"0-51"}},{type:"int",name:"temperature raw",ref:{value:"temperature_raw",extMeta:"0-255"}},{type:"enum",name:"state",ref:{value:"state",options:["on","off"]}},{type:"int",name:"state raw",ref:{value:"state_raw",extMeta:"0-1"}},{type:"enum",name:"button",
ref:{value:"button",options:["pressed","released"]}},{type:"int",name:"button raw",ref:{value:"button_raw",extMeta:"0-1"}}]},"a5-08-03":{status:[{type:"float",name:"voltage",ref:{value:"voltage",extMeta:["0-5.1"]}},{type:"int",name:"voltage raw",ref:{value:"voltage_raw",extMeta:"0-255"}},{type:"float",name:"illumination",ref:{value:"illumination",extMeta:["0-1530"]}},{type:"int",name:"illumination raw",ref:{value:"illumination_raw",extMeta:"0-255"}},{type:"float",name:"temperature",ref:{value:"temperature",
extMeta:"-30-50"}},{type:"int",name:"temperature raw",ref:{value:"temperature_raw",extMeta:"0-255"}},{type:"enum",name:"state",ref:{value:"state",options:["on","off"]}},{type:"int",name:"state raw",ref:{value:"state_raw",extMeta:"0-1"}},{type:"enum",name:"button",ref:{value:"button",options:["pressed","released"]}},{type:"int",name:"button raw",ref:{value:"button_raw",extMeta:"0-1"}}]},"a5-09-02":{status:[{type:"float",name:"voltage",ref:{value:"voltage",extMeta:["0-5.1"]}},{type:"int",name:"voltage raw",
ref:{value:"voltage_raw",extMeta:"0-255"}},{type:"float",name:"gas",ref:{value:"gas",extMeta:["0-1020"]}},{type:"int",name:"gas raw",ref:{value:"gas_raw",extMeta:"0-255"}},{type:"float",name:"temperature",ref:{value:"temperature",extMeta:"0-51"}},{type:"int",name:"temperature raw",ref:{value:"temperature_raw",extMeta:"0-255"}},{type:"enum",name:"temperature available",ref:{value:"temperature_available",options:["true","false"]}}]},"a5-09-04":{status:[{type:"float",name:"humidity",ref:{value:"humidity",
extMeta:["0-100"]}},{type:"int",name:"humidity raw",ref:{value:"humidity_raw",extMeta:"0-200"}},{type:"float",name:"gas",ref:{value:"gas",extMeta:["0-2550"]}},{type:"int",name:"gas raw",ref:{value:"gas_raw",extMeta:"0-255"}},{type:"float",name:"temperature",ref:{value:"temperature",extMeta:"0-51"}},{type:"int",name:"temperature raw",ref:{value:"temperature_raw",extMeta:"0-255"}},{type:"enum",name:"temperature available",ref:{value:"temperature_available",options:["true","false"]}},{type:"enum",name:"humidity available",
ref:{value:"humidity_available",options:["true","false"]}}]},"a5-09-05":{status:[{type:"float",name:"voc",ref:{value:"voc",extMeta:["0-655350"]}},{type:"int",name:"voc raw",ref:{value:"voc_raw",extMeta:"0-65535"}},{type:"enum",name:"voc id",ref:{value:"voc_id",options:"VOCT;Formaldehyde;Benzene;Styrene;Toluene;Tetrachloroethylene;Xylene;n-Hexane;n-Octane;Cyclopentane;Methanol;Ethanol;1-Pentanol;Acetone;ethylene Oxide;Acetaldehyde ue;Acetic Acid;Propionice Acid;Valeric Acid;Butyric Acid;Ammoniac;Hydrogen Sulfide;Dimethylsulfide;2-Butanol;2-Methylpropanol;Diethyl ether;ozone".split(";")}},
{type:"int",name:"voc id raw",ref:{value:"voc_id_raw",extMeta:"0-255"}},{type:"float",name:"scale",ref:{value:"scale"}}]},"a5-09-06":{status:[{type:"int",name:"radon",ref:{value:"radon",extMeta:["0-1023"]}}]},"a5-09-07":{status:[{type:"int",name:"pm 10",ref:{value:"pm10",extMeta:["0-511"]}},{type:"int",name:"pm 2.5",ref:{value:"pm25",extMeta:["0-511"]}},{type:"int",name:"pm 1",ref:{value:"pm1",extMeta:["0-511"]}},{type:"enum",name:"pm 10 active",ref:{value:"pm10_active",options:["true","false"]}},
{type:"enum",name:"pm 2.5 active",ref:{value:"pm25_active",options:["true","false"]}},{type:"enum",name:"pm 1 active",ref:{value:"pm1_active",options:["true","false"]}}]},"a5-09-08":{status:[{type:"float",name:"co2",ref:{value:"co2",extMeta:["0-2000"]}},{type:"int",name:"co2 raw",ref:{value:"co2_raw",extMeta:"0-255"}}]},"a5-09-09":{status:[{type:"float",name:"co2",ref:{value:"co2",extMeta:["0-2000"]}},{type:"int",name:"co2 raw",ref:{value:"co2_raw",extMeta:"0-255"}},{type:"enum",name:"power failure detected",
ref:{value:"power_failure_detected",options:["true","false"]}}]},"a5-09-0a":{status:[{type:"float",name:"voltage",ref:{value:"voltage",extMeta:["2.0-5.0"]}},{type:"int",name:"voltage raw",ref:{value:"voltage_raw",extMeta:"0-15"}},{type:"int",name:"gas",ref:{value:"gas",extMeta:["0-65535"]}},{type:"int",name:"gas raw",ref:{value:"gas_raw",extMeta:"0-65535"}},{type:"float",name:"temperature",ref:{value:"temperature",extMeta:"-20-60"}},{type:"int",name:"temperature raw",ref:{value:"temperature_raw",
extMeta:"0-255"}},{type:"enum",name:"temperature available",ref:{value:"temperature_available",options:["true","false"]}},{type:"enum",name:"voltage available",ref:{value:"voltage_available",options:["true","false"]}}]},"a5-09-0b":{status:[{type:"float",name:"voltage",ref:{value:"voltage",extMeta:["2.0-5.0"]}},{type:"int",name:"voltage raw",ref:{value:"voltage_raw",extMeta:"0-15"}},{type:"float",name:"radio",ref:{value:"radio",extMeta:["0-6553"]}},{type:"int",name:"radio raw",ref:{value:"radio_raw",
extMeta:"0-65535"}},{type:"float",name:"scale",ref:{value:"scale"}},{type:"enum",name:"unit",ref:{value:"unit",options:["\u03bcSv/h","cpm","Bq/L","Bq/kg"]}},{type:"int",name:"unit raw",ref:{value:"unit_raw",extMeta:"0-3"}},{type:"enum",name:"temperature available",ref:{value:"temperature_available",options:["true","false"]}},{type:"enum",name:"voltage available",ref:{value:"voltage_available",options:["true","false"]}}]},"a5-09-0c":{status:[{type:"float",name:"voc",ref:{value:"voc",extMeta:["0-655350"]}},
{type:"int",name:"voc raw",ref:{value:"voc_raw",extMeta:"0-65535"}},{type:"enum",name:"voc id",ref:{value:"voc_id",options:"VOCT;Formaldehyde;Benzene;Styrene;Toluene;Tetrachloroethylene;Xylene;n-Hexane;n-Octane;Cyclopentane;Methanol;Ethanol;1-Pentanol;Acetone;ethylene Oxide;Acetaldehyde ue;Acetic Acid;Propionice Acid;Valeric Acid;Butyric Acid;Ammoniac;Hydrogen Sulfide;Dimethylsulfide;2-Butanol;2-Methylpropanol;Diethyl ether;Naphthalene;4-Phenylcyclohexene;Limonene;Trichloroethylene;Isovaleric acid;Indole;Cadaverine;Putrescine;Caproic acid;ozone".split(";")}},
{type:"int",name:"voc id raw",ref:{value:"voc_id_raw",extMeta:"0-255"}},{type:"float",name:"scale",ref:{value:"scale"}},{type:"enum",name:"unit",ref:{value:"unit",options:["\u03bcSv/h","ppb"]}},{type:"int",name:"unit raw",ref:{value:"unit_raw",extMeta:"0-1"}}]},"a5-10-01":{status:[{type:"enum",name:"fan speed",ref:{value:"fan_speed",options:["0","1","2","3","auto"]}},{type:"int",name:"fan speed raw",ref:{value:"fan_speed_raw",extMeta:"0-255"}},{type:"float",name:"set point",ref:{value:"setpoint"}},
{type:"int",name:"set point raw",ref:{value:"setpoint_raw",extMeta:"0-255"}},{type:"float",name:"temperature",ref:{value:"temperature",extMeta:"0-40"}},{type:"int",name:"temperature raw",ref:{value:"temperature_raw",extMeta:"0-250"}},{type:"enum",name:"button",ref:{value:"button",options:["pressed","released"]}},{type:"int",name:"button raw",ref:{value:"button_raw",extMeta:"0-1"}}]},"a5-10-02":{status:[{type:"enum",name:"fan speed",ref:{value:"fan_speed",options:["0","1","2","3","auto"]}},{type:"int",
name:"fan speed raw",ref:{value:"fan_speed_raw",extMeta:"0-255"}},{type:"float",name:"set point",ref:{value:"setpoint"}},{type:"int",name:"set point raw",ref:{value:"setpoint_raw",extMeta:"0-255"}},{type:"float",name:"temperature",ref:{value:"temperature",extMeta:"0-40"}},{type:"int",name:"temperature raw",ref:{value:"temperature_raw",extMeta:"0-250"}},{type:"enum",name:"slider",ref:{value:"slider",options:["day","night"]}},{type:"int",name:"slider raw",ref:{value:"slider_raw",extMeta:"0-1"}}]},"a5-10-03":{status:[{type:"float",
name:"set point",ref:{value:"setpoint"}},{type:"int",name:"set point raw",ref:{value:"setpoint_raw",extMeta:"0-255"}},{type:"float",name:"temperature",ref:{value:"temperature",extMeta:"0-40"}},{type:"int",name:"temperature raw",ref:{value:"temperature_raw",extMeta:"0-250"}}]},"a5-10-04":{status:[{type:"enum",name:"fan speed",ref:{value:"fan_speed",options:["0","1","2","3","auto"]}},{type:"int",name:"fan speed raw",ref:{value:"fan_speed_raw",extMeta:"0-255"}},{type:"float",name:"set point",ref:{value:"setpoint"}},
{type:"int",name:"set point raw",ref:{value:"setpoint_raw",extMeta:"0-255"}},{type:"float",name:"temperature",ref:{value:"temperature",extMeta:"0-40"}},{type:"int",name:"temperature raw",ref:{value:"temperature_raw",extMeta:"0-250"}}]},"a5-10-05":{status:[{type:"float",name:"set point",ref:{value:"setpoint"}},{type:"int",name:"set point raw",ref:{value:"setpoint_raw",extMeta:"0-255"}},{type:"float",name:"temperature",ref:{value:"temperature",extMeta:"0-40"}},{type:"int",name:"temperature raw",ref:{value:"temperature_raw",
extMeta:"0-250"}},{type:"enum",name:"button",ref:{value:"button",options:["pressed","released"]}},{type:"int",name:"button raw",ref:{value:"button_raw",extMeta:"0-1"}}]},"a5-10-06":{status:[{type:"float",name:"set point",ref:{value:"setpoint"}},{type:"int",name:"set point raw",ref:{value:"setpoint_raw",extMeta:"0-255"}},{type:"float",name:"temperature",ref:{value:"temperature",extMeta:"0-40"}},{type:"int",name:"temperature raw",ref:{value:"temperature_raw",extMeta:"0-250"}},{type:"enum",name:"slider",
ref:{value:"slider",options:["day","night"]}},{type:"int",name:"slider raw",ref:{value:"slider_raw",extMeta:"0-1"}}]},"a5-10-07":{status:[{type:"enum",name:"fan speed",ref:{value:"fan_speed",options:["0","1","2","3","auto"]}},{type:"int",name:"fan speed raw",ref:{value:"fan_speed_raw",extMeta:"0-255"}},{type:"float",name:"temperature",ref:{value:"temperature",extMeta:"0-40"}},{type:"int",name:"temperature raw",ref:{value:"temperature_raw",extMeta:"0-250"}}]},"a5-10-08":{status:[{type:"enum",name:"fan speed",
ref:{value:"fan_speed",options:["0","1","2","3","auto"]}},{type:"int",name:"fan speed raw",ref:{value:"fan_speed_raw",extMeta:"0-255"}},{type:"float",name:"temperature",ref:{value:"temperature",extMeta:"0-40"}},{type:"int",name:"temperature raw",ref:{value:"temperature_raw",extMeta:"0-250"}},{type:"enum",name:"button",ref:{value:"button",options:["pressed","released"]}},{type:"int",name:"button raw",ref:{value:"button_raw",extMeta:"0-1"}}]},"a5-10-09":{status:[{type:"enum",name:"fan speed",ref:{value:"fan_speed",
options:["0","1","2","3","auto"]}},{type:"int",name:"fan speed raw",ref:{value:"fan_speed_raw",extMeta:"0-255"}},{type:"float",name:"temperature",ref:{value:"temperature",extMeta:"0-40"}},{type:"int",name:"temperature raw",ref:{value:"temperature_raw",extMeta:"0-250"}},{type:"enum",name:"slider",ref:{value:"slider",options:["day","night"]}},{type:"int",name:"slider raw",ref:{value:"slider_raw",extMeta:"0-1"}}]},"a5-10-0a":{status:[{type:"float",name:"set point",ref:{value:"setpoint"}},{type:"int",
name:"set point raw",ref:{value:"setpoint_raw",extMeta:"0-255"}},{type:"float",name:"temperature",ref:{value:"temperature",extMeta:"0-40"}},{type:"int",name:"temperature raw",ref:{value:"temperature_raw",extMeta:"0-250"}},{type:"enum",name:"contact",ref:{value:"contact",options:["open","closed"]}},{type:"int",name:"contact raw",ref:{value:"contact_raw",extMeta:"0-1"}}]},"a5-10-0b":{status:[{type:"float",name:"temperature",ref:{value:"temperature",extMeta:"0-40"}},{type:"int",name:"temperature raw",
ref:{value:"temperature_raw",extMeta:"0-250"}},{type:"enum",name:"contact",ref:{value:"contact",options:["open","closed"]}},{type:"int",name:"contact raw",ref:{value:"contact_raw",extMeta:"0-1"}}]},"a5-10-0c":{status:[{type:"float",name:"temperature",ref:{value:"temperature",extMeta:"0-40"}},{type:"int",name:"temperature raw",ref:{value:"temperature_raw",extMeta:"0-250"}},{type:"enum",name:"button",ref:{value:"button",options:["pressed","released"]}},{type:"int",name:"button raw",ref:{value:"button_raw",
extMeta:"0-1"}}]},"a5-10-0d":{status:[{type:"float",name:"temperature",ref:{value:"temperature",extMeta:"0-40"}},{type:"int",name:"temperature raw",ref:{value:"temperature_raw",extMeta:"0-250"}},{type:"enum",name:"slider",ref:{value:"slider",options:["day","night"]}},{type:"int",name:"slider raw",ref:{value:"slider_raw",extMeta:"0-1"}}]},"a5-10-10":{status:[{type:"float",name:"set point",ref:{value:"setpoint"}},{type:"int",name:"set point raw",ref:{value:"setpoint_raw",extMeta:"0-255"}},{type:"float",
name:"humidity",ref:{value:"humidity",extMeta:"0-100"}},{type:"int",name:"humidity raw",ref:{value:"humidity_raw",extMeta:"0-250"}},{type:"float",name:"temperature",ref:{value:"temperature",extMeta:"0-40"}},{type:"int",name:"temperature raw",ref:{value:"temperature_raw",extMeta:"0-250"}},{type:"enum",name:"button",ref:{value:"button",options:["pressed","released"]}},{type:"int",name:"button raw",ref:{value:"button_raw",extMeta:"0-1"}}]},"a5-10-11":{status:[{type:"float",name:"set point",ref:{value:"setpoint"}},
{type:"int",name:"set point raw",ref:{value:"setpoint_raw",extMeta:"0-255"}},{type:"float",name:"humidity",ref:{value:"humidity",extMeta:"0-100"}},{type:"int",name:"humidity raw",ref:{value:"humidity_raw",extMeta:"0-250"}},{type:"float",name:"temperature",ref:{value:"temperature",extMeta:"0-40"}},{type:"int",name:"temperature raw",ref:{value:"temperature_raw",extMeta:"0-250"}},{type:"enum",name:"slider",ref:{value:"slider",options:["day","night"]}},{type:"int",name:"slider raw",ref:{value:"slider_raw",
extMeta:"0-1"}}]},"a5-10-12":{status:[{type:"float",name:"set point",ref:{value:"setpoint"}},{type:"int",name:"set point raw",ref:{value:"setpoint_raw",extMeta:"0-255"}},{type:"float",name:"humidity",ref:{value:"humidity",extMeta:"0-100"}},{type:"int",name:"humidity raw",ref:{value:"humidity_raw",extMeta:"0-250"}},{type:"float",name:"temperature",ref:{value:"temperature",extMeta:"0-40"}},{type:"int",name:"temperature raw",ref:{value:"temperature_raw",extMeta:"0-250"}}]},"a5-10-13":{status:[{type:"float",
name:"humidity",ref:{value:"humidity",extMeta:"0-100"}},{type:"int",name:"humidity raw",ref:{value:"humidity_raw",extMeta:"0-250"}},{type:"float",name:"temperature",ref:{value:"temperature",extMeta:"0-40"}},{type:"int",name:"temperature raw",ref:{value:"temperature_raw",extMeta:"0-250"}},{type:"enum",name:"button",ref:{value:"button",options:["pressed","released"]}},{type:"int",name:"button raw",ref:{value:"button_raw",extMeta:"0-1"}}]},"a5-10-14":{status:[{type:"float",name:"humidity",ref:{value:"humidity",
extMeta:"0-100"}},{type:"int",name:"humidity raw",ref:{value:"humidity_raw",extMeta:"0-250"}},{type:"float",name:"temperature",ref:{value:"temperature",extMeta:"0-40"}},{type:"int",name:"temperature raw",ref:{value:"temperature_raw",extMeta:"0-250"}},{type:"enum",name:"slider",ref:{value:"slider",options:["day","night"]}},{type:"int",name:"slider raw",ref:{value:"slider_raw",extMeta:"0-1"}}]},"a5-12-00":{status:[{type:"float",name:"current",ref:{value:"current",extMeta:"0-16777215"}},{type:"float",
name:"counter",ref:{value:"counter",extMeta:"0-16777215"}},{type:"int",name:"channel",ref:{value:"channel",extMeta:"0-15"}}]},"a5-12-01":{status:[{type:"float",name:"power",ref:{value:"power",extMeta:"0-16777215"}},{type:"float",name:"energy",ref:{value:"energy",extMeta:"0-16777215"}},{type:"int",name:"tariff",ref:{value:"tariff",extMeta:"0-15"}}]},"a5-12-02":{status:[{type:"float",name:"flow",ref:{value:"flow",extMeta:"0-16777215"}},{type:"float",name:"volume",ref:{value:"volume",extMeta:"0-16777215"}},
{type:"int",name:"tariff",ref:{value:"tariff",extMeta:"0-15"}}]},"a5-12-03":{status:[{type:"float",name:"flow",ref:{value:"flow",extMeta:"0-16777215"}},{type:"float",name:"volume",ref:{value:"volume",extMeta:"0-16777215"}},{type:"int",name:"tariff",ref:{value:"tariff",extMeta:"0-15"}}]},"a5-13-01":{status:[{type:"float",name:"lux",ref:{value:"lux",extMeta:"0-1000"}},{type:"int",name:"lux raw",ref:{value:"lux_raw",extMeta:"0-255"}},{type:"float",name:"temperature",ref:{value:"temperature",extMeta:"-40-80"}},
{type:"int",name:"temperature raw",ref:{value:"temperature_raw",extMeta:"0-255"}},{type:"float",name:"wind",ref:{value:"wind",extMeta:"0-70"}},{type:"int",name:"wind raw",ref:{value:"wind_raw",extMeta:"0-255"}},{type:"enum",name:"day/night",ref:{value:"day_night",options:["day","night"]}},{type:"enum",name:"rain",ref:{value:"rain",options:["true","false"]}},{type:"float",name:"sun west",ref:{value:"sun_west",extMeta:"0-150"}},{type:"int",name:"sun west raw",ref:{value:"sun_west_raw",extMeta:"0-255"}},
{type:"float",name:"sun south",ref:{value:"sun_south",extMeta:"0-150"}},{type:"int",name:"sun south raw",ref:{value:"sun_south_raw",extMeta:"0-255"}},{type:"float",name:"sun east",ref:{value:"sun_east",extMeta:"0-150"}},{type:"int",name:"sun east raw",ref:{value:"sun_east_raw",extMeta:"0-255"}},{type:"enum",name:"hemisphere",ref:{value:"hemisphere",options:["south","north"]}},{type:"int",name:"day",ref:{value:"day",extMeta:"1-31"}},{type:"int",name:"month",ref:{value:"month",extMeta:"1-12"}},{type:"int",
name:"year",ref:{value:"year",extMeta:"2000-2099"}},{type:"enum",name:"date source",ref:{value:"date_src",options:["gps","rtc"]}},{type:"int",name:"weekday",ref:{value:"weekday",extMeta:"1-7"}},{type:"int",name:"hour",ref:{value:"hour",extMeta:"0-23"}},{type:"int",name:"min",ref:{value:"min",extMeta:"0-59"}},{type:"int",name:"sec",ref:{value:"sec",extMeta:"0-59"}},{type:"enum",name:"time format",ref:{value:"time_format",options:["12","24"]}},{type:"enum",name:"am/pm",ref:{value:"am_pm",options:["am",
"pm"]}},{type:"enum",name:"time source",ref:{value:"time_src",options:["gps","rtc"]}},{type:"int",name:"elevation",ref:{value:"elv",extMeta:"-90-90"}},{type:"int",name:"azimuth",ref:{value:"azm",extMeta:"0-359"}},{type:"float",name:"latitude",ref:{value:"latitude",extMeta:"-90-90"}},{type:"int",name:"latitude raw",ref:{value:"latitude_raw",extMeta:"0-4095"}},{type:"float",name:"longitude",ref:{value:"longitude",extMeta:"-180-180"}},{type:"int",name:"longitude raw",ref:{value:"longitude_raw",extMeta:"0-4095"}}]},
"a5-13-02":{status:[{type:"float",name:"sun west",ref:{value:"sun_west",extMeta:"0-150"}},{type:"int",name:"sun west raw",ref:{value:"sun_west_raw",extMeta:"0-255"}},{type:"float",name:"sun south",ref:{value:"sun_south",extMeta:"0-150"}},{type:"int",name:"sun south raw",ref:{value:"sun_south_raw",extMeta:"0-255"}},{type:"float",name:"sun east",ref:{value:"sun_east",extMeta:"0-150"}},{type:"int",name:"sun east raw",ref:{value:"sun_east_raw",extMeta:"0-255"}},{type:"enum",name:"hemisphere",ref:{value:"hemisphere",
options:["south","north"]}}]},"a5-13-03":{status:[{type:"int",name:"day",ref:{value:"day",extMeta:"1-31"}},{type:"int",name:"month",ref:{value:"month",extMeta:"1-12"}},{type:"int",name:"year",ref:{value:"year",extMeta:"2000-2099"}},{type:"enum",name:"date source",ref:{value:"date_src",options:["gps","rtc"]}}]},"a5-13-04":{status:[{type:"int",name:"weekday",ref:{value:"weekday",extMeta:"1-7"}},{type:"int",name:"hour",ref:{value:"hour",extMeta:"0-23"}},{type:"int",name:"min",ref:{value:"min",extMeta:"0-59"}},
{type:"int",name:"sec",ref:{value:"sec",extMeta:"0-59"}},{type:"enum",name:"time format",ref:{value:"time_format",options:["12","24"]}},{type:"enum",name:"am/pm",ref:{value:"am_pm",options:["am","pm"]}},{type:"enum",name:"time source",ref:{value:"time_src",options:["gps","rtc"]}}]},"a5-13-05":{status:[{type:"int",name:"elevation",ref:{value:"elv",extMeta:"-90-90"}},{type:"int",name:"azimuth",ref:{value:"azm",extMeta:"0-359"}}]},"a5-13-06":{status:[{type:"float",name:"latitude",ref:{value:"latitude",
extMeta:"-90-90"}},{type:"int",name:"latitude raw",ref:{value:"latitude_raw",extMeta:"0-4095"}},{type:"float",name:"longitude",ref:{value:"longitude",extMeta:"-180-180"}},{type:"int",name:"longitude raw",ref:{value:"longitude_raw",extMeta:"0-4095"}}]},"a5-14-01":{status:[{type:"float",name:"voltage",ref:{value:"voltage",extMeta:"0-5.0"}},{type:"int",name:"voltage raw",ref:{value:"voltage_raw",extMeta:"0-250"}},{type:"enum",name:"state",ref:{value:"state",options:["open","closed"]}}]},"a5-14-02":{status:[{type:"float",
name:"voltage",ref:{value:"voltage",extMeta:"0-5.0"}},{type:"int",name:"voltage raw",ref:{value:"voltage_raw",extMeta:"0-250"}},{type:"float",name:"illumination",ref:{value:"illumination",extMeta:"0-1000"}},{type:"int",name:"illumination raw",ref:{value:"illumination_raw",extMeta:"0-250"}},{type:"enum",name:"state",ref:{value:"state",options:["open","closed"]}}]},"a5-14-03":{status:[{type:"float",name:"voltage",ref:{value:"voltage",extMeta:"0-5.0"}},{type:"int",name:"voltage raw",ref:{value:"voltage_raw",
extMeta:"0-250"}},{type:"enum",name:"state",ref:{value:"state",options:["open","closed"]}},{type:"enum",name:"viberation",ref:{value:"viberation",options:["true","false"]}}]},"a5-14-04":{status:[{type:"float",name:"voltage",ref:{value:"voltage",extMeta:"0-5.0"}},{type:"int",name:"voltage raw",ref:{value:"voltage_raw",extMeta:"0-250"}},{type:"float",name:"illumination",ref:{value:"illumination",extMeta:"0-1000"}},{type:"int",name:"illumination raw",ref:{value:"illumination_raw",extMeta:"0-250"}},{type:"enum",
name:"state",ref:{value:"state",options:["open","closed"]}},{type:"enum",name:"viberation",ref:{value:"viberation",options:["true","false"]}}]},"a5-14-05":{status:[{type:"float",name:"voltage",ref:{value:"voltage",extMeta:"0-5.0"}},{type:"int",name:"voltage raw",ref:{value:"voltage_raw",extMeta:"0-250"}},{type:"enum",name:"viberation",ref:{value:"viberation",options:["true","false"]}}]},"a5-14-06":{status:[{type:"float",name:"voltage",ref:{value:"voltage",extMeta:"0-5.0"}},{type:"int",name:"voltage raw",
ref:{value:"voltage_raw",extMeta:"0-250"}},{type:"float",name:"illumination",ref:{value:"illumination",extMeta:"0-1000"}},{type:"int",name:"illumination raw",ref:{value:"illumination_raw",extMeta:"0-250"}},{type:"enum",name:"viberation",ref:{value:"viberation",options:["true","false"]}}]},"a5-14-07":{status:[{type:"float",name:"voltage",ref:{value:"voltage",extMeta:"0-5.0"}},{type:"int",name:"voltage raw",ref:{value:"voltage_raw",extMeta:"0-250"}},{type:"enum",name:"state",ref:{value:"state",options:["open",
"closed"]}},{type:"enum",name:"lock",ref:{value:"lock",options:["locked","unlocked"]}}]},"a5-14-08":{status:[{type:"float",name:"voltage",ref:{value:"voltage",extMeta:"0-5.0"}},{type:"int",name:"voltage raw",ref:{value:"voltage_raw",extMeta:"0-250"}},{type:"enum",name:"state",ref:{value:"state",options:["open","closed"]}},{type:"enum",name:"lock",ref:{value:"lock",options:["locked","unlocked"]}},{type:"enum",name:"viberation",ref:{value:"viberation",options:["true","false"]}}]},"a5-14-09":{status:[{type:"float",
name:"voltage",ref:{value:"voltage",extMeta:"0-5.0"}},{type:"int",name:"voltage raw",ref:{value:"voltage_raw",extMeta:"0-250"}},{type:"enum",name:"state",ref:{value:"state",options:["open","closed","tilted","reserved"]}}]},"a5-14-0a":{status:[{type:"float",name:"voltage",ref:{value:"voltage",extMeta:"0-5.0"}},{type:"int",name:"voltage raw",ref:{value:"voltage_raw",extMeta:"0-250"}},{type:"enum",name:"state",ref:{value:"state",options:["open","closed","tilted","reserved"]}},{type:"enum",name:"viberation",
ref:{value:"viberation",options:["true","false"]}}]},"a5-20-04":{command:[{type:"float",name:"set temprature",ref:{value:"setTo",ext:"%f",extMeta:"10.0-30.0",scale:"0.5"}},{type:"int",name:"set valve",ref:{value:"setValve",ext:"%d",extMeta:"0-100"}},{type:"float",name:"temprature up",ref:{value:"up",ext:"%f",extMeta:"0.5-5",scale:"0.5"}},{type:"float",name:"temprature down",ref:{value:"down",ext:"%f",extMeta:"0.5-5",scale:"0.5"}},{type:"enum",name:"temprature measure on",ref:{value:"measureOn"}},
{type:"enum",name:"temprature measure off",ref:{value:"measureOff"}},{type:"enum",name:"lock button",ref:{value:"buttonLock"}},{type:"enum",name:"unlock button",ref:{value:"buttonUnlock"}},{type:"enum",name:"open valve",ref:{value:"openValve"}},{type:"enum",name:"close valve",ref:{value:"closeValve"}},{type:"enum",name:"init adaption",ref:{value:"init"}},{type:"enum",name:"set wakup cycle",ref:{value:"setWakeup",ext:"%e",sort:"none",extMeta:"10s 60s 90s 120s 150s 180s 210s 240sec 270s 300s 330s 360s 390s 420s 450s 480s 510s 540sec 570s 600s 630s 660s 690s 720s 750s 780s 810s 840sec 870s 900s 930s 960s 990s 1020s 1050s 1080s 1110s 1140s 1170s 1200s 1230s 1260s 1290s 1320s 1350s 1380s 1410s 1440s 1470s 1500s 3h 6h 9h 12h 15h 18h 21h 24h 27h 30h 33h 36h 39h 42h".split(" ")}}],
status:[{type:"int",name:"valve",ref:{value:"valve",extMeta:"0-100"}},{type:"enum",name:"temprature measurement",ref:{value:"measurement",options:["inactive","active"]}},{type:"enum",name:"button lock",ref:{value:"button_lock",options:["locked","unlocked"]}},{type:"enum",name:"temperature selection",ref:{value:"temperature_selection",options:["setpoint","feed_temperature"]}},{type:"float",name:"feed temperature",ref:{value:"feed_temperature",extMeta:"20-80"}},{type:"float",name:"set temprature",ref:{value:"setpoint",
extMeta:"10-30"}},{type:"enum",name:"error",ref:{value:"error",options:"no_error measurement_error battery_empty frost_protection blocked_valve end_point_detection_error no_valve not_taught_in no_response_from_controller teach_in_error unknow_error".split(" ")}},{type:"enum",name:"wakeup cycle",ref:{value:"wakeup_cycle",options:"10s 60s 90s 120s 150s 180s 210s 240sec 270s 300s 330s 360s 390s 420s 450s 480s 510s 540sec 570s 600s 630s 660s 690s 720s 750s 780s 810s 840sec 870s 900s 930s 960s 990s 1020s 1050s 1080s 1110s 1140s 1170s 1200s 1230s 1260s 1290s 1320s 1350s 1380s 1410s 1440s 1470s 1500s 3h 6h 9h 12h 15h 18h 21h 24h 27h 30h 33h 36h 39h 42h".split(" ")}},
{type:"enum",name:"pending",ref:{value:"pending",options:["true","false"]}}]},"a5-30-01":{status:[{type:"enum",name:"battery low",ref:{value:"battery_low",options:["true","false"]}},{type:"int",name:"voltage raw",ref:{value:"voltage_raw",extMeta:"0-255"}},{type:"enum",name:"state",ref:{value:"state",options:["open","closed"]}},{type:"int",name:"state raw",ref:{value:"state_raw",extMeta:"0-255"}}]},"a5-30-02":{status:[{type:"enum",name:"state",ref:{value:"state",options:["open","closed"]}}]},"a5-30-03":{status:[{type:"float",
name:"temperature",ref:{value:"temperature",extMeta:"0-40"}},{type:"int",name:"temperature raw",ref:{value:"temperature_raw",extMeta:"0-255"}},{type:"int",name:"wake",ref:{value:"wake",extMeta:"0-1"}},{type:"int",name:"input 3",ref:{value:"input3",extMeta:"0-1"}},{type:"int",name:"input 2",ref:{value:"input2",extMeta:"0-1"}},{type:"int",name:"input 1",ref:{value:"input1",extMeta:"0-1"}},{type:"int",name:"input 0",ref:{value:"input0",extMeta:"0-1"}}]},"a5-30-04":{status:[{type:"int",name:"analog input",
ref:{value:"analog_input",extMeta:"0-255"}},{type:"int",name:"input 2",ref:{value:"input2",extMeta:"0-1"}},{type:"int",name:"input 1",ref:{value:"input1",extMeta:"0-1"}},{type:"int",name:"input 0",ref:{value:"input0",extMeta:"0-1"}}]},"d2-01-00":{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}},{type:"enum",name:"toggle",ref:{value:"toggle"}}],status:[{type:"enum",name:"power failure detection",ref:{value:"power_failure_detection",options:["true","false"]}},
{type:"enum",name:"power failure",ref:{value:"power_failure",options:["true","false"]}},{type:"int",name:"over current switch off",ref:{value:"over_current_switch_off",extMeta:"0-1"}},{type:"int",name:"error level",ref:{value:"error_level",extMeta:"0-3"}},{type:"enum",name:"local_control",ref:{value:"local_control",options:["true","false"]}},{type:"int",name:"output value",ref:{value:"output_value",extMeta:"0-100"}},{type:"enum",name:"output state",ref:{value:"output_state",options:["on","off"]}}]},
"d2-01-01":{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}},{type:"enum",name:"toggle",ref:{value:"toggle"}}],status:[{type:"enum",name:"power failure detection",ref:{value:"power_failure_detection",options:["true","false"]}},{type:"enum",name:"power failure",ref:{value:"power_failure",options:["true","false"]}},{type:"int",name:"over current switch off",ref:{value:"over_current_switch_off",extMeta:"0-1"}},{type:"int",name:"error level",ref:{value:"error_level",
extMeta:"0-3"}},{type:"enum",name:"local_control",ref:{value:"local_control",options:["true","false"]}},{type:"int",name:"output value",ref:{value:"output_value",extMeta:"0-100"}},{type:"enum",name:"output state",ref:{value:"output_state",options:["on","off"]}}]},"d2-01-03":{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}},{type:"enum",name:"toggle",ref:{value:"toggle"}},{type:"int",name:"dim to",ref:{value:"dimTo",ext:"%d",extMeta:"0-100"}},{type:"enum",
name:"dim up",ref:{value:"dimUp"}},{type:"enum",name:"dim down",ref:{value:"dimDown"}},{type:"int",name:"toggle to",ref:{value:"toggleTo",ext:"%d",extMeta:"0-100"}}],status:[{type:"enum",name:"power failure detection",ref:{value:"power_failure_detection",options:["true","false"]}},{type:"enum",name:"power failure",ref:{value:"power_failure",options:["true","false"]}},{type:"int",name:"over current switch off",ref:{value:"over_current_switch_off",extMeta:"0-1"}},{type:"int",name:"error level",ref:{value:"error_level",
extMeta:"0-3"}},{type:"enum",name:"local_control",ref:{value:"local_control",options:["true","false"]}},{type:"enum",name:"output state",ref:{value:"output_state",options:["on","off"]}},{type:"int",name:"output value",ref:{value:"output_value",extMeta:"0-100"}}]},"d2-01-11":{command:[{type:"root",name:"channel 1",value:"ch1",children:[{type:"enum",name:"on",ref:{value:"ch1On"}},{type:"enum",name:"off",ref:{value:"ch1Off"}},{type:"enum",name:"toggle",ref:{value:"ch1Toggle"}}]},{type:"root",name:"channel 2",
value:"ch2",children:[{type:"enum",name:"on",ref:{value:"ch2On"}},{type:"enum",name:"off",ref:{value:"ch2Off"}},{type:"enum",name:"toggle",ref:{value:"ch2Toggle"}}]}],status:[{type:"enum",name:"power failure detection",ref:{value:"power_failure_detection",options:["true","false"]}},{type:"enum",name:"power failure",ref:{value:"power_failure",options:["true","false"]}},{type:"int",name:"over current switch off",ref:{value:"over_current_switch_off",extMeta:"0-1"}},{type:"int",name:"error level",ref:{value:"error_level",
extMeta:"0-3"}},{type:"enum",name:"local_control",ref:{value:"local_control",options:["true","false"]}},{type:"root",name:"channel 1",value:"ch1",children:[{type:"enum",name:"state",ref:{value:"ch1_output_state",options:["on","off"]}}]},{type:"root",name:"channel 2",value:"ch2",children:[{type:"enum",name:"state",ref:{value:"ch2_output_state",options:["on","off"]}}]}]},"d2-01-13":{command:[{type:"root",name:"channel 1",value:"ch1",children:[{type:"enum",name:"on",ref:{value:"ch1On"}},{type:"enum",
name:"off",ref:{value:"ch1Off"}},{type:"enum",name:"toggle",ref:{value:"ch1Toggle"}}]},{type:"root",name:"channel 2",value:"ch2",children:[{type:"enum",name:"on",ref:{value:"ch2On"}},{type:"enum",name:"off",ref:{value:"ch2Off"}},{type:"enum",name:"toggle",ref:{value:"ch2Toggle"}}]},{type:"root",name:"channel 3",value:"ch3",children:[{type:"enum",name:"on",ref:{value:"ch3On"}},{type:"enum",name:"off",ref:{value:"ch3Off"}},{type:"enum",name:"toggle",ref:{value:"ch3Toggle"}}]},{type:"root",name:"channel 4",
value:"ch4",children:[{type:"enum",name:"on",ref:{value:"ch4On"}},{type:"enum",name:"off",ref:{value:"ch4Off"}},{type:"enum",name:"toggle",ref:{value:"ch4Toggle"}}]}],status:[{type:"enum",name:"power failure detection",ref:{value:"power_failure_detection",options:["true","false"]}},{type:"enum",name:"power failure",ref:{value:"power_failure",options:["true","false"]}},{type:"int",name:"over current switch off",ref:{value:"over_current_switch_off",extMeta:"0-1"}},{type:"int",name:"error level",ref:{value:"error_level",
extMeta:"0-3"}},{type:"enum",name:"local_control",ref:{value:"local_control",options:["true","false"]}},{type:"root",name:"channel 1",value:"ch1",children:[{type:"enum",name:"state",ref:{value:"ch1_output_state",options:["on","off"]}}]},{type:"root",name:"channel 2",value:"ch2",children:[{type:"enum",name:"state",ref:{value:"ch2_output_state",options:["on","off"]}}]},{type:"root",name:"channel 3",value:"ch3",children:[{type:"enum",name:"state",ref:{value:"ch3_output_state",options:["on","off"]}}]},
{type:"root",name:"channel 4",value:"ch4",children:[{type:"enum",name:"state",ref:{value:"ch4_output_state",options:["on","off"]}}]}]},"d2-01-14":{command:[{type:"root",name:"channel 1",value:"ch1",children:[{type:"enum",name:"on",ref:{value:"ch1On"}},{type:"enum",name:"off",ref:{value:"ch1Off"}},{type:"enum",name:"toggle",ref:{value:"ch1Toggle"}}]},{type:"root",name:"channel 2",value:"ch2",children:[{type:"enum",name:"on",ref:{value:"ch2On"}},{type:"enum",name:"off",ref:{value:"ch2Off"}},{type:"enum",
name:"toggle",ref:{value:"ch2Toggle"}}]},{type:"root",name:"channel 3",value:"ch3",children:[{type:"enum",name:"on",ref:{value:"ch3On"}},{type:"enum",name:"off",ref:{value:"ch3Off"}},{type:"enum",name:"toggle",ref:{value:"ch3Toggle"}}]},{type:"root",name:"channel 4",value:"ch4",children:[{type:"enum",name:"on",ref:{value:"ch4On"}},{type:"enum",name:"off",ref:{value:"ch4Off"}},{type:"enum",name:"toggle",ref:{value:"ch4Toggle"}}]},{type:"root",name:"channel 5",value:"ch5",children:[{type:"enum",name:"on",
ref:{value:"ch5On"}},{type:"enum",name:"off",ref:{value:"ch5Off"}},{type:"enum",name:"toggle",ref:{value:"ch5Toggle"}}]},{type:"root",name:"channel 6",value:"ch6",children:[{type:"enum",name:"on",ref:{value:"ch6On"}},{type:"enum",name:"off",ref:{value:"ch6Off"}},{type:"enum",name:"toggle",ref:{value:"ch6Toggle"}}]},{type:"root",name:"channel 7",value:"ch7",children:[{type:"enum",name:"on",ref:{value:"ch7On"}},{type:"enum",name:"off",ref:{value:"ch7Off"}},{type:"enum",name:"toggle",ref:{value:"ch7Toggle"}}]},
{type:"root",name:"channel 8",value:"ch8",children:[{type:"enum",name:"on",ref:{value:"ch8On"}},{type:"enum",name:"off",ref:{value:"ch8Off"}},{type:"enum",name:"toggle",ref:{value:"ch8Toggle"}}]}],status:[{type:"enum",name:"power failure detection",ref:{value:"power_failure_detection",options:["true","false"]}},{type:"enum",name:"power failure",ref:{value:"power_failure",options:["true","false"]}},{type:"int",name:"over current switch off",ref:{value:"over_current_switch_off",extMeta:"0-1"}},{type:"int",
name:"error level",ref:{value:"error_level",extMeta:"0-3"}},{type:"enum",name:"local_control",ref:{value:"local_control",options:["true","false"]}},{type:"root",name:"channel 1",value:"ch1",children:[{type:"enum",name:"state",ref:{value:"ch1_output_state",options:["on","off"]}}]},{type:"root",name:"channel 2",value:"ch2",children:[{type:"enum",name:"state",ref:{value:"ch2_output_state",options:["on","off"]}}]},{type:"root",name:"channel 3",value:"ch3",children:[{type:"enum",name:"state",ref:{value:"ch3_output_state",
options:["on","off"]}}]},{type:"root",name:"channel 4",value:"ch4",children:[{type:"enum",name:"state",ref:{value:"ch4_output_state",options:["on","off"]}}]},{type:"root",name:"channel 5",value:"ch5",children:[{type:"enum",name:"state",ref:{value:"ch5_output_state",options:["on","off"]}}]},{type:"root",name:"channel 6",value:"ch6",children:[{type:"enum",name:"state",ref:{value:"ch6_output_state",options:["on","off"]}}]},{type:"root",name:"channel 7",value:"ch7",children:[{type:"enum",name:"state",
ref:{value:"ch7_output_state",options:["on","off"]}}]},{type:"root",name:"channel 8",value:"ch8",children:[{type:"enum",name:"state",ref:{value:"ch8_output_state",options:["on","off"]}}]}]},"d2-05-00":{command:[{type:"enum",name:"move up",ref:{value:"moveUp"}},{type:"enum",name:"move down",ref:{value:"moveDown"}},{type:"int",name:"move to",ref:{value:"moveTo",extMeta:"0-100"}},{type:"enum",name:"step up",ref:{value:"stepUp"}},{type:"enum",name:"step down",ref:{value:"stepDown"}},{type:"enum",name:"lamella up",
ref:{value:"lamellaUp"}},{type:"enum",name:"lamella down",ref:{value:"lamellaDown"}},{type:"int",name:"lamella to",ref:{value:"lamellaTo",extMeta:"0-100"}},{type:"enum",name:"stop",ref:{value:"stop"}}],status:[{type:"int",name:"position",ref:{value:"state",extMeta:"0-100"}},{type:"int",name:"lamella",ref:{value:"angle",extMeta:"0-100"}},{type:"enum",name:"lock mode",ref:{value:"lock",options:["normal","blockage_mode","alarm_mode"]}}]},"d2-05-01":{command:[{type:"root",name:"channel 1",value:"ch1",
children:[{type:"enum",name:"move up",ref:{value:"ch1moveUp"}},{type:"enum",name:"move down",ref:{value:"ch1moveDown"}},{type:"int",name:"move to",ref:{value:"ch1moveTo",extMeta:"0-100"}},{type:"enum",name:"step up",ref:{value:"ch1stepUp"}},{type:"enum",name:"step down",ref:{value:"ch1stepDown"}},{type:"enum",name:"lamella up",ref:{value:"ch1lamellaUp"}},{type:"enum",name:"lamella down",ref:{value:"ch1lamellaDown"}},{type:"int",name:"lamella to",ref:{value:"ch1lamellaTo",extMeta:"0-100"}},{type:"enum",
name:"stop",ref:{value:"ch1stop"}},{type:"float",name:"set run duraion",ref:{value:"ch1setRunTime",ext:"%f",extMeta:"5-300",scale:"0.1",unit:"s"}},{type:"int",name:"set rotation duraion",ref:{value:"ch1setRotationTime",ext:"%d",extMeta:"10-2540",scale:"10",unit:"ms"}}]},{type:"root",name:"channel 2",value:"ch2",children:[{type:"enum",name:"move up",ref:{value:"ch2moveUp"}},{type:"enum",name:"move down",ref:{value:"ch2moveDown"}},{type:"int",name:"move to",ref:{value:"ch2moveTo",extMeta:"0-100"}},
{type:"enum",name:"step up",ref:{value:"ch2stepUp"}},{type:"enum",name:"step down",ref:{value:"ch2stepDown"}},{type:"enum",name:"lamella up",ref:{value:"ch2lamellaUp"}},{type:"enum",name:"lamella down",ref:{value:"ch2lamellaDown"}},{type:"int",name:"lamella to",ref:{value:"ch2lamellaTo",extMeta:"0-100"}},{type:"enum",name:"stop",ref:{value:"ch2stop"}},{type:"float",name:"set run duraion",ref:{value:"ch2setRunTime",ext:"%f",extMeta:"5-300",scale:"0.1",unit:"s"}},{type:"int",name:"set rotation duraion",
ref:{value:"ch2setRotationTime",ext:"%d",extMeta:"10-2540",scale:"10",unit:"ms"}}]},{type:"root",name:"channel 3",value:"ch3",children:[{type:"enum",name:"move up",ref:{value:"ch3moveUp"}},{type:"enum",name:"move down",ref:{value:"ch3moveDown"}},{type:"int",name:"move to",ref:{value:"ch3moveTo",extMeta:"0-100"}},{type:"enum",name:"step up",ref:{value:"ch3stepUp"}},{type:"enum",name:"step down",ref:{value:"ch3stepDown"}},{type:"enum",name:"lamella up",ref:{value:"ch3lamellaUp"}},{type:"enum",name:"lamella down",
ref:{value:"ch3lamellaDown"}},{type:"int",name:"lamella to",ref:{value:"ch3lamellaTo",extMeta:"0-100"}},{type:"enum",name:"stop",ref:{value:"ch3stop"}},{type:"float",name:"set run duraion",ref:{value:"ch3setRunTime",ext:"%f",extMeta:"5-300",scale:"0.1",unit:"s"}},{type:"int",name:"set rotation duraion",ref:{value:"ch3setRotationTime",ext:"%d",extMeta:"10-2540",scale:"10",unit:"ms"}}]},{type:"root",name:"channel 4",value:"ch4",children:[{type:"enum",name:"move up",ref:{value:"ch4moveUp"}},{type:"enum",
name:"move down",ref:{value:"ch4moveDown"}},{type:"int",name:"move to",ref:{value:"ch4moveTo",extMeta:"0-100"}},{type:"enum",name:"step up",ref:{value:"ch4stepUp"}},{type:"enum",name:"step down",ref:{value:"ch4stepDown"}},{type:"enum",name:"lamella up",ref:{value:"ch4lamellaUp"}},{type:"enum",name:"lamella down",ref:{value:"ch4lamellaDown"}},{type:"int",name:"lamella to",ref:{value:"ch4lamellaTo",extMeta:"0-100"}},{type:"enum",name:"stop",ref:{value:"ch4stop"}},{type:"float",name:"set run duraion",
ref:{value:"ch4setRunTime",ext:"%f",extMeta:"5-300",scale:"0.1",unit:"s"}},{type:"int",name:"set rotation duraion",ref:{value:"ch4setRotationTime",ext:"%d",extMeta:"10-2540",scale:"10",unit:"ms"}}]}],status:[{type:"root",name:"channel 1",value:"ch1",children:[{type:"int",name:"position",ref:{value:"ch1state",extMeta:"0-100"}},{type:"int",name:"lamella",ref:{value:"ch1angle",extMeta:"0-100"}},{type:"enum",name:"lock mode",ref:{value:"ch1lock",options:["normal","blockage_mode","alarm_mode"]}}]},{type:"root",
name:"channel 2",value:"ch2",children:[{type:"int",name:"position",ref:{value:"ch2state",extMeta:"0-100"}},{type:"int",name:"lamella",ref:{value:"ch2angle",extMeta:"0-100"}},{type:"enum",name:"lock mode",ref:{value:"ch2lock",options:["normal","blockage_mode","alarm_mode"]}}]},{type:"root",name:"channel 3",value:"ch3",children:[{type:"int",name:"position",ref:{value:"ch3state",extMeta:"0-100"}},{type:"int",name:"lamella",ref:{value:"ch3angle",extMeta:"0-100"}},{type:"enum",name:"lock mode",ref:{value:"ch3lock",
options:["normal","blockage_mode","alarm_mode"]}}]},{type:"root",name:"channel 4",value:"ch4",children:[{type:"int",name:"position",ref:{value:"ch4state",extMeta:"0-100"}},{type:"int",name:"lamella",ref:{value:"ch4angle",extMeta:"0-100"}},{type:"enum",name:"lock mode",ref:{value:"ch4lock",options:["normal","blockage_mode","alarm_mode"]}}]}]},"d2-06-01":{command:[{type:"enum",name:"vacation mode on",ref:{value:"vacationOn"}},{type:"enum",name:"vacation mode off",ref:{value:"vacationOff"}},{type:"enum",
name:"handle closed click on",ref:{value:"handleClosedClickOn"}},{type:"enum",name:"handle closed click off",ref:{value:"handleClosedClickOff"}},{type:"enum",name:"battery low click on",ref:{value:"batteryLowClickOn"}},{type:"enum",name:"battery low click off",ref:{value:"batteryLowClickOff"}},{type:"int",name:"set sensor update interval",ref:{value:"setSensorUpdateInterval",ext:"%d",extMeta:"5-65535",unit:"s"}},{type:"int",name:"set vacation blink interval",ref:{value:"setVacationBlinkInterval",
ext:"%d",extMeta:"3-255",unit:"s"}}],status:[{type:"enum",name:"pending",ref:{value:"pending",options:["true","false"]}},{type:"enum",name:"burglary alarm",ref:{value:"bal",options:["ok","alarm","invalid","unsupported"]}},{type:"enum",name:"protection plus alarm",ref:{value:"ppal",options:["ok","alarm","invalid","unsupported"]}},{type:"enum",name:"state",ref:{value:"state",options:["open","closed","tilted","invalid","undefined"]}},{type:"enum",name:"handle state",ref:{value:"handle",options:"up down left right undefined invalid unsupported".split(" ")}},
{type:"enum",name:"window state",ref:{value:"window",options:["tilted","not_tilted","undefined","invalid","unsupported"]}},{type:"enum",name:"right button",ref:{value:"br",options:["pressed","releaseed","undefined","invalid","unsupported"]}},{type:"enum",name:"left button",ref:{value:"bl",options:["pressed","releaseed","undefined","invalid","unsupported"]}},{type:"enum",name:"motion",ref:{value:"motion",options:["ok","alarm","invalid","unsupported"]}},{type:"enum",name:"vacation mode",ref:{value:"vacation",
options:["on","off","unchanged","invalid","unsupported"]}},{type:"float",name:"temperature",ref:{value:"temperature"}},{type:"float",name:"humidity",ref:{value:"humidity"}},{type:"int",name:"illumination",ref:{value:"illumination"}},{type:"int",name:"battery",ref:{value:"battery"}},{type:"enum",name:"handle closed click",ref:{value:"hccr",options:["on","off"]}},{type:"enum",name:"battery low click",ref:{value:"blcr",options:["on","off"]}},{type:"int",name:"sensor update interval",ref:{value:"suir",
unit:"s"}},{type:"int",name:"vacation blink interval",ref:{value:"vbir",unit:"s"}}]},"d2-06-02":{command:[{type:"enum",name:"vacation mode on",ref:{value:"vacationOn"}},{type:"enum",name:"vacation mode off",ref:{value:"vacationOff"}},{type:"enum",name:"lock active click on",ref:{value:"lockActiveClickOn"}},{type:"enum",name:"lock active click off",ref:{value:"lockActiveClickOff"}},{type:"enum",name:"battery low click on",ref:{value:"batteryLowClickOn"}},{type:"enum",name:"battery low click off",ref:{value:"batteryLowClickOff"}},
{type:"int",name:"set sensor update interval",ref:{value:"setSensorUpdateInterval",ext:"%d",extMeta:"5-65535",unit:"s"}},{type:"int",name:"set vacation blink interval",ref:{value:"setVacationBlinkInterval",ext:"%d",extMeta:"3-255",unit:"s"}}],status:[{type:"enum",name:"pending",ref:{value:"pending",options:["true","false"]}},{type:"enum",name:"alarm",ref:{value:"alarm",options:["ok","burglary_alarm","unlock_alarm"]}},{type:"enum",name:"operation mode",ref:{value:"operation_mode",options:["standard",
"hst"]}},{type:"enum",name:"state",ref:{value:"state",options:["open","closed","tilted"]}},{type:"enum",name:"lock state",ref:{value:"lock",options:["unlocked","locked"]}},{type:"enum",name:"window state",ref:{value:"window",options:["tilted","not_tilted"]}},{type:"enum",name:"vacation mode",ref:{value:"vacation",options:["on","off","unchanged","invalid","unsupported"]}},{type:"float",name:"temperature",ref:{value:"temperature"}},{type:"float",name:"humidity",ref:{value:"humidity"}},{type:"int",name:"battery",
ref:{value:"battery"}},{type:"enum",name:"lock active click",ref:{value:"hccr",options:["on","off"]}},{type:"enum",name:"battery low click",ref:{value:"blcr",options:["on","off"]}},{type:"int",name:"sensor update interval",ref:{value:"suir",unit:"s"}},{type:"int",name:"vacation blink interval",ref:{value:"vbir",unit:"s"}}]}},eltako:{eltako_contact:{status:[{type:"enum",name:"contact",ref:{value:"window",options:["open","closed"]}},{type:"int",name:"handle raw",ref:{value:"handle_raw"}}]},eltako_motion:{status:[{type:"float",
name:"voltage",ref:{value:"voltage",extMeta:["0-5.1"]}},{type:"int",name:"voltage raw",ref:{value:"voltage_raw",extMeta:"0-255"}},{type:"float",name:"illumination",ref:{value:"illumination",extMeta:["0-2048"]}},{type:"int",name:"illumination raw",ref:{value:"illumination_raw",extMeta:"0-255"}},{type:"enum",name:"state",ref:{value:"state",options:["on","off"]}},{type:"int",name:"state raw",ref:{value:"state_raw",extMeta:"0-1"}}]},eltako_switch:{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",
name:"off",ref:{value:"off"}},{type:"enum",name:"toggle",ref:{value:"toggle"}}],status:[{type:"enum",name:"state",ref:{value:"state",options:["on","off"]}}]},eltako_dimmer:{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}},{type:"enum",name:"toggle",ref:{value:"toggle"}},{type:"int",name:"dim to",ref:{value:"dimTo",ext:"%d",extMeta:"0-100"}},{type:"enum",name:"dim up",ref:{value:"dimUp"}},{type:"enum",name:"dim down",ref:{value:"dimDown"}},{type:"int",name:"toggle to",
ref:{value:"toggleTo",ext:"%d",extMeta:"0-100"}},{type:"int",name:"set ramp time",ref:{value:"setRampTime",ext:"%d",extMeta:"0-255"}}],status:[{type:"enum",name:"state",ref:{value:"state",options:["on","off"]}},{type:"int",name:"level",ref:{value:"level",extMeta:"0-100"}},{type:"int",name:"ramp time",ref:{value:"ramp_time",extMeta:"0-255"}}]},eltako_dimmer2:{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}},{type:"enum",name:"toggle",ref:{value:"toggle"}},
{type:"int",name:"dim to",ref:{value:"dimTo",ext:"%d",extMeta:"0-100"}},{type:"enum",name:"dim up",ref:{value:"dimUp"}},{type:"enum",name:"dim down",ref:{value:"dimDown"}},{type:"int",name:"toggle to",ref:{value:"toggleTo",ext:"%d",extMeta:"0-100"}},{type:"int",name:"set ramp time",ref:{value:"setRampTime",ext:"%d",extMeta:"0-255"}}],status:[{type:"enum",name:"state",ref:{value:"state",options:["on","off"]}},{type:"int",name:"ramp time",ref:{value:"ramp_time",extMeta:"0-255"}}]},eltako_fsud:{command:[{type:"enum",
name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}},{type:"enum",name:"toggle",ref:{value:"toggle"}},{type:"int",name:"dim to",ref:{value:"dimTo",ext:"%d",extMeta:"0-100"}},{type:"enum",name:"dim up",ref:{value:"dimUp"}},{type:"enum",name:"dim down",ref:{value:"dimDown"}},{type:"int",name:"toggle to",ref:{value:"toggleTo",ext:"%d",extMeta:"0-100"}},{type:"int",name:"set ramp time",ref:{value:"setRampTime",ext:"%d",extMeta:"0-255"}}],status:[{type:"enum",name:"state",ref:{value:"state",
options:["on","off"]}},{type:"int",name:"level",ref:{value:"level",extMeta:"0-100"}},{type:"int",name:"ramp time",ref:{value:"ramp_time",extMeta:"0-255"}}]},eltako_weather:{status:[{type:"float",name:"energy",ref:{value:"energy",extMeta:"0-7.2"}},{type:"int",name:"energy raw",ref:{value:"energy_raw",extMeta:"0-250"}},{type:"float",name:"temperature",ref:{value:"temperature",extMeta:"-20-60"}},{type:"int",name:"temperature raw",ref:{value:"temperature_raw",extMeta:"0-250"}},{type:"float",name:"humidity",
ref:{value:"humidity",extMeta:"0-100"}},{type:"int",name:"humidity raw",ref:{value:"humidity_raw",extMeta:"0-250"}}]},eltako_lux:{status:[{type:"float",name:"illumination",ref:{value:"illumination",extMeta:"0-30000"}},{type:"int",name:"illumination raw",ref:{value:"illumination_raw",extMeta:"0-255"}}]},eltako_lux2:{status:[{type:"float",name:"illumination",ref:{value:"illumination",extMeta:"0-30000"}},{type:"int",name:"illumination raw",ref:{value:"illumination_raw",extMeta:"0-255"}}]},eltako_sender4:{status:[{type:"enum",
name:"E1",ref:{value:"E1",options:["pressed","released"]}},{type:"enum",name:"E2",ref:{value:"E2",options:["pressed","released"]}},{type:"enum",name:"E3",ref:{value:"E3",options:["pressed","released"]}},{type:"enum",name:"E4",ref:{value:"E4",options:["pressed","released"]}}],ipevt:[{type:"enum",name:"E1",ref:{value:"E1",options:["pressed","released","shortPress","longPress"]}},{type:"enum",name:"E2",ref:{value:"E2",options:["pressed","released","shortPress","longPress"]}},{type:"enum",name:"E3",ref:{value:"E3",
options:["pressed","released","shortPress","longPress"]}},{type:"enum",name:"E4",ref:{value:"E4",options:["pressed","released","shortPress","longPress"]}}]},eltako_sender2:{status:[{type:"enum",name:"A1",ref:{value:"A1",options:["pressed","released"]}},{type:"enum",name:"A3",ref:{value:"A3",options:["pressed","released"]}}],ipevt:[{type:"enum",name:"A1",ref:{value:"A1",options:["pressed","released","shortPress","longPress"]}},{type:"enum",name:"A3",ref:{value:"A3",options:["pressed","released","shortPress",
"longPress"]}}]},eltako_button4:{status:[{type:"enum",name:"BO",ref:{value:"BO",options:["pressed","released"]}},{type:"enum",name:"BI",ref:{value:"BI",options:["pressed","released"]}},{type:"enum",name:"AO",ref:{value:"AO",options:["pressed","released"]}},{type:"enum",name:"AI",ref:{value:"AI",options:["pressed","released"]}}],ipevt:[{type:"enum",name:"BO",ref:{value:"BO",options:["pressed","released","shortPress","longPress"]}},{type:"enum",name:"BI",ref:{value:"BI",options:["pressed","released",
"shortPress","longPress"]}},{type:"enum",name:"AO",ref:{value:"AO",options:["pressed","released","shortPress","longPress"]}},{type:"enum",name:"AI",ref:{value:"AI",options:["pressed","released","shortPress","longPress"]}}]},eltako_button2:{status:[{type:"enum",name:"button O",ref:{value:"buttonO",options:["pressed","released"]}},{type:"enum",name:"button I",ref:{value:"buttonI",options:["pressed","released"]}}],ipevt:[{type:"enum",name:"button O",ref:{value:"buttonO",options:["pressed","released",
"shortPress","longPress"]}},{type:"enum",name:"button I",ref:{value:"buttonI",options:["pressed","released","shortPress","longPress"]}}]},eltako_button1:{status:[{type:"enum",name:"button",ref:{value:"button",options:["pressed","released"]}}],ipevt:[{type:"enum",name:"button",ref:{value:"button",options:["pressed","released","shortPress","longPress"]}}]},eltako_fsm60b:{status:[{type:"enum",name:"button",ref:{value:"button",options:["pressed","released"]}}],ipevt:[{type:"enum",name:"button",ref:{value:"button",
options:["pressed","released","shortPress","longPress"]}}]},eltako_fkf:{status:[{type:"enum",name:"key card",ref:{value:"keycard",options:["inserted","takeout"]}}]},eltako_fkc:{status:[{type:"enum",name:"key card",ref:{value:"keycard",options:["guest_card","service_card","takeout"]}}]},eltako_thermo:{status:[{type:"float",name:"set point",ref:{value:"setpoint",extMeta:"0-40"}},{type:"int",name:"set point raw",ref:{value:"setpoint_raw",extMeta:"0-255"}},{type:"float",name:"temperature",ref:{value:"temperature",
extMeta:"0-40"}},{type:"int",name:"temperature raw",ref:{value:"temperature_raw",extMeta:"0-255"}},{type:"int",name:"night reduce",ref:{value:"night_reduce",extMeta:"0-5"}},{type:"int",name:"night reduce raw",ref:{value:"night_reduce_raw",extMeta:"0-255"}}]},eltako_futh65d:{status:[{type:"float",name:"set point",ref:{value:"setpoint",extMeta:"0-40"}},{type:"int",name:"set point raw",ref:{value:"setpoint_raw",extMeta:"0-255"}},{type:"float",name:"temperature",ref:{value:"temperature",extMeta:"0-40"}},
{type:"int",name:"temperature raw",ref:{value:"temperature_raw",extMeta:"0-255"}},{type:"int",name:"night reduce",ref:{value:"night_reduce",extMeta:"0-5"}},{type:"int",name:"night reduce raw",ref:{value:"night_reduce_raw",extMeta:"0-255"}}]},eltako_ftr78s:{status:[{type:"float",name:"set point",ref:{value:"setpoint",extMeta:"8-30"}},{type:"int",name:"set point raw",ref:{value:"setpoint_raw",extMeta:"0-255"}},{type:"float",name:"temperature",ref:{value:"temperature",extMeta:"0-40"}},{type:"int",name:"temperature raw",
ref:{value:"temperature_raw",extMeta:"0-255"}}]},eltako_powermeter:{status:[{type:"float",name:"power",ref:{value:"power",extMeta:"0-16777215"}},{type:"float",name:"energy",ref:{value:"energy",extMeta:"0-16777215"}},{type:"int",name:"tariff",ref:{value:"tariff",extMeta:"0-1"}}]},eltako_powermeter2:{status:[{type:"float",name:"power",ref:{value:"power",extMeta:"0-16777215"}}]},eltako_fzs:{status:[{type:"enum",name:"button",ref:{value:"button",options:["pressed","released"]}}],ipevt:[{type:"enum",name:"button",
ref:{value:"button",options:["pressed","released","shortPress","longPress"]}}]},eltako_blind:{command:[{type:"enum",name:"sync",ref:{value:"sync"}},{type:"enum",name:"up",ref:{value:"up"}},{type:"enum",name:"down",ref:{value:"down"}},{type:"enum",name:"stop",ref:{value:"stop"}},{type:"int",name:"step up",ref:{value:"stepUp",ext:"%d",extMeta:"1-200"}},{type:"int",name:"step down",ref:{value:"stepDown",ext:"%d",extMeta:"1-200"}},{type:"int",name:"move to",ref:{value:"moveTo",ext:"%d",extMeta:"0-100"}},
{type:"int",name:"set rv",ref:{value:"setRV",ext:"%d",extMeta:"1-200"}},{type:"int",name:"set run time",ref:{value:"setRunTime",ext:"%d",extMeta:"1-200"}}],status:[{type:"enum",name:"sync",ref:{value:"sync",options:["true","false"]}},{type:"int",name:"position",ref:{value:"pos",extMeta:"0-100"}},{type:"int",name:"run time",ref:{value:"rt",extMeta:"1-200"}},{type:"int",name:"time delay (rv)",ref:{value:"rv",extMeta:"1-200"}}]},eltako_relay:{status:[{type:"enum",name:"state",ref:{value:"state",options:["on",
"off"]}}]},eltako_relay2:{status:[{type:"enum",name:"channel 1",ref:{value:"ch1",options:["on","off"]}},{type:"enum",name:"channel 2",ref:{value:"ch2",options:["on","off"]}}]},eltako_heat:{status:[{type:"enum",name:"alarm",ref:{value:"alarm",options:["true","false"]}},{type:"int",name:"alarm raw",ref:{value:"alarmy_raw",extMeta:"0-255"}},{type:"float",name:"temperature",ref:{value:"temperature",extMeta:"0-40"}},{type:"int",name:"temperature raw",ref:{value:"temperature_raw",extMeta:"0-250"}}]},eltako_water_m3:{status:[{type:"enum",
name:"water",ref:{value:"water",options:["true","false"]}},{type:"int",name:"water raw",ref:{value:"water_raw",extMeta:"0-255"}}]},eltako_water_m4:{status:[{type:"enum",name:"water",ref:{value:"water",options:["true","false"]}},{type:"int",name:"water raw",ref:{value:"water_raw",extMeta:"0-255"}}]}},peha:{peha_switch:{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}},{type:"enum",name:"toggle",ref:{value:"toggle"}}],status:[{type:"enum",name:"state",ref:{value:"state",
options:["on","off"]}},{type:"enum",name:"error",ref:{value:"error",options:["no_error","lamp_failure","intern_failure","extern_failure"]}}]},peha_powerswitch:{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}},{type:"enum",name:"toggle",ref:{value:"toggle"}}],status:[{type:"enum",name:"state",ref:{value:"state",options:["on","off"]}},{type:"enum",name:"error",ref:{value:"error",options:["no_error","lamp_failure","intern_failure","extern_failure"]}},{type:"int",
name:"power",ref:{value:"power",ext:"%d"}},{type:"enum",name:"power unit",ref:{value:"power_unit",options:["mW","W","KW","MW"]}},{type:"int",name:"energy",ref:{value:"energy",ext:"%d"}},{type:"enum",name:"energy unit",ref:{value:"energy_unit",options:["Wh","kWh","MWh","GWh"]}}]},peha_blind:{command:[{type:"enum",name:"up",ref:{value:"up"}},{type:"enum",name:"down",ref:{value:"down"}},{type:"enum",name:"stop",ref:{value:"stop"}},{type:"int",name:"step up",ref:{value:"stepUp",ext:"%d",extMeta:"1-10"}},
{type:"int",name:"step down",ref:{value:"stepDown",ext:"%d",extMeta:"1-10"}},{type:"int",name:"move to",ref:{value:"moveTo",ext:"%d",extMeta:"0-100"}},{type:"string",name:"set run time",ref:{value:"setRunTime",ext:"%s",format:"closeTime:openTime"}}],status:[{type:"int",name:"position",ref:{value:"position",extMeta:"1-100"}},{type:"enum",name:"position enabled",ref:{value:"position_flag",options:["true","false"]}},{type:"enum",name:"angle enabled",ref:{value:"angle_flag",options:["true","false"]}},
{type:"enum",name:"error",ref:{value:"error",options:["no_error","no_end_position","intern_failure"]}},{type:"int",name:"position mode",ref:{value:"position_mode",extMeta:"0-1"}}]}},rehau:{"bb-aa-cc":{command:[{type:"enum",name:"alarm on",ref:{value:"alertOn"}},{type:"enum",name:"alarm off",ref:{value:"alertOff"}},{type:"enum",name:"alarm toggle",ref:{value:"alertToggle"}},{type:"enum",name:"reset alarm",ref:{value:"resetAlarm"}},{type:"enum",name:"reset pre-alarm",ref:{value:"resetPreAlarm"}},{type:"enum",
name:"pre-alarm on",ref:{value:"preAlarmOn"}},{type:"enum",name:"pre-alarm off",ref:{value:"preAlarmOff"}},{type:"enum",name:"pre-alarm toggle",ref:{value:"preAlarmToggle"}}],status:[{type:"int",name:"battery",ref:{value:"battery",ext:"%d",extMeta:"0-255"}},{type:"enum",name:"pre-alarm",ref:{value:"pre_alarm",options:["true","false"]}},{type:"enum",name:"alarm",ref:{value:"alarm",options:["true","false"]}},{type:"enum",name:"window",ref:{value:"window",options:["open","closed"]}},{type:"enum",name:"pre-alarm enabled",
ref:{value:"pre_alarm_enabled",options:["true","false"]}},{type:"enum",name:"alarm enabled",ref:{value:"alarm_enabled",options:["true","false"]}},{type:"int",name:"error",ref:{value:"error",ext:"%d"}},{type:"enum",name:"pending",ref:{value:"pending",options:["true","false"]}}]},"d2-06-10":{command:[{type:"enum",name:"alarm on",ref:{value:"alertOn"}},{type:"enum",name:"alarm off",ref:{value:"alertOff"}},{type:"enum",name:"alarm toggle",ref:{value:"alertToggle"}},{type:"enum",name:"reset alarm",ref:{value:"resetAlarm"}},
{type:"enum",name:"reset pre-alarm",ref:{value:"resetPreAlarm"}},{type:"enum",name:"pre-alarm on",ref:{value:"preAlarmOn"}},{type:"enum",name:"pre-alarm off",ref:{value:"preAlarmOff"}},{type:"enum",name:"pre-alarm toggle",ref:{value:"preAlarmToggle"}}],status:[{type:"int",name:"battery",ref:{value:"battery",ext:"%d",extMeta:"0-255"}},{type:"enum",name:"pre-alarm",ref:{value:"pre_alarm",options:["true","false"]}},{type:"enum",name:"alarm",ref:{value:"alarm",options:["true","false"]}},{type:"enum",
name:"window",ref:{value:"window",options:["open","closed"]}},{type:"enum",name:"pre-alarm enabled",ref:{value:"pre_alarm_enabled",options:["true","false"]}},{type:"enum",name:"alarm enabled",ref:{value:"alarm_enabled",options:["true","false"]}},{type:"int",name:"error",ref:{value:"error",ext:"%d"}},{type:"enum",name:"pending",ref:{value:"pending",options:["true","false"]}}]},"d2-20-00":{command:[{type:"enum",name:"fan level up",ref:{value:"fanLevelUp"}},{type:"enum",name:"fan level down",ref:{value:"fanLevelDown"}},
{type:"int",name:"set fan level",ref:{value:"setFanLevel",ext:"%d",extMeta:"0-6"}},{type:"enum",name:"update status",ref:{value:"requestStatus"}}],status:[{type:"int",name:"current fan level",ref:{value:"current_fan_level",ext:"%d",extMeta:"0-4"}},{type:"int",name:"set fan level",ref:{value:"set_fan_level",ext:"%d",extMeta:"0-6"}},{type:"enum",name:"anti freeze",ref:{value:"anti_freeze",options:["on","off"]}},{type:"int",name:"message code",ref:{value:"message_code",ext:"%d"}},{type:"string",name:"message code (hex)",
ref:{value:"message_code_hex",ext:"%s"}},{type:"float",name:"temperature",ref:{value:"temperature",ext:"%f",extMeta:"-20.0-70.0"}},{type:"int",name:"operating time (min)",ref:{value:"operating_time_m"}},{type:"int",name:"operating time (hour)",ref:{value:"operating_time_h"}},{type:"int",name:"operating time (day)",ref:{value:"operating_time_d"}},{type:"int",name:"operating time (year)",ref:{value:"operating_time_y"}},{type:"int",name:"filter remain time (min)",ref:{value:"filter_remaining_time_m"}},
{type:"int",name:"filter remain time (hour)",ref:{value:"filter_remaining_time_h"}},{type:"int",name:"filter remain time (day)",ref:{value:"filter_remaining_time_d"}},{type:"int",name:"filter remain time (year)",ref:{value:"filter_remaining_time_y"}}]}},siegenia:{"d2-06-50":{status:[{type:"enum",name:"alive timeout",ref:{value:"aliveTimeout",options:["true","false"]}},{type:"int",name:"battery charge",ref:{value:"battery",ext:"%d",extMeta:"0-100"}},{type:"enum",name:"battery OK",ref:{value:"batteryOK",
options:["true","false"]}},{type:"enum",name:"handle",ref:{value:"handle",options:["closed","open","tilted"]}},{type:"enum",name:"state",ref:{value:"state",options:["closed","open","tilted"]}}]}}},DEVICES:[{id:"General",vendor:"general",subtypes:[{id:"F6-01-01",data:"f6-01-01",desc:"Switch Buttons Push Button"},{id:"F6-02-01",data:"f6-02-01",desc:"Rocker Switch, 2 Rocker, Light and Blind Control - Applicatio Style 1"},{id:"F6-02-02",data:"f6-02-02",desc:"Rocker Switch, 2 Rocker, Light and Blind Control - Applicatio Style 2"},
{id:"F6-02-03",data:"f6-02-03",desc:"Rocker Switch, 2 Rocker, Light Control - Applicatio Style 1"},{id:"F6-02-04",data:"f6-02-04",desc:"Rocker Switch, 2 Rocker, Light and Blind Control ERP2"},{id:"F6-03-01",data:"f6-03-01",desc:"Rocker Switch, 4 Rocker, Light and Blind Control - Applicatio Style 1"},{id:"F6-03-02",data:"f6-03-02",desc:"Rocker Switch, 4 Rocker, Light and Blind Control - Applicatio Style 2"},{id:"F6-04-01",data:"f6-04-01",desc:"Position Switch, Home and Office Application, Key Card Activated Switch"},
{id:"F6-04-02",data:"f6-04-02",desc:"Position Switch, Home and Office Application, Key Card Activated Switch ERP2"},{id:"F6-05-00",data:"f6-05-00",desc:"Detectors, Wind Speed Threshold Detector"},{id:"F6-05-01",data:"f6-05-01",desc:"Detectors, Liquid Leakage Sensor"},{id:"F6-05-02",data:"f6-05-02",desc:"Detectors, Smoke Detector"},{id:"F6-10-00",data:"f6-10-00",desc:"Window Handle"},{id:"F6-10-01",data:"f6-10-01",desc:"Window Handle ERP2"},{id:"D5-00-01",data:"d5-00-01",desc:"Single Input Contact"},
{id:"A5-02-01",data:"a5-02-01",desc:"Temperature Sensor Range -40\u00b0C to 0\u00b0C"},{id:"A5-02-02",data:"a5-02-02",desc:"Temperature Sensor Range -30\u00b0C to +10\u00b0C"},{id:"A5-02-03",data:"a5-02-03",desc:"Temperature Sensor Range -20\u00b0C to +20\u00b0C"},{id:"A5-02-04",data:"a5-02-04",desc:"Temperature Sensor Range -10\u00b0C to +30\u00b0C"},{id:"A5-02-05",data:"a5-02-05",desc:"Temperature Sensor Range 0\u00b0C to +40\u00b0C"},{id:"A5-02-06",data:"a5-02-06",desc:"Temperature Sensor Range 10\u00b0C to +50\u00b0C"},
{id:"A5-02-07",data:"a5-02-07",desc:"Temperature Sensor Range 20\u00b0C to +60\u00b0C"},{id:"A5-02-08",data:"a5-02-08",desc:"Temperature Sensor Range 30\u00b0C to +70\u00b0C"},{id:"A5-02-09",data:"a5-02-09",desc:"Temperature Sensor Range 40\u00b0C to +80\u00b0C"},{id:"A5-02-0A",data:"a5-02-0a",desc:"Temperature Sensor Range 50\u00b0C to +90\u00b0C"},{id:"A5-02-0B",data:"a5-02-0b",desc:"Temperature Sensor Range 60\u00b0C to +100\u00b0C"},{id:"A5-02-10",data:"a5-02-10",desc:"Temperature Sensor Range -60\u00b0C to +20\u00b0C"},
{id:"A5-02-11",data:"a5-02-11",desc:"Temperature Sensor Range -50\u00b0C to +30\u00b0C"},{id:"A5-02-12",data:"a5-02-12",desc:"Temperature Sensor Range -40\u00b0C to +40\u00b0C"},{id:"A5-02-13",data:"a5-02-13",desc:"Temperature Sensor Range -30\u00b0C to +50\u00b0C"},{id:"A5-02-14",data:"a5-02-14",desc:"Temperature Sensor Range -20\u00b0C to +60\u00b0C"},{id:"A5-02-15",data:"a5-02-15",desc:"Temperature Sensor Range -10\u00b0C to +70\u00b0C"},{id:"A5-02-16",data:"a5-02-16",desc:"Temperature Sensor Range 0\u00b0C to +80\u00b0C"},
{id:"A5-02-17",data:"a5-02-17",desc:"Temperature Sensor Range +10\u00b0C to +90\u00b0C"},{id:"A5-02-18",data:"a5-02-18",desc:"Temperature Sensor Range +20\u00b0C to +100\u00b0C"},{id:"A5-02-19",data:"a5-02-19",desc:"Temperature Sensor Range +30\u00b0C to +110\u00b0C"},{id:"A5-02-1a",data:"a5-02-1a",desc:"Temperature Sensor Range +40\u00b0C to +120\u00b0C"},{id:"A5-02-1b",data:"a5-02-1b",desc:"Temperature Sensor Range +50\u00b0C to +130\u00b0C"},{id:"A5-02-20",data:"a5-02-20",desc:"Temperature Sensor Range -10\u00b0C to +41.2\u00b0C"},
{id:"A5-02-30",data:"a5-02-30",desc:"Temperature Sensor Range -40\u00b0C to +62.3\u00b0C"},{id:"A5-04-01",data:"a5-04-01",desc:"Temperature and Humidity Sensor Range 0\u00b0C to +40\u00b0C and 0% to 100%"},{id:"A5-04-02",data:"a5-04-02",desc:"Temperature and Humidity Sensor Range -20\u00b0C to +60\u00b0C and 0% to 100%"},{id:"A5-04-03",data:"a5-04-03",desc:"Temperature and Humidity Sensor Range -20\u00b0C to +60\u00b0C 10bit-measurement and 0% to 100%"},{id:"A5-06-01",data:"a5-06-01",desc:"Light Sensor Range 300lx to 60000lx"},
{id:"A5-06-02",data:"a5-06-02",desc:"Light Sensor Range 0lx to 1020lx"},{id:"A5-06-03",data:"a5-06-03",desc:"Light Sensor 10-bit measurement (1-Lux resolution) with range 0lx to 1000lx"},{id:"A5-06-04",data:"a5-06-04",desc:"Light Sensor Curtain Wall Brightness Sensor"},{id:"A5-06-05",data:"a5-06-05",desc:"Light Sensor Range 0lx to 10.200lx"},{id:"A5-07-01",data:"a5-07-01",desc:"Occupancy Sensor with Supply voltage monitor"},{id:"A5-07-02",data:"a5-07-02",desc:"Occupancy Sensor with Supply voltage monitor"},
{id:"A5-07-03",data:"a5-07-03",desc:"Occupancy Sensor with upply voltage monitor and 10-bit illumination measurement"},{id:"A5-08-01",data:"a5-08-01",desc:"Range 0lx to 510lx, 0\u00b0C to +51\u00b0C and Occupancy Button"},{id:"A5-08-02",data:"a5-08-02",desc:"Range 0lx to 1020lx, 0\u00b0C to +51\u00b0C and Occupancy Button"},{id:"A5-08-03",data:"a5-08-03",desc:"Range 0lx to 1530lx, -30\u00b0C to +50\u00b0C and Occupancy Button"},{id:"A5-09-02",data:"a5-09-02",desc:"CO-Sensor 0 ppm to 1020 ppm"},{id:"A5-09-04",
data:"a5-09-04",desc:"CO2 Sensor"},{id:"A5-09-05",data:"a5-09-05",desc:"VOC Sensor"},{id:"A5-09-06",data:"a5-09-06",desc:"Radon"},{id:"A5-09-07",data:"a5-09-07",desc:"Particles"},{id:"A5-09-08",data:"a5-09-08",desc:"Pure CO2 Sensor"},{id:"A5-09-09",data:"a5-09-09",desc:"Pure CO2 Sensor with Power Failure Detection"},{id:"A5-09-0A",data:"a5-09-0a",desc:"Hydrogen Gas Sensor"},{id:"A5-09-0B",data:"a5-09-0b",desc:"Radioactivity Sensor"},{id:"A5-09-0C",data:"a5-09-0c",desc:"VOC Sensor"},{id:"A5-10-01",
data:"a5-10-01",desc:"Temperature Sensor, Set Point, Fan Speed and Occupancy Control"},{id:"A5-10-02",data:"a5-10-02",desc:"TTemperature Sensor, Set Point, Fan Speed and Day/Night Control"},{id:"A5-10-03",data:"a5-10-03",desc:"Temperature Sensor, Set Point Control"},{id:"A5-10-04",data:"a5-10-04",desc:"Temperature Sensor, Set Point and Fan Speed Control"},{id:"A5-10-05",data:"a5-10-05",desc:"Temperature Sensor, Set Point and Occupancy Control"},{id:"A5-10-06",data:"a5-10-06",desc:"Temperature Sensor, Set Point and Day/Night Control"},
{id:"A5-10-07",data:"a5-10-07",desc:"Temperature Sensor, Fan Speed Control"},{id:"A5-10-08",data:"a5-10-08",desc:"Temperature Sensor, Fan Speed and Occupancy Control"},{id:"A5-10-09",data:"a5-10-09",desc:"Temperature Sensor, Fan Speed and Day/Night Control"},{id:"A5-10-0A",data:"a5-10-0a",desc:"Temperature Sensor, Set Point Adjust and Single Input Contact"},{id:"A5-10-0B",data:"a5-10-0b",desc:"Temperature Sensor and Single Input Contact"},{id:"A5-10-0C",data:"a5-10-0c",desc:"Temperature Sensor and Occupancy Control"},
{id:"A5-10-0D",data:"a5-10-0d",desc:"Temperature Sensor and Day/Night Control"},{id:"A5-10-10",data:"a5-10-10",desc:"Temperature and Humidity Sensor, Set Point and Occupancy Control"},{id:"A5-10-11",data:"a5-10-11",desc:"Temperature and Humidity Sensor, Set Point and Day/Night Control"},{id:"A5-10-12",data:"a5-10-12",desc:"Temperature and Humidity Sensor and Set Point"},{id:"A5-10-13",data:"a5-10-13",desc:"Temperature and Humidity Sensor, Occupancy Control"},{id:"A5-10-14",data:"a5-10-14",desc:"Temperature and Humidity Sensor, Day/Night Control"},
{id:"A5-12-00",data:"a5-12-00",desc:"Automated Meter Reading (AMR), Counter"},{id:"A5-12-01",data:"a5-12-01",desc:"Automated Meter Reading (AMR), Electricity"},{id:"A5-12-02",data:"a5-12-02",desc:"Automated Meter Reading (AMR), Gas"},{id:"A5-12-03",data:"a5-12-03",desc:"Automated Meter Reading (AMR), Water"},{id:"A5-13-01",data:"a5-13-01",desc:"Environmental Applications, Weather Station"},{id:"A5-13-02",data:"a5-13-02",desc:"Environmental Applications, Sun Intensity"},{id:"A5-13-03",data:"a5-13-03",
desc:"Environmental Applications, Date Exchange"},{id:"A5-13-04",data:"a5-13-04",desc:"Environmental Applications, Time and Day Exchange"},{id:"A5-13-05",data:"a5-13-05",desc:"Environmental Applications, Direction Exchange"},{id:"A5-13-06",data:"a5-13-06",desc:"Environmental Applications, Geographic Position Exchange"},{id:"A5-14-01",data:"a5-14-01",desc:"Single Input Contact (Window/Door), Supply voltage monitor"},{id:"A5-14-02",data:"a5-14-02",desc:"Single Input Contact (Window/Door), Supply voltage monitor and Illumination"},
{id:"A5-14-03",data:"a5-14-03",desc:"Single Input Contact (Window/Door), Supply voltage monitor and Vibration"},{id:"A5-14-04",data:"a5-14-04",desc:"Single Input Contact (Window/Door), Supply voltage monitor, Vibration and Illumination"},{id:"A5-14-05",data:"a5-14-05",desc:"Vibration/Tilt, Supply voltage monitor"},{id:"A5-14-06",data:"a5-14-06",desc:"Vibration/Tilt, Illumination and Supply voltage monitor"},{id:"A5-14-07",data:"a5-14-07",desc:"Dual-door-contact with States Open/Closed and Locked/Unlocked, Supply voltage monitor"},
{id:"A5-14-08",data:"a5-14-08",desc:"Dual-door-contact with States Open/Closed and Locked/Unlocked, Supply voltage monitor and Vibration detection"},{id:"A5-14-09",data:"a5-14-09",desc:"Window/Door-Sensor with States Open/Closed/Tilt, Supply voltage monitor"},{id:"A5-14-0A",data:"a5-14-0a",desc:"Window/Door-Sensor with States Open/Closed/Tilt, Supply voltage monitor and Vibration detection"},{id:"A5-20-04",data:"a5-20-04",desc:"Heating Radiator Valve Actuating Drive with Feed and Room Temperature Measurement, Local Set Point Control and Display (BI-DIR)"},
{id:"A5-30-01",data:"a5-30-01",desc:"Single Input Contact, Battery Monitor"},{id:"A5-30-02",data:"a5-30-02",desc:"Single Input Contact"},{id:"A5-30-03",data:"a5-30-03",desc:"4 Digital Inputs, Wake and Temperature"},{id:"A5-30-04",data:"a5-30-04",desc:"3 Digital Inputs, 1 Digital Input 8 Bits"},{id:"D2-01-01",data:"d2-01-01",teachin:"general",desc:"Electronic switches and dimmers with Energy Measurement and Local Control, Type 0x01"},{id:"D2-01-03",data:"d2-01-03",teachin:"general",desc:"Electronic switches and dimmers with Energy Measurement and Local Control, Type 0x03"},
{id:"D2-05-00",data:"d2-05-00",teachin:"general",desc:"Blinds Control for Position and Angle, Type 0x00"},{id:"D2-06-01",data:"d2-06-01",desc:"Multisensor Window Handle, Alarm, Position Sensor, Vacation Mode, Optional Sensors"}]},{id:"Eltako",vendor:"eltako",subtypes:[{id:"DSZ14DRS",data:"eltako_powermeter",desc:"Power Meter"},{id:"DSZ14WDRS",data:"eltako_powermeter",desc:"Power Meter"},{id:"F1FT65",data:"eltako_button1",desc:"1 Ch Button"},{id:"F2L14",data:"eltako_relay",desc:"Relay"},{id:"F3Z14D (Electricity)",
data:"a5-12-01",desc:"Power Meter"},{id:"F3Z14D (Gas)",data:"a5-12-02",desc:"Gas Meter"},{id:"F3Z14D (Water)",data:"a5-12-03",desc:"Water Meter"},{id:"F4T65 (1 Button)",data:"eltako_button2",desc:"2 Ch Button"},{id:"F4T65 (2 Button)",data:"eltako_button4",desc:"4 Ch Button"},{id:"FABH65S",data:"eltako_motion",desc:"Motion Sensor"},{id:"FAH60",data:"eltako_lux",desc:"Light Sensor"},{id:"FAH60B",data:"eltako_lux",desc:"Light Sensor"},{id:"FAH65S",data:"eltako_lux",desc:"Light Sensor"},{id:"FAFT60",
data:"eltako_weather",desc:"Temperature and Humidity Sensor"},{id:"FASM60",data:"eltako_sender2",desc:"2 Ch Sender"},{id:"FBH63AP",data:"eltako_motion",desc:"Motion Sensor"},{id:"FBH65B",data:"eltako_motion",desc:"Motion Sensor"},{id:"FBH65S",data:"eltako_motion",desc:"Motion Sensor"},{id:"FBH65TFB (motion)",data:"eltako_motion",desc:"Motion Sensor"},{id:"FBH65TFB (weather)",data:"eltako_weather",desc:"Temperature and Humidity Sensor"},{id:"FCO2TF65",data:"a5-09-04",desc:"CO2 Sensor"},{id:"FDG14",
data:"eltako_dimmer",teachin:"general",desc:"Dimmer"},{id:"FDG71L-230V",data:"eltako_dimmer",teachin:"general",desc:"Dimmer"},{id:"FFR14",data:"eltako_relay",desc:"Relay"},{id:"FFR61-230V",data:"eltako_relay2",desc:"Relay2"},{id:"FFT65B",data:"a5-04-02",desc:"Temperature and Humidity Sensor"},{id:"FIFT65S",data:"eltako_weather",desc:"Temperature and Humidity Sensor"},{id:"FIH65B",data:"eltako_lux2",desc:"Light Sensor"},{id:"FIH65S",data:"eltako_lux",desc:"Light Sensor"},{id:"FHF",data:"f6-10-00",
desc:"Hoppe Window Handle"},{id:"FKC",data:"eltako_fkc",desc:"Keycard"},{id:"FKF",data:"eltako_fkf",desc:"Keycard"},{id:"FKLD61",data:"eltako_dimmer2",teachin:"general",desc:"Dimmer"},{id:"FMH2",data:"eltako_button2",desc:"2 Ch Button"},{id:"FMH4",data:"eltako_button4",desc:"4 Ch Button"},{id:"FMT55/2",data:"eltako_button2",desc:"2 Ch Button"},{id:"FMT55/4",data:"eltako_button4",desc:"4 Ch Button"},{id:"FMS14",data:"eltako_relay",desc:"Relay"},{id:"FMZ14",data:"eltako_relay",desc:"Relay"},{id:"FMZ61-230V",
data:"eltako_relay",desc:"Relay"},{id:"FLC61NP-230V",data:"eltako_switch",teachin:"general",desc:"Switch"},{id:"FLD61",data:"eltako_dimmer2",teachin:"general",desc:"Dimmer"},{id:"FMS61NP-230V",data:"eltako_relay2",desc:"Relay2"},{id:"FRW",data:"f6-05-02",desc:"Smoke Detector"},{id:"FSB14",data:"eltako_blind",teachin:"general",desc:"Blind"},{id:"FSB61-230V",data:"eltako_blind",teachin:"general",desc:"Blind"},{id:"FSB61NP-230V",data:"eltako_blind",teachin:"general",desc:"Blind"},{id:"FSB71",data:"eltako_blind",
teachin:"general",desc:"Blind"},{id:"FSDG14",data:"eltako_powermeter",desc:"Power Meter"},{id:"FSG14/1-10V",data:"eltako_blind",teachin:"general",desc:"Blind"},{id:"FSG71/1-10V",data:"eltako_blind",teachin:"general",desc:"Blind"},{id:"FSM14",data:"eltako_sender4",desc:"4 Ch Sender"},{id:"FSM60B (Mode 1&2)",data:"eltako_fsm60b",desc:"Radio Sender"},{id:"FSM60B (A5-30-03)",data:"a5-30-03",desc:"Radio Sender"},{id:"FSM60B (A5-30-01)",data:"a5-30-01",desc:"Radio Sender"},{id:"FSM61",data:"eltako_sender2",
desc:"2 Ch Sender"},{id:"FSR14-2x",data:"eltako_switch",teachin:"general",desc:"Switch"},{id:"FSR14-4x",data:"eltako_switch",teachin:"general",desc:"Switch"},{id:"FSR14SSR",data:"eltako_switch",teachin:"general",desc:"Switch"},{id:"FSR61-230V",data:"eltako_switch",teachin:"general",desc:"Switch"},{id:"FSR61/8-24V",data:"eltako_switch",teachin:"general",desc:"Switch"},{id:"FSR61G-230V",data:"eltako_switch",teachin:"general",desc:"Switch"},{id:"FSR61LN-230V",data:"eltako_switch",teachin:"general",desc:"Switch"},
{id:"FSR61NP-230V",data:"eltako_switch",teachin:"general",desc:"Switch"},{id:"FSR61VA-10A (switch)",data:"eltako_switch",teachin:"general",desc:"Switch"},{id:"FSR61VA-10A (meter)",data:"eltako_powermeter2",desc:"Power Meter"},{id:"FSR71-2x-230V",data:"eltako_switch",teachin:"general",desc:"Switch"},{id:"FSS12",data:"a5-12-01",desc:"Power Meter"},{id:"FSSA-230V",data:"eltako_relay",desc:"Relay"},{id:"FSUD-230V",data:"eltako_fsud",desc:"Dimmer"},{id:"FSVA-230V (switch)",data:"eltako_switch",teachin:"general",
desc:"Switch"},{id:"FSVA-230V (meter)",data:"eltako_powermeter2",desc:"Power Meter"},{id:"FT4F (2 Button)",data:"eltako_button4",desc:"4 Ch Button"},{id:"FT4F (1 Button)",data:"eltako_button2",desc:"2 Ch Button"},{id:"FT55 (2 Button)",data:"eltako_button4",desc:"4 Ch Button"},{id:"FT55 (1 Button)",data:"eltako_button2",desc:"2 Ch Button"},{id:"FTF55",data:"a5-02-05",desc:"Temperature Sensor"},{id:"FTF65",data:"a5-02-05",desc:"Temperature Sensor"},{id:"FTF65S",data:"a5-02-05",desc:"Temperature Sensor"},
{id:"FTKB",data:"d5-00-01",desc:"Window/Door Contact"},{id:"FTK",data:"d5-00-01",desc:"Window/Door Contact"},{id:"FTKE",data:"eltako_contact",desc:"Window/Door Contact"},{id:"FTN14",data:"eltako_relay",desc:"Relay"},{id:"FTN61NP-230V",data:"eltako_relay",desc:"Relay"},{id:"FTR65DS",data:"eltako_thermo",desc:"Thermostate"},{id:"FTR65HS",data:"eltako_thermo",desc:"Thermostate"},{id:"FTR78S",data:"eltako_ftr78s",desc:"Thermostate"},{id:"FUD14",data:"eltako_dimmer",teachin:"general",desc:"Dimmer"},{id:"FUD14/800W",
data:"eltako_dimmer",teachin:"general",desc:"Dimmer"},{id:"FUD61NP-230V",data:"eltako_dimmer",teachin:"general",desc:"Dimmer"},{id:"FUD61NPN-230V",data:"eltako_dimmer",teachin:"general",desc:"Dimmer"},{id:"FUD71",data:"eltako_dimmer",teachin:"general",desc:"Dimmer"},{id:"FUD70S-230V",data:"eltako_fsud",teachin:"general",desc:"Dimmer"},{id:"FUTH65D",data:"eltako_futh65d",desc:"Thermostate"},{id:"FWS60B (A5-30-03)",data:"eltako_water_m3",desc:"Water Sensor"},{id:"FWS60B (A5-30-01)",data:"eltako_water_m4",
desc:"Water Sensor"},{id:"FWS61",data:"a5-13-01",desc:"Weatherstation"},{id:"FWZ12",data:"a5-12-01",desc:"Power Meter"},{id:"FWZ14",data:"eltako_powermeter",desc:"Power Meter"},{id:"FWZ61",data:"a5-12-01",desc:"Power Meter"},{id:"FZK14",data:"eltako_relay",desc:"Relay"},{id:"FZK61NP-230V",data:"eltako_relay2",desc:"Relay2"},{id:"FZS",data:"eltako_fzs",desc:"Button"},{id:"FZS65",data:"eltako_fzs",desc:"Button"},{id:"TF-HMB",data:"eltako_heat",desc:"Heat Sensor"},{id:"TF61D-230V",data:"eltako_dimmer",
teachin:"general",desc:"Dimmer"},{id:"TF61L-230V",data:"eltako_switch",teachin:"general",desc:"Switch"},{id:"TF61J-230V",data:"eltako_blind",teachin:"general",desc:"Blind"},{id:"TF61R-230V",data:"eltako_switch",teachin:"general",desc:"Switch"},{id:"TF-IUS",data:"eltako_switch",teachin:"general",desc:"Switch"}]},{id:"Omnio",vendor:"omnio",subtypes:[{id:"CO2-Sensor",data:"a5-09-04",desc:"CO2 Sensor"},{id:"FG101",data:"f6-10-00",desc:"Window Handle"},{id:"FG111",data:"f6-10-00",desc:"Window Handle"},
{id:"FG121",data:"f6-10-00",desc:"Window Handle"},{id:"FG131",data:"f6-10-00",desc:"Window Handle"},{id:"FK101",data:"d5-00-01",desc:"Window Contact"},{id:"FDM-SOLARPIR (f6-02-01)",data:"f6-02-01",desc:"Motion Sensor"},{id:"FDM-SOLARPIR (A5-06-02)",data:"a5-06-02",desc:"Motion Sensor"},{id:"FDM-SOLARPIR (A5-07-01)",data:"a5-07-01",desc:"Motion Sensor"},{id:"FDM-SOLARPIR (A5-07-02)",data:"a5-07-02",desc:"Motion Sensor"},{id:"FDM-SOLARPIR (A5-07-03)",data:"a5-07-03",desc:"Motion Sensor"},{id:"FDM-SOLARPIR (A5-08-01)",
data:"a5-08-01",desc:"Motion Sensor"},{id:"FDM-SOLARPIR (A5-08-02)",data:"a5-08-02",desc:"Motion Sensor"},{id:"FDM-SOLARPIR (A5-08-03)",data:"a5-08-03",desc:"Motion Sensor"},{id:"H20-ECO",data:"f6-05-01",desc:"Water Sensor"},{id:"KD230/10",data:"d2-01-03",desc:"Dimmer Actuator"},{id:"KS230/10",data:"d2-01-01",desc:"Switch Actuator"},{id:"KXJ230/12",data:"d2-05-00",desc:"Jalousie Actuator"},{id:"REGH12/08",data:"d2-01-14",desc:"Thermostat Actuator 8 Channel"},{id:"REGJ12/04",data:"d2-05-01",desc:"Jalousie Actuator 4 Channel"},
{id:"REGS12/04",data:"d2-01-13",desc:"Switch Actuator 4 Channel"},{id:"REGS12/08",data:"d2-01-14",desc:"Switch Actuator 8 Channel"},{id:"RTF160 (A5-10-03)",data:"a5-10-03",desc:"Temperature and Humidity Sensor"},{id:"RTF160 (A5-10-10)",data:"a5-10-10",desc:"Temperature and Humidity Sensor"},{id:"RTF161 (A5-10-03)",data:"a5-10-03",desc:"Temperature and Humidity Sensor"},{id:"RTF161 (A5-10-10)",data:"a5-10-10",desc:"Temperature and Humidity Sensor"},{id:"UPD230/10",data:"d2-01-03",desc:"Dimmer Actuator"},
{id:"UPH230/10",data:"d2-01-01",desc:"Thermostat Actuator"},{id:"UPH230/12",data:"d2-01-11",desc:"Thermostat Actuator 2 Channel"},{id:"UPJ230/12",data:"d2-05-00",desc:"Jalousie Actuator"},{id:"UPS230/08",data:"d2-01-01",desc:"Switch Actuator"},{id:"UPS230/10",data:"d2-01-01",desc:"Switch Actuator"},{id:"UPS230/12",data:"d2-01-11",desc:"Switch Actuator 2 Channel"},{id:"XFJ",data:"a5-13-01",desc:"Weather Station"}]},{id:"EiMSIG",vendor:"eimsig",subtypes:[{id:"FGSE,FSE,USE (A5-14-01)",data:"a5-14-01",
desc:"Window/Door Sensor"},{id:"FGSE (A5-14-03)",data:"a5-14-03",desc:"Window/Door Sensor"},{id:"FGSE,FSE,USE (A5-14-07)",data:"a5-14-07",desc:"Window/Door Sensor"},{id:"FGSE (A5-14-08)",data:"a5-14-08",desc:"Window/Door Sensor"},{id:"FGSE,FSE,USE (A5-14-09)",data:"a5-14-09",desc:"Window/Door Sensor"},{id:"FGSE (A5-14-0A)",data:"a5-14-0a",desc:"Window/Door Sensor"}]},{id:"MACO",vendor:"maco",subtypes:[{id:"mTRONIC Multisensor",data:"a5-14-0a",desc:"Window Sensor"}]},{id:"HORA",vendor:"hora",subtypes:[{id:"SmartDrive",
data:"a5-20-04",desc:"Thermostat"}]},{id:"PEHA",vendor:"peha",subtypes:[{id:"D 20.450.xxx FU-RTR",data:"a5-10-03",desc:"Room Operating Unit"},{id:"D 20.450.xxx FU-RTR MS",data:"a5-10-06",desc:"Room Operating Unit"},{id:"D 450 FU FK",data:"d5-00-01",desc:"Window Contact"},{id:"D 451 FU-BM",data:"a5-07-01",desc:"Motion Sensor"},{id:"D 451 FU-BM DE",data:"a5-07-01",desc:"Motion Sensor"},{id:"D 451 FU FK",data:"d5-00-01",desc:"Window Contact"},{id:"D 451 FU-B EBI",data:"peha_switch",teachin:"general",
desc:"Switch Actuator"},{id:"D 451 FU-EBI O.T.",data:"peha_switch",teachin:"general",desc:"Switch Actuator"},{id:"D 451 FU-EBI UP O.A.",data:"peha_switch",teachin:"general",desc:"Switch Actuator"},{id:"D 451 FU-EBI PF O.T.",data:"peha_switch",teachin:"general",desc:"Switch Actuator"},{id:"D 451 FU-B EBIM",data:"peha_powerswitch",teachin:"general",desc:"Power Meter Switch"},{id:"D 451 FU-EBIM O.T.",data:"peha_powerswitch",teachin:"general",desc:"Power Meter Switch"},{id:"D 451 FU-EBIM UP O.A.",data:"peha_powerswitch",
teachin:"general",desc:"Power Meter Switch"},{id:"D 4511 FU-EBIM ST",data:"peha_powerswitch",teachin:"general",desc:"Power Meter Switch"},{id:"D 452 FU-EBI O.T.",data:"peha_switch",teachin:"general",desc:"Switch Actuator"},{id:"D 452 FU-EBIM O.T.",data:"peha_powerswitch",teachin:"general",desc:"Power Meter Switch"},{id:"D 452 FU-EBI JR O.T.",data:"peha_blind",teachin:"general",desc:"Blind Actuator"},{id:"D 452 FU-EBIM JR O.T.",data:"peha_blind",teachin:"general",desc:"Blind Actuator"},{id:"D 452 FU-EBI JR UP O.A.",
data:"peha_blind",teachin:"general",desc:"Blind Actuator"},{id:"D 452 FU-EBIM JR UP O.A.",data:"peha_blind",teachin:"general",desc:"Blind Actuator"},{id:"D 452 FU-2REG",data:"peha_switch",teachin:"general",desc:"Switch Actuator"},{id:"D 454 FU-SPV 4REG",data:"peha_switch",teachin:"general",desc:"Switch Actuator"},{id:"D 454 FU-2REG",data:"peha_switch",teachin:"general",desc:"Switch Actuator"},{id:"D 454 FU-JR 2REG",data:"peha_blind",teachin:"general",desc:"Switch Actuator"},{id:"D 4571 FU-EBIM ST",
data:"peha_powerswitch",teachin:"general",desc:"Power Meter Switch"}]},{id:"Thermokon",vendor:"thermokon",subtypes:[{id:"SRC-DO Light",data:"peha_powerswitch",teachin:"general",desc:"Power Meter Switch"},{id:"SRC-DO Blind",data:"peha_blind",teachin:"general",desc:"Blind Actuator"},{id:"SRW01",data:"d5-00-01",desc:"Window Contact"},{id:"SR04",data:"a5-02-05",desc:"Temperature Sensor"},{id:"SR04P",data:"a5-10-03",desc:"Temperature Sensor"},{id:"SR04P-MS",data:"a5-10-06",desc:"Temperature Sensor"},{id:"SR04PS",
data:"a5-10-04",desc:"Temperature Sensor"},{id:"SR04PST",data:"a5-10-01",desc:"Temperature Sensor"},{id:"SR04PT",data:"a5-10-05",desc:"Temperature Sensor"},{id:"SR04T",data:"a5-10-0c",desc:"Temperature Sensor"}]},{id:"WINKHAUS",vendor:"winkhaus",subtypes:[{id:"FM.A",data:"d5-00-01",desc:"Window Contact"},{id:"FM.V (D5-00-01)",data:"d5-00-01",desc:"Window Contact"},{id:"FM.V (A5-14-01)",data:"a5-14-01",desc:"Window Contact"}]},{id:"AFRISOLab",vendor:"afriso",subtypes:[{id:"AMC 10",data:"d5-00-01",
desc:"Window Contact"},{id:"AVD 20-D",data:"a5-20-04",desc:"Thermostat"},{id:"CO2-Sensor",data:"a5-09-08",desc:"CO2 Sensor"},{id:"FT",data:"a5-10-03",desc:"Room Operating Unit"},{id:"FTF",data:"a5-10-12",desc:"Room Operating Unit"},{id:"FTM T",data:"a5-02-05",desc:"Temperature Sensor"},{id:"FTM TF",data:"a5-04-01",desc:"Temperature and Humidity Sensor"},{id:"WaterSensor - con",data:"f6-05-01",desc:"Water Sensor"},{id:"WaterSensor - eco",data:"a5-30-03",desc:"Water Sensor"}]},{id:"HOPPE",vendor:"hoppe",
subtypes:[{id:"SecuSignal",data:"f6-10-00",desc:"Hoppe Window Handle"}]},{id:"SODA",vendor:"soda",subtypes:[{id:"Window Handle",data:"d2-06-01"}]},{id:"LOCKSTAR",vendor:"lockstar",subtypes:[{id:"Window Handle Demo",data:"d2-06-02"}]},{id:"Rehau",vendor:"rehau",subtypes:[{id:"Window Sensor",data:"bb-aa-cc"},{id:"Inovent Fan",data:"d2-20-00"}]},{id:"Siegenia",vendor:"siegenia",subtypes:[{id:"Window Sensor"}]},{id:"Virtual",vendor:"general",subtypes:[{id:"F6-01-01",data:"f6-01-01",teachin:"command",
desc:"Switch Buttons Push Button"},{id:"F6-02-01",data:"f6-02-01",teachin:"command",desc:"Rocker Switch, 2 Rocker, Light and Blind Control - Applicatio Style 1"},{id:"F6-02-02",data:"f6-02-02",teachin:"command",desc:"Rocker Switch, 2 Rocker, Light and Blind Control - Applicatio Style 2"},{id:"F6-02-03",data:"f6-02-03",teachin:"command",desc:"Rocker Switch, 2 Rocker, Light Control - Applicatio Style 1"},{id:"F6-03-01",data:"f6-03-01",teachin:"command",desc:"Rocker Switch, 4 Rocker, Light and Blind Control - Applicatio Style 1"},
{id:"F6-03-02",data:"f6-03-02",teachin:"command",desc:"Light and Blind Control - Applicatio Style 1"}]}],getGatewayDeviceType:function(b){b={type:this.TYPE,name:"EnOcean (USB Stick)"};b.manufacturers=this.DEVICES;return b},getCommandStatusMap:function(b){if(!b||!b.vendor)return null;var a=this.MAP[b.vendor],c;a&&a[b.data]&&(c=a[b.data]);c||(a=this.MAP.general,c=a[b.data]);if(!c)return null;a=JSON.parse(JSON.stringify(c));b.senderID||"a5-20-04"==b.data||delete a.command;return a},getIPevtMap:function(b){b=
this.getCommandStatusMap(b);if(!b)return null;var a={ipevt:[]};b.ipevt?a.ipevt=b.ipevt:b.status&&(a.ipevt=b.status);return a},createDevice:function(b,a,c){a=xnm.aio.gateway.DM.DMError;var d=xnm.aio.gateway.DM.DMError.ERROR_CODE;b.address?b.data?b.vendor?(b=JSON.parse(JSON.stringify(b)),c(null,b)):c(new a(d.INVALID,"parameter vendor is invalid")):c(new a(d.INVALID,"parameter data is invalid")):c(new a(d.INVALID,"parameter address is invalid"))},updateDevice:function(b,a,c){a=xnm.aio.gateway.DM.DMError;
var d=xnm.aio.gateway.DM.DMError.ERROR_CODE;b.address?b.data?b.vendor?(b=JSON.parse(JSON.stringify(b)),c(null,b)):c(new a(d.INVALID,"parameter vendor is invalid")):c(new a(d.INVALID,"parameter data is invalid")):c(new a(d.INVALID,"parameter address is invalid"))},deleteDevice:function(b,a,c,d){d&&d(null,JSON.parse(JSON.stringify(a)));xnm.aio.gateway.systems.ENOCEAN.delSensor(b,a.address,function(){})}}};
xnm.aio.gateway.systems.IW={delSensor:function(b,a,c){b._executeRequest("delSensor",{type:this.DM.TYPE,adr:a},{timeout:2E4},function(a){c&&c(a)})},learn:function(b,a,c){if(b){var d=this;this._checkIWAes(b,function(e){if(e)c&&c(e);else{var f=[];d._getIWdevicesFromGateway(b,function(e,h){if(h)for(var m=0;m<h.length;m++)if(h[m]&&h[m].adr&&8<=h[m].adr.length){var l=h[m].adr.substr(6,2);d._contains(f,l)||f.push(l)}(m=d._findFreeAdr(f))?d._learn(b,m,function(e,f){if(e)c&&c(e);else if(!f||!f.address||8>
f.length)c&&c(Error("lean iw address response format invalid"));else{var g=f.address.substr(6,2),h="06";"DKL"==a.subtype&&(h="09");d.configWindow(b,{adr:g,config:h},function(a){c&&c(a,{address:f.address})})}}):c&&c(Error("iw address exceed 254"))});a&&a.devices&&(e=this._getIWdevicesAddress(a.devices))&&(f=f.concat(e))}})}else c&&c(Error("gateway is null"))},configWindow:function(b,a,c){a&&a.adr&&a.config?b._executeRequest("SendSC",{type:this.DM.TYPE,data:"05"+a.adr+a.config},null,function(a){c&&
c(a)}):c&&c(Error("options format invalid"))},handleStateCreator:function(b,a,c){if(!a||!a.value)return null;c=this._handleState(b,c);if(!c)return null;b={status:c[a.value]};if(a.extra){var d;if(a=c[a.extra]){switch(a){case "low":d="battery";break;case "timeout":d="clock"}b.info=d}return b}return c[a.value]},_handleState:function(b,a){if(!(a&&a.type&&"iw"==a.type.toLowerCase()&&a.adr&&a.state&&b.address&&b.address&&b.address.toLowerCase()==a.adr.toLowerCase()))return null;var c={},d=a.state,e=d.indexOf(":");
0<e&&(d=d.substr(0,e));d=parseInt(d,16);d&16&&(c.windowState=d&1?"tilted":d&2?"closed":"open",c.errorState=d&4?"low":d&8?"timeout":"no_error");return c},_checkIWAes:function(b,a){xnm.aio.gateway.Admin.checkAESKey(b._ip,function(b){var d;b&&b.error&&(d=Error("set gateway IW aes key error"));a&&a(d)})},_learn:function(b,a,c){var d=this;b._executeRequest("LearnSC",{type:this.DM.TYPE,adr:a},null,function(a,b){if(a)c&&c(a);else if(b.adr){var g=d._resolveAddress(b.adr);c&&c(null,{address:g})}else c&&c(Error("response format invalid"))})},
_getIWdevicesFromGateway:function(b,a){b._executeRequest("getStates",null,null,function(b,d){if(b)a(b);else{for(var e=[],f=0;f<d.length;f++)d[f]&&"IW"==d[f].type&&e.push(d[f]);a(null,e)}})},_getIWdevicesAddress:function(b){for(var a=[],c=0;c<b.length;c++)if(b[c]&&b[c].address&&8<=b[c].address.length){var d=b[c].address.substr(6,2);this._contains(a,d)||a.push(d)}return a},_findFreeAdr:function(b){for(var a=1;255>a;){for(var c=!1,d=0;d<b.length;d++)if(b[d]&&parseInt(b[d],16)==a){c=!0;break}if(!c)break;
a++}if(256==a)return null;for(a=a.toString(16);2>a.length;)a="0"+a;return a},_contains:function(b,a){for(var c=0;c<b.length;c++)if(b[c]===a)return!0;return!1},_resolveAddress:function(b){return b},_handleUdpState:function(b,a){if(!a||!a.data||6!=a.data.length&&12!=a.data.length||!b||!b.type||b.type.toUpperCase()!=this.DM.TYPE)return null;var c=a.data.substr(a.data.length-6,2);return 8>b.address.length||b.address.substr(6,2).toUpperCase()!=c.toUpperCase()?null:this._handleState(b,{type:"IW",adr:b.address,
state:a.data.substr(a.data.length-2,2)+":00"})},parseTriggerCode:function(b,a){if(!b||12!=b.length||!a||!a.address)return null;var c,d=b.substr(8);if(b.substr(0,8).toUpperCase()!=a.address)return null;d=d.substr(0,2)+"0"+d.substr(3,1);"0100"==d?c="open":"0102"==d?c="closed":"0101"==d&&(c="tilted");return{value:c}},generateTriggerCode:function(b,a){if(!(b&&b.value&&a&&a.address)||8>a.address)return null;var c;switch(b.value){case "open":c="0100";break;case "closed":c="0102";break;case "tilted":c="0101"}return c?
a.address+c:null},DM:{TYPE:"IW",MAP:{status:[{type:"enum",name:"state",ref:{value:"windowState",options:["open","tilted","closed"]}},{type:"enum",name:"error",ref:{value:"errorState",options:["no_error","low","timeout"]}}],event:[{type:"enum",name:"open",ref:{value:"open"}},{type:"enum",name:"tilted",ref:{value:"tilted"}},{type:"enum",name:"closed",ref:{value:"closed"}}],ipevt:[{type:"enum",name:"state",ref:{value:"windowState",options:["open","tilted","closed"]}},{type:"enum",name:"error",ref:{value:"errorState",
options:["no_error","low","timeout"]}}]},getGatewayDeviceType:function(b){return{type:this.TYPE,name:"Internorm Window"}},getCommandStatusMap:function(){for(var b=JSON.parse(JSON.stringify(this.MAP)),a=0;a<b.status.length;a++)"errorState"!=b.status[a].ref.value&&(b.status[a].ref.extra="errorState");return b},createDevice:function(b,a,c){a=xnm.aio.gateway.DM.DMError;var d=xnm.aio.gateway.DM.DMError.ERROR_CODE;b.address?(b=JSON.parse(JSON.stringify(b)),c(null,b)):c(new a(d.INVALID,"parameter address is invalid"))},
updateDevice:function(b,a,c){a=xnm.aio.gateway.DM.DMError;var d=xnm.aio.gateway.DM.DMError.ERROR_CODE;b.address?(b=JSON.parse(JSON.stringify(b)),c(null,b)):c(new a(d.INVALID,"parameter address is invalid"))},deleteDevice:function(b,a,c,d){d&&d(null,JSON.parse(JSON.stringify(a)));xnm.aio.gateway.systems.IW.delSensor(b,a.address,function(){})}}};
xnm.aio.gateway.systems.IN={search:function(b,a,c){b._executeRequest("inSearchBlinds",null,{timeout:2E4},function(a,b){if(a)c&&c(a);else if(b){for(var f=0;f<b.length;f++)b[f]&&b[f].id&&(b[f].data="1"==b[f].id.charAt(1)?"fan":"blind");c&&c(null,b)}else c&&c(Error("response format invalid"))})},login:function(b,a,c){if(a&&a.address&&a.group&&a["native"]){var d=this._getHexVal(parseInt(a.address),2),e=this._getHexVal(parseInt(a.group),2);b._executeRequest("inLogin",{adr:a["native"]+d+e},{timeout:2E4},
function(a,b){if(a)c&&c(a);else{var d;b&&b.deviceType&&"06"==b.deviceType&&(d={type:"fanV2"});c&&c(null,d)}})}else c&&c(Error("option format invalid"))},logout:function(b,a,c){if(a&&a.address&&a.group&&a["native"]){var d=this._getHexVal(parseInt(a.address),2),e=this._getHexVal(parseInt(a.group),2);b._executeRequest("inLogout",{adr:a["native"]+d+e},{timeout:2E4},function(a,b){c&&c(a,b)})}else c&&c(Error("option format invalid"))},executeCommandCreator:function(b,a,c,d){a?c&&c.value?a&&a.address?this._executeCommand(b,
a,c,d):d&&d(Error("it device address is empty")):d&&d(Error("it device command is empty")):d&&d(Error("in device is null"))},getCurrentStateCreator:function(b,a,c){if(a)if(0==a.length)c&&c(null,[]);else{var d={},e;for(e=0;e<a.length;e++)a[e]&&a[e].device&&a[e].device.address&&(d[a[e].device.address]=a[e].device);var f=[],g;for(g in d)d.hasOwnProperty(g)&&d[g]&&f.push(d[g]);var h=this,m=0,l=function(d,e){var g={};!d&&e&&(e.type="IN",e.adr=h._getHexVal(f[m].address,2),g[f[m].address]=e);m++;if(m<f.length)h._getCurrentState(b,
f[m],l);else{for(var t=[],q=0;q<a.length;q++)if(a[q]&&a[q].device&&a[q].device.address){var r=g[a[q].device.address];r&&(r=h.handleStateCreator(a[q].device,a[q].status,r))&&("object"==typeof r?(r.id=a[q].id,t.push(r)):t.push({id:a[q].id,status:r}))}c&&c(null,t)}};this._getCurrentState(b,f[0],l)}else c&&c(Error("device list in null"))},handleStateCreator:function(b,a,c){if(!a||!a.value)return null;c=this._handleState(b,c);if(!c)return null;b={status:c[a.value]};if(a.extra){if(a=c[a.extra]){switch(a){case "low1":case "low2":a=
"battery";break;default:a="notification"}b.info=a}return b}return c[a.value]},getFreeAddresses:function(b,a,c){b?this._getINDevicesFromGateway(b,function(b,e){var f=a&&a.devices?a.devices:[],g=a&&a.groups?a.groups:[];!b&&e&&(e.devices&&(f=f.concat(e.devices)),e.groups&&(g=g.concat(e.groups)));var h={devices:[],groups:[]},m,l,k;for(m=1;100>=m;m++){k=!0;for(l=0;l<f.length;l++)if(m==f[l]){k=!1;break}k&&h.devices.push(m)}for(m=101;200>=m;m++){k=!0;for(l=0;l<g.length;l++)if(m==g[l]){k=!1;break}k&&h.groups.push(m)}c&&
c(null,h)}):c&&c(Error("gateway is null"))},_getINDevicesFromGateway:function(b,a){b._executeRequest("getStates",null,null,function(b,d){if(b)a(b);else{var e={devices:[],groups:[]};if(d)for(var f=0;f<d.length;f++)if(d[f]&&"IN"==d[f].type&&d[f].adr){var g=parseInt(d[f].adr,16);100>=g?e.devices.push(g):e.groups.push(g)}a(null,e)}})},_executeCommand:function(b,a,c,d){(a=this._buildData(b,a,c))?b._executeRequest("SendSC",{type:this.DM.TYPE,data:a},null,function(a){d&&d(a)}):d&&d(Error("command format invalid"))},
buildQuery:function(b,a,c){return(b=this._buildData(b,a,c))?{type:this.DM.TYPE,data:b,XC_FNC:"SendSC"}:null},_getCurrentState:function(b,a,c){a&&a.address?100<parseInt(a.address)?c&&c(Error("device address is a group address")):(a={adr:this._getHexVal(a.address,2)},b._executeRequest("inGetState",a,null,function(a,b){a?c&&c(a):c&&c(null,b)})):c&&c(Error("device format invalid"))},_handleState:function(b,a){if(!(a&&a.type&&"in"==a.type.toLowerCase()&&a.adr&&a.state&&b.address))return null;var c=this._getHexVal(b.address,
2);if(!c||c.toLowerCase()!=a.adr.toLowerCase())return null;var d=a.state;if(8==d.length||20==d.length)d=d.substr(2);c={};switch(b.data){case "fan":case "fanV2":d=d.substr(0,2);switch(d){case "03":case "0C":case "0D":c.mode="standby";break;case "04":c.mode="level1";break;case "05":c.mode="level2";break;case "06":c.mode="level3";break;case "07":case "0F":c.mode="turbo";break;case "08":case "09":case "0A":case "0B":c.mode="auto";break;case "11":case "12":case "13":case "14":c.mode="night";break;case "0E":c.mode=
"error"}break;case "blind":var e=d.substr(0,2),f=d.substr(4,2),g=d.substr(2,2);32==d.length&&(e=d.substr(2,2),f=d.substr(26,2),g=d.substr(18,2));d=parseInt(e,16);d&128?c.errorState="undefiend":(d&2?c.errorState="low1":d&64?c.errorState="low2":d&16?c.errorState="temp":d&8&&(c.errorState="temp2"),d=100-parseInt(f,16),100<d&&(d=100),0>d&&(d=0),c.positionState=d,d=parseInt(g,16),d=Math.floor((d+1)/4),15<d&&(d=15),c.lamellaState=d+1)}return c},_buildData:function(b,a,c){if(!a.address||!c)return null;var d;
switch(c.value){case "moveUpS":return a["native"]?a["native"]+"7F61":null;case "moveDownS":case "turboS":return a["native"]?a["native"]+"7F62":null;case "stopS":case "level1S":return a["native"]?a["native"]+"7F63":null;case "moveUp":case "up":d="000C";break;case "moveDown":case "down":d="000D";break;case "stop":d="0007";break;case "lamella":if(null==c.ext||"undefined"==typeof c.ext)return null;d=parseInt(c.ext);1>d&&(d=1);16<d&&(d=16);d=this._getHexVal(d+63,4);break;case "gotoP":case "saveP":if(null==
c.ext||"undefined"==typeof c.ext)return null;d=parseInt(c.ext);1>d&&(d=1);8<d&&(d=8);d+="saveP"==c.value?319:327;d=this._getHexVal(d,4);break;case "position":if(null==c.ext||"undefined"==typeof c.ext)return null;d=parseInt(c.ext);0>d&&(d=0);100<d&&(d=100);d=100-d;d+=6144;d=this._getHexVal(d,4);break;case "levelUp":d="011B";break;case "levelDown":d="011D";break;case "level1":d="0040";break;case "level2":d="0041";break;case "level3":d="0042";break;case "standby":d="0043";break;case "auto":d="0044";
break;case "manu":d="0045";break;case "turbo":d="0046";break;case "turbo_2":d="0051";break;case "turbo_3":d="0052";break;case "turbo_4":d="0053";break;case "night_mode_in_1":d="0054";break;case "night_mode_in_2":d="0055";break;case "night_mode_in_3":d="0056";break;case "night_mode_out_1":d="0057";break;case "night_mode_out_2":d="0058";break;case "night_mode_out_3":d="0059"}return null==d||"undefined"==typeof d?null:this._getHexVal(a.address,2)+d},_getHexVal:function(b,a){for(var c=b.toString(16).toUpperCase();c.length<
a;)c="0"+c;return c},_parseData:function(b,a){if(4>b.length)return null;var c=b.substr(0,b.length-4).toUpperCase(),d=b.substr(b.length-4).toUpperCase(),e={};switch(d){case "7F61":case "7F62":case "7F63":if(!a["native"]||a["native"].toUpperCase()!=c)return null;"7F61"==d&&(e.value="moveUpS");"7F62"==d&&(e.value="blind"==a.data?"moveDownS":"turboS");"7F63"==d&&(e.value="blind"==a.data?"stopS":"level1S")}if(!e.value&&a.address.toUpperCase()!=c)return null;switch(d){case "000C":e.value="moveUp";break;
case "000D":e.value="moveDown";break;case "0007":e.value="stop";break;case "011B":e.value="levelUp";break;case "011D":e.value="levelDown";break;case "0040":e.value="level1";break;case "0041":e.value="level2";break;case "0042":e.value="level3";break;case "0043":e.value="standby";break;case "0044":e.value="auto";break;case "0045":e.value="manu";break;case "0046":e.value="turbo";break;case "0051":e.value="turbo_2";break;case "0052":e.value="turbo_3";break;case "0053":e.value="turbo_4";break;case "0054":e.value=
"night_mode_in_1";break;case "0055":e.value="night_mode_in_2";break;case "0056":e.value="night_mode_in_3";break;case "0057":e.value="night_mode_out_1";break;case "0058":e.value="night_mode_out_2";break;case "0059":e.value="night_mode_out_3"}e.value||(c=parseInt(d,16),64<=c&&79>=c?(e.value="lamella",e.ext=c-63):320<=c&&327>=c?(e.value="saveP",e.ext=c-319):328<=c&&335>=c?(e.value="gotoP",e.ext=c-327):6144<=c&&6244>=c&&(e.value="position",e.ext=c-6144));return e.value?e:null},generateActionCode:function(b,
a){return this._buildData(null,a,b)},parseActionCode:function(b,a){return this._parseData(b,a)},DM:{TYPE:"IN",MAP:{blind:{command:[{type:"enum",name:"move up (service)",ref:{value:"moveUpS"}},{type:"enum",name:"move down (service)",ref:{value:"moveDownS"}},{type:"enum",name:"stop (service)",ref:{value:"stopS"}},{type:"enum",name:"move up",ref:{value:"moveUp"}},{type:"enum",name:"move down",ref:{value:"moveDown"}},{type:"enum",name:"stop",ref:{value:"stop"}},{type:"int",name:"lamella",ref:{value:"lamella",
ext:"%d",extMeta:"1-16",step:"1"}},{type:"enum",name:"preset position",ref:{value:"gotoP",ext:"%e",extMeta:"12345678".split("")}},{type:"enum",name:"save position",ref:{value:"saveP",ext:"%e",extMeta:"12345678".split("")}},{type:"int",name:"position",ref:{value:"position",ext:"%d",extMeta:"0-100",step:"1"}}],status:[{type:"int",name:"lamella",ref:{value:"lamellaState",extMeta:"1-16",step:"1"}},{type:"int",name:"position",ref:{value:"positionState",extMeta:"0-100",step:"1"}},{type:"enum",name:"error",
ref:{value:"errorState",options:["low1","low2","temp","temp2","undefined"]}}]},fan:{command:[{type:"enum",name:"turbo (service)",ref:{value:"turboS"}},{type:"enum",name:"level 1 (service)",ref:{value:"level1S"}},{type:"enum",name:"level up",ref:{value:"levelUp"}},{type:"enum",name:"level down",ref:{value:"levelDown"}},{type:"enum",name:"level 1",ref:{value:"level1"}},{type:"enum",name:"level 2",ref:{value:"level2"}},{type:"enum",name:"level 3",ref:{value:"level3"}},{type:"enum",name:"standby",ref:{value:"standby"}},
{type:"enum",name:"auto",ref:{value:"auto"}},{type:"enum",name:"manu",ref:{value:"manu"}},{type:"enum",name:"turbo",ref:{value:"turbo"}},{type:"enum",name:"turbo 2",ref:{value:"turbo_2"}},{type:"enum",name:"turbo 3",ref:{value:"turbo_3"}},{type:"enum",name:"turbo 4",ref:{value:"turbo_4"}},{type:"enum",name:"night mode in 1",ref:{value:"night_mode_in_1"}},{type:"enum",name:"night mode in 2",ref:{value:"night_mode_in_2"}},{type:"enum",name:"night mode in 3",ref:{value:"night_mode_in_3"}},{type:"enum",
name:"night mode out 1",ref:{value:"night_mode_out_1"}},{type:"enum",name:"night mode out 2",ref:{value:"night_mode_out_2"}},{type:"enum",name:"night mode out 3",ref:{value:"night_mode_out_3"}}],status:[{type:"enum",name:"mode",ref:{value:"mode",options:"standby level1 level2 level3 turbo auto night error".split(" ")}}]}},getGatewayDeviceType:function(b){b={type:this.TYPE,name:"Internorm",subtypes:[]};b.subtypes.push({id:"Blind",data:"blind"});b.subtypes.push({id:"Fan",data:"fan"});b.subtypes.push({id:"Fan V2",
data:"fanV2"});return b},getCommandStatusMap:function(b){if(!b||!b.data)return null;var a;switch(b.data){case "blind":case "blindgroup":a=JSON.parse(JSON.stringify(this.MAP.blind));for(var c=0;c<a.status.length;c++)"errorState"!=a.status[c].ref.value&&(a.status[c].ref.extra="errorState");"blindgroup"==b.data&&delete a.status;return a;case "fan":case "fanV2":return this.MAP.fan;case "fangroup":return a=JSON.parse(JSON.stringify(this.MAP.blind)),delete a.status,a}return null},createDevice:function(b,
a,c){a=xnm.aio.gateway.DM.DMError;var d=xnm.aio.gateway.DM.DMError.ERROR_CODE;b.address?b.data?(b=JSON.parse(JSON.stringify(b)),c(null,b)):c(new a(d.INVALID,"parameter data is invalid")):c(new a(d.INVALID,"parameter address is invalid"))},updateDevice:function(b,a,c){a=xnm.aio.gateway.DM.DMError;var d=xnm.aio.gateway.DM.DMError.ERROR_CODE;b.address?b.data?(b=JSON.parse(JSON.stringify(b)),c(null,b)):c(new a(d.INVALID,"parameter data is invalid")):c(new a(d.INVALID,"parameter address is invalid"))}}};
xnm.aio.gateway.systems.R2={regist:function(b,a,c){a&&a.address?(a=a.address.replace(/\./g,""),this.addSensor(b,a,c)):c&&c(Error("regist device option foramt invalid"))},delSensor:function(b,a,c){b._executeRequest("delSensor",{type:this.DM.TYPE,adr:a},{timeout:2E4},function(a){c&&c(a)})},addSensor:function(b,a,c){b._executeRequest("addSensor",{type:this.DM.TYPE,adr:a},{timeout:2E4},function(a){c&&c(a)})},learn:function(b,a,c){if(a)switch(a.type){case "switch":case "dimmer":case "blind":break;case "motion":case "contact":case "dusk":case "button":this._learnWithAddress(b,
a.devices,c);return;default:c&&c(Error("no such device type"));return}var d=this;b._executeRequest("LearnSC",{type:this.DM.TYPE},{timeout:1E4},function(a,b){if(a)c&&c(a);else if(b.CODE){var g=d._resolveAddress(b.CODE);g?c&&c(null,g):c&&c(Error("gateway return code format invalid"))}else c&&c(Error("response format invalid"))})},_learnWithAddress:function(b,a,c){var d=[];if(a)for(var e=a.length;e--;)a[e]&&a[e].address&&d.push(a[e].address);var f=this._generateFreeAdr(d);f?b._executeRequest("SendSC",
{type:this.DM.TYPE,data:f+"2001"},null,function(a,b){a?c&&c(a):c&&c(null,{address:f})}):c&&c(Error("can not generate new address"))},_generateFreeAdr:function(b){for(var a,c=!1;!c;)a=this._getHexVal(Math.floor(61166*Math.random())+4369,4)+"40",c=!this._contains(b,a);return a},_resolveAddress:function(b){return 8>b.length?null:{address:b.substr(0,6)}},executeCommandCreator:function(b,a,c,d){a?c&&c.value?a&&a.address?this._executeCommand(b,a,c,d):d&&d(Error("it device address is empty")):d&&d(Error("it device command is empty")):
d&&d(Error("it device is null"))},handleStateCreator:function(b,a,c){return a&&a.value?(b=this._handleState(b,c))?b.state:null:null},_handleUdpState:function(b,a){if(!(a.type&&"r2"==a.type.toLowerCase()&&a.data&&b.type&&"r2"==b.type.toLowerCase()&&b.address))return null;var c,d;8==a.data.length&&(c=a.data.substr(0,4),d=a.data.substr(6));return c&&d?this._handleState(b,{type:"R2",adr:c,state:d+":00"}):null},_executeCommand:function(b,a,c,d){var e;if("refresh"==c.value){if(!a.address||4>a.address.length){d&&
d(Error("device format invalid"));return}e="refreshSC";a={type:this.DM.TYPE,adr:a.address.substr(0,4)}}else{e="SendSC";a=this._buildData(b,a,c);if(!a){d&&d(Error("command format invalid"));return}a={type:this.DM.TYPE,data:a}}b._executeRequest(e,a,null,function(a){d&&d(a)})},buildQuery:function(b,a,c){var d;if("refresh"==c.value){if(!a.address||4>a.address.length)return null;d="refreshSC";b={type:this.DM.TYPE,adr:a.address.substr(0,4)}}else{d="SendSC";b=this._buildData(b,a,c);if(!b)return null;b={type:this.DM.TYPE,
data:b}}b.XC_FNC=d;return b},_buildData:function(b,a,c){if(!a.address||!c)return null;switch(c.value){case "on":b="0001";break;case "off":b="0002";break;case "up":b="0101";break;case "down":b="0102";break;case "stop":b="0003";break;case "dimTo":if(null==c.ext||"undefined"==typeof c.ext)return null;b=parseInt(c.ext);0>b&&(b=0);100<b&&(b=100);b=0==b?"0002AAAA":"01AAAA"+this._getHexVal(b,2);break;default:return null}return a.address+b},_handleState:function(b,a){if(!(a.type&&a.adr&&a.state&&b.type&&
b.type.toLowerCase()==a.type.toLowerCase()&&b.address)||4>b.address.length||b.address.substr(0,4).toLowerCase()!=a.adr.toLowerCase())return null;var c={},d=a.state.split(":"),d=parseInt(d[0],16);switch(b.data){case "switch":case "motion":case "dusk":case "button":switch(d){case 2:c.state="off";break;case 1:c.state="on";break;default:return null}break;case "contact":switch(d){case 2:c.state="closed";break;case 1:c.state="open";break;default:return null}break;case "dimmer":c.state=d;break;default:return null}return c},
parseTriggerCode:function(b,a){if(!b||10!=b.length&&8!=b.length||!a||!a.address)return null;var c=b.substr(0,6);if(a.address.toUpperCase()!=c.toUpperCase())return null;c={};switch(b.substr(6)){case "02":c.value="contact"==a.data?"closed":"off";break;case "01":c.value="contact"==a.data?"open":"motion"==a.data?"motion":"on";break;default:return null}return c},generateTriggerCode:function(b,a){if(!(b&&b.value&&a&&a.address)||6>a.address)return null;var c;switch(b.value){case "off":case "closed":c="02";
break;case "on":case "motion":case "open":c="01"}return c?a.address+c:null},_contains:xnm.aio.gateway.Util.contains,_getHexVal:xnm.aio.gateway.Util.getHexVal,_parseData:function(b,a){if(6>b.length)return null;var c=b.substr(0,6);if(a.address.toUpperCase()!=c.toUpperCase())return null;var c=b.substr(6).toUpperCase(),d={};switch(c){case "0001":d.value="on";break;case "0002":d.value="off";break;case "0101":d.value="up";break;case "0102":d.value="down";break;case "0003":d.value="stop";break;case "0002AAAA":d.value=
"dimTo";d.ext=0;break;default:"01AAAA"==c.substr(0,6)&&(d.value="dimTo",d.ext=parseInt(c.substr(6,2),16))}return d.value?d:null},generateActionCode:function(b,a){return this._buildData(null,a,b)},parseActionCode:function(b,a){return this._parseData(b,a)},DM:{TYPE:"R2",MAP:{"switch":{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}}],status:[{type:"enum",name:"status",ref:{value:"state",options:["off","on"]}}]},dimmer:{command:[{type:"enum",name:"off",ref:{value:"off"}},
{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"refresh",ref:{value:"refresh"}},{type:"int",name:"dim to",ref:{value:"dimTo",ext:"%d",extMeta:"0-100",step:"1"}}],status:[{type:"int",name:"status",ref:{value:"state",ext:"%d",extMeta:"0-100",step:"1"}}]},blind:{command:[{type:"enum",name:"up",ref:{value:"up"}},{type:"enum",name:"down",ref:{value:"down"}},{type:"enum",name:"stop",ref:{value:"stop"}},{type:"enum",name:"refresh",ref:{value:"refresh"}}]},motion:{status:[{type:"enum",name:"status",
ref:{value:"state",options:["off","motion"]}}],event:[{type:"enum",name:"off",ref:{value:"off"}},{type:"enum",name:"motion",ref:{value:"motion"}}],ipevt:[{type:"enum",name:"status",ref:{value:"state",options:["off","on"]}}]},dusk:{status:[{type:"enum",name:"status",ref:{value:"state",options:["off","on"]}}],event:[{type:"enum",name:"off",ref:{value:"off"}},{type:"enum",name:"on",ref:{value:"on"}}],ipevt:[{type:"enum",name:"status",ref:{value:"state",options:["off","on"]}}]},contact:{status:[{type:"enum",
name:"status",ref:{value:"state",options:["closed","open"]}}],event:[{type:"enum",name:"closed",ref:{value:"closed"}},{type:"enum",name:"open",ref:{value:"open"}}],ipevt:[{type:"enum",name:"status",ref:{value:"state",options:["closed","open"]}}]},button:{event:[{type:"enum",name:"off",ref:{value:"off"}},{type:"enum",name:"on",ref:{value:"on"}}],ipevt:[{type:"enum",name:"status",ref:{value:"state",options:["off","on"]}}]}},getGatewayDeviceType:function(b){if((b=xnm.aio.gateway.Gateway._getRFMode(b.version,
b.rfmode,b.gateway_vendor))&&!b.SUPPORTS868)return null;var a={type:this.TYPE,name:"RS2W",subtypes:[]};a.subtypes.push({id:"Switch",data:"switch"});a.subtypes.push({id:"Dimmer",data:"dimmer"});a.subtypes.push({id:"Blind",data:"blind"});var c=!1;b&&b.RS2MODE||(c=!0);a.subtypes.push({id:"Dusk Sensor",data:"dusk",rfmismatch:c});a.subtypes.push({id:"Motion Detector",data:"motion",rfmismatch:c});a.subtypes.push({id:"Contact Sensor",data:"contact",rfmismatch:c});a.subtypes.push({id:"Button",data:"button",
rfmismatch:c});return a},getCommandStatusMap:function(b){return b&&b.data?this.MAP[b.data]:null},getIPevtMap:function(b){return b.data?{ipevt:this.MAP[b.data].ipevt}:null},createDevice:function(b,a,c){a=xnm.aio.gateway.DM.DMError;var d=xnm.aio.gateway.DM.DMError.ERROR_CODE;b.address?b.data?(b=JSON.parse(JSON.stringify(b)),c(null,b)):c(new a(d.INVALID,"parameter data is invalid")):c(new a(d.INVALID,"parameter address is invalid"))},updateDevice:function(b,a,c){a=xnm.aio.gateway.DM.DMError;var d=xnm.aio.gateway.DM.DMError.ERROR_CODE;
b.address?b.data?(b=JSON.parse(JSON.stringify(b)),c(null,b)):c(new a(d.INVALID,"parameter data is invalid")):c(new a(d.INVALID,"parameter address is invalid"))},deleteDevice:function(b,a,c,d){d&&d(null,JSON.parse(JSON.stringify(a)));xnm.aio.gateway.systems.R2.delSensor(b,a.address,function(){})}}};
xnm.aio.gateway.systems.GQ={learn:function(b,a,c){var d=this;b._executeRequest("LearnSC",{type:this.DM.TYPE},null,function(a,b){if(a)c&&c(a);else if(b.CODE){var g=d._resolveAddress(b.CODE);c&&c(null,{address:g})}else c&&c(Error("response format invalid"))})},executeCommandCreator:function(b,a,c,d){a?c&&c.value?a&&a.address?this._executeCommand(b,a,c,d):d&&d(Error("it device address is empty")):d&&d(Error("it device command is empty")):d&&d(Error("it device is null"))},_resolveAddress:function(b){return b.substr(0,
8)},_executeCommand:function(b,a,c,d){(a=this._buildData(b,a,c))?b._executeRequest("SendSC",{type:this.DM.TYPE,data:a},null,function(a){d&&d(a)}):d&&d(Error("command format invalid"))},buildQuery:function(b,a,c){return(b=this._buildData(b,a,c))?{type:this.DM.TYPE,data:b,XC_FNC:"SendSC"}:null},_buildData:function(b,a,c){if(!a.address||!c)return null;switch(c.value){case "up":b="11";break;case "down":b="33";break;case "stop":b="55";break;default:return null}return a.address+b},_parseData:function(b,
a){if(2>b.length)return null;var c=b.substr(b.length-2),d=b.substr(0,b.length-2);if(a.address.toUpperCase()!=d.toUpperCase())return null;d={};switch(c){case "11":d.value="up";break;case "33":d.value="down";break;case "55":d.value="stop"}return d.value?d:null},generateActionCode:function(b,a){return this._buildData(null,a,b)},parseActionCode:function(b,a){return this._parseData(b,a)},DM:{TYPE:"GQ",MAP:{command:[{type:"enum",name:"up",ref:{value:"up"}},{type:"enum",name:"down",ref:{value:"down"}},{type:"enum",
name:"stop",ref:{value:"stop"}}]},getGatewayDeviceType:function(b){return{type:this.TYPE,name:"GreenteQ"}},getCommandStatusMap:function(b){return this.MAP},createDevice:function(b,a,c){a=xnm.aio.gateway.DM.DMError;var d=xnm.aio.gateway.DM.DMError.ERROR_CODE;b.address?(b=JSON.parse(JSON.stringify(b)),c(null,b)):c(new a(d.INVALID,"parameter address is invalid"))},updateDevice:function(b,a,c){a=xnm.aio.gateway.DM.DMError;var d=xnm.aio.gateway.DM.DMError.ERROR_CODE;b.address?(b=JSON.parse(JSON.stringify(b)),
c(null,b)):c(new a(d.INVALID,"parameter address is invalid"))}}};
xnm.aio.gateway.systems.SIAU={delSensor:function(b,a,c){b._executeRequest("delSIAU",{adr:a},{timeout:2E4},function(a){c&&c(a)})},learn:function(b,a,c){var d=this;b._executeRequest("LearnSC",{type:this.DM.TYPE},null,function(e,f){if(e)c&&c(e);else if(f.CODE){var g=d._resolveAddress(f.CODE);a.address=g;d.regist(b,a,function(a){a?c&&c(a):c&&c(null,{address:g})})}else c&&c(Error("response format invalid"))})},_resolveAddress:function(b){return b},regist:function(b,a,c){if(a&&a.address&&a.data){var d=
{type:this.DM.TYPE,adr:a.address};switch(a.data){case "window":d.config="012";"DKL"==a.subtype&&(d.config="021");break;case "door":d.config="333";break;case "glass":d.config="111";break;case "smoke":d.config="222"}b._executeRequest("addSIAU",d,null,function(a){c&&c(a)})}else c&&c(Error("regist device option foramt invalid"))},executeCommandCreator:function(b,a,c,d){a?c&&c.value?a&&a.address?this._executeCommand(b,a,c,d):d&&d(Error("it device address is empty")):d&&d(Error("it device command is empty")):
d&&d(Error("it device is null"))},handleStateCreator:function(b,a,c){return a&&a.value?(b=this._handleState(b,c))?b[a.value]:null:null},_executeCommand:function(b,a,c,d){switch(a.data){case "glass":b._executeRequest("SIAUGreset",null,null,function(a){d&&d(a)});break;default:d&&d(Error("no such command:"+c.value))}},buildQuery:function(b,a,c){switch(a.data){case "glass":return{XC_FNC:"SIAUGreset"};default:return null}},_handleState:function(b,a){if(!(a.type&&a.adr&&a.state&&b.address&&b.address.toLowerCase()==
a.adr.toLowerCase()))return null;var c=null;switch(a.type){case "SIAU":case "SIAUD":if(a.state&&2==a.state.length){c={};switch(a.state.charAt(0)){case "0":c.status="open";break;case "1":c.status="tilted";break;case "2":c.status="closed"}switch(a.state.charAt(1)){case "0":c.error="no_error";break;case "1":c.error="low_bat";break;case "2":c.error="timeout"}}return c;case "SIAUR":case "SIAUG":if(a.state&&2==a.state.length){c={};switch(a.state.charAt(0)){case "0":c.alarm="ok";break;case "1":c.alarm="alarm"}switch(a.state.charAt(1)){case "0":c.error=
"no_error";break;case "1":c.error="low_bat";break;case "2":c.error="timeout"}}return c;default:return null}},_handleUdpState:function(b,a){if(!a||!a.data||15>a.data.length||!b||!b.type||b.type.toUpperCase()!=this.DM.TYPE)return null;var c=a.data.substr(0,6),d=a.data.substr(9,3),e=a.data.substr(6,2);if(!b.address||c.toUpperCase()!=b.address.toUpperCase())return null;switch(d){case "111":if("glass"!=b.data)return null;d="SIAUG";break;case "222":if("smoke"!=b.data)return null;d="SIAUR";break;case "333":if("door"!=
b.data)return null;d="SIAUD";break;default:d="SIAU"}return this._handleState(b,{type:d,adr:c,state:e})},parseTriggerCode:function(b,a){if(!b||8>b.length||!a)return null;var c=b.substr(0,6),d=b.substr(6,2),e={};if(!a.address||a.address.toUpperCase()!=c.toUpperCase())return null;switch(a.data){case "window":case "door":switch(d.charAt(0)){case "0":e.value="open";break;case "1":e.value="tilted";break;case "2":e.value="closed"}break;case "smoke":case "glass":switch(d.charAt(0)){case "0":e.value="ok";
break;case "1":e.value="alarm"}}return e.value?e:null},generateTriggerCode:function(b,a){if(!(b&&b.value&&a&&a.address))return null;var c=a.address,d,e;switch(a.data){case "window":e="SIAU";case "door":e||(e="SIAUD");switch(b.value){case "open":d="0F";break;case "tilted":d="1F";break;case "closed":d="2F"}break;case "smoke":e||(e="SIAUR");case "glass":switch(e||(e="SIAUG"),b.value){case "alarm":d="1F";break;case "ok":d="0F"}}return c&&d?{type:e,code:c+d}:null},DM:{TYPE:"SIAU",MAP:{window:{status:[{type:"enum",
name:"status",ref:{value:"status",options:["closed","tilted","open"]}},{type:"enum",name:"error",ref:{value:"error",options:["no_error","timeout","low_bat"]}}],event:[{type:"enum",name:"closed",ref:{value:"closed"}},{type:"enum",name:"tilted",ref:{value:"tilted"}},{type:"enum",name:"open",ref:{value:"open"}}],ipevt:[{type:"enum",name:"status",ref:{value:"status",options:["closed","tilted","open"]}}]},door:{status:[{type:"enum",name:"status",ref:{value:"status",options:["closed","tilted","open"]}},
{type:"enum",name:"error",ref:{value:"error",options:["no_error","timeout","low_bat"]}}],event:[{type:"enum",name:"closed",ref:{value:"closed"}},{type:"enum",name:"tilted",ref:{value:"tilted"}},{type:"enum",name:"open",ref:{value:"open"}}],ipevt:[{type:"enum",name:"status",ref:{value:"status",options:["closed","tilted","open"]}}]},glass:{command:[{type:"enum",name:"reset",ref:{value:"reset"}}],status:[{type:"enum",name:"alarm",ref:{value:"alarm",options:["ok","alarm"]}},{type:"enum",name:"error",
ref:{value:"error",options:["no_error","low_bat","timeout"]}}],event:[{type:"enum",name:"alarm",ref:{value:"alarm"}},{type:"enum",name:"ok",ref:{value:"ok"}}],ipevt:[{type:"enum",name:"alarm",ref:{value:"alarm",options:["ok","alarm"]}}]},smoke:{status:[{type:"enum",name:"alarm",ref:{value:"alarm",options:["ok","alarm"]}},{type:"enum",name:"error",ref:{value:"error",options:["no_error","low_bat","timeout"]}}],event:[{type:"enum",name:"alarm",ref:{value:"alarm"}},{type:"enum",name:"ok",ref:{value:"ok"}}],
ipevt:[{type:"enum",name:"alarm",ref:{value:"alarm",options:["ok","alarm"]}}]}},getGatewayDeviceType:function(b){b={type:this.TYPE,name:"Siegenia-AUBI",subtypes:[]};b.subtypes.push({id:"Window Sensor",data:"window"});b.subtypes.push({id:"Door Sensor",data:"door"});b.subtypes.push({id:"Glass Sensor",data:"glass"});b.subtypes.push({id:"Smoke Detetor",data:"smoke"});return b},getCommandStatusMap:function(b){return b&&b.data?this.MAP[b.data]:null},getIPevtMap:function(b){return b.data&&this.MAP[b.data]?
{ipevt:this.MAP[b.data].ipevt}:null},getActionMap:function(){return{}},createDevice:function(b,a,c){a=xnm.aio.gateway.DM.DMError;var d=xnm.aio.gateway.DM.DMError.ERROR_CODE;b.address?b.data?(b=JSON.parse(JSON.stringify(b)),c(null,b)):c(new a(d.INVALID,"parameter data is invalid")):c(new a(d.INVALID,"parameter address is invalid"))},updateDevice:function(b,a,c){a=xnm.aio.gateway.DM.DMError;var d=xnm.aio.gateway.DM.DMError.ERROR_CODE;b.address?b.data?(b=JSON.parse(JSON.stringify(b)),c(null,b)):c(new a(d.INVALID,
"parameter data is invalid")):c(new a(d.INVALID,"parameter address is invalid"))},deleteDevice:function(b,a,c,d){d&&d(null,JSON.parse(JSON.stringify(a)));xnm.aio.gateway.systems.SIAU.delSensor(b,a.address,function(){})}}};
xnm.aio.gateway.systems.PE={learn:function(b,a,c){if(b){var d=this,e=[],d=this;this._getPEdevicesFromGateway(b,function(f,g){if(g&&8<=g.length)c&&c(Error("exceed maximum number of devices"));else{if(g)for(var h=0;h<g.length;h++)if(g[h]&&g[h].adr&&2<g[h].adr.length){var m=g[h].adr.substr(0,2);d._contains(e,m)||e.push(m)}a&&a.devices&&(h=d._getPEdevicesAddresses(a.devices))&&(e=e.concat(h));(h=d._findFreeAdr(e))?d._learn(b,h,c):c&&c(Error("pe address exceed 255"))}})}else c&&c(Error("gateway is null"))},
_contains:function(b,a){for(var c=0;c<b.length;c++)if(b[c]===a)return!0;return!1},_findFreeAdr:function(b){for(var a=1;256>a;){for(var c=!1,d=0;d<b.length;d++)if(b[d]&&parseInt(b[d],16)==a){c=!0;break}if(!c)break;a++}if(256==a)return null;for(a=a.toString(16);2>a.length;)a="0"+a;return a},_getPEdevicesAddresses:function(b){for(var a=[],c=0;c<b.length;c++)if(b[c]&&b[c].address&&2<b[c].address.length){var d=b[c].address.substr(0,2);this._contains(a,d)||a.push(d)}return a},_getPEdevicesFromGateway:function(b,
a){b._executeRequest("getStates",null,null,function(b,d){if(b)a(b);else{for(var e=[],f=0;f<d.length;f++)d[f]&&"PE"==d[f].type&&e.push(d[f]);a(null,e)}})},_learn:function(b,a,c){var d=this;b._executeRequest("LearnSC",{type:this.DM.TYPE,adr:a},null,function(a,b){if(a)c&&c(a);else if(b.CODE){var g=d._resolveAddress(b.CODE);c&&c(null,{address:g})}else c&&c(Error("response format invalid"))})},_resolveAddress:function(b){return b},delSensor:function(b,a,c){b._executeRequest("delSensor",{type:this.DM.TYPE,
adr:a},{timeout:2E4},function(a){c&&c(a)})},executeCommandCreator:function(b,a,c,d){a?c&&c.value?a&&a.address?this._executeCommand(b,a,c,d):d&&d(Error("it device address is empty")):d&&d(Error("it device command is empty")):d&&d(Error("it device is null"))},handleStateCreator:function(b,a,c){return a&&a.value?(b=this._handleState(b,c))?b[a.value]:null:null},_executeCommand:function(b,a,c,d){(a=this._buildData(b,a,c))?b._executeRequest("SendSC",{type:this.DM.TYPE,data:a},null,function(a){d&&d(a)}):
d&&d(Error("command format invalid"))},buildQuery:function(b,a,c){return(b=this._buildData(b,a,c))?{type:this.DM.TYPE,data:b,XC_FNC:"SendSC"}:null},_buildData:function(b,a,c){if(!a.address||8>a.address.length||!c)return null;switch(c.value){case "on":b="01";break;case "off":b="00";break;case "toggle":b="03";break;default:return null}return a.address.substr(0,2)+"05"+a.address.substr(2)+b},_handleState:function(b,a){if(!(a.type&&"pe"==a.type.toLowerCase()&&a.adr&&a.state&&b.address&&b.address.toLowerCase()==
a.adr.toLowerCase()))return null;var c=a.state.split(":");if(3!=c.length||0==c[0].length)return null;var d={};switch(c[2]){case "1":d.switchState="on";break;case "2":d.switchState="off";break;default:return null}c[0]&&(d.consumption=(parseInt(c[0],16)/10).toFixed(1));return d},_parseData:function(b,a){if(12>b.length)return null;var c=b.substr(10,2),d=b.substr(0,2)+b.substr(4,6);if(a.address.substr(0,8).toUpperCase()!=d.toUpperCase())return null;d={};switch(c){case "01":d.value="on";break;case "00":d.value=
"off";break;case "03":d.value="toggle"}return d.value?d:null},generateActionCode:function(b,a){return this._buildData(null,a,b)},parseActionCode:function(b,a){return this._parseData(b,a)},DM:{TYPE:"PE",MAP:{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}},{type:"enum",name:"toggle",ref:{value:"toggle"}}],status:[{type:"enum",name:"status",ref:{value:"switchState",options:["off","on"]}},{type:"float",name:"consumption",ref:{value:"consumption"}}]},getGatewayDeviceType:function(b){return(b=
xnm.aio.gateway.Gateway._getRFMode(b.version,b.rfmode,b.gateway_vendor))&&!b.SUPPORTS868?null:{type:this.TYPE,name:"EMS-PCA-301"}},getCommandStatusMap:function(){return this.MAP},createDevice:function(b,a,c){a=xnm.aio.gateway.DM.DMError;var d=xnm.aio.gateway.DM.DMError.ERROR_CODE;b.address?(b=JSON.parse(JSON.stringify(b)),c(null,b)):c(new a(d.INVALID,"parameter address is invalid"))},updateDevice:function(b,a,c){a=xnm.aio.gateway.DM.DMError;var d=xnm.aio.gateway.DM.DMError.ERROR_CODE;b.address?(b=
JSON.parse(JSON.stringify(b)),c(null,b)):c(new a(d.INVALID,"parameter address is invalid"))},deleteDevice:function(b,a,c,d){d&&d(null,JSON.parse(JSON.stringify(a)));xnm.aio.gateway.systems.PE.delSensor(b,a.address,function(){})}}};
xnm.aio.gateway.systems.FHT80b={regist:function(b,a,c){if(a&&a.address){var d=a.address.split(".");2>d.length?c&&c(Error("address foramt invalid")):(a=parseInt(d[0],16),d=parseInt(d[1],16),1>a||99<a||1>d||99<d?c&&c(Error("hc1 or hc2 out of range")):(a=this._getHexVal(a,2),d=this._getHexVal(d,2),b._executeRequest("AddFHT80b",{hc1:a,hc2:d},null,function(a){c&&c(a)})))}else c&&c(Error("regist device json foramt invalid"))},delSensor:function(b,a,c){a=a.split(".");b._executeRequest("delFHT80b",{hc1:a[0],
hc2:a[1]},{timeout:2E4},function(a){c&&c(a)})},executeCommandCreator:function(b,a,c,d){a?c&&c.value?a&&a.address?this._executeCommand(b,a,c,d):d&&d(Error("it device address is empty")):d&&d(Error("it device command is empty")):d&&d(Error("it device is null"))},handleStateCreator:function(b,a,c){return a&&a.value?(b=this._handleState(b,c))?b[a.value]:null:null},_handleState:function(b,a){if(!(a.type&&"fht80b"==a.type.toLowerCase()&&a.adr&&a.state&&b.address&&b.address.toLowerCase()==a.adr.toLowerCase()))return null;
var c=a.state.split(":");if(3!=c.length||0==c[0].length)return null;var d={};if(c[0]){switch(c[0].charAt(0)){case "A":d.mode="auto";break;case "M":d.mode="manu"}var e=parseInt(c[0].substr(1),16);d.setTemp=(e/10).toFixed(1)}c[1]&&(e=parseInt(c[1],16),d.currentTemp=(e/10).toFixed(1));if(c[2]){switch(c[2].charAt(0)){case "0":d.error="ok";break;case "E":d.error="error";break;case "I":d.error="init";break;case "B":d.error="battery_low"}if(5==c[2].length){switch(c[2].charAt(2)){case "0":d.window="closed";
break;case "1":d.window="open"}c=parseInt(c[2].substr(3),16);d.valve=c}}return d},_executeCommand:function(b,a,c,d){(a=this._buildParams(b,a,c))?b._executeRequest("SendFHT80b",a,null,function(a){d&&d(a)}):d&&d(Error("command format invalid"))},buildQuery:function(b,a,c){b=this._buildParams(b,a,c);if(!b)return null;b.XC_FNC="SendFHT80b";return b},_buildParams:function(b,a,c){a=a.address.split(".");if(2>a.length)return null;b=parseInt(a[0],16);a=parseInt(a[1],16);if(1>b||99<b||1>a||99<a)return null;
b={hc1:this._getHexVal(b,2),hc2:this._getHexVal(a,2)};switch(c.value){case "setManu":b.modus=0;break;case "setAuto":b.modus=1;break;case "up":b.t=1;break;case "down":b.t=0;break;case "open":b.tsoll=61;break;case "close":b.tsoll=11;break;case "tsoll":if(null==c.ext||"undefined"==typeof c.ext)return null;c=parseFloat(c.ext);6>c&&(c=6);30<c&&(c=30);b.tsoll=2*c;break;default:return null}return b},_getHexVal:xnm.aio.gateway.Util.getHexVal,generateActionCode:function(b,a){if(!(b&&b.value&&a&&a.address))return null;
var c=a.address.split(".");if(2>c.length)return null;var d=parseInt(c[0],16),c=parseInt(c[1],16);if(1>d||99<d||1>c||99<c)return null;var e=255,f=255;switch(b.value){case "setManu":e=0;break;case "setAuto":e=1;break;case "open":f=61;break;case "close":f=11;break;case "tsoll":if(null==b.ext||"undefined"==typeof b.ext)return null;f=parseFloat(b.ext);6>f&&(f=6);30<f&&(f=30);f*=2;break;default:return null}return this._getHexVal(d,2)+this._getHexVal(c,2)+this._getHexVal(e,2)+this._getHexVal(f,2)},parseActionCode:function(b,
a){if(!b||8>b.length||!a||!a.address)return null;var c=b.substr(0,2)+"."+b.substr(2,2);if(a.address.toUpperCase()!=c.toUpperCase())return null;var c=parseInt(b.substr(4,2),16),d=parseInt(b.substr(6,2),16),e={};0==c?e.value="setManu":1==c?e.value="setAuto":61==d?e.value="open":11==d?e.value="close":255!=d&&(e.value="tsoll",e.ext=(d/2).toFixed(1));return e.value?e:null},DM:{TYPE:"FHT80b",MAP:{command:[{type:"enum",name:"manu mode",ref:{value:"setManu"}},{type:"enum",name:"auto mode",ref:{value:"setAuto"}},
{type:"enum",name:"up",ref:{value:"up"}},{type:"enum",name:"down",ref:{value:"down"}},{type:"enum",name:"open",ref:{value:"open"}},{type:"enum",name:"close",ref:{value:"close"}},{type:"float",name:"set temperature",ref:{value:"tsoll",ext:"%f",extMeta:"6-30",step:"0.5",scale:"0.5"}}],status:[{type:"enum",name:"mode",ref:{value:"mode",options:["manu","auto"]}},{type:"float",name:"set temperature",ref:{value:"setTemp",ext:"%f",extMeta:"6-30",step:"0.5",scale:"0.5"}},{type:"float",name:"current temperature",
ref:{value:"currentTemp",ext:"%f",extMeta:"6-30",step:"0.5",scale:"0.5"}},{type:"enum",name:"error",ref:{value:"error",options:["ok","error","init","battery_low"]}},{type:"enum",name:"window state",ref:{value:"window",options:["closed","open"]}},{type:"int",name:"valve state",ref:{value:"valve"}}]},getGatewayDeviceType:function(b){b=xnm.aio.gateway.Gateway._getRFMode(b.version,b.rfmode,b.gateway_vendor);var a=!1;b&&b.FS20MODE||(a=!0);return{type:this.TYPE,name:"FHT80b",rfmismatch:a}},getCommandStatusMap:function(){return this.MAP},
getActionMap:function(){for(var b=JSON.parse(JSON.stringify(this.MAP)),a={command:[],status:b.status},c=0;c<b.command.length;c++)"up"!=b.command[c].ref.value&&"down"!=b.command[c].ref.value&&a.command.push(b.command[c]);return a},createDevice:function(b,a,c){a=xnm.aio.gateway.DM.DMError;var d=xnm.aio.gateway.DM.DMError.ERROR_CODE;b.address?(b=JSON.parse(JSON.stringify(b)),c(null,b)):c(new a(d.INVALID,"parameter address is invalid"))},updateDevice:function(b,a,c){a=xnm.aio.gateway.DM.DMError;var d=
xnm.aio.gateway.DM.DMError.ERROR_CODE;b.address?(b=JSON.parse(JSON.stringify(b)),c(null,b)):c(new a(d.INVALID,"parameter address is invalid"))},deleteDevice:function(b,a,c,d){d&&d(null,JSON.parse(JSON.stringify(a)));xnm.aio.gateway.systems.FHT80b.delSensor(b,a.address,function(){})}}};
xnm.aio.gateway.systems.FS20=function(){var b={pairing:function(a,b,d,e){var f;switch(b.data){case "switch":case "dimmer":f="off";break;case "shutter":f="off"}if(f){var g=b.address;g||(g=this.generateAddress(d));this._executeCommand(a,{sys:"aio",type:this.DM.TYPE,address:g,data:b.data},{value:f},function(a){e&&e(a,{address:g})})}else e&&e(Error("device type "+b.data+" do not support pairing"))},generateAddress:function(a){var b,d=!0,e=[];if(a)for(var f=a.length;f--;)a[f].address&&e.push(a[f].address);
for(;d;)b=this._getHexVal(Math.floor(80*Math.random()),2)+"."+this._getHexVal(Math.floor(80*Math.random()),2)+"."+this._getHexVal(Math.floor(80*Math.random()),2),b=b.toUpperCase(),d=this._contains(e,b);return b},addSensor:function(a,b,d){a._executeRequest("addSensor",{type:this.DM.TYPE,adr:b},{timeout:2E4},function(a){d&&d(a)})},delSensor:function(a,b,d){a._executeRequest("delSensor",{type:this.DM.TYPE,adr:b},{timeout:2E4},function(a){d&&d(a)})},learn:function(a,c,d){c||(c={});var e=this;c.timeout=
2E4;a._executeRequest("LearnSC",{type:this.DM.TYPE},c,function(c,g){if(c)d&&d(c);else if(g.CODE){var h=b._resolveAddress(g.CODE);e.regist(a,{address:h},function(a){d&&d(a,{address:h})})}else d&&d(Error("response format invalid"))})},_resolveAddress:function(a){return a.substr(0,2)+"."+a.substr(2,2)+"."+a.substr(4,2)},regist:function(a,b,d){if(b&&b.address){var e=this;if(3>b.address.split(".").length)return d&&d(Error("address format error")),null;var f=b.address.replace(/\./g,"");switch(b.data){case "switch":this._executeCommand(a,
b,{value:"toggle"},function(b){b?d&&d(b):e.addSensor(a,f,d)});break;case "dimmer":this._executeCommand(a,b,{value:"up"},function(b){b?d&&d(b):e.addSensor(a,f,d)});break;case "shutter":this._executeCommand(a,b,{value:"moveUp"},function(g){g?d&&d(g):e._executeCommand(a,b,{value:"moveDown"},function(b){b&&d&&d(b);e.addSensor(a,f,d)})});break;default:this.addSensor(a,f,d)}}else d&&d(Error("regist device option foramt invalid"))},executeCommandCreator:function(a,b,d,e){b?d&&d.value?b&&b.address?this._executeCommand(a,
b,d,e):e&&e(Error("it device address is empty")):e&&e(Error("it device command is empty")):e&&e(Error("it device is null"))},executeCommandIqontrol:function(a,b,d,e){b&&d&&(0==d.indexOf("dimTo")&&(d=d.replace(/dimTo/g,"")),d=d.replace(/%/g,""),this._executeCommand(a,b,{value:"dimTo",ext:d},e))},handleStateCreator:function(a,b,d){return b&&b.value?(a=this._handleState(a,d))?a[b.value]:null:null},_handleState:function(a,b){if(!b.type||"fs20"!=b.type.toLowerCase()||!b.adr||!b.state||a.address.replace(/\./g,
"").toLowerCase()!=b.adr.toLowerCase())return null;var d=b.state;if(0<b.state.indexOf(":"))var e=b.state.split(":");d=parseInt(e[0],16);switch(a.data){case "dimmer":switch(d){case 0:return{state:"off"};default:return{state:"on"}}default:switch(d){case 0:case 20:return{state:"off"};case 17:case 19:case 16:return{state:"on"};default:return null}}},_executeCommand:function(a,b,d,e){(b=this.buildQuery(a,b,d))?(d=b.XC_FNC,delete b.XC_FNC,a._executeRequest(d,b,null,function(a){e&&e(a)})):e&&e(Error("command invalid"))},
buildQuery:function(a,b,d){return(a=this._buildData(a,b,d))?{type:this.DM.TYPE,data:a,XC_FNC:"SendSC"}:null},_buildData:function(a,b,d){var e=b.address.split(".");if(3>e.length)return null;b=a="00";e=e[0]+e[1]+e[2];switch(d.value){case "on":a="10";break;case "off":a="00";break;case "toggle":a="12";break;case "restore":a="11";break;case "up":case "dimUp":case "moveUp":a="13";break;case "down":case "dimDown":case "moveDown":a="14";break;case "dimTo":d.ext=parseInt(d.ext);switch(d.ext){case 0:a="00";
break;case 10:a="02";break;case 20:a="03";break;case 30:a="05";break;case 40:a="06";break;case 50:a="08";break;case 60:a="09";break;case 70:a="0B";break;case 80:a="0D";break;case 90:a="0E";break;case 100:a="10";break;default:return null}break;case "offFor":case "onFor":case "restoreFor":switch(d.value){case "offFor":a="38";break;case "onFor":a="39";break;case "restoreFor":a="3A"}switch(d.ext){case "1s":b="03";break;case "5s":b="19";break;case "10s":b="29";break;case "15s":b="2E";break;case "30s":b=
"3E";break;case "45s":b="4A";break;case "1m":b="4E";break;case "2m":b="5F";break;case "5m":b="78";break;case "10m":b="88";break;case "15m":b="8D";break;case "30m":b="9D";break;case "45m":b="AA";break;case "60m":b="AD";break;case "120m":b="BE";break;case "180m":b="CA";break;case "240m":b="CD";break;default:return null}break;default:return null}return e+a+b},_handleUdpState:function(a,b){if(!(b&&b.data&&a&&a.address&&b.type)||b.type.toUpperCase()!=this.DM.TYPE&&"FS"!=b.type.toUpperCase()||!a.type||
a.type.toUpperCase()!=this.DM.TYPE||8>b.data.length||(b.data.substring(0,2)+"."+b.data.substring(2,4)+"."+b.data.substring(4,6)).toUpperCase()!=a.address.toUpperCase())return null;var d=b.data.substring(6,8);d&&(d=d.toUpperCase());var e;"00"==d||"14"==d||"38"==d?e="off":"11"==d||"13"==d||"10"==d||"39"==d||"3A"==d?e="on":"12"==d&&(e="toggle");return e?{state:e}:null},parseTriggerCode:function(a,b){if(!a||!b||!b.address)return null;if(!(10>a.length)){if((a.substr(0,2)+"."+a.substr(2,2)+"."+a.substr(4,
2)).toUpperCase()!=b.address.toUpperCase())return null;var d={};switch(a.substr(6,2)){case "10":d.value="on";break;case "00":d.value="off";break;case "12":d.value="toggle"}return d.value?d:null}},generateTriggerCode:function(a,b){if(!(a&&a.value&&b&&b.address))return null;var d=b.address.split(".").join(""),e;switch(a.value){case "on":e="10";break;case "off":e="00";break;case "toggle":e="12"}return e?d+e+"00":null},_parseData:function(a,b){if(10>a.length)return null;var d=a.substr(0,2)+"."+a.substr(2,
2)+"."+a.substr(4,2);if(b.address.toUpperCase()!=d.toUpperCase())return null;var d=a.substr(6,2).toUpperCase(),e=a.substr(8,2).toUpperCase(),f={};switch(d){case "10":f.value="on";break;case "00":f.value="off";break;case "12":f.value="toggle";break;case "11":f.value="restore";break;case "13":"dimmer"==b.data?f.value="dimUp":"shutter"==b.data&&(f.value="moveUp");break;case "14":"dimmer"==b.data?f.value="dimDown":"shutter"==b.data&&(f.value="moveDown");break;case "02":f.value="dimTo";f.ext=10;break;
case "03":f.value="dimTo";f.ext=20;break;case "05":f.value="dimTo";f.ext=30;break;case "06":f.value="dimTo";f.ext=40;break;case "08":f.value="dimTo";f.ext=50;break;case "09":f.value="dimTo";f.ext=60;break;case "0B":f.value="dimTo";f.ext=70;break;case "0D":f.value="dimTo";f.ext=80;break;case "0E":f.value="dimTo";f.ext=90;break;case "38":case "39":case "3A":switch("38"==d?f.value="offFor":"39"==d?f.value="onFor":"3A"==d&&(f.value="restoreFor"),e){case "03":f.ext="1s";break;case "19":f.ext="5s";break;
case "29":f.ext="10s";break;case "2E":f.ext="15s";break;case "3E":f.ext="30s";break;case "4A":f.ext="45s";break;case "4E":f.ext="1m";break;case "5F":f.ext="2m";break;case "78":f.ext="5m";break;case "88":f.ext="10m";break;case "8D":f.ext="15m";break;case "9D":f.ext="30m";break;case "AA":f.ext="45m";break;case "AD":f.ext="60m";break;case "BE":f.ext="120m";break;case "CA":f.ext="180m";break;case "CD":f.ext="240m"}}return f.value?f:null},generateActionCode:function(a,b){return this._buildData(null,b,
a)},parseActionCode:function(a,b){return this._parseData(a,b)}};b._contains=xnm.aio.gateway.Util.contains;b._getHexVal=xnm.aio.gateway.Util.getHexVal;b.DM={TYPE:"FS20",MAP:{"switch":{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}},{type:"enum",name:"toggle",ref:{value:"toggle"}},{type:"enum",name:"off for",ref:{value:"offFor",ext:"%e",extMeta:"1s 5s 10s 15s 30s 45s 1m 2m 5m 10m 15m 30m 45m 60m 120m 180m 240m".split(" ")}},{type:"enum",name:"on for",ref:{value:"onFor",
ext:"%e",extMeta:"1s 5s 10s 15s 30s 45s 1m 2m 5m 10m 15m 30m 45m 60m 120m 180m 240m".split(" ")}}],status:[{type:"enum",name:"status",ref:{value:"state",options:["off","on"]}}],event:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}},{type:"enum",name:"toggle",ref:{value:"toggle"}}],ipevt:[{type:"enum",name:"status",ref:{value:"state",options:["off","on","toggle"]}}]},dimmer:{command:[{type:"enum",name:"off",ref:{value:"off"}},{type:"enum",name:"toggle",ref:{value:"toggle"}},
{type:"enum",name:"dim up",ref:{value:"dimUp"}},{type:"enum",name:"dim down",ref:{value:"dimDown"}},{type:"enum",name:"restore",ref:{value:"restore"}},{type:"enum",name:"off for",ref:{value:"offFor",ext:"%e",extMeta:"1s 5s 10s 15s 30s 45s 1m 2m 5m 10m 15m 30m 45m 60m 120m 180m 240m".split(" ")}},{type:"enum",name:"on for",ref:{value:"onFor",ext:"%e",extMeta:"1s 5s 10s 15s 30s 45s 1m 2m 5m 10m 15m 30m 45m 60m 120m 180m 240m".split(" ")}},{type:"enum",name:"restore for",ref:{value:"restoreFor",ext:"%e",
extMeta:"1s 5s 10s 15s 30s 45s 1m 2m 5m 10m 15m 30m 45m 60m 120m 180m 240m".split(" ")}},{type:"int",name:"dim to",ref:{value:"dimTo",ext:"%d",extMeta:"10-100",scale:"10"}}],status:[{type:"enum",name:"status",ref:{value:"state",options:["off","on"]}}]},shutter:{command:[{type:"enum",name:"move up",ref:{value:"moveUp"}},{type:"enum",name:"move down",ref:{value:"moveDown"}}],status:[{type:"enum",name:"status",ref:{value:"state",options:["off","on"]}}]},motion:{status:[{type:"enum",name:"status",ref:{value:"state",
options:["off","on"]}}],event:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}}],ipevt:[{type:"enum",name:"status",ref:{value:"state",options:["off","on"]}}]},sensor:{status:[{type:"enum",name:"status",ref:{value:"state",options:["off","on"]}}],event:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}}],ipevt:[{type:"enum",name:"status",ref:{value:"state",options:["off","on"]}}]},button:{event:[{type:"enum",name:"on",ref:{value:"on"}},
{type:"enum",name:"off",ref:{value:"off"}}],ipevt:[{type:"enum",name:"status",ref:{value:"state",options:["off","on","toggle"]}}]}},getGatewayDeviceType:function(a){if((a=xnm.aio.gateway.Gateway._getRFMode(a.version,a.rfmode,a.gateway_vendor))&&!a.SUPPORTS868)return null;var b={type:this.TYPE,name:"FS20",subtypes:[]};b.subtypes.push({id:"Switch",data:"switch"});b.subtypes.push({id:"Dimmer",data:"dimmer"});b.subtypes.push({id:"Shutter",data:"shutter"});var d=!1;a&&a.FS20MODE||(d=!0);b.subtypes.push({id:"Button",
data:"button",rfmismatch:d});b.subtypes.push({id:"Motion Sensor",data:"motion",rfmismatch:d});b.subtypes.push({id:"General Sensor",data:"sensor",rfmismatch:d});return b},getCommandStatusMap:function(a){return a.data?this.MAP[a.data]:null},getIPevtMap:function(a){return a&&a.data&&this.MAP[a.data]?{ipevt:this.MAP[a.data].ipevt}:null},createDevice:function(a,b,d){b=xnm.aio.gateway.DM.DMError;var e=xnm.aio.gateway.DM.DMError.ERROR_CODE;a.address?a.data?(a=JSON.parse(JSON.stringify(a)),d(null,a)):d(new b(e.INVALID,
"parameter data is invalid")):d(new b(e.INVALID,"parameter address is invalid"))},updateDevice:function(a,b,d){b=xnm.aio.gateway.DM.DMError;var e=xnm.aio.gateway.DM.DMError.ERROR_CODE;a.address?a.data?(a=JSON.parse(JSON.stringify(a)),d(null,a)):d(new b(e.INVALID,"parameter data is invalid")):d(new b(e.INVALID,"parameter address is invalid"))},deleteDevice:function(a,b,d,e){e&&e(null,JSON.parse(JSON.stringify(b)));xnm.aio.gateway.systems.FS20.delSensor(a,b.address,function(){})}};return b}();
xnm.aio.gateway.systems.IT=function(){var b={pairing:function(a,b,d,e){var f;switch(b.data){case "switch":case "dimmer":f="on";break;case "bell":f="ring"}if(f){var g=b.address;g||(g=this.generateAddress(d));this._executeCommand(a,{sys:"aio",type:this.DM.TYPE,address:g,data:b.data},{value:f},function(a){e&&e(a,{address:g})})}else e&&e(Error("device type "+b.data+" do not support pairing"))},addSensor:function(a,b,d){a._executeRequest("addSensor",{type:this.DM.TYPE,adr:b},{timeout:2E4},function(a){d&&
d(a)})},delSensor:function(a,b,d){a._executeRequest("delSensor",{type:this.DM.TYPE,adr:b},{timeout:2E4},function(a){d&&d(a)})},generateAddress:function(a){var b,d=!0,e=[];if(a)for(var f=a.length;f--;)a[f].address&&e.push(a[f].address);for(;d;)b=this._getHexVal(Math.floor(57070*Math.random())+4369,4)+"008.0",d=this._contains(e,b);return b},learn:function(a,c,d){var e=this;a._executeRequest("LearnSC",{type:this.DM.TYPE},{timeout:2E4},function(c,g){if(c)d&&d(c);else if(g.CODE){var h=b._resolveAddress(g.CODE);
"object"==typeof h?d&&d(null,h):e.regist(a,{address:h},function(a){d&&d(a,{address:h})})}else d&&d(Error("response format invalid"))})},_resolveAddress:function(a){if(8==a.length){var b=parseInt(a.substr(6,1),16);3==(b&3)?(b&=-4,a={address:a.substr(0,6)+b+"."+a.substr(7,1),data:"bell"}):(b&=-2,a=a.substr(0,6)+b+"."+a.substr(7,1))}else a=parseInt(a.substr(0,2),16).toString(16)+"."+parseInt(a.substr(2,2),16).toString(16);return a},regist:function(a,b,d){b&&b.address?(b=b.address.replace(/\./g,""),this.addSensor(a,
b,d)):d&&d(Error("regist device option foramt invalid"))},executeCommandCreator:function(a,b,d,e){b?d&&d.value?b&&b.address?this._executeCommand(a,b,d,e):e&&e(Error("it device address is empty")):e&&e(Error("it device command is empty")):e&&e(Error("it device is null"))},executeCommandIqontrol:function(a,b,d,e){this._executeCommand(a,b,{value:d},e)},handleStateIqontrol:function(a,b){var d;switch(a.data){case "switch":d={value:"switchState"};break;case "door":d={value:"doorState"};break;case "window":d=
{value:"windowState"};break;case "dimmer":d={value:"dimmerState"};break;case "motion":d={value:"motionState"};break;case "sensor":d={value:"sensorState"}}d=this._handleState(a,d,b);var e,f;for(f in d)d.hasOwnProperty(f)&&(e=d[f]);f=b.state.split(":");"0E"==f[0]?e="on":"06"==f[0]&&(e="off");null!=e&&"undefined"!=typeof e&&(e={value:e});return e},handleStateCreator:function(a,b,d){return b&&b.value?(a=this._handleState(a,d))?a[b.value]:null:null},handleUdpStateIqontrol:function(a,b){var d=this._handleUdpState(a,
b);d&&"open"==d.value?d.value="off":d&&"closed"==d.value&&(d.value="on");return d},_handleState:function(a,b){if(!b.type||"it"!=b.type.toLowerCase()||!b.adr||!b.state||a.address.replace(/\./g,"").toLowerCase()!=b.adr.toLowerCase())return null;var d=b.state;0<b.state.indexOf(":")&&(d=b.state.split(":")[0]);var e;switch(a.data){case "bell":return null;case "door":case "window":"door"==a.data?e="doorState":"window"==a.data&&(e="windowState");if("0E"==d)d="closed";else if("06"==d)d="open";else return null;
break;default:if(e="switch"==a.data?"switchState":"dimmer"==a.data?"dimmerState":"motion"==a.data?"motionState":"button"==a.data?"state":"sensorState","0E"==d)d="on";else if("06"==d)d="off";else return null}var f={};f[e]=d;return f},_handleUdpState:function(a,b){if(!(b.type&&"it"==b.type.toLowerCase()&&b.data&&a.type&&"it"==a.type.toLowerCase()&&a.address))return null;var d,e;6==b.data.length?(d=b.data.charAt(1)+b.data.charAt(3),e=b.data.substr(4)+":00"):8==b.data.length&&(d=parseInt(b.data.substr(6,
1),16),e=d&1?"0E:00":"06:00",d&=-2,d=b.data.substr(0,6)+d+b.data.substr(7,1));if(!d||!e)return null;var f=a.address.replace(".","");return d.toLowerCase()!=f.toLowerCase()?null:"bell"==a.data?{ring:"true"}:this._handleState(a,{type:"IT",adr:d,state:e})},_executeCommand:function(a,b,d,e){(b=this._buildData(a,b,d))?a._executeRequest("SendSC",{type:this.DM.TYPE,data:b},null,function(a){e&&e(a)}):e&&e(Error("command format invalid"))},buildQuery:function(a,b,d){return(a=this._buildData(a,b,d))?{type:this.DM.TYPE,
data:a,XC_FNC:"SendSC"}:null},_buildData:function(a,b,d){a=b.address.split(".");if(2>a.length)return null;var e;if(1==a[0].length)switch(d.value){case "on":case "ring":e=a[0]+a[1]+"E";break;case "off":e=a[0]+a[1]+"6"}else if(7==a[0].length){e=null;b=parseInt(a[0].substr(6,1),16);b&=-2;switch(d.value){case "on":b|=1;break;case "off":break;case "ring":b|=3;break;case "dimTo":case "dimRaw":if("undefined"!=typeof d.ext&&null!=d.ext)if("number"==typeof d.ext)d=parseInt(d.ext);else if(d.ext.match(/^[-+]?[0-9]+$/))d=
parseInt(d.ext);else return null;else return null;0!=d&&(b|=1,10>=d?e="00":20>=d?e="10":30>=d?e="20":40>=d?e="30":50>=d?e="50":60>=d?e="70":70>=d?e="90":80>=d?e="B0":90>=d?e="D0":100>=d&&(e="F0"));break;default:return null}9<b&&(b=this._getHexVal(b,1));e=null!=e?a[0].substr(0,6)+b+a[1]+e:a[0].substr(0,6)+b+a[1]}return e}};b._contains=xnm.aio.gateway.Util.contains;b._getHexVal=xnm.aio.gateway.Util.getHexVal;b.parseTriggerCode=function(a,b){if(!b||!b.type||b.type.toUpperCase()!=this.DM.TYPE||!b.address)return null;
var d=null,e=null;if(3==a.length)"E"==a.charAt(2)||"e"==a.charAt(2)?d="on":"6"==a.charAt(2)&&(d="off"),e=a.charAt(0)+"."+a.charAt(1);else if(8==a.length)e=parseInt(a.substr(6,1),16),3==(e&3)?(d="ring",e&=-4):(d=e&1?"on":"off",e&=-2),e=a.substr(0,6)+e+"."+a.substr(7,1);else return null;if(b.address.toLowerCase()!=e.toLowerCase())return null;e={};switch(b.data){case "switch":case "motion":case "sensor":case "button":case "bell":e.value=d;break;case "door":case "window":e.value="on"==d?"closed":"open"}return e.value?
e:null};b.generateTriggerCode=function(a,b){if(!(a&&a.value&&b&&b.address))return null;var d={value:a.value};"open"==d.value?d.value="off":"closed"==d.value&&(d.value="on");return this._buildData(null,b,d)};b._parseData=function(a,b){if(!a||3!=a.length&&8!=a.length&&10!=a.length||!b||!b.address)return null;var d=b.address.split(".");if(2>d.length)return null;var e,f;1==d[0].length?e=d[0]+d[1]:7==d[0].length&&(f=parseInt(d[0].substr(6,1),16),f=3==(f&3)?f&-4:f&-2,e=d[0].substr(0,6)+f+d[1]);var g,h,
m;if(3==a.length)g=a.substr(0,2),h=parseInt(a.substr(2,1),16);else if(8==a.length||10==a.length)f=parseInt(a.charAt(6),16),3==(f&3)?(h=f&3,g=a.substr(0,6)+(f&-4)+a.charAt(7)):(h=f&1,g=a.substr(0,6)+(f&-2)+a.charAt(7)),10==a.length&&(m=a.substr(8,2));if(g.toUpperCase()!=e.toUpperCase())return null;d={};switch(h){case 3:d.value="ring";break;case 14:d.value="on";break;case 6:d.value="off";break;case 0:d.value="off";break;case 1:if(m)switch(d.value="dimTo",m.toUpperCase()){case "00":d.ext=0;break;case "10":d.ext=
10;break;case "20":d.ext=20;break;case "30":d.ext=30;break;case "50":d.ext=50;break;case "70":d.ext=60;break;case "90":d.ext=70;break;case "B0":d.ext=80;break;case "D0":d.ext=90;break;case "F0":d.ext=100}else d.value="on"}return d.value?d:null};b.generateActionCode=function(a,b){return this._buildData(null,b,a)};b.parseActionCode=function(a,b){return this._parseData(a,b)};b.DM={TYPE:"IT",MAP:{"switch":{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}}],status:[{type:"enum",
name:"status",ref:{value:"switchState",options:["off","on"]}}],event:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}}]},dimmer:{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}},{type:"int",name:"dim to",ref:{value:"dimTo",ext:"%d",extMeta:"0-100",scale:"10"}}],status:[{type:"enum",name:"status",ref:{value:"dimmerState",options:["off","on"]}}]},bell:{command:[{type:"enum",name:"ring",ref:{value:"ring"}}],event:[{type:"enum",
name:"ring",ref:{value:"ring"}}]},door:{status:[{type:"enum",name:"status",ref:{value:"doorState",options:["closed","open"]}}],event:[{type:"enum",name:"open",ref:{value:"open"}},{type:"enum",name:"closed",ref:{value:"closed"}}]},window:{status:[{type:"enum",name:"status",ref:{value:"windowState",options:["closed","open"]}}],event:[{type:"enum",name:"open",ref:{value:"open"}},{type:"enum",name:"closed",ref:{value:"closed"}}]},motion:{status:[{type:"enum",name:"status",ref:{value:"motionState",options:["off",
"on"]}}],event:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}}]},sensor:{status:[{type:"enum",name:"status",ref:{value:"sensorState",options:["off","on"]}}],event:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}}]},button:{event:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}}]}},getGatewayDeviceType:function(){var a={type:this.TYPE,name:"Intertechno",subtypes:[]};a.subtypes.push({id:"Switch",
data:"switch"});a.subtypes.push({id:"Dimmer",data:"dimmer"});a.subtypes.push({id:"Button",data:"button"});a.subtypes.push({id:"Door Bell",data:"bell"});a.subtypes.push({id:"Door Sensor",data:"door"});a.subtypes.push({id:"Window Sensor",data:"window"});a.subtypes.push({id:"Motion Sensor",data:"motion"});a.subtypes.push({id:"General Sensor",data:"sensor"});var b={type:this.TYPE,name:"COCO",subtypes:[]};b.subtypes.push({id:"Switch",data:"switch"});b.subtypes.push({id:"Dimmer",data:"dimmer"});b.subtypes.push({id:"Button",
data:"button"});b.subtypes.push({id:"Door Bell",data:"bell"});b.subtypes.push({id:"Door Sensor",data:"door"});b.subtypes.push({id:"Window Sensor",data:"window"});b.subtypes.push({id:"Motion Sensor",data:"motion"});b.subtypes.push({id:"General Sensor",data:"sensor"});var d={type:this.TYPE,name:"SmartWares",subtypes:[]};d.subtypes.push({id:"Switch",data:"switch"});d.subtypes.push({id:"Dimmer",data:"dimmer"});d.subtypes.push({id:"Button",data:"button"});d.subtypes.push({id:"Door Sensor",data:"door"});
d.subtypes.push({id:"Motion Sensor",data:"motion"});return[a,b,d]},getCommandStatusMap:function(a){return a.data?this.MAP[a.data]:null},getIPevtMap:function(a){if(!a.data)return null;var b={ipevt:this.MAP[a.data].status};"button"==a.data&&(b.ipevt=[{type:"enum",name:"status",ref:{value:"state",options:["off","on"]}}]);"bell"==a.data&&(b.ipevt=[{type:"enum",name:"ring",ref:{value:"ring",options:["ture"]}}]);return b},createDevice:function(a,b,d){b=xnm.aio.gateway.DM.DMError;var e=xnm.aio.gateway.DM.DMError.ERROR_CODE;
a.data?(a=JSON.parse(JSON.stringify(a)),d(null,a)):d(new b(e.INVALID,"parameter data is invalid"))},updateDevice:function(a,b,d){b=xnm.aio.gateway.DM.DMError;var e=xnm.aio.gateway.DM.DMError.ERROR_CODE;a.data?(a=JSON.parse(JSON.stringify(a)),d(null,a)):d(new b(e.INVALID,"parameter data is invalid"))},deleteDevice:function(a,b,d,e){e&&e(null,JSON.parse(JSON.stringify(b)));xnm.aio.gateway.systems.IT.delSensor(a,b.address,function(){})}};return b}();
xnm.aio.gateway.systems.CF3=function(){var b={_colorSeq:"F1D8AD 787AB8 3F3FCB 1A1AFF 0000FF 008FFF 00FFFF 00FF86 00FF00 7BFF00 FFFF00 FFAC00 FF5D00 FF0000 FF0086 FF00FF".split(" "),executeCommandCreator:function(a,b,d,e){b?d&&d.value?b&&b.address?this._executeCommand(a,b,d,e):e&&e(Error("cf3 device address is empty")):e&&e(Error("cf3 device command is empty")):e&&e(Error("cf3 device is null"))},regist:function(a,b,d){b&&b.address?a._executeRequest("addSensor",{type:this.DM.TYPE,adr:b.address},null,
function(a){d&&d(a)}):d&&d(Error("regist device option foramt invalid"))},_buildData:function(a,c,d){var e,f;switch(d.value){case "on":e="04";break;case "off":e="05";break;case "offSave":e="06";break;case "scene1":e="07";break;case "scene2":e="08";break;case "scene3":e="09";break;case "PrgUp":e="0A";break;case "PrgDown":e="0B";break;case "up":e="0E";break;case "down":e="0F";break;case "red":case "green":case "blue":case "white":switch(d.value){case "red":e="18";break;case "green":e="19";break;case "blue":e=
"1A";break;case "white":e="1B"}if(null==d.ext||"undefined"==typeof d.ext)return null;if("number"==typeof d.ext)a=parseInt(d.ext);else if(d.ext.match(/^[-+]?[0-9]+$/))a=parseInt(d.ext);else return null;a=Math.round(a/100*255);255<a&&(a=255);0>a&&(a=0);f=this._getHexVal(a,2);break;case "rgbS":case "rgb":e="02";if(!d.ext)return null;f=d.ext;break;case "bri":e="01";if(null==d.ext||"undefined"==typeof d.ext)return null;if("number"==typeof d.ext)a=parseInt(d.ext);else if(d.ext.match(/^[-+]?[0-9]+$/))a=
parseInt(d.ext);else return null;a=Math.round(a/100*255);255<a&&(a=255);4>a&&(a=4);f=this._getHexVal(a,2);break;case "colorUp":e="02";d=a._lastCF3colorSeq;if(null==d||"undefined"==typeof d)d=-1;d+=1;16<=d&&(d=0);a._lastCF3colorSeq=d;f=b._colorSeq[d];break;case "colorDown":e="02";d=a._lastCF3colorSeq;if(null==d||"undefined"==typeof d)d=-1;--d;0>d&&(d=15);a._lastCF3colorSeq=d;f=b._colorSeq[d]}return e?e+c.address+(f?f:""):null}};b._getHexVal=xnm.aio.gateway.Util.getHexVal;b._executeCommand=function(a,
b,d,e){(b=this._buildData(a,b,d))?a._executeRequest("SendSC",{type:this.DM.TYPE,data:b},null,function(a){e&&e(a)}):e&&e(Error("command format invalid"))};b.buildQuery=function(a,b,d){return(a=this._buildData(a,b,d))?{type:this.DM.TYPE,data:a,XC_FNC:"SendSC"}:null};b._parseData=function(a,b){if(!a||2>a.length||!b||!b.address)return null;var d=a.substr(0,2);if(a.length<b.address.length+2||a.substr(2,b.address.length).toUpperCase()!=b.address.toUpperCase())return null;var e;a.length>b.address.length+
2&&(e=a.substr(2+b.address.length));var f={};switch(d.toUpperCase()){case "04":f.value="on";break;case "05":f.value="off";break;case "06":f.value="offSave";break;case "07":f.value="scene1";break;case "08":f.value="scene2";break;case "09":f.value="scene3";break;case "0A":f.value="PrgUp";break;case "0B":f.value="PrgDown";break;case "0E":f.value="up";break;case "0F":f.value="down";break;case "18":case "19":case "1A":case "1B":"18"==d?f.value="red":"19"==d?f.value="green":"1A"==d?f.value="blue":"1B"==
d&&(f.value="white");if(!e)return null;e=100*parseInt(e,16)/255;f.ext=e;break;case "02":f.value="rgb";f.ext=e;break;case "01":f.value="bri",e=100*parseInt(e,16)/255,f.ext=e}return f.value?f:null};b.generateActionCode=function(a,b){return this._buildData(null,b,a)};b.parseActionCode=function(a,b){return this._parseData(a,b)};b.DM={TYPE:"CF3",MAP:{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}},{type:"enum",name:"off & save",ref:{value:"offSave"}},{type:"enum",
name:"user effect 1",ref:{value:"scene1"}},{type:"enum",name:"user effect 2",ref:{value:"scene2"}},{type:"enum",name:"user effect 3",ref:{value:"scene3"}},{type:"enum",name:"effect up",ref:{value:"PrgUp"}},{type:"enum",name:"effect down",ref:{value:"PrgDown"}},{type:"enum",name:"brightness up",ref:{value:"up"}},{type:"enum",name:"brightness down",ref:{value:"down"}},{type:"enum",name:"color up",ref:{value:"colorUp"}},{type:"enum",name:"color down",ref:{value:"colorDown"}},{type:"rgb",name:"rgb color",
ref:{value:"rgb",ext:"%s"}},{type:"int",name:"red",ref:{value:"red",ext:"%d",extMeta:"0-100"}},{type:"int",name:"green",ref:{value:"green",ext:"%d",extMeta:"0-100"}},{type:"int",name:"blue",ref:{value:"blue",ext:"%d",extMeta:"0-100"}},{type:"int",name:"brightness",ref:{value:"bri",ext:"%d",extMeta:"0-100"}}]},getGatewayDeviceType:function(a){return{type:this.TYPE,name:"Barthelme CHROMOFLEX 3"}},getCommandStatusMap:function(){return this.MAP},getActionMap:function(){for(var a=JSON.parse(JSON.stringify(this.MAP)),
b={command:[]},d=0;d<a.command.length;d++)"colorUp"!=a.command[d].ref.value&&"colorDown"!=a.command[d].ref.value&&b.command.push(a.command[d]);return b},createDevice:function(a,b,d){b=xnm.aio.gateway.DM.DMError;var e=xnm.aio.gateway.DM.DMError.ERROR_CODE;a.address?(a=JSON.parse(JSON.stringify(a)),d(null,a)):d(new b(e.INVALID,"parameter address is invalid"))},updateDevice:function(a,b,d){b=xnm.aio.gateway.DM.DMError;var e=xnm.aio.gateway.DM.DMError.ERROR_CODE;a.address?(a=JSON.parse(JSON.stringify(a)),
d(null,a)):d(new b(e.INVALID,"parameter address is invalid"))}};return b}();
xnm.aio.gateway.systems.CF4={_colorSeq:"F1D8ADFF 787AB8A9 3F3FCB6B 1A1AFF00 0000FF00 008FFF00 00FFFF00 00FF8600 00FF0000 7BFF0000 FFFF0000 FFAC0000 FF5D0000 FF000000 FF008600 FF00FF00".split(" "),executeCommandCreator:function(b,a,c,d){a?c&&c.value?a&&a.address?this._executeCommand(b,a,c,d):d&&d(Error("cf3 device address is empty")):d&&d(Error("cf3 device command is empty")):d&&d(Error("cf3 device is null"))},regist:function(b,a,c){a&&a.address?b._executeRequest("addSensor",{type:this.DM.TYPE,adr:"0004"+
a.address},{timeout:2E3},function(a){c&&c(a)}):c&&c(Error("regist device option foramt invalid"))},_buildData:function(b,a,c){var d,e;switch(c.value){case "on":d="04";break;case "off":d="05";break;case "offSave":d="06";break;case "scene1":d="07";break;case "scene2":d="08";break;case "scene3":d="09";break;case "PrgUp":d="0A";break;case "PrgDown":d="0B";break;case "up":d="0E";break;case "down":d="0F";break;case "norColCh":d="10";break;case "medColCh":d="11";break;case "sloColCh":d="12";break;case "blob":d=
"13";break;case "lsd":d="14";break;case "fire":d="15";break;case "flashes":d="17";break;case "bursts":d="16";break;case "red":case "green":case "blue":case "white":switch(c.value){case "red":d="18";break;case "green":d="19";break;case "blue":d="1A";break;case "white":d="1B"}if(null==c.ext||"undefined"==typeof c.ext)return null;if("number"==typeof c.ext)b=parseInt(c.ext);else if(c.ext.match(/^[-+]?[0-9]+$/))b=parseInt(c.ext);else return null;b=Math.round(b/100*255);255<b&&(b=255);0>b&&(b=0);e=this._getHexVal(b,
2);break;case "rgbwS":case "rgbw":d="02";if(!c.ext)return null;e=c.ext;break;case "bri":d="01";if(null==c.ext||"undefined"==typeof c.ext)return null;if("number"==typeof c.ext)b=parseInt(c.ext);else if(c.ext.match(/^[-+]?[0-9]+$/))b=parseInt(c.ext);else return null;b=Math.round(b/100*255);255<b&&(b=255);4>b&&(b=4);e=this._getHexVal(b,2);break;case "colorTemp":d="02";if(null==c.ext||"undefined"==typeof c.ext)return null;if("number"==typeof c.ext)b=parseInt(c.ext);else if(c.ext.match(/^[-+]?[0-9]+$/))b=
parseInt(c.ext);else return null;b=Math.round(b/100*255);e=this._getHexVal(b,2)+this._getHexVal(255-b,2)+"0000";break;case "colorUp":d="02";c=b._lastCF4colorSeq;if(null==c||"undefined"==typeof c)c=-1;c+=1;16<=c&&(c=0);b._lastCF4colorSeq=c;e=this._colorSeq[c];break;case "colorDown":d="02";c=b._lastCF4colorSeq;if(null==c||"undefined"==typeof c)c=-1;--c;0>c&&(c=15);b._lastCF4colorSeq=c;e=this._colorSeq[c]}return d?d+a.address+(e?e:""):null},_getHexVal:xnm.aio.gateway.Util.getHexVal,_executeCommand:function(b,
a,c,d){(a=this._buildData(b,a,c))?b._executeRequest("SendSC",{type:this.DM.TYPE,data:a},null,function(a){d&&d(a)}):d&&d(Error("command format invalid"))},buildQuery:function(b,a,c){return(b=this._buildData(b,a,c))?{type:this.DM.TYPE,data:b,XC_FNC:"SendSC"}:null},_parseData:function(b,a){if(!b||2>b.length||!a||!a.address)return null;var c=b.substr(0,2);if(b.length<a.address.length+2||b.substr(2,a.address.length).toUpperCase()!=a.address.toUpperCase())return null;var d;b.length>a.address.length+2&&
(d=b.substr(2+a.address.length));var e={};switch(c.toUpperCase()){case "04":e.value="on";break;case "05":e.value="off";break;case "06":e.value="offSave";break;case "07":e.value="scene1";break;case "08":e.value="scene2";break;case "09":e.value="scene3";break;case "0A":e.value="PrgUp";break;case "0B":e.value="PrgDown";break;case "0E":e.value="up";break;case "0F":e.value="down";break;case "10":e.value="norColCh";break;case "11":e.value="medColCh";break;case "12":e.value="sloColCh";break;case "13":e.value=
"blob";break;case "14":e.value="lsd";break;case "15":e.value="fire";break;case "17":e.value="flashes";break;case "16":e.value="bursts";break;case "18":case "19":case "1A":case "1B":"18"==c?e.value="red":"19"==c?e.value="green":"1A"==c?e.value="blue":"1B"==c&&(e.value="white");if(!d)return null;d=100*parseInt(d,16)/255;e.ext=d;break;case "02":e.value="rgbw";e.ext=d;break;case "01":e.value="bri",d=100*parseInt(d,16)/255,e.ext=d}return e.value?e:null},generateActionCode:function(b,a){return this._buildData(null,
a,b)},parseActionCode:function(b,a){return this._parseData(b,a)},DM:{TYPE:"CF4",MAP:{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}},{type:"enum",name:"off & save",ref:{value:"offSave"}},{type:"enum",name:"user effect 1",ref:{value:"scene1"}},{type:"enum",name:"user effect 2",ref:{value:"scene2"}},{type:"enum",name:"user effect 3",ref:{value:"scene3"}},{type:"enum",name:"effect up",ref:{value:"PrgUp"}},{type:"enum",name:"effect down",ref:{value:"PrgDown"}},
{type:"enum",name:"brightness up",ref:{value:"up"}},{type:"enum",name:"brightness down",ref:{value:"down"}},{type:"enum",name:"color up",ref:{value:"colorUp"}},{type:"enum",name:"color down",ref:{value:"colorDown"}},{type:"enum",name:"normal Col Ch",ref:{value:"norColCh"}},{type:"enum",name:"medium Col Ch",ref:{value:"medColCh"}},{type:"enum",name:"slow Col Ch",ref:{value:"sloColCh"}},{type:"enum",name:"blob",ref:{value:"blob"}},{type:"enum",name:"LSD",ref:{value:"lsd"}},{type:"enum",name:"fire",
ref:{value:"fire"}},{type:"enum",name:"flashes",ref:{value:"flashes"}},{type:"enum",name:"bursts",ref:{value:"bursts"}},{type:"rgbw",name:"rgb+white color",ref:{value:"rgbw",ext:"%s"}},{type:"int",name:"brightness",ref:{value:"bri",ext:"%d",extMeta:"0-100"}},{type:"int",name:"red",ref:{value:"red",ext:"%d",extMeta:"0-100"}},{type:"int",name:"green",ref:{value:"green",ext:"%d",extMeta:"0-100"}},{type:"int",name:"blue",ref:{value:"blue",ext:"%d",extMeta:"0-100"}},{type:"int",name:"white",ref:{value:"white",
ext:"%d",extMeta:"0-100"}},{type:"int",name:"color temperature",ref:{value:"colorTemp",ext:"%d",extMeta:"0-100"}}]},getGatewayDeviceType:function(b){return{type:this.TYPE,name:"Barthelme CHROMOFLEX PRO"}},getCommandStatusMap:function(){return this.MAP},getActionMap:function(){for(var b=JSON.parse(JSON.stringify(this.MAP)),a={command:[]},c=0;c<b.command.length;c++)"colorUp"!=b.command[c].ref.value&&"colorDown"!=b.command[c].ref.value&&"colorTemp"!=b.command[c].ref.value&&a.command.push(b.command[c]);
return a},createDevice:function(b,a,c){a=xnm.aio.gateway.DM.DMError;var d=xnm.aio.gateway.DM.DMError.ERROR_CODE;b.address?(b=JSON.parse(JSON.stringify(b)),c(null,b)):c(new a(d.INVALID,"parameter address is invalid"))},updateDevice:function(b,a,c){a=xnm.aio.gateway.DM.DMError;var d=xnm.aio.gateway.DM.DMError.ERROR_CODE;b.address?(b=JSON.parse(JSON.stringify(b)),c(null,b)):c(new a(d.INVALID,"parameter address is invalid"))}}};
xnm.aio.gateway.systems.QA={learn:function(b,a,c){a||(a={});a.timeout=2E4;this._ensureAesKey(b,function(d){d?c&&c(d):b._executeRequest("LearnSC",{type:"QA"},a,function(a,b){a?c&&c(a):b.adr&&b.version?c&&c(null,{address:b.adr}):c&&c(Error("response format invalid"))})})},regist:function(b,a,c){if(a&&a.address&&a.data){var d=a.address+"01";switch(a.data){case "esco-door-type1":case "esco-door-type2":case "esco-door-type3":d+="01";break;case "esco-window-type1":case "esco-window-type2":case "esco-window-type3":d+=
"02";break;case "esco-shutter-type1":case "esco-shutter-type2":d+="03";break;case "esco-universal-type1":case "esco-universal-type2":case "esco-universal-type3":d+="04"}b._executeRequest("SendSC",{type:"QA",data:d},{timeout:2E4},function(a){c&&c(a)})}else c&&c(Error("regist device option foramt invalid"))},unregist:function(b,a,c){a&&a.address&&a.data?b._executeRequest("delSensor",{type:"QA",adr:a.address},{timeout:2E4},function(a){c&&c(a)}):c&&c(Error("unregist device option foramt invalid"))},setupTimeSettings:function(b,
a,c,d){if(a&&a.address&&c){a=a.address+"02";var e=c.upTime?c.upTime:300,e=Math.round(10*parseFloat(e));3E3<e&&(e=3E3);0>=e&&(e=3E3);var e=xnm.aio.gateway.Util.getHexVal(e,4),f=c.downTime?c.downTime:300,f=Math.round(10*parseFloat(f));3E3<f&&(f=3E3);0>=f&&(f=3E3);f=xnm.aio.gateway.Util.getHexVal(f,4);c=c.switchTime?c.switchTime:1;c=parseInt(c);255<c&&(c=255);0>=c&&(c=1);c=xnm.aio.gateway.Util.getHexVal(c,2);b._executeRequest("SendSC",{type:"QA",data:a+(e+f+c)},{timeout:2E4},function(a){d&&d(a)})}else d&&
d(Error("setup up/down time device option foramt invalid"))},getTimeSettings:function(b,a,c){a&&a.address?b._executeRequest("GetStates",{config:1},{timeout:2E4},function(b,e){if(b)c&&c(b);else{for(var f=300,g=300,h=1,m=0;m<e.length;m++)if(e[m]&&"QA"==e[m].type&&e[m].adr&&0==e[m].adr.toLowerCase().indexOf(a.address.toLowerCase())&&e[m].state){var l=e[m].state.split(":");3<=l.length&&(l=l[1],10<=l.length&&(f=parseInt(l.substr(0,4),16)/10,g=parseInt(l.substr(4,4),16)/10,h=parseInt(l.substr(8,2),16)))}c&&
c(null,{upTime:f,downTime:g,switchTime:h})}}):c&&c(Error("get time settings device option foramt invalid"))},executeCommandCreator:function(b,a,c,d){a?c&&c.value?a&&a.address?this._executeCommand(b,a,c,d):d&&d(Error("it device address is empty")):d&&d(Error("it device command is empty")):d&&d(Error("it device is null"))},handleStateCreator:function(b,a,c){return a&&a.value?(b=this._handleState(b,c))?b[a.value]:null:null},parseTriggerCode:function(b,a){if(!a||!a.type||a.type.toUpperCase()!=this.DM.TYPE||
!a.address)return null;var c=b.substr(0,6);if(a.address.toLowerCase()!=c.toLowerCase())return null;var c={},d=b.substr(8);"300000"==d?c.value="evtClose":"101000"==d?c.value="evtOpenA":"202000"==d&&(c.value="evtOpenB");return c.value?c:null},generateTriggerCode:function(b,a){if(!(b&&b.value&&a&&a.address))return null;var c;switch(b.value){case "evtOpenA":c="01101000";break;case "evtOpenB":c="01202000";break;case "evtClose":c="01300000";break;default:return null}return a.address+c},generateActionCode:function(b,
a){return this._buildData(null,a,b)},parseActionCode:function(b,a){return this._parseData(b,a)},_executeCommand:function(b,a,c,d){(a=this._buildData(b,a,c))?b._executeRequest("SendSC",{type:this.DM.TYPE,data:a},null,function(a){!a&&c&&"moveTo"==c.value?setTimeout(function(){d&&d()},3E3):d&&d(a)}):d&&d(Error("command format invalid"))},buildQuery:function(b,a,c){return(b=this._buildData(b,a,c))?{type:this.DM.TYPE,data:b,XC_FNC:"SendSC"}:null},_buildData:function(b,a,c){var d;switch(c.value){case "open":d=
"0C";break;case "close":d="0D";break;case "stop":d="0B";break;case "permanentOpenOff3":d="0703";break;case "permanentOpenOn3":d="0603";break;case "permanentOpenOff4":d="0704";break;case "permanentOpenOn4":d="0604";break;case "stepUp":d="0903E8";break;case "stepDown":d="0A03E8";break;case "R4Unlock5s":d="10041388";break;case "R4Unlock1s":d="100403E8";break;case "R3Unlock5s":d="10031388";break;case "R3Unlock1s":d="100303E8";break;case "0":d="0E00";break;case "10":d="0E0A";break;case "20":d="0E14";break;
case "30":d="0E1E";break;case "40":d="0E28";break;case "50":d="0E32";break;case "60":d="0E3C";break;case "70":d="0E46";break;case "80":d="0E50";break;case "90":d="0E5A";break;case "100":d="0E64";break;case "moveTo":if("undefined"==typeof c.ext||null==c.ext)return null;d=parseInt(c.ext);if(isNaN(d))return null;100<d&&(d=100);0>d&&(d=0);d="0E"+xnm.aio.gateway.Util.getHexVal(d,2)}d&&(d=a.address+d);return d},_parseData:function(b,a){if(!b||8>b.length||!a||!a.address||a.substr(0,6).toLowerCase()!=a.address.toLowerCase())return null;
var c=a.substr(6,2),d,e={};8<b.length&&(d=a.substr(8));c=parseInt(c,16);switch(c){case 6:if("03"==d)e.value="permanentOpenOn3";else if("04"==d)e.value="permanentOpenOn4";else return null;break;case 7:if("03"==d)e.value="permanentOpenOff3";else if("04"==d)e.value="permanentOpenOff4";else return null;break;case 9:e.value="stepUp";break;case 10:e.value="stepDown";break;case 11:e.value="stop";break;case 12:e.value="open";break;case 13:e.value="close";break;case 14:if(!d)return null;e.value="moveTo";e.ext=
parseInt(d,16);break;case 16:if(!d||6>d.length)return null;c=d.substr(0,2);d=parseInt(d.substr(2));if("03"==c)c="R3";else if("04"==c)c="R4";else return null;e.value=c+"Unlock"+d+"s"}return e.value?e:null},_handleState:function(b,a){if(!(b.address&&b.data&&"QA"==b.type&&a.type&&"qa"==a.type.toLowerCase()&&a.adr&&a.state)||b.address.toLowerCase()!=a.adr.toLowerCase())return null;var c={},d=a.state,e=!1;if(0<a.state.indexOf(":")){var f=a.state.split(":"),d=f[0],e=f[1]&&"FF"==f[1].toLowerCase();c.timeout=
e}switch(b.data){case "esco-door-type1":case "esco-door-type2":case "esco-door-type3":case "esco-window-type1":case "esco-window-type2":d=d.substring(4,6);c.state="closed";"00"!=d&&(c.state="open");"esco-window-type1"==b.data&&(c.position=parseInt(f[0].substring(6,8),16));break;case "esco-window-type3":c.state="closed";c.position=parseInt(f[0].substring(6,8),16);c.state="open";break;case "esco-shutter-type1":case "esco-shutter-type2":c.state="off";c.position=parseInt(f[0].substring(6,8),16);break;
default:return null}return c},_handleUdpState:function(b,a){if(!a||!a.data||14>a.data.length||!b||!b.address||!b.type||b.type.toUpperCase()!=this.DM.TYPE)return null;var c=a.data.substr(0,6);if(c.toUpperCase()!=b.address.toUpperCase())return null;var d=a.data.substr(6),c=this._handleState(b,{type:"QA",adr:c,state:d}),e=d.substr(4,2),e=parseInt(e,16),d=d.substr(2,2),d=parseInt(d,16);0!=(d&16)?0!=(e&16)?c.event="OpenA":0==(e&48)&&(c.event="Close"):0!=(d&32)&&(0!=(e&32)?c.event="OpenB":0==(e&48)&&(c.event=
"Close"));return c},_ensureAesKey:function(b,a){var c=this;this._getAesKey(b,function(d,e){d||e?a&&a(d):(e=c._genAesKey(),c._setAesKey(b,e,a))})},_genAesKey:function(){for(var b="",a=0;16>a;a++)b+=xnm.aio.gateway.Util.getHexVal(Math.floor(255*Math.random()),2);return b},_setAesKey:function(b,a,c){b._executeRequest("AddSensor",{type:"QA",adr:"FF",data:a},{timeout:2E4},function(a){c&&c(a)})},_getAesKey:function(b,a){b._getSI(function(b,d){d&&"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF"==d.QK&&(d.QK=null);a&&
a(b,d&&d.QK?d.QK:null)})},DM:{TYPE:"QA",MAP:{"esco-door-type1":{command:[{type:"enum",name:"open",ref:{value:"R4Unlock1s"}}],status:[{type:"enum",name:"status",ref:{value:"state",options:["open","closed"]}}],event:[{type:"enum",name:"open A",ref:{value:"evtOpenA"}},{type:"enum",name:"open B",ref:{value:"evtOpenB"}},{type:"enum",name:"close",ref:{value:"evtClose"}}],ipevt:[{type:"enum",name:"event",ref:{value:"event",options:["OpenA","OpenB","Close"]}}]},"esco-door-type2":{command:[{type:"enum",name:"permanent open on",
ref:{value:"permanentOpenOn3"}},{type:"enum",name:"permanent open off",ref:{value:"permanentOpenOff3"}},{type:"enum",name:"open",ref:{value:"R4Unlock1s"}}],status:[{type:"enum",name:"status",ref:{value:"state",options:["open","closed"]}}],event:[{type:"enum",name:"open A",ref:{value:"evtOpenA"}},{type:"enum",name:"open B",ref:{value:"evtOpenB"}},{type:"enum",name:"close",ref:{value:"evtClose"}}],ipevt:[{type:"enum",name:"event",ref:{value:"event",options:["OpenA","OpenB","Close"]}}]},"esco-door-type3":{command:[{type:"enum",
name:"open",ref:{value:"R4Unlock5s"}}],status:[{type:"enum",name:"status",ref:{value:"state",options:["open","closed"]}}],event:[{type:"enum",name:"open A",ref:{value:"evtOpenA"}},{type:"enum",name:"open B",ref:{value:"evtOpenB"}},{type:"enum",name:"close",ref:{value:"evtClose"}}],ipevt:[{type:"enum",name:"event",ref:{value:"event",options:["OpenA","OpenB","Close"]}}]},"esco-window-type1":{command:[{type:"enum",name:"open",ref:{value:"open"}},{type:"enum",name:"close",ref:{value:"close"}},{type:"enum",
name:"stop",ref:{value:"stop"}},{type:"int",name:"move to",ref:{value:"moveTo",ext:"%d",extMeta:"0-100"}}],status:[{type:"enum",name:"status",ref:{value:"state",options:["closed","open"]}},{type:"int",name:"position",ref:{value:"position",extMeta:"0-100"}}],event:[{type:"enum",name:"open A",ref:{value:"evtOpenA"}},{type:"enum",name:"open B",ref:{value:"evtOpenB"}},{type:"enum",name:"close",ref:{value:"evtClose"}}],ipevt:[{type:"enum",name:"event",ref:{value:"event",options:["OpenA","OpenB","Close"]}}]},
"esco-window-type2":{command:[{type:"enum",name:"open",ref:{value:"R3Unlock1s"}},{type:"enum",name:"close",ref:{value:"R4Unlock1s"}}],status:[{type:"enum",name:"status",ref:{value:"state",options:["closed","open"]}}],event:[{type:"enum",name:"open A",ref:{value:"evtOpenA"}},{type:"enum",name:"open B",ref:{value:"evtOpenB"}},{type:"enum",name:"close",ref:{value:"evtClose"}}],ipevt:[{type:"enum",name:"event",ref:{value:"event",options:["OpenA","OpenB","Close"]}}]},"esco-window-type3":{command:[{type:"enum",
name:"open",ref:{value:"open"}},{type:"enum",name:"close",ref:{value:"close"}},{type:"enum",name:"stop",ref:{value:"stop"}},{type:"int",name:"move to",ref:{value:"moveTo",ext:"%d",extMeta:"0-100"}}],status:[{type:"enum",name:"status",ref:{value:"state",options:["closed","open"]}},{type:"int",name:"position",ref:{value:"position",extMeta:"0-100"}}]},"esco-shutter-type1":{command:[{type:"enum",name:"open",ref:{value:"open"}},{type:"enum",name:"close",ref:{value:"close"}},{type:"enum",name:"stop",ref:{value:"stop"}},
{type:"int",name:"move to",ref:{value:"moveTo",ext:"%d",extMeta:"0-100"}}],status:[{type:"enum",name:"status",ref:{value:"state",options:["off","middle","on"]}},{type:"int",name:"position",ref:{value:"position",extMeta:"0-100"}}]},"esco-shutter-type2":{command:[{type:"enum",name:"step up",ref:{value:"stepUp"}},{type:"enum",name:"step down",ref:{value:"stepDown"}},{type:"enum",name:"stop",ref:{value:"stop"}},{type:"int",name:"move to",ref:{value:"moveTo",ext:"%d",extMeta:"0-100"}}],status:[{type:"enum",
name:"status",ref:{value:"state",options:["off","middle","on"]}},{type:"int",name:"position",ref:{value:"position",extMeta:"0-100"}}]},"esco-universal-type1":{command:[{type:"enum",name:"on Relais 3",ref:{value:"permanentOpenOn3"}},{type:"enum",name:"off Relais 3",ref:{value:"permanentOpenOff3"}},{type:"enum",name:"on Relais 4",ref:{value:"permanentOpenOn4"}},{type:"enum",name:"off Relais 4",ref:{value:"permanentOpenOff4"}}]},"esco-universal-type2":{command:[{type:"enum",name:"impulse Relais 3",ref:{value:"R3Unlock1s"}},
{type:"enum",name:"impulse Relais 4",ref:{value:"R4Unlock1s"}}]},"esco-universal-type3":{command:[{type:"enum",name:"on",ref:{value:"R3Unlock1s"}},{type:"enum",name:"off",ref:{value:"R4Unlock1s"}}]}},getGatewayDeviceType:function(b){var a=require("xnm.aio.gateway.js").resolveGateway(b);if(!a||!a.sysSupported("QA")||(b=xnm.aio.gateway.Gateway._getRFMode(b.version,b.rfmode,b.gateway_vendor))&&!b.SUPPORTS868)return null;b={type:this.TYPE,name:"esco qlever",subtypes:[]};b.subtypes.push({id:"Door Type 1",
data:"esco-door-type1"});b.subtypes.push({id:"Door Type 2",data:"esco-door-type2"});b.subtypes.push({id:"Door Type 3",data:"esco-door-type3"});b.subtypes.push({id:"Window Type 1",data:"esco-window-type1"});b.subtypes.push({id:"Window Type 2",data:"esco-window-type2"});b.subtypes.push({id:"Window Type 3",data:"esco-window-type3"});b.subtypes.push({id:"Shutter Type 1",data:"esco-shutter-type1"});b.subtypes.push({id:"Shutter Type 2",data:"esco-shutter-type1"});b.subtypes.push({id:"Universal Type 1",
data:"esco-universal-type1"});b.subtypes.push({id:"Universal Type 2",data:"esco-universal-type2"});b.subtypes.push({id:"Universal Type 3",data:"esco-universal-type3"});return b},getCommandStatusMap:function(b){return b.data?this.MAP[b.data]:null},getIPevtMap:function(b){return b.data&&this.MAP[b.data]?{ipevt:this.MAP[b.data].ipevt}:null},createDevice:function(b,a,c){a=xnm.aio.gateway.DM.DMError;var d=xnm.aio.gateway.DM.DMError.ERROR_CODE;b.address?b.data?(b=JSON.parse(JSON.stringify(b)),c(null,b)):
c(new a(d.INVALID,"parameter data is invalid")):c(new a(d.INVALID,"parameter address is invalid"))},updateDevice:function(b,a,c){a=xnm.aio.gateway.DM.DMError;var d=xnm.aio.gateway.DM.DMError.ERROR_CODE;b.address?b.data?(b=JSON.parse(JSON.stringify(b)),c(null,b)):c(new a(d.INVALID,"parameter data is invalid")):c(new a(d.INVALID,"parameter address is invalid"))},deleteDevice:function(b,a,c,d){d&&d(null,JSON.parse(JSON.stringify(a)));xnm.aio.gateway.systems.QA.unregist(b,a,function(){})}}};
xnm.aio.gateway.systems.Code={executeCommandCreator:function(b,a,c,d){if(a)if(a.ircodes&&a.ircodes.codes)if(c&&c.value){var e=this._rebuildDevice(a);a=this._findIRCode(c,a);null==a||"undefined"==typeof a?d&&d(Error("code device has no command "+c.value)):this._executeCommand(b,e,a,d)}else d&&d(Error("code device command is empty"));else d&&d(Error("code device has no codes"));else d&&d(Error("code device is null"))},_executeCommand:function(b,a,c,d){a=this._buildParam(c,a);b._executeRequest("Send2",
a,null,function(a){d&&d(a)})},buildQuery:function(b,a,c){if(!(a&&a.ircodes&&a.ircodes.codes&&c&&c.value))return null;b=this._rebuildDevice(a);a=this._findIRCode(c,a);if(null==a||"undefined"==typeof a)return null;a=this._buildParam(a,b);a.XC_FNC="Send2";return a},_findIRCode:function(b,a){for(var c=a.ircodes.codes,d,e=0;e<c.length;e++)if(c[e].key==b.value){d=c[e].code;break}return d},_rebuildDevice:function(b){var a={sys:b.sys,type:b.type},c=b.address;b=b.data;if(c&&-1!=c.indexOf(":")){var d=c.split(":");
2<=d.length&&(b=d[0].toLowerCase(),c=d[1])}a.address=c;a.data=b;return a},_buildParam:function(b,a){var c={code:b},d=null,e=null;switch(a.data){case "ir":e=a.address;d="00";break;case "rf":e="00",d=a.address}e&&(c.ir=e);d&&(c.rf=d);return c},learn:function(b,a,c){a||(a={});a.freq&&(a.freq=a.freq.replace(".",""));b._executeRequest("Learn",a,{timeout:2E4},function(a,b){a?c&&c(a):b.CODE?c&&c(null,{code:b.CODE}):c&&c(Error("response format invalid"))})},getShortCode:function(b){var a=null;18<b.length&&
(a=b.substr(4,2),a+=b.substr(18+8*parseInt(b.substr(16,2),16)));return a},generateActionCode:function(b,a){if(!(b&&b.value&&a&&a.ircodes&&a.ircodes.codes))return null;var c=this._rebuildDevice(a),d=this._findIRCode(b,a);return this._buildParam(d,c)},parseActionCode:function(b,a){if(!b||!b.code||!a)return null;if(a.ircodes&&a.ircodes.codes){var c=this._rebuildDevice(a),c=this._buildParam(b.code,c);if(b.ir&&(!c.ir||c.ir.toUpperCase()!=b.ir.toUpperCase())||b.rf&&(!c.rf||c.rf.toUpperCase()!=b.rf.toUpperCase()))return null;
for(var d,c=a.ircodes.codes,e=0;e<c.length;e++)if(c[e].code&&c[e].code.toUpperCase()==b.code.toUpperCase()){d=c[e].key;break}return d?{value:d}:null}},DM:{TYPE:"CODE",getGatewayDeviceType:function(){var b={type:this.TYPE,name:"IR/RF Code",addresses:[]};b.addresses.push({id:"Internal blaster",adr:"IR:01"});b.addresses.push({id:"Output 1",adr:"IR:02"});b.addresses.push({id:"Output 2",adr:"IR:04"});b.addresses.push({id:"Output 3",adr:"IR:08"});for(var a=2;6>a;a++){b.addresses.push({id:"Extender "+(a-
1),adr:"RF:0"+a});for(var c=1;4>c;c++)b.addresses.push({id:"Extender "+(a-1)+" (Output "+c+")",adr:"RF:"+c+a})}b.addresses.push({id:"433 Extender",adr:"RF:01"});return b},getCommandStatusMap:function(b){var a={command:[]};if(b&&b.ircodes&&b.ircodes.codes){for(var c=0;c<b.ircodes.codes.length;c++){var d=b.ircodes.codes[c];a.command.push({type:"enum",name:d.key,ref:{value:d.key}})}return a}return null}}};
xnm.aio.gateway.systems.FX3={learn:function(b,a,c){var d=this;b._executeRequest("LearnSC",{type:this.DM.TYPE},null,function(a,b){if(a)c&&c(a);else if(b.CODE){var g=d._resolveAddress(b.CODE);c&&c(null,g)}else c&&c(Error("response format invalid"))})},teach:function(b,a,c){a.address&&a.layer&&a.code?(a=("01"+a.address+a.layer+a.code).toUpperCase(),b._executeRequest("SendSC",{type:this.DM.TYPE,data:a},null,function(a){c&&c(a)})):c&&c(Error("options invalid"))},_resolveAddress:function(b){if(10>b.length)return null;
var a=b.substr(2,4),c=b.substr(6,2);b=b.substr(8,2);return{address:a,layer:c,code:b}},executeCommandCreator:function(b,a,c,d){a?c&&c.value?this._executeCommand(b,a,c,d):d&&d(Error("it device command is empty")):d&&d(Error("in device is null"))},_executeCommand:function(b,a,c,d){(a=this._buildData(b,a,c))?b._executeRequest("SendSC",{type:this.DM.TYPE,data:a},null,function(a){d&&d(a)}):d&&d(Error("command format invalid"))},buildQuery:function(b,a,c){return(b=this._buildData(b,a,c))?{type:this.DM.TYPE,
data:b,XC_FNC:"SendSC"}:null},_buildData:function(b,a,c){if(!c)return null;a=c.value.indexOf("@");if(-1==a)return null;b=c.value.substr(0,a);a=c.value.substr(a+1);if(!b||!a)return null;if("%d"==a){if("undefined"==typeof c.ext||null==c.ext)return null;a=xnm.aio.gateway.Util.getHexVal(parseInt(c.ext),2)}return("01"+b+a).toUpperCase()},_parseData:function(b,a,c){if(10>b.length)return null;a=b.substr(2,4).toUpperCase();var d=b.substr(6,2).toUpperCase(),e=b.substr(8).toUpperCase();"00"==d&&c&&"65"!=e&&
"66"!=e&&(e="%d");return"%d"!=e?{value:a+d+"@"+e}:{value:a+d+"@"+e,ext:parseInt(b.substr(8).toUpperCase(),16)}},generateActionCode:function(b,a){return this._buildData(null,a,b)},parseActionCode:function(b,a,c){var d=!1;c&&c.value&&-1!=c.value.indexOf("%d")&&(d=!0);return this._parseData(b,a,d)},DM:{TYPE:"FX3",getGatewayDeviceType:function(){var b={type:this.TYPE,name:"Schalk",subtypes:[]};b.subtypes.push({id:"Switch",data:"switch"});b.subtypes.push({id:"Blind",data:"blind"});b.subtypes.push({id:"Dimmer",
data:"dimmer"});b.subtypes.push({id:"Push Button",data:"button"});b.subtypes.push({id:"Gerneral",data:"general"});return b},getCommandStatusMap:function(b){var a={command:[]};if(b&&b.functions&&b.functions.codes)for(var c=0;c<b.functions.codes.length;c++){var d=b.functions.codes[c],e=d.address,f=d.layer,g=d.code;e&&f&&g&&("dimmer"==g?(a.command.push({type:"enum",name:"dimUp",ref:{value:e+f+"@65"}}),a.command.push({type:"enum",name:"dimDown",ref:{value:e+f+"@66"}}),a.command.push({type:"int",name:"dimTo",
ref:{value:e+f+"@%d",ext:"%d"}})):a.command.push({type:"enum",name:d.key,ref:{value:e+f+"@"+g}}))}return a},createDevice:function(b,a,c){a=xnm.aio.gateway.DM.DMError;var d=xnm.aio.gateway.DM.DMError.ERROR_CODE;b.data?(b=JSON.parse(JSON.stringify(b)),c(null,b)):c(new a(d.INVALID,"parameter data is invalid"))},updateDevice:function(b,a,c){a=xnm.aio.gateway.DM.DMError;var d=xnm.aio.gateway.DM.DMError.ERROR_CODE;b.data?(b=JSON.parse(JSON.stringify(b)),c(null,b)):c(new a(d.INVALID,"parameter data is invalid"))}}};
xnm.aio.gateway.systems.BK={delSensor:function(b,a,c){b._executeRequest("delSensor",{type:this.DM.TYPE,adr:a},{timeout:2E4},function(a){c&&c(a)})},pairing:function(b,a,c,d){if(a){a=a.address;var e=this;a?this.learn(b,{address:a},d):this.generateAddress(b,c,function(a,c){a?d&&d(a):e.learn(b,{address:c},d)})}else d&&d(Error("device json is null"))},unpairing:function(b,a,c,d){if(a){var e=a.address;if(e){var f=null;1==c.length&&e==c[0].address&&(f=e.substr(2));var g=this;this._executeCommand(b,a,{value:"signOut"},
function(a){a?d&&d(a):f?g.delSensor(b,f,d):d&&d()})}else d&&d(Error("device address is null"))}else d&&d(Error("device json is null"))},generateAddress:function(b,a,c){var d=null,e={};if(a)for(var f=a.length;f--;)if(a[f].address&&6<=a[f].address.length){var g=a[f].address.substr(0,2).toUpperCase(),h=a[f].address.substr(2,6).toUpperCase();e[h]||(e[h]=["01","02","03","04","05"]);g=e[h].indexOf(g);-1!=g&&e[h].splice(g,1)}for(var m in e)if(e.hasOwnProperty(m)&&(a=e[m])&&0<a.length){d=a[0]+m;break}d?c&&
c(null,d):xnm.aio.gateway.Admin.getBeckerSerial(b,function(a,b){if(a)c&&c(a);else{var d=xnm.aio.gateway.Util.getHexVal(parseInt(b),6);c&&c(null,"01"+d.toUpperCase())}})},learn:function(b,a,c){!a||!a.address||8>a.address.length?c&&c(Error("address invalid")):b._executeRequest("LearnSC",{type:this.DM.TYPE,adr:a.address},null,function(b){b?c&&c(b):c&&c(null,{address:a.address})})},executeCommandCreator:function(b,a,c,d){a?c&&c.value?this._executeCommand(b,a,c,d):d&&d(Error("it device command is empty")):
d&&d(Error("in device is null"))},_executeCommand:function(b,a,c,d){(a=this._buildData(b,a,c))?b._executeRequest("SendSC",{type:this.DM.TYPE,data:a},null,function(a){d&&d(a)}):d&&d(Error("command format invalid"))},buildQuery:function(b,a,c){return(b=this._buildData(b,a,c))?{type:this.DM.TYPE,data:b,XC_FNC:"SendSC"}:null},_buildData:function(b,a,c){if(!c&&!c.value||!a&&!a.address)return null;b=a.address;a=null;switch(c.value){case "moveDown":a="00";break;case "moveUp":a="01";break;case "stop":a="02";
break;case "pos1":a="03";break;case "pos2":a="04";break;case "moveDown3s":a="05";break;case "moveUp3s":a="06";break;case "signOut":a="07";break;case "briUp":a="08";break;case "briDown":a="09";break;default:return null}return("01"+b+a).toUpperCase()},_parseData:function(b,a){if(12>b.length)return null;b.substr(2,8).toUpperCase();var c={};switch(b.substr(10,2).toUpperCase()){case "00":c.value="moveDown";break;case "01":c.value="moveUp";break;case "02":c.value="stop";break;case "03":c.value="pos1";break;
case "04":c.value="pos2";break;case "05":c.value="moveDown3s";break;case "06":c.value="moveUp3s";case "07":c.value="signOut";case "08":c.value="briUp";case "09":c.value="briDown"}return c.value?c:null},generateActionCode:function(b,a){return this._buildData(null,a,b)},parseActionCode:function(b,a){return this._parseData(b,a)},DM:{TYPE:"BK",MAP:{"switch":{command:[{type:"enum",name:"on",ref:{value:"moveUp"}},{type:"enum",name:"off",ref:{value:"moveDown"}}]},blind:{command:[{type:"enum",name:"up",ref:{value:"moveUp3s"}},
{type:"enum",name:"down",ref:{value:"moveDown3s"}},{type:"enum",name:"stop",ref:{value:"stop"}},{type:"enum",name:"position 1",ref:{value:"pos1"}},{type:"enum",name:"position 2",ref:{value:"pos2"}},{type:"enum",name:"step up",ref:{value:"moveUp"}},{type:"enum",name:"step down",ref:{value:"moveDown"}}]},dimmer:{command:[{type:"enum",name:"on",ref:{value:"moveUp3s"}},{type:"enum",name:"off",ref:{value:"stop"}},{type:"enum",name:"max brightness",ref:{value:"pos1"}},{type:"enum",name:"middle brightness",
ref:{value:"pos2"}},{type:"enum",name:"up",ref:{value:"briUp"}},{type:"enum",name:"down",ref:{value:"briDown"}}]}},getGatewayDeviceType:function(){var b={type:this.TYPE,name:"Becker Centronic",subtypes:[]};b.subtypes.push({id:"Blind",data:"blind"});b.subtypes.push({id:"Dimmer",data:"dimmer"});return b},getCommandStatusMap:function(b){return b.data?this.MAP[b.data]:null},createDevice:function(b,a,c){a=xnm.aio.gateway.DM.DMError;var d=xnm.aio.gateway.DM.DMError.ERROR_CODE;b.data?(b=JSON.parse(JSON.stringify(b)),
c(null,b)):c(new a(d.INVALID,"parameter data is invalid"))},updateDevice:function(b,a,c){a=xnm.aio.gateway.DM.DMError;var d=xnm.aio.gateway.DM.DMError.ERROR_CODE;b.data?(b=JSON.parse(JSON.stringify(b)),c(null,b)):c(new a(d.INVALID,"parameter data is invalid"))},deleteDevice:function(b,a,c,d){d&&d(null,JSON.parse(JSON.stringify(a)));xnm.aio.gateway.systems.BK.delSensor(b,a.address,function(){})}}};
xnm.aio.gateway.systems.WR={delSensor:function(b,a,c){b._executeRequest("delSensor",{type:this.DM.TYPE,adr:a},{timeout:2E4},function(a){c&&c(a)})},learn:function(b,a,c){var d=this;b._getSI(function(e,f){e?c&&c(e):f&&f.WIR&&f.WIR.ADR&&"FFFFFF"!=f.WIR.ADR?d._learn(b,a,c):xnm.aio.gateway.Admin.V5.getInfo(b,function(e,f){if(e)c&&c(e);else if(f&&f.mac){var m=f.mac,m=m.replace(/-/g,""),m=m.substr(6);b._executeRequest("setConfig",{sys:"WR",adr:m},null,function(e,f){e?c&&c(e):d._learn(b,a,c)})}else c&&c(Error("no valid mac address"))})})},
_learn:function(b,a,c){var d=this;b._executeRequest("LearnSC",{type:this.DM.TYPE},{timeout:2E4},function(e,f){if(e)c&&c(e);else{var g=f.adr,h=f.deviceType,m="blind";switch(h){case "01":m="blind";break;case "04":m="motor";break;case "08":m="switch";break;case "09":m="remote"}"08"==h?d._handleMultiChannelDevice(b,a,f,function(a,b){c&&c(a,b)}):c&&c(null,[{address:g,data:m,subtype:a.subtype}])}})},_handleMultiChannelDevice:function(b,a,c,d){b=c.adr.substr(0,6);c.adr.substr(6,2);var e=[];switch(a.subtype){case "eAKTOR-S2":e.push({address:b+
"01",data:"switch",subtype:a.subtype});e.push({address:b+"02",data:"switch",subtype:a.subtype});break;case "eAKTOR-S4":e.push({address:b+"01",data:"switch",subtype:a.subtype});e.push({address:b+"02",data:"switch",subtype:a.subtype});e.push({address:b+"03",data:"switch",subtype:a.subtype});e.push({address:b+"04",data:"switch",subtype:a.subtype});break;default:e.push({address:c.adr,data:"switch",subtype:a.subtype})}d&&d(null,e)},executeCommandCreator:function(b,a,c,d){a?c&&c.value?this._executeCommand(b,
a,c,d):d&&d(Error("it device command is empty")):d&&d(Error("in device is null"))},_executeCommand:function(b,a,c,d){(a=this._buildData(b,a,c))?b._executeRequest("SendSC",{type:this.DM.TYPE,data:a},null,function(a){d&&d(a)}):d&&d(Error("command format invalid"))},buildQuery:function(b,a,c){return(b=this._buildData(b,a,c))?{type:this.DM.TYPE,data:b,XC_FNC:"SendSC"}:null},handleStateCreator:function(b,a,c){return a&&a.value?(b=this._handleState(b,c))?b[a.value]:null:null},_handleState:function(b,a){if(!(a&&
a.type&&"wr"==a.type.toLowerCase()&&a.adr&&a.state)||6>a.state.length||!(b&&b.type&&"wr"==b.type.toLowerCase()&&b.address&&b.data)||b.address.toLowerCase()!=a.adr.toLowerCase())return null;var c="blind"==b.data?"01":null;if(a.state.substr(0,2)!=c)return null;var d=parseInt(a.state.substr(2,2),16),c=parseInt(a.state.substr(4,2),16),d={state:d};d.failure=c&1?"true":"false";d.overload=c&1?"true":"false";d.overheat=c&1?"true":"false";return d},_buildData:function(b,a,c){if(!(c&&c.value&&a&&a.address&&
a.data))return null;b=a.address;a=null;switch(c.value){case "moveUp":a="01";break;case "moveDown":a="02";break;case "stop":a="03";break;case "moveTo":a="07";if("undefined"==typeof c.ext||null==c.ext)return null;c=parseInt(c.ext);0>c&&(c=0);100<c&&(c=100);a+=xnm.aio.gateway.Util.getHexVal(c,2);break;case "on":a="01";break;case "off":a="02";break;default:return null}return("01"+b+"01"+a).toUpperCase()},_parseData:function(b,a){if(!(a&&a.type&&"wr"==a.type.toLowerCase()&&a.address&&a.data&&b)||14>b.length)return null;
var c=b.substr(2,8);if(a.address.toLowerCase()!=c.toLowerCase())return null;c={};switch(b.substr(12,2).toUpperCase()){case "01":c.value="blind"==a.data||"motor"==a.data?"moveUp":"on";break;case "02":c.value="blind"==a.data||"motor"==a.data?"moveDown":"off";break;case "03":c.value="stop";break;case "07":if(16>b.length)return null;var d=b.substr(14,2);c.ext=parseInt(d,16);c.value="moveTo"}return c.value?c:null},generateActionCode:function(b,a){return this._buildData(null,a,b)},parseActionCode:function(b,
a){return this._parseData(b,a)},DM:{TYPE:"WR",MAP:{eWICKLER:{command:[{type:"enum",name:"move up",ref:{value:"moveUp"}},{type:"enum",name:"move down",ref:{value:"moveDown"}},{type:"enum",name:"stop",ref:{value:"stop"}},{type:"int",name:"move to",ref:{value:"moveTo",ext:"%d",extMeta:"0-100"}}],status:[{type:"int",name:"state",ref:{value:"state"}},{type:"enum",name:"over heat",ref:{value:"overheat",options:["true","false"]}}],ipevt:[{type:"int",name:"state",ref:{value:"state"}}]},eUHR:{command:[{type:"enum",
name:"move up",ref:{value:"moveUp"}},{type:"enum",name:"move down",ref:{value:"moveDown"}},{type:"enum",name:"stop",ref:{value:"stop"}}]},"eAKTOR-S":{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}}]},"eAKTOR-M":{command:[{type:"enum",name:"move up",ref:{value:"moveUp"}},{type:"enum",name:"move down",ref:{value:"moveDown"}}]}},getGatewayDeviceType:function(b){var a=require("xnm.aio.gateway.js").resolveGateway(b);if(!a||!a.sysSupported("WR"))return null;
a=xnm.aio.gateway.Gateway._getRFMode(b.version,b.rfmode,b.gateway_vendor);b=!1;a&&a.WIRMODE||(b=!0);a={type:this.TYPE,name:"WIR elektronik",subtypes:[]};a.subtypes.push({id:"eWICKLER",data:"blind",subtype:"eWICKLER",rfmismatch:b});a.subtypes.push({id:"eUHR",data:"blind",subtype:"eUHR",rfmismatch:b});a.subtypes.push({id:"eAKTOR Schaltaktor",data:"switch",subtype:"eAKTOR-S",rfmismatch:b});a.subtypes.push({id:"eAKTOR Rohrmotor",data:"motor",subtype:"eAKTOR-M",rfmismatch:b});a.subtypes.push({id:"eAKTOR Schaltaktor 2 Kan\u00e4le",
data:"switch",subtype:"eAKTOR-S2",rfmismatch:b});a.subtypes.push({id:"eAKTOR Schaltaktor 4 Kan\u00e4le",data:"switch",subtype:"eAKTOR-S4",rfmismatch:b});return a},getCommandStatusMap:function(b){if(!b)return null;switch(b.data){case "blind":return"eUHR"==b.subtype?this.MAP.eUHR:this.MAP.eWICKLER;case "motor":return this.MAP["eAKTOR-M"];case "switch":return this.MAP["eAKTOR-S"];default:return null}},createDevice:function(b,a,c){a=xnm.aio.gateway.DM.DMError;var d=xnm.aio.gateway.DM.DMError.ERROR_CODE;
b.data?(b=JSON.parse(JSON.stringify(b)),c(null,b)):c(new a(d.INVALID,"parameter data is invalid"))},updateDevice:function(b,a,c){a=xnm.aio.gateway.DM.DMError;var d=xnm.aio.gateway.DM.DMError.ERROR_CODE;b.data?(b=JSON.parse(JSON.stringify(b)),c(null,b)):c(new a(d.INVALID,"parameter data is invalid"))},deleteDevice:function(b,a,c,d){d&&d(null,JSON.parse(JSON.stringify(a)));xnm.aio.gateway.systems.WR.delSensor(b,a.address,function(){})}}};
xnm.aio.gateway.systems.DY2={MOTOR_STATUS:"standby running sleeping deeply_sleeping error re_set pair_avaliable adjustment_of_limit_setting 1st_up_limit_setting 2nd_down_limit_setting".split(" "),RUNNING_STATUS:"stop up down jog_up jog_down rotating_reminder stop_@1st_up_limit stop_@2nd_down_limit stop_@3rd_intermediate_position".split(" "),HALL_STATUS:"normal hall1_error hall2_error up_stop_error down_stop_error support_power_error_high support_power_error_low".split(" "),learn:function(b,a,c){a||
(a={});a.timeout=2E4;b._executeRequest("LearnSC",{type:this.DM.TYPE},a,function(a,b){a?c&&c(a):b.CODE?c&&c(null,{address:b.CODE}):c&&c(Error("response format invalid"))})},delSensor:function(b,a,c){b._executeRequest("delSensor",{type:this.DM.TYPE,adr:a},{timeout:2E4},function(a){c&&c(a)})},executeCommandCreator:function(b,a,c,d){a?c&&c.value?this._executeCommand(b,a,c,d):d&&d(Error("it device command is empty")):d&&d(Error("in device is null"))},_executeCommand:function(b,a,c,d){var e="SendSC";"refresh"==
c.value?(e="RefreshSC",c=a.address,a={type:this.DM.TYPE,adr:a.address}):(c=this._buildData(b,a,c),a={type:this.DM.TYPE,data:c});c?b._executeRequest(e,a,null,function(a){d&&d(a)}):d&&d(Error("command format invalid"))},buildQuery:function(b,a,c){var d="SendSC";"refresh"==c.value?(d="RefreshSC",b=a.address,a={type:this.DM.TYPE,adr:a.address}):(b=this._buildData(b,a,c),a={type:this.DM.TYPE,data:b});if(!b)return null;a.XC_FNC=d;return a},_buildData:function(b,a,c){if(!c&&!c.value||!a&&!a.address)return null;
b=a.address;a=null;switch(c.value){case "moveUp":a="01";break;case "moveDown":a="02";break;case "stop":a="03";break;case "interPos":a="06";break;case "up":a="09";break;case "down":a="0A";break;case "tiltTo":a="20";if("undefined"==typeof c.ext||null==c.ext)return null;for(c=parseInt(c.ext).toString(16);2>c.length;)c="0"+c;a+=c.toUpperCase();break;case "moveTo":a="40";if("undefined"==typeof c.ext||null==c.ext)return null;for(c=parseInt(c.ext).toString(16);2>c.length;)c="0"+c;a+=c.toUpperCase();break;
case "pos&wink":a="60";var d,e;if(!c.ext)return null;for(var f=0;f<c.ext.length;f++){var g=c.ext[f];if(g)switch(g.value){case "moveTo":e=g.ext;break;case "tiltTo":d=g.ext}}if("undefined"==typeof d||null==d||"undefined"==typeof e||null==e)return null;for(d=parseInt(d).toString(16);2>d.length;)d="0"+d;for(e=parseInt(e).toString(16);2>e.length;)e="0"+e;a+=d+e;break;default:return null}return("01"+b+a).toUpperCase()},_parseData:function(b,a){if(12>b.length)return null;var c=b.substr(2,8);if(a.address.toUpperCase()!=
c.toUpperCase())return null;var d,c={};switch(b.substr(10,2).toUpperCase()){case "01":c.value="moveUp";break;case "02":c.value="moveDown";break;case "03":c.value="stop";break;case "06":c.value="interPos";break;case "09":c.value="up";break;case "0A":c.value="down";break;case "20":c.value="tiltTo";if(14>b.length)return null;d=b.substr(12,2);c.extra=parseInt(d,16);break;case "40":c.value="moveTo";if(14>b.length)return null;d=b.substr(12,2);c.extra=parseInt(d,16);break;case "60":c.value="pos&wink";if(16>
b.length)return null;d=b.substr(12,2);var e=parseInt(d,16);d=b.substr(14,2);d=parseInt(d,16);c.extra="%multi";c.extMeta=[{type:"int",name:"move to",ref:{value:"moveTo",ext:d,extMeta:"0-100"}},{type:"int",name:"tilt to",ref:{value:"tiltTo",ext:e,extMeta:"0-180"}}]}return c.value?c:null},handleStateCreator:function(b,a,c){return a&&a.value?(b=this._handleState(b,c))?b[a.value]:null:null},_handleState:function(b,a){if(!(a.type&&"dy2"==a.type.toLowerCase()&&a.adr&&a.state&&b.address&&b.address.toLowerCase()==
a.adr.toLowerCase())||8>a.state.length)return null;var c=a.state.substr(0,4),d=a.state.substr(4,2),e=a.state.substr(6,2),f={};f.pos=parseInt(d,16);f.tilt=parseInt(e,16);d=parseInt(c.substr(0,2),16);c=parseInt(c.substr(2),16);f.motorStatus=this.MOTOR_STATUS[d>>4&255];f.upLimit=d>>3&1?"set":"not_set";f.downLimit=d>>2&1?"set":"not_set";f.runningStatus=this.RUNNING_STATUS[c>>4&255];f.hallStatus=this.HALL_STATUS[c&255];return f},generateActionCode:function(b,a){return this._buildData(null,a,b)},parseActionCode:function(b,
a){return this._parseData(b,a)},DM:{TYPE:"DY2",MAP:{blind:{command:[{type:"enum",name:"refresh state",ref:{value:"refresh"}},{type:"enum",name:"step up",ref:{value:"up"}},{type:"enum",name:"step down",ref:{value:"down"}},{type:"enum",name:"move up",ref:{value:"moveUp"}},{type:"enum",name:"move down",ref:{value:"moveDown"}},{type:"enum",name:"stop",ref:{value:"stop"}},{type:"enum",name:"intermediate position",ref:{value:"interPos"}},{type:"int",name:"tilt to",ref:{value:"tiltTo",ext:"%d",extMeta:"0-180"}},
{type:"int",name:"move to",ref:{value:"moveTo",ext:"%d",extMeta:"0-100"}},{type:"multi",name:"position and winkel",ref:{value:"pos&wink",ext:"%multi",extMeta:[{type:"int",name:"move to",ref:{value:"moveTo",ext:"%d",extMeta:"0-100"}},{type:"int",name:"tilt to",ref:{value:"tiltTo",ext:"%d",extMeta:"0-180"}}]}}],status:[{type:"int",name:"position",ref:{value:"pos",extMeta:"0-100"}},{type:"int",name:"winkel",ref:{value:"tilt",ext:"0-180"}},{type:"enum",name:"motor status",ref:{value:"motorStatus",options:"standby running sleeping deeply_sleeping error re_set pair_avaliable adjustment_of_limit_setting 1st_up_limit_setting 2nd_down_limit_setting".split(" ")}},
{type:"enum",name:"up limit",ref:{value:"upLimit",options:["set","not_set"]}},{type:"enum",name:"down limit",ref:{value:"downLimit",options:["set","not_set"]}},{type:"enum",name:"running status",ref:{value:"runningStatus",options:"stop up down jog_up jog_down rotating_reminder stop_@1st_up_limit stop_@2nd_down_limit stop_@3rd_intermediate_position".split(" ")}},{type:"enum",name:"hall status",ref:{value:"hallStatus",options:"normal hall1_error hall2_error up_stop_error down_stop_error support_power_error_high support_power_error_low".split(" ")}}]}},
getGatewayDeviceType:function(){return[{type:this.TYPE,name:"Kaiser Nienhaus",subtypes:[{id:"Blind",data:"blind"}]}]},getCommandStatusMap:function(b){return b&&b.data?this.MAP[b.data]:null},createDevice:function(b,a,c){a=xnm.aio.gateway.DM.DMError;var d=xnm.aio.gateway.DM.DMError.ERROR_CODE;b.address?(b=JSON.parse(JSON.stringify(b)),c(null,b)):c(new a(d.INVALID,"parameter address is invalid"))},updateDevice:function(b,a,c){a=xnm.aio.gateway.DM.DMError;var d=xnm.aio.gateway.DM.DMError.ERROR_CODE;b.address?
(b=JSON.parse(JSON.stringify(b)),c(null,b)):c(new a(d.INVALID,"parameter address is invalid"))},deleteDevice:function(b,a,c,d){d&&d(null,JSON.parse(JSON.stringify(a)));xnm.aio.gateway.systems.DY2.delSensor(b,a.address,function(){})}}};
xnm.aio.gateway.systems.ZWAVE={executeCommandCreator:function(b,a,c,d){a&&a.address&&a.data?c&&c.value?this._executeCommand(b,a,c,d):d&&d(Error("device command is empty")):d&&d(Error("device json invalid"))},_executeCommand:function(b,a,c,d){var e=a.address,f=a.instance;f||(f=1);(c=this._buildData(b,a,c))?b._executeRequest("SendSC",{type:this.DM.TYPE,address:e+"."+f,devicetype:a.data,data:c},null,function(a){d&&d(a)}):d&&d(Error("command format invalid"))},_buildData:function(b,a,c){if(!c&&!c.value||
!a&&!a.data)return null;switch(c.value){case "on":case "off":case "toggle":return c.value;case "dimTo":return"undefined"==typeof c.ext||null==c.ext?null:c.value+c.ext;case "toggleTo":return"undefined"==typeof c.ext||null==c.ext?null:c.value+c.ext;case "setTo":return"undefined"==typeof c.ext||null==c.ext?null:c.value+c.ext;default:return null}},handleStateCreator:function(b,a,c){return a&&a.value?(b=this._handleState(b,c))?b[a.value]:null:null},_handleState:function(b,a){if(!(a.type&&"zwave"==a.type.toLowerCase()&&
a.adr&&a.state&&b.address))return null;var c=b.address,d=b.instance;d||(d=1);return c+"."+d!=a.adr?null:a.state},DM:{TYPE:"ZWAVE",MAP:{"switch":{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}},{type:"enum",name:"toggle",ref:{value:"toggle"}}],status:[{type:"enum",name:"state",ref:{value:"state",options:["on","off"]}}]},dimmer:{command:[{type:"int",name:"dim to",ref:{value:"dimTo",ext:"%d",extMeta:"0-100"}},{type:"int",name:"toggle to",ref:{value:"toggleTo",
ext:"%d",extMeta:"0-100"}}],status:[{type:"int",name:"state",ref:{value:"state",ext:"%d",extMeta:"0-100"}}]},"HM6-HP":{command:[{type:"int",name:"temperature to",ref:{value:"setTo",ext:"%d",extMeta:"5.0-37.0",scale:"0.5"}}],status:[{type:"int",name:"current temperature",ref:{value:"temperature",ext:"%d",extMeta:"0-100"}},{type:"int",name:"set temperature",ref:{value:"setpoint",ext:"%d",extMeta:"5.0-37.0"}},{type:"enum",name:"state",ref:{value:"state",options:["Cooling","Heating","Idle"]}},{type:"enum",
name:"fan mode",ref:{value:"fanmode",options:["On Low","Auto Low"]}},{type:"enum",name:"fan state",ref:{value:"fanstate",options:["Running","Idle"]}}]}},getGatewayDeviceType:function(){return null},getCommandStatusMap:function(b){return b&&b.data?this.MAP[b.data]:null},createDevice:function(b,a,c){a=xnm.aio.gateway.DM.DMError;var d=xnm.aio.gateway.DM.DMError.ERROR_CODE;b.address?b.data?b.instance?(b=JSON.parse(JSON.stringify(b)),c(null,b)):c(new a(d.INVALID,"parameter instance is invalid")):c(new a(d.INVALID,
"parameter data is invalid")):c(new a(d.INVALID,"parameter address is invalid"))},updateDevice:function(b,a,c){a=xnm.aio.gateway.DM.DMError;var d=xnm.aio.gateway.DM.DMError.ERROR_CODE;b.address?b.data?b.instance?(b=JSON.parse(JSON.stringify(b)),c(null,b)):c(new a(d.INVALID,"parameter instance is invalid")):c(new a(d.INVALID,"parameter data is invalid")):c(new a(d.INVALID,"parameter address is invalid"))},deleteDevice:function(b,a,c,d){d&&d(null,JSON.parse(JSON.stringify(a)))}}};
xnm.aio.gateway.systems.ZWAVE2={THERMO_MODES:["OFF","HEAT","COOL","AUTO","AUXILIARY_HEAT","RESUME","FAN_ONLY","FURNACE","DRY_AIR","MOIST","AUTO_CHANGEOVER","ENERGY_SAVE_HEAT","ENERGY_SAVE_COOL","AWAY",null,"FULL_POWER"],THERMO_OP_MODES:"IDLE HEATING COOLING FAN_ONLY PENDING_HEAT PENDING_COOL VENT_ECONOMIZER AUX_HEATING 2ND_STAGE_HEATING 2ND_STAGE_COOLING 2ND_STAGE_AUX_HEAT 3RD_STAGE_AUX_HEAT".split(" "),THERMO_FAN_MODES:"AUTO_LOW LOW AUTO_HIGH HIGH AUTO_MEDIUM MEDIUM CIRCULATION HUMIDITY LEFT_RIGHT UP_DOWN QUIET 3RD_STAGE_AUX_HEAT".split(" "),
ALARM_EVNETS:{1:{1:"Smoke",2:"Smoke",3:"Smoke Alarm Test",4:"Replacement",5:"Replacement End-of-life",6:"Alarm Silenced",7:"Maintenance",8:"Maintenance Dust"},2:{1:"CO",2:"CO",3:"CO Test",4:"Replacement",5:"Replacement End-of-life",6:"Alarm Silenced",7:"Maintenance"},3:{1:"CO2",2:"CO2",3:"CO Test",4:"Replacement",5:"Replacement End-of-life",6:"Alarm Silenced",7:"Maintenance"},4:{1:"Overheat",2:"Overheat",3:"Rapid Temperature Rise",4:"Rapid Temperature Rise",5:"Under Heat",6:"Under Heat",7:"Heat Alarm Test",
8:"Replacement End-of-life",9:"Alarm Silenced",10:"Maintenance Dust",11:"Maintenance"},5:{1:"Water Leak",2:"Water Leak",3:"Water Level Dropped",4:"Water Level Dropped",5:"Replace Water Filter",6:"Water Flow Alarm",7:"Water Pressure Alarm"},6:{1:"Manual Lock",2:"Manual Unlock",3:"RF Lock",4:"RF Unlock",5:"Keypad Lock",6:"Keypad Unlock",7:"Manual Not Fully Locked",8:"RF Not Fully Locked",9:"Auto Lock Locked",10:"Auto Lock Not Fully Locked",11:"Lock Jammed",22:"Contact Opened",23:"Contact Closed"},7:{1:"Intrusion",
2:"Intrusion",3:"Tampering",4:"Tampering",5:"Glass Breakage",6:"Glass Breakage",7:"Motion Detection",8:"Motion Detection",9:"Motion Detection"},8:{1:"Replace battery soon",2:"Replace battery now",3:"Charge battery soon",4:"Charge battery now"}},forcePollDevices:function(b,a,c){a&&0!=a.length?(a={deviceIDs:a.join(",")},b._executeRequest("ZWaveForcePollDevices",a,null,function(a){c&&c(a)})):c&&c()},executeCommandCreator:function(b,a,c,d){a&&a.address&&"undefined"!=typeof a.instance&&null!=a.instance?
c&&c.value?this._executeCommand(b,a,c,d):d&&d(Error("device command is empty")):d&&d(Error("device json invalid"))},_executeCommand:function(b,a,c,d){(a=this._buildData(b,a,c))&&a.address&&a.data?b._executeRequest("SendSC",{type:this.DM.TYPE,address:a.address,data:a.data},null,function(a){d&&d(a)}):d&&d(Error("command format invalid"))},buildQuery:function(b,a,c){return(b=this._buildData(b,a,c))&&b.address&&b.data?{type:this.DM.TYPE,address:b.address,data:b.data,XC_FNC:"SendSC"}:null},_buildData:function(b,
a,c){if(!c&&!c.value||!a||!a.address)return null;var d=c.value.indexOf("@");if(-1==d)return null;b=c.value.substr(0,d);d=c.value.substr(d+1);if(!d)return null;d={address:d};switch(b){case "valueTo":if("undefined"==typeof c.ext||null==c.ext)return null;d.data=b+c.ext;break;case "setTo":if("undefined"==typeof c.ext||null==c.ext)return null;d.data=b+c.ext;break;case "setThermoMode":if("undefined"==typeof c.ext||null==c.ext)return null;c=this.THERMO_MODES.indexOf(c.ext.toUpperCase());d.data=b+c;break;
case "setThermoFanMode":if("undefined"==typeof c.ext||null==c.ext)return null;var e=null;if("off"==c.ext)e="Off";else{if(a&&a.dpts&&a.dpts["68"]&&a.dpts["68"].modes){a=a.dpts["68"].modes;for(var f in a)if(a[f]&&a[f].toLowerCase()==c.ext){e=f;break}}"undefined"==typeof e&&null==e&&(e=this.THERMO_FAN_MODES.indexOf(c.ext.toUpperCase()))}d.data=b+e;break;default:d.data=b}return d},handleStateCreator:function(b,a,c){return a&&a.value?(b=this._handleState(b,c))?b[a.value]:null:null},_handleState:function(b,
a){if(!(a.type&&"zwave2"==a.type.toLowerCase()&&a.adr&&a.state&&b.address)||b.address!=a.adr)return null;var c={},d,e;for(e in a.state){d=e.split(".");var f=null;3<=d.length&&(f=d[2]);if("67"==f)d=a.state[e].split(":"),2<=d.length&&(c["pending@"+e]=d[0]!=d[1],c["setpoint@"+e]=d[1]);else if("64"==f)d=a.state[e],c[e]=this.THERMO_MODES[d]?this.THERMO_MODES[d].toLowerCase():null;else if("66"==f)d=a.state[e],c[e]=this.THERMO_OP_MODES[d]?this.THERMO_OP_MODES[d].toLowerCase():null;else if("68"==f){d=a.state[e];
f=null;if("off"==d)f="off";else if(b&&b.dpts&&b.dpts["68"]&&b.dpts["68"].modes&&(f=b.dpts["68"].modes,f=f[d]?f[d].toLowerCase():null),"undefined"==typeof f||null==f)f=this.THERMO_FAN_MODES[d]?this.THERMO_FAN_MODES[d].toLowerCase():null;c[e]=f}else"91"==f?(d=a.state[e],"press"==d?c[e]="shortPress":"release"==d&&(c[e]="longPress")):c[e]=a.state[e]}return c},DM:{TYPE:"ZWAVE2",MAP:{},getGatewayDeviceType:function(){return[{type:this.TYPE,name:"Z-Wave"}]},getCommandStatusMap:function(b){if(!b||!b.address||
"undefined"==typeof b.instance||null==b.instance||!b.dpts)return null;var a=b.address+"."+b.instance,c={command:[],status:[],ipevt:[]},d={},e,f,g,h,m,l,k,n;for(n in b.dpts)if(l=a+"."+n,k=b.dpts[n],g=f=e=null,k&&k.type)switch(k.type){case "SwitchBinary":c.command.push({type:"enum",name:"on",ref:{value:"on@"+l}});c.command.push({type:"enum",name:"off",ref:{value:"off@"+l}});c.command.push({type:"enum",name:"toggle",ref:{value:"toggle@"+l}});(e=k.name)||(e="Switch");e+=" state ("+a+"."+n+")";c.status.push({type:"enum",
name:e,ref:{value:l,options:["on","off"]}});c.ipevt.push({type:"enum",name:e,ref:{value:l,options:["on","off"]}});break;case "SwitchMultilevel":c.command.push({type:"enum",name:"step up",ref:{value:"stepUp@"+l}});c.command.push({type:"enum",name:"step down",ref:{value:"stepDown@"+l}});e="value to";if(0==b.specificType||1==b.specificType||4==b.specificType){e="";a:{f=c.command;for(g=f.length;g--;)if("on"==f[g].name){f=!0;break a}f=!1}f&&(e=" (dim)");c.command.push({type:"enum",name:"on"+e,ref:{value:"on@"+
l}});c.command.push({type:"enum",name:"off"+e,ref:{value:"off@"+l}});c.command.push({type:"enum",name:"toggle"+e,ref:{value:"toggle@"+l}});e="dim to"}else if(3==b.specificType||5==b.specificType||6==b.specificType||7==b.specificType)c.command.push({type:"enum",name:"up",ref:{value:"up@"+l}}),c.command.push({type:"enum",name:"down",ref:{value:"down@"+l}}),c.command.push({type:"enum",name:"stop",ref:{value:"stop@"+l}}),e="move to";(f=k.valueType)||(f="int");g="int"==f?"%d":"%f";c.command.push({type:f,
name:e,ref:{value:"valueTo@"+l,ext:g}});(e=k.name)||(e="Level");e+=" state ("+a+"."+n+")";c.status.push({type:f,name:e,ref:{value:l,ext:g}});c.ipevt.push({type:f,name:e,ref:{value:l,ext:g}});break;case "SensorBinary":(e=k.name)||(e="Sensor Binary");e+=" state ("+a+"."+n+")";c.status.push({type:"enum",name:e,ref:{value:l,options:["true","false"]}});c.ipevt.push({type:"enum",name:e,ref:{value:l,options:["true","false"]}});break;case "SensorMultilevel":(e=k.name)||(e="Sensor");e+=" state ("+a+"."+n+
")";(f=k.valueType)||(f="float");g="float"==f?"%f":"%d";c.status.push({type:f,name:e,ref:{value:l,ext:g,unit:k.unit}});c.ipevt.push({type:f,name:e,ref:{value:l,ext:g,unit:k.unit}});break;case "Meter":e=(e=k.name)?e+" Meter":"Meter";e+=" state ("+a+"."+n+")";(f=k.valueType)||(f="float");g="float"==f?"%f":"%d";c.status.push({type:f,name:e,ref:{value:l,ext:g,unit:k.unit}});c.ipevt.push({type:f,name:e,ref:{value:l,ext:g,unit:k.unit}});break;case "Alarm":e=(e=k.name)?e+" Alarm":"Alarm";c.command.push({type:"enum",
name:"reset "+e+"("+a+"."+n+")",ref:{value:"resetAlarm@"+l}});c.status.push({type:"enum",name:e+" state ("+a+"."+n+")",ref:{value:l,options:["on","off"]}});c.status.push({type:"int",name:e+" event id ("+a+"."+n+")",ref:{value:l+".event",ext:"%d"}});d[a+"."+n]||(d[a+"."+n]={type:"enum",name:e+" event ("+a+"."+n+")",ref:{value:l+".eventName",options:[]}});break;case "Alarm.Event":(e=k.name)||(e="Alarm Event");e+=" state ("+a+"."+n+")";c.status.push({type:"enum",name:e,ref:{value:l,options:["true","false"]}});
c.ipevt.push({type:"enum",name:e,ref:{value:l,options:["true","false"]}});k=n.split(".");3<=k.length&&(f=a+"."+k[0]+"."+k[1],d[f]||(d[f]={type:"enum",name:e+" event ("+a+"."+n+")",ref:{value:l+".eventName",options:[]}}),d[f].ref.options.push(k[2]));break;case "Battery":(e=k.name)||(e="Battery");e+=" state ("+a+"."+n+")";c.status.push({type:"int",name:e,ref:{value:l,ext:"%d"}});c.ipevt.push({type:"int",name:e,ref:{value:l,ext:"%d"}});break;case "ThermostatSetPoint":(e=k.name)||(e="Thermostat");c.command.push({type:"enum",
name:e+" up ("+a+"."+n+")",ref:{value:"up@"+l}});c.command.push({type:"enum",name:e+" down ("+a+"."+n+")",ref:{value:"down@"+l}});(f=k.valueType)&&"empty"!=f||(f="float");g="float"==f?"%f":"%d";h="5.0-37.0";k.min&&k.max&&(h=k.min+"-"+k.max);c.command.push({type:f,name:e+" set to ("+a+"."+n+")",ref:{value:"setTo@"+l,ext:g,extMeta:h,unit:k.unit,scale:"0.5"}});c.status.push({type:"enum",name:e+" pending ("+a+"."+n+")",ref:{value:"pending@"+l,options:["true","false"]}});e+=" setpoint ("+a+"."+n+")";c.status.push({type:f,
name:e,ref:{value:"setpoint@"+l,ext:g,extMeta:h,unit:k.unit}});c.ipevt.push({type:f,name:e,ref:{value:"setpoint@"+l,ext:g,extMeta:h,unit:k.unit}});break;case "ThermostatMode":c.command.push({type:"enum",name:"mode off",ref:{value:"thermoModeOff@"+l}});c.command.push({type:"enum",name:"mode heat",ref:{value:"thermoModeHeat@"+l}});c.command.push({type:"enum",name:"mode cool",ref:{value:"thermoModeCool@"+l}});c.command.push({type:"enum",name:"mode auto",ref:{value:"thermoModeAuto@"+l}});e={type:"enum",
name:"set mode",ref:{value:"setThermoMode@"+l,ext:"%e",extMeta:[]}};f={type:"enum",name:"thermostat mode",ref:{value:l,options:[]}};g=[];h=[];if(k.modes)for(m in k.modes){if(m=parseInt(m),l=xnm.aio.gateway.systems.ZWAVE2.THERMO_MODES[m])g.push(l.toLowerCase()),h.push(l.toLowerCase())}else for(k=0;k<xnm.aio.gateway.systems.ZWAVE2.THERMO_MODES.length;k++)if(l=xnm.aio.gateway.systems.ZWAVE2.THERMO_MODES[k])g.push(l.toLowerCase()),h.push(l.toLowerCase());e.ref.extMeta=g;f.ref.options=h;c.command.push(e);
c.status.push(f);c.ipevt.push(f);break;case "ThermostatOperatingState":e={type:"enum",name:"thermostat operating mode",ref:{value:l,options:[]}};for(k=0;k<xnm.aio.gateway.systems.ZWAVE2.THERMO_OP_MODES.length;k++)(l=xnm.aio.gateway.systems.ZWAVE2.THERMO_OP_MODES[k])&&e.ref.options.push(l.toLowerCase());c.status.push(e);c.ipevt.push(e);break;case "ThermostatFanMode":e={type:"enum",name:"set fan mode",ref:{value:"setThermoFanMode@"+l,ext:"%e",extMeta:[]}};f={type:"enum",name:"thermostat fan mode",ref:{value:l,
options:[]}};g=[];h=[];g.push("off");h.push("off");if(k.modes)for(m in k.modes)l=k.modes[m],l||(m=parseInt(m),l=xnm.aio.gateway.systems.ZWAVE2.THERMO_FAN_MODES[m]),l&&(g.push(l.toLowerCase()),h.push(l.toLowerCase()));else for(k=0;k<xnm.aio.gateway.systems.ZWAVE2.THERMO_FAN_MODES.length;k++)if(l=xnm.aio.gateway.systems.ZWAVE2.THERMO_FAN_MODES[k])g.push(l.toLowerCase()),h.push(l.toLowerCase());e.ref.extMeta=g;f.ref.options=h;c.command.push(e);c.status.push(f);c.ipevt.push(f);break;case "ThermostatFanState":c.status.push({type:"enum",
name:"thermostat fan state",ref:{value:l,options:["on","off"]}});c.ipevt.push({type:"enum",name:"thermostat fan state",ref:{value:l,options:["on","off"]}});break;case "CentralScene":(e=k.name)||(e="Central Scene");c.ipevt.push({type:"enum",name:e+" event ("+a+"."+n+")",ref:{value:l,options:["shortPress","longPress"]}});break;case "AlarmSensor":e=(e=k.name)?e+" Alarm":"Alarm Sensor";e+=" state ("+a+"."+n+")";c.status.push({type:"enum",name:e,ref:{value:l,options:["on","off"]}});c.ipevt.push({type:"enum",
name:e,ref:{value:l,options:["on","off"]}});break;case "DoorLock":c.command.push({type:"enum",name:"unlock",ref:{value:"unlock@"+l}}),c.command.push({type:"enum",name:"unlock with timeout",ref:{value:"unlock_with_timeout@"+l}}),c.command.push({type:"enum",name:"inside handle unlock",ref:{value:"inside_handle_unlock@"+l}}),c.command.push({type:"enum",name:"inside handle unlock with timeout",ref:{value:"inside_handle_unlock_with_timeout@"+l}}),c.command.push({type:"enum",name:"outside handle unlock",
ref:{value:"outside_handle_unlock@"+l}}),c.command.push({type:"enum",name:"outside handle unlock with timeout",ref:{value:"outside_handle_unlock_with_timeout@"+l}}),c.command.push({type:"enum",name:"lock",ref:{value:"lock@"+l}}),c.status.push({type:"enum",name:"state ("+l+")",ref:{value:l+".mode",options:"unlock unlock_with_timeout inside_handle_unlock inside_handle_unlock_with_timeout outside_handle_unlock outside_handle_unlock_with_timeout lock".split(" ")}}),c.status.push({type:"enum",name:"operation mode ("+
l+")",ref:{value:l+".op_mode",options:["constant","autolock"]}}),c.ipevt.push({type:"enum",name:"state ("+l+")",ref:{value:l+".mode",options:"unlock unlock_with_timeout inside_handle_unlock inside_handle_unlock_with_timeout outside_handle_unlock outside_handle_unlock_with_timeout lock".split(" ")}})}for(var p in d)if(d[p]&&(b=d[p],(a=b.ref)&&(a=a.options)&&!(0>=a.length)&&(m=[],k=p.split("."),!(4>k.length)&&(n=xnm.aio.gateway.systems.ZWAVE2.ALARM_EVNETS[k[3]])))){for(k=0;k<a.length;k++)(e=n[a[k]])&&
m.push(e);0<m.length&&(b.ref.options=m,a=JSON.parse(JSON.stringify(b)),c.status.push(a),b=JSON.parse(JSON.stringify(b)),c.ipevt.push(b))}return c},getIPevtMap:function(b){b=this.getCommandStatusMap(b);if(!b)return null;var a={ipevt:[]};b.ipevt&&(a.ipevt=b.ipevt);return a},createDevice:function(b,a,c){a=xnm.aio.gateway.DM.DMError;var d=xnm.aio.gateway.DM.DMError.ERROR_CODE;b.address?b.instance?b.dpts?(b=JSON.parse(JSON.stringify(b)),c(null,b)):c(new a(d.INVALID,"parameter dpts is invalid")):c(new a(d.INVALID,
"parameter instance is invalid")):c(new a(d.INVALID,"parameter address is invalid"))},updateDevice:function(b,a,c){a=xnm.aio.gateway.DM.DMError;var d=xnm.aio.gateway.DM.DMError.ERROR_CODE;b.address?b.instance?b.dpts?(b=JSON.parse(JSON.stringify(b)),c(null,b)):c(new a(d.INVALID,"parameter dpts is invalid")):c(new a(d.INVALID,"parameter instance is invalid")):c(new a(d.INVALID,"parameter address is invalid"))},deleteDevice:function(b,a,c,d){d&&d(null,JSON.parse(JSON.stringify(a)))}}};
xnm.aio.gateway.systems.KNX={searchKnxIpGateway:function(b,a){b._executeRequestV5_Post("SearchKnxIpGateways",null,{timeout:5E3},function(b,d){a&&a(b,d)})},getKnxIpGateways:function(b,a){b._executeRequestV5_Post("GetKnxIpGateways",null,{timeout:2E3},function(b,d){a&&a(b,d)})},addKnxIpGateway:function(b,a,c){b._executeRequestV5_Post("AddKnxIpGateway",{data:a},{timeout:2E3},function(a,b){c&&c(a,b)})},updateKnxIpGateway:function(b,a,c){b._executeRequestV5_Post("UptateKnxIpGateway",{data:a},{timeout:2E3},
function(a,b){c&&c(a,b)})},deleteKnxIpGateway:function(b,a,c){b._executeRequestV5_Post("DeleteKnxIpGateway",{data:a},{timeout:2E3},function(a,b){c&&c(a,b)})},getKnxDevices:function(b,a){b._executeRequestV5_Post("GetKnxDevices",null,{timeout:2E3},function(b,d){a&&a(b,d)})},addKnxDevice:function(b,a,c){b._executeRequestV5_Post("AddKnxDevice",{data:a},{timeout:2E3},function(a,b){c&&c(a,b)})},updateKnxDevice:function(b,a,c){b._executeRequestV5_Post("UptateKnxDevice",{data:a},{timeout:2E3},function(a,
b){c&&c(a,b)})},deleteKnxDevice:function(b,a,c){b._executeRequestV5_Post("DeleteKnxDevice",{data:a},{timeout:2E3},function(a){c&&c(a)})},executeCommandCreator:function(b,a,c,d){a&&a.did?c&&c.value?this._executeCommand(b,a,c,d):d&&d(Error("device command is empty")):d&&d(Error("device json invalid"))},_executeCommand:function(b,a,c,d){(a=this._buildParam(b,a,c))?b._executeRequest("SendSC",a,null,function(a){d&&d(a)}):d&&d(Error("command format invalid"))},buildQuery:function(b,a,c){b=this._buildParam(b,
a,c);if(!b)return null;b.XC_FNC="SendSC";return b},_buildParam:function(b,a,c){return(b=this._buildData(b,a,c))?{type:this.DM.TYPE,address:a.did,data:b}:null},_buildData:function(b,a,c){if(!c&&!c.value)return null;b=c.value;"undefnined"!=typeof c.ext&&null!=c.ext&&(b+=c.ext);return b},handleStateCreator:function(b,a,c){return a&&a.value?(b=this._handleState(b,c))?b[a.value]:null:null},_handleState:function(b,a){if(!(a.type&&"knx"==a.type.toLowerCase()&&a.adr&&a.state&&b.did)||b.did!=a.adr)return null;
var c={},d;for(d in a.state){var e=a.state[d],f;for(f in e)c[d+"@"+f]=e[f]}return c},DM:{TYPE:"KNX",MAP:{},getGatewayDeviceType:function(){var b={type:this.TYPE,name:"KNX",subtypes:[]};b.subtypes.push({id:"Switch",data:"outlet"});b.subtypes.push({id:"Dimmer",data:"lighting"});b.subtypes.push({id:"Blind",data:"blind"});b.subtypes.push({id:"Shutter",data:"shutter"});b.subtypes.push({id:"Thermostat",data:"heater"});b.subtypes.push({id:"General",data:"general"});return b},getCommandStatusMap:function(b){if(!b||
!b.data||!b.channels)return null;var a={command:[],status:[],ipevt:[]};a.command.push({type:"enum",name:"refresh states",ref:{value:"refreshStates"}});for(var c in b.channels){var d=b.channels[c],e=d.name;e||(e="channel "+c);var f=!1;switch(c){case "switch":d&&d.actuator&&d.actuator.type&&d.actuator.ga&&(a.command.push({type:"enum",name:"on",ref:{value:c+"@on"}}),a.command.push({type:"enum",name:"off",ref:{value:c+"@off"}}),(d.status&&d.status.type&&d.status.ga||d.event&&d.event.type&&d.event.ga)&&
a.command.push({type:"enum",name:"toggle",ref:{value:c+"@toggle"}}));d&&d.status&&d.status.type&&d.status.ga&&(f=!0,a.status.push({type:"enum",name:e+" state",ref:{value:c+"@state",options:["on","off"]}}));d&&d.status&&d.status.type&&d.status.ga&&(f||a.status.push({type:"enum",name:e+" state",ref:{value:c+"@state",options:["on","off"]}}),a.ipevt.push({type:"enum",name:e+" state",ref:{value:c+"@state",options:["on","off"]}}));break;case "step":d&&d.actuator&&d.actuator.type&&d.actuator.ga&&(a.command.push({type:"enum",
name:"step up",ref:{value:c+"@stepUp"}}),a.command.push({type:"enum",name:"step down",ref:{value:c+"@stepDown"}}));break;case "value":d&&d.actuator&&d.actuator.type&&d.actuator.ga&&(a.command.push({type:"int",name:"dim to",ref:{value:c+"@dimTo",ext:"%d",extMeta:"0-100"}}),a.command.push({type:"enum",name:"dim up",ref:{value:c+"@dimUp"}}),a.command.push({type:"enum",name:"dim down",ref:{value:c+"@dimDown"}}),d.status&&d.status.type&&d.status.ga||d.event&&d.event.type&&d.event.ga)&&(a.command.push({type:"int",
name:"level increase",ref:{value:c+"@inc",ext:"%d",extMeta:"1-10"}}),a.command.push({type:"int",name:"level decrease",ref:{value:c+"@dec",ext:"%d",extMeta:"1-10"}}));d&&d.status&&d.status.type&&d.status.ga&&(f=!0,a.status.push({type:"int",name:"level state",ref:{value:c+"@state",extMeta:"0-100"}}));d&&d.event&&d.event.type&&d.event.ga&&(f||a.status.push({type:"int",name:"level state",ref:{value:c+"@state",extMeta:"0-100"}}),a.ipevt.push({type:"int",name:"level state",ref:{value:c+"@state",extMeta:"0-100"}}));
break;case "blind_step":d&&d.actuator&&d.actuator.type&&d.actuator.ga&&(a.command.push({type:"enum",name:"step up",ref:{value:c+"@blindStepUp"}}),a.command.push({type:"enum",name:"step down",ref:{value:c+"@blindStepDown"}}));break;case "blind_move":d&&d.actuator&&d.actuator.type&&d.actuator.ga&&(a.command.push({type:"enum",name:"move up",ref:{value:c+"@blindMoveUp"}}),a.command.push({type:"enum",name:"move down",ref:{value:c+"@blindMoveDown"}}));break;case "blind_stop":d&&d.actuator&&d.actuator.type&&
d.actuator.ga&&a.command.push({type:"enum",name:"stop",ref:{value:c+"@blindStop"}});break;case "blind_position":d&&d.actuator&&d.actuator.type&&d.actuator.ga&&(a.command.push({type:"int",name:"move to",ref:{value:c+"@moveTo",ext:"%d",extMeta:"0-100"}}),a.command.push({type:"enum",name:"position up",ref:{value:c+"@moveUp"}}),a.command.push({type:"enum",name:"position down",ref:{value:c+"@moveDown"}}),d.status&&d.status.type&&d.status.ga||d.event&&d.event.type&&d.event.ga)&&(a.command.push({type:"int",
name:"position increase",ref:{value:c+"@inc",ext:"%d",extMeta:"1-10"}}),a.command.push({type:"int",name:"position decrease",ref:{value:c+"@dec",ext:"%d",extMeta:"1-10"}}));d&&d.status&&d.status.type&&d.status.ga&&(f=!0,a.status.push({type:"int",name:"position state",ref:{value:c+"@state",extMeta:"0-100"}}));d&&d.event&&d.event.type&&d.event.ga&&(f||a.status.push({type:"int",name:"position state",ref:{value:c+"@state",extMeta:"0-100"}}),a.ipevt.push({type:"int",name:"position state",ref:{value:c+"@state",
extMeta:"0-100"}}));break;case "lamella_position":d&&d.actuator&&d.actuator.type&&d.actuator.ga&&("DPST-5-3"==d.actuator.type?a.command.push({type:"int",name:"lamella to",ref:{value:c+"@lamellaTo",ext:"%d",extMeta:"0-360"}}):a.command.push({type:"int",name:"lamella to",ref:{value:c+"@lamellaTo",ext:"%d",extMeta:"0-100"}}),a.command.push({type:"enum",name:"lamella up",ref:{value:c+"@lamellaUp"}}),a.command.push({type:"enum",name:"lamella down",ref:{value:c+"@lamellaDown"}}),d.status&&d.status.type&&
d.status.ga||d.event&&d.event.type&&d.event.ga)&&(a.command.push({type:"int",name:"lamella increase",ref:{value:c+"@incL",ext:"%d",extMeta:"1-10"}}),a.command.push({type:"int",name:"lamella decrease",ref:{value:c+"@decL",ext:"%d",extMeta:"1-10"}}));d&&d.status&&d.status.type&&d.status.ga&&(f=!0,"DPST-5-3"==d.status.type?a.status.push({type:"int",name:"lamella state",ref:{value:c+"@state",extMeta:"0-360"}}):a.status.push({type:"int",name:"lamella state",ref:{value:c+"@state",extMeta:"0-100"}}));d&&
d.event&&d.event.type&&d.event.ga&&("DPST-5-3"==d.event.type?(f||a.status.push({type:"int",name:"lamella state",ref:{value:c+"@state",extMeta:"0-360"}}),a.ipevt.push({type:"int",name:"lamella state",ref:{value:c+"@state",extMeta:"0-360"}})):(f||a.status.push({type:"int",name:"lamella state",ref:{value:c+"@state",extMeta:"0-100"}}),a.ipevt.push({type:"int",name:"lamella state",ref:{value:c+"@state",extMeta:"0-100"}})));break;case "shutter_step":d&&d.actuator&&d.actuator.type&&d.actuator.ga&&(a.command.push({type:"enum",
name:"step up",ref:{value:c+"@shutterStepUp"}}),a.command.push({type:"enum",name:"step down",ref:{value:c+"@shutterStepDown"}}));break;case "shutter_move":d&&d.actuator&&d.actuator.type&&d.actuator.ga&&(a.command.push({type:"enum",name:"move up",ref:{value:c+"@shutterMoveUp"}}),a.command.push({type:"enum",name:"move down",ref:{value:c+"@shutterMoveDown"}}));break;case "shutter_stop":d&&d.actuator&&d.actuator.type&&d.actuator.ga&&a.command.push({type:"enum",name:"stop",ref:{value:c+"@shutterStop"}});
break;case "shutter_position":d&&d.actuator&&d.actuator.type&&d.actuator.ga&&(a.command.push({type:"int",name:"move to",ref:{value:c+"@moveTo",ext:"%d",extMeta:"0-100"}}),a.command.push({type:"enum",name:"position up",ref:{value:c+"@moveUp"}}),a.command.push({type:"enum",name:"position down",ref:{value:c+"@moveDown"}}),d.status&&d.status.type&&d.status.ga||d.event&&d.event.type&&d.event.ga)&&(a.command.push({type:"int",name:"position increase",ref:{value:c+"@inc",ext:"%d",extMeta:"1-10"}}),a.command.push({type:"int",
name:"position decrease",ref:{value:c+"@dec",ext:"%d",extMeta:"1-10"}}));d&&d.status&&d.status.type&&d.status.ga&&(f=!0,a.status.push({type:"int",name:"position state",ref:{value:c+"@state",extMeta:"0-100"}}));d&&d.event&&d.event.type&&d.event.ga&&(f||a.status.push({type:"int",name:"position state",ref:{value:c+"@state",extMeta:"0-100"}}),a.ipevt.push({type:"int",name:"position state",ref:{value:c+"@state",extMeta:"0-100"}}));break;case "setpoint_basic":d&&d.actuator&&d.actuator.type&&d.actuator.ga&&
(a.command.push({type:"float",name:"basic setpoint to",ref:{value:c+"@tempTo",ext:"%f",extMeta:"3.0-40.0",scale:"0.5"}}),d.status&&d.status.type&&d.status.ga||d.event&&d.event.type&&d.event.ga)&&(a.command.push({type:"float",name:"basic setpoint up",ref:{value:c+"@tempUp",ext:"%f",extMeta:"0.5-10.0",scale:"0.5"}}),a.command.push({type:"float",name:"basic setpoint down",ref:{value:c+"@tempDown",ext:"%f",extMeta:"0.5-10.0",scale:"0.5"}}));d&&d.status&&d.status.type&&d.status.ga&&(f=!0,a.status.push({type:"float",
name:"basic setpoint state",ref:{value:c+"@state"}}));d&&d.event&&d.event.type&&d.event.ga&&(f||a.status.push({type:"float",name:"basic setpoint state",ref:{value:c+"@state"}}),a.ipevt.push({type:"float",name:"basic setpoint state",ref:{value:c+"@state"}}));break;case "setpoint_shift":d&&d.actuator&&d.actuator.type&&d.actuator.ga&&(a.command.push({type:"int",name:"setpoint shift to",ref:{value:c+"@tempShiftTo",ext:"%d",extMeta:"-128-127"}}),d.status&&d.status.type&&d.status.ga||d.event&&d.event.type&&
d.event.ga)&&(a.command.push({type:"int",name:"setpoint shift up",ref:{value:c+"@tempShiftUp",ext:"%d"}}),a.command.push({type:"int",name:"setpoint shift down",ref:{value:c+"@tempShiftDown",ext:"%d"}}));d&&d.status&&d.status.type&&d.status.ga&&(f=!0,a.status.push({type:"int",name:"setpoint shift state",ref:{value:c+"@state",ext:"%d",extMeta:"-128-127"}}));d&&d.event&&d.event.type&&d.event.ga&&(f||a.status.push({type:"int",name:"setpoint shift state",ref:{value:c+"@state",ext:"%d",extMeta:"-128-127"}}),
a.ipevt.push({type:"int",name:"setpoint shift state",ref:{value:c+"@state",ext:"%d",extMeta:"-128-127"}}));break;case "setpoint_temp":d&&d.status&&d.status.type&&d.status.ga&&(f=!0,a.status.push({type:"float",name:"setpoint temperature",ref:{value:c+"@state"}}));d&&d.event&&d.event.type&&d.event.ga&&(f||a.status.push({type:"float",name:"setpoint temperature",ref:{value:c+"@state"}}),a.ipevt.push({type:"float",name:"setpoint temperature",ref:{value:c+"@state"}}));break;case "current_temp":d&&d.status&&
d.status.type&&d.status.ga&&(f=!0,a.status.push({type:"float",name:"current temperature",ref:{value:c+"@state"}}));d&&d.event&&d.event.type&&d.event.ga&&(f||a.status.push({type:"float",name:"current temperature",ref:{value:c+"@state"}}),a.ipevt.push({type:"float",name:"current temperature",ref:{value:c+"@state"}}));break;case "mode":d&&d.actuator&&d.actuator.type&&d.actuator.ga&&("DPST-20-102"==d.actuator.type?(a.command.push({type:"enum",name:"auto",ref:{value:c+"@auto"}}),a.command.push({type:"enum",
name:"comfort",ref:{value:c+"@comfort"}}),a.command.push({type:"enum",name:"standby",ref:{value:c+"@standby"}}),a.command.push({type:"enum",name:"economy",ref:{value:c+"@economy"}}),a.command.push({type:"enum",name:"protection",ref:{value:c+"@protection"}})):a.command.push({type:"int",name:"set mode",ref:{value:c+"@setValue",ext:"%d",extMeta:"0-255"}}));d&&d.status&&d.status.type&&d.status.ga&&(f=!0,"DPST-20-102"==d.actuator.type&&a.status.push({type:"enum",name:"mode state",ref:{value:c+"@state",
options:["auto","comfort","standby","economy","protection"]}}),a.status.push({type:"int",name:"mode value",ref:{value:c+"@value",ext:"%d",extMeta:"0-255"}}));d&&d.event&&d.event.type&&d.event.ga&&("DPST-20-102"==d.actuator.type?(f||(a.status.push({type:"enum",name:"mode state",ref:{value:c+"@state",options:["auto","comfort","standby","economy","protection"]}}),a.status.push({type:"int",name:"mode value",ref:{value:c+"@value",ext:"%d",extMeta:"0-255"}})),a.ipevt.push({type:"enum",name:"mode state",
ref:{value:c+"@state",options:["auto","comfort","standby","economy","protection"]}})):f||a.status.push({type:"int",name:"mode value",ref:{value:c+"@value",ext:"%d",extMeta:"0-255"}}),a.ipevt.push({type:"int",name:"mode value",ref:{value:c+"@value",ext:"%d",extMeta:"0-255"}}));break;default:if(d&&d.actuator&&d.actuator.type&&d.actuator.ga)switch(f=this._parseDatapointPrefix(d.actuator.type),f){case "DPT-1":case "DPST-1":switch(d.actuator.type){case "DPST-1-2":a.command.push({type:"enum",name:e+" true",
ref:{value:c+"@true"}});a.command.push({type:"enum",name:e+" false",ref:{value:c+"@false"}});break;case "DPST-1-3":a.command.push({type:"enum",name:e+" enable",ref:{value:c+"@enable"}});a.command.push({type:"enum",name:e+" disable",ref:{value:c+"@disable"}});break;case "DPST-1-4":a.command.push({type:"enum",name:e+" ramp",ref:{value:c+"@ramp"}});a.command.push({type:"enum",name:e+" no_ramp",ref:{value:c+"@no_ramp"}});break;case "DPST-1-5":a.command.push({type:"enum",name:e+" alarm",ref:{value:c+"@alarm"}});
a.command.push({type:"enum",name:e+" no_alarm",ref:{value:c+"@no_alarm"}});break;case "DPST-1-6":a.command.push({type:"enum",name:e+" high",ref:{value:c+"@high"}});a.command.push({type:"enum",name:e+" low",ref:{value:c+"@low"}});break;case "DPST-1-7":a.command.push({type:"enum",name:e+" increase",ref:{value:c+"@increase"}});a.command.push({type:"enum",name:e+" decrease",ref:{value:c+"@decrease"}});break;case "DPST-1-8":a.command.push({type:"enum",name:e+" up",ref:{value:c+"@up"}});a.command.push({type:"enum",
name:e+" down",ref:{value:c+"@down"}});break;case "DPST-1-9":a.command.push({type:"enum",name:e+" open",ref:{value:c+"@open"}});a.command.push({type:"enum",name:e+" close",ref:{value:c+"@close"}});break;case "DPST-1-10":a.command.push({type:"enum",name:e+" start",ref:{value:c+"@start"}});a.command.push({type:"enum",name:e+" stop",ref:{value:c+"@stop"}});break;case "DPST-1-11":a.command.push({type:"enum",name:e+" active",ref:{value:c+"@active"}});a.command.push({type:"enum",name:e+" inactive",ref:{value:c+
"@inactive"}});break;case "DPST-1-12":a.command.push({type:"enum",name:e+" inverted",ref:{value:c+"@inverted"}});a.command.push({type:"enum",name:e+" not_inverted",ref:{value:c+"@not_inverted"}});break;default:a.command.push({type:"enum",name:e+" on",ref:{value:c+"@on"}}),a.command.push({type:"enum",name:e+" off",ref:{value:c+"@off"}}),(d.status&&d.status.type&&d.status.ga&&d.status.type==d.actuator.type||d.event&&d.event.type&&d.event.ga&&d.event.type==d.actuator.type)&&a.command.push({type:"enum",
name:e+" toggle",ref:{value:c+"@toggle"}})}a.command.push({type:"int",name:e+" set value",ref:{value:c+"@setValue",ext:"%d",extMeta:"0-1"}});break;case "DPT-2":case "DPST-2":f=[];switch(d.actuator.type){case "DPST-2-2":f=["true","false"];break;case "DPST-2-3":f=["enable","disable"];break;case "DPST-2-4":f=["ramp","no_ramp"];break;case "DPST-2-5":f=["alarm","no_alarm"];break;case "DPST-2-6":f=["high","low"];break;case "DPST-2-7":f=["increase","decrease"];break;case "DPST-2-8":f=["up","down"];break;
case "DPST-2-9":f=["open","close"];break;case "DPST-2-10":f=["start","stop"];break;case "DPST-2-11":f=["active","inactive"];break;case "DPST-2-12":f=["inverted","not_inverted"];break;default:f=["on","off"]}a.command.push({type:"int",name:e+" set value",ref:{value:c+"@setValue",ext:"%d",extMeta:"0-3"}});a.command.push({type:"enum",name:e+" prio "+f[0],ref:{value:c+"@prio."+f[0]}});a.command.push({type:"enum",name:e+" no.prio "+f[0],ref:{value:c+"@no_prio."+f[0]}});a.command.push({type:"enum",name:e+
" prio "+f[1],ref:{value:c+"@prio."+f[1]}});a.command.push({type:"enum",name:e+" no.prio "+f[1],ref:{value:c+"@no_prio."+f[1]}});break;case "DPT-3":case "DPST-3":a.command.push({type:"enum",name:e+" step up",ref:{value:c+"@stepUp",ext:"%e",extMeta:[1,3,6,12,25,50,100]}});a.command.push({type:"enum",name:e+" step down",ref:{value:c+"@stepDown",ext:"%e",extMeta:[1,3,6,12,25,50,100]}});a.command.push({type:"int",name:e+" set value",ref:{value:c+"@setValue",ext:"%d",extMeta:"0-15"}});break;case "DPT-5":case "DPST-5":switch(d.actuator.type){case "DPST-5-1":f=
"0-100";break;case "DPST-5-3":f="0-360";break;case "DPST-5-6":f="0-254";break;default:f="0-255"}a.command.push({type:"int",name:e+" set value",ref:{value:c+"@setValue",ext:"%d",extMeta:f}});a.command.push({type:"enum",name:e+" up",ref:{value:c+"@up"}});a.command.push({type:"enum",name:e+" down",ref:{value:c+"@down"}});if(d.status&&d.status.type&&d.status.ga&&d.status.type==d.actuator.type||d.event&&d.event.type&&d.event.ga&&d.event.type==d.actuator.type)a.command.push({type:"int",name:e+" increase",
ref:{value:c+"@inc",ext:"%d",extMeta:f}}),a.command.push({type:"int",name:e+" decrease",ref:{value:c+"@dec",ext:"%d",extMeta:f}});break;case "DPT-6":case "DPST-6":a.command.push({type:"int",name:e+" set value",ref:{value:c+"@setValue",ext:"%d",extMeta:"-128-127"}});a.command.push({type:"enum",name:e+" up",ref:{value:c+"@up"}});a.command.push({type:"enum",name:e+" down",ref:{value:c+"@down"}});if(d.status&&d.status.type&&d.status.ga&&d.status.type==d.actuator.type||d.event&&d.event.type&&d.event.ga&&
d.event.type==d.actuator.type)a.command.push({type:"int",name:e+" increase",ref:{value:c+"@inc",ext:"%d",extMeta:"0-127"}}),a.command.push({type:"int",name:e+" decrease",ref:{value:c+"@dec",ext:"%d",extMeta:"0-127"}});break;case "DPT-9":case "DPST-9":switch(d.actuator.type){case "DPST-9-1":f="-273-670760";break;default:f="-671088.64-670760.96"}a.command.push({type:"float",name:e+" set value",ref:{value:c+"@setValue",ext:"%f",extMeta:f,scale:"0.01"}});if(d.status&&d.status.type&&d.status.ga&&d.status.type==
d.actuator.type||d.event&&d.event.type&&d.event.ga&&d.event.type==d.actuator.type)a.command.push({type:"float",name:e+" increase",ref:{value:c+"@inc",ext:"%f",scale:"0.01"}}),a.command.push({type:"float",name:e+" decrease",ref:{value:c+"@dec",ext:"%f",scale:"0.01"}});break;case "DPT-20":case "DPST-20":switch(d.actuator.type){case "DPST-20-102":a.command.push({type:"enum",name:e+" auto",ref:{value:c+"@auto"}});a.command.push({type:"enum",name:e+" comfort",ref:{value:c+"@comfort"}});a.command.push({type:"enum",
name:e+" standby",ref:{value:c+"@standby"}});a.command.push({type:"enum",name:e+" economy",ref:{value:c+"@economy"}});a.command.push({type:"enum",name:e+" protection",ref:{value:c+"@protection"}});a.command.push({type:"int",name:e+" set value",ref:{value:c+"@setValue",ext:"%f",extMeta:"0-4"}});if(d.status&&d.status.type&&d.status.ga&&d.status.type==d.actuator.type||d.event&&d.event.type&&d.event.ga&&d.event.type==d.actuator.type)a.command.push({type:"int",name:e+" increase",ref:{value:c+"@inc",ext:"%d",
extMeta:"0-4"}}),a.command.push({type:"int",name:e+" decrease",ref:{value:c+"@dec",ext:"%d",extMeta:"0-4"}});break;default:if(a.command.push({type:"int",name:e+" set value",ref:{value:c+"@setValue",ext:"%f",extMeta:"0-255"}}),d.status&&d.status.type&&d.status.ga&&d.status.type==d.actuator.type||d.event&&d.event.type&&d.event.ga&&d.event.type==d.actuator.type)a.command.push({type:"int",name:e+" increase",ref:{value:c+"@inc",ext:"%d",extMeta:"0-255"}}),a.command.push({type:"int",name:e+" decrease",
ref:{value:c+"@dec",ext:"%d",extMeta:"0-255"}})}}if(d&&d.status&&d.status.type&&d.status.ga||d&&d.event&&d.event.type&&d.event.ga){var g;g=d.status&&d.status.type?d.status.type:d.event.type;f=this._parseDatapointPrefix(g);switch(f){case "DPT-1":case "DPST-1":switch(g){case "DPST-1-2":f=["true","false"];break;case "DPST-1-3":f=["enable","disable"];break;case "DPST-1-4":f=["ramp","no_ramp"];break;case "DPST-1-5":f=["alarm","no_alarm"];break;case "DPST-1-6":f=["high","low"];break;case "DPST-1-7":f=["increase",
"decrease"];break;case "DPST-1-8":f=["up","down"];break;case "DPST-1-9":f=["open","close"];break;case "DPST-1-10":f=["start","stop"];break;case "DPST-1-11":f=["active","inactive"];break;case "DPST-1-12":f=["inverted","not_inverted"];break;case "DPST-1-13":f=["cyclically","start/stop"];break;case "DPST-1-14":f=["calculated","fixed"];break;case "DPST-1-15":f=["reset command","no action"];break;case "DPST-1-16":f=["acknowledge command","no action"];break;case "DPST-1-18":f=["occupied","not occupied"];
break;case "DPST-1-19":f=["open","closed"];break;case "DPST-1-21":f=["logical function AND","logical function OR"];break;case "DPST-1-22":f=["scene B","scene A"];break;case "DPST-1-23":f=["move Up/Down +StepStop mode (blind)","move Up/Down mode (shutter)"];break;default:f=["on","off"]}a.status.push({type:"enum",name:e+" state",ref:{value:c+"@state",options:f}});a.status.push({type:"int",name:e+" value",ref:{value:c+"@raw",extMeta:"0-1"}});break;case "DPT-2":case "DPST-2":switch(g){case "DPST-2-2":f=
["true","false"];break;case "DPST-2-3":f=["enable","disable"];break;case "DPST-2-4":f=["ramp","no_ramp"];break;case "DPST-2-5":f=["alarm","no_alarm"];break;case "DPST-2-6":f=["high","low"];break;case "DPST-2-7":f=["increase","decrease"];break;case "DPST-2-8":f=["up","down"];break;case "DPST-2-9":f=["open","close"];break;case "DPST-2-10":f=["start","stop"];break;case "DPST-2-11":f=["active","inactive"];break;case "DPST-2-12":f=["inverted","not_inverted"];break;default:f=["on","off"]}f=["piro."+f[0],
"no_piro."+f[0],"piro."+f[1],"no_piro."+f[1]];a.status.push({type:"enum",name:e+" state",ref:{value:c+"@state",options:f}});a.status.push({type:"int",name:e+" value",ref:{value:c+"@raw",extMeta:"0-3"}});break;case "DPT-5":case "DPST-5":switch(g){case "DPST-5-1":f="0-100";break;case "DPST-5-3":f="0-360";break;case "DPST-5-6":f="0-254";break;default:f="0-255"}a.status.push({type:"int",name:e+" state",ref:{value:c+"@state",extMeta:f}});break;case "DPT-6":case "DPST-6":a.status.push({type:"int",name:e+
" state",ref:{value:c+"@state",extMeta:"-128-127"}});break;case "DPT-9":case "DPST-9":a.status.push({type:"float",name:e+" state",ref:{value:c+"@state",extMeta:"-670760-670760"}});break;case "DPT-20":case "DPST-20":switch(g){case "DPST-20-102":a.status.push({type:"enum",name:e+" state",ref:{value:c+"@state",options:"auto comfort standby economy protection unknow".split(" ")}});a.status.push({type:"int",name:e+" value",ref:{value:c+"@raw",extMeta:"0-255"}});break;default:a.status.push({type:"int",
name:e+" state",ref:{value:c+"@state",extMeta:"0-255"}}),a.status.push({type:"int",name:e+" value",ref:{value:c+"@raw",extMeta:"0-255"}})}}}if(d&&d.event&&d.event.type&&d.event.ga)switch(g=d.event.type,f=this._parseDatapointPrefix(g),f){case "DPT-1":case "DPST-1":switch(g){case "DPST-1-2":f=["true","false"];break;case "DPST-1-3":f=["enable","disable"];break;case "DPST-1-4":f=["ramp","no_ramp"];break;case "DPST-1-5":f=["alarm","no_alarm"];break;case "DPST-1-6":f=["high","low"];break;case "DPST-1-7":f=
["increase","decrease"];break;case "DPST-1-8":f=["up","down"];break;case "DPST-1-9":f=["open","close"];break;case "DPST-1-10":f=["start","stop"];break;case "DPST-1-11":f=["active","inactive"];break;case "DPST-1-12":f=["inverted","not_inverted"];break;case "DPST-1-13":f=["cyclically","start/stop"];break;case "DPST-1-14":f=["calculated","fixed"];break;case "DPST-1-15":f=["reset command","no action"];break;case "DPST-1-16":f=["acknowledge command","no action"];break;case "DPST-1-18":f=["occupied","not occupied"];
break;case "DPST-1-19":f=["open","closed"];break;case "DPST-1-21":f=["logical function AND","logical function OR"];break;case "DPST-1-22":f=["scene B","scene A"];break;case "DPST-1-23":f=["move Up/Down +StepStop mode (blind)","move Up/Down mode (shutter)"];break;default:f=["on","off"]}a.ipevt.push({type:"enum",name:e+" state",ref:{value:c+"@state",options:f}});a.ipevt.push({type:"int",name:e+" value",ref:{value:c+"@raw",extMeta:"0-1"}});break;case "DPT-2":case "DPST-2":switch(g){case "DPST-2-2":f=
["true","false"];break;case "DPST-2-3":f=["enable","disable"];break;case "DPST-2-4":f=["ramp","no_ramp"];break;case "DPST-2-5":f=["alarm","no_alarm"];break;case "DPST-2-6":f=["high","low"];break;case "DPST-2-7":f=["increase","decrease"];break;case "DPST-2-8":f=["up","down"];break;case "DPST-2-9":f=["open","close"];break;case "DPST-2-10":f=["start","stop"];break;case "DPST-2-11":f=["active","inactive"];break;case "DPST-2-12":f=["inverted","not_inverted"];break;default:f=["on","off"]}f=["piro."+f[0],
"no_piro."+f[0],"piro."+f[1],"no_piro."+f[1]];a.ipevt.push({type:"enum",name:e+" state",ref:{value:c+"@state",options:f}});a.ipevt.push({type:"int",name:e+" value",ref:{value:c+"@raw",extMeta:"0-3"}});break;case "DPT-5":case "DPST-5":switch(g){case "DPST-5-1":f="0-100";break;case "DPST-5-3":f="0-360";break;case "DPST-5-6":f="0-254";break;default:f="0-255"}a.ipevt.push({type:"int",name:e+" state",ref:{value:c+"@state",extMeta:f}});break;case "DPT-6":case "DPST-6":a.ipevt.push({type:"int",name:e+" state",
ref:{value:c+"@state",extMeta:"-128-127"}});break;case "DPT-9":case "DPST-9":switch(d.event.type){case "DPST-9-1":f="-273--670760";break;default:f="-671088.64-670760.96"}a.ipevt.push({type:"float",name:e+" state",ref:{value:c+"@state",extMeta:f}});break;case "DPT-20":case "DPST-20":switch(g){case "DPST-20-102":a.ipevt.push({type:"enum",name:e+" state",ref:{value:c+"@state",options:"auto comfort standby economy protection unknow".split(" ")}});a.ipevt.push({type:"int",name:e+" value",ref:{value:c+
"@raw",extMeta:"0-255"}});break;default:a.ipevt.push({type:"int",name:e+" state",ref:{value:c+"@state",extMeta:"0-255"}}),a.ipevt.push({type:"int",name:e+" value",ref:{value:c+"@raw",extMeta:"0-255"}})}}}}return a},getIPevtMap:function(b){b=this.getCommandStatusMap(b);if(!b)return null;var a={ipevt:[]};b.ipevt&&(a.ipevt=b.ipevt);return a},createDevice:function(b,a,c){a=xnm.aio.gateway.DM.DMError;var d=xnm.aio.gateway.DM.DMError.ERROR_CODE;b.data?b.channels?(b=JSON.parse(JSON.stringify(b)),c&&c(null,
b)):c&&c(new a(d.INVALID,"parameter channels is invalid")):c&&c(new a(d.INVALID,"parameter data is invalid"))},updateDevice:function(b,a,c){a=xnm.aio.gateway.DM.DMError;var d=xnm.aio.gateway.DM.DMError.ERROR_CODE;b.data?b.channels?(b=JSON.parse(JSON.stringify(b)),c&&c(null,b)):c&&c(new a(d.INVALID,"parameter channels is invalid")):c&&c(new a(d.INVALID,"parameter data is invalid"))},deleteDevice:function(b,a,c,d){d&&d(null,JSON.parse(JSON.stringify(a)))},_parseDatapointPrefix:function(b){if("DPT"==
b.substr(0,3))return b;var a=b.lastIndexOf("-");return b.substr(0,a)}}};
xnm.aio.gateway.systems.ZIGBEE={listDevices:function(b,a){var c=this;b._executeRequest("ListZigbeeDevices",null,{timeout:5E3},function(b,e){if(b)a&&a(b);else{var f=c._resolveDevice(e);a&&a(null,f)}})},delSensor:function(b,a,c){b._executeRequest("delSensor",{type:this.DM.TYPE,address:a},{timeout:2E4},function(a){c&&c(a)})},learn:function(b,a,c){var d=this;b._executeRequest("LearnSC",{type:this.DM.TYPE},{timeout:65E3},function(a,b){if(a)c&&c(a);else{var g=d._resolveDevice(b);c&&c(null,g)}})},_resolveDevice:function(b){if(!b||
0==b.length)return[];for(var a={},c=b.length;c--;){var d=b[c];if(d&&d.ieeeAdr){var e=a[d.ieeeAdr];e||(e={type:"ZIGBEE",address:d.ieeeAdr,endpoints:[]},a[d.ieeeAdr]=e);e.endpoints.push({endpointID:d.endpointID,profileID:d.profileID,deviceID:d.deviceID})}}b=[];for(var f in a)b.push(a[f]);return b},executeCommandCreator:function(b,a,c,d){a?c&&c.value?a&&a.address?this._executeCommand(b,a,c,d):d&&d(Error("it device address is empty")):d&&d(Error("it device command is empty")):d&&d(Error("it device is null"))},
_executeCommand:function(b,a,c,d){(a=this.buildQuery(b,a,c))?(c=a.XC_FNC,delete a.XC_FNC,b._executeRequest(c,a,null,function(a){d&&d(a)})):d&&d(Error("device format invalid"))},buildQuery:function(b,a,c){b=this._buildData(b,a,c);if("undefined"==typeof b||null==b||!(a&&a.address&&a.endpoints&&a.endpoints[0]&&a.endpoints[0].endpointID))return null;c=null;for(var d=0;d<a.endpoints.length;d++){var e=a.endpoints[d];if("C05E"==e.profileID||"0104"==e.profileID){c=e;break}}return c?{type:"ZIGBEE",address:a.address+
":"+c.endpointID,data:b,XC_FNC:"SendSC"}:null},_buildData:function(b,a,c){if(!c||!c.value)return null;switch(c.value){case "on":case "off":case "toggle":case "white":return c.value;case "dimTo":case "setRGB":case "setColorTemp":return"undefined"==typeof c.ext||null==c.ext?null:c.value+c.ext;default:return null}},handleStateCreator:function(b,a,c){return a&&a.value?(b=this._handleState(b,c))?b[a.value]:null:null},_handleState:function(b,a){if(!(a.type&&a.adr&&a.state&&b.type&&"ZIGBEE"==b.type&&b.type.toLowerCase()==
a.type.toLowerCase()&&b.address))return null;var c=a.adr.split(":");return b.address.toLowerCase()!=c[0].toLowerCase()?null:a.state},DM:{TYPE:"ZIGBEE",MAP:{C05E:{"0100":{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}},{type:"enum",name:"toggle",ref:{value:"toggle"}},{type:"int",name:"dim to",ref:{value:"dimTo",ext:"%d",extMeta:"0-100"}},{type:"int",name:"set color temperature",ref:{value:"setColorTemp",ext:"%d",extMeta:"20-1000000",unit:"K"}}],status:[{type:"enum",
name:"state",ref:{value:"onoff",options:["on","off"]}},{type:"int",name:"level",ref:{value:"level"}}]},"0200":{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}},{type:"enum",name:"toggle",ref:{value:"toggle"}},{type:"int",name:"dim to",ref:{value:"dimTo",ext:"%d",extMeta:"0-100"}},{type:"enum",name:"white",ref:{value:"white"}},{type:"rgb",name:"rgb",ref:{value:"setRGB",ext:"%s"}}],status:[{type:"enum",name:"state",ref:{value:"onoff",options:["on","off"]}},
{type:"int",name:"level",ref:{value:"level"}}]},"0210":{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}},{type:"enum",name:"toggle",ref:{value:"toggle"}},{type:"int",name:"dim to",ref:{value:"dimTo",ext:"%d",extMeta:"0-100"}},{type:"enum",name:"white",ref:{value:"white"}},{type:"rgb",name:"rgb",ref:{value:"setRGB",ext:"%s"}},{type:"int",name:"set color temperature",ref:{value:"setColorTemp",ext:"%d",extMeta:"20-1000000",unit:"K"}}],status:[{type:"enum",
name:"state",ref:{value:"onoff",options:["on","off"]}},{type:"int",name:"level",ref:{value:"level"}}]},"0220":{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}},{type:"enum",name:"toggle",ref:{value:"toggle"}},{type:"int",name:"dim to",ref:{value:"dimTo",ext:"%d",extMeta:"0-100"}},{type:"int",name:"set color temperature",ref:{value:"setColorTemp",ext:"%d",extMeta:"20-1000000",unit:"K"}}],status:[{type:"enum",name:"state",ref:{value:"onoff",options:["on",
"off"]}},{type:"int",name:"level",ref:{value:"level"}}]}},"0104":{"0100":{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}},{type:"enum",name:"toggle",ref:{value:"toggle"}}],status:[{type:"enum",name:"state",ref:{value:"onoff",options:["on","off"]}}]},"0101":{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}},{type:"enum",name:"toggle",ref:{value:"toggle"}},{type:"int",name:"dim to",ref:{value:"dimTo",ext:"%d",extMeta:"0-100"}}],
status:[{type:"enum",name:"state",ref:{value:"onoff",options:["on","off"]}},{type:"int",name:"level",ref:{value:"level"}}]},"0102":{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}},{type:"enum",name:"toggle",ref:{value:"toggle"}},{type:"int",name:"dim to",ref:{value:"dimTo",ext:"%d",extMeta:"0-100"}},{type:"enum",name:"white",ref:{value:"white"}},{type:"rgb",name:"rgb",ref:{value:"setRGB",ext:"%s"}}],status:[{type:"enum",name:"state",ref:{value:"onoff",
options:["on","off"]}},{type:"int",name:"level",ref:{value:"level"}}]},"010C":{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}},{type:"enum",name:"toggle",ref:{value:"toggle"}},{type:"int",name:"dim to",ref:{value:"dimTo",ext:"%d",extMeta:"0-100"}},{type:"int",name:"set color temperature",ref:{value:"setColorTemp",ext:"%d",extMeta:"20-1000000",unit:"K"}}],status:[{type:"enum",name:"state",ref:{value:"onoff",options:["on","off"]}},{type:"int",name:"level",
ref:{value:"level"}}]},"010D":{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}},{type:"enum",name:"toggle",ref:{value:"toggle"}},{type:"int",name:"dim to",ref:{value:"dimTo",ext:"%d",extMeta:"0-100"}},{type:"int",name:"set color temperature",ref:{value:"setColorTemp",ext:"%d",extMeta:"20-1000000",unit:"K"}},{type:"enum",name:"white",ref:{value:"white"}},{type:"rgb",name:"rgb",ref:{value:"setRGB",ext:"%s"}}],status:[{type:"enum",name:"state",ref:{value:"onoff",
options:["on","off"]}},{type:"int",name:"level",ref:{value:"level"}}]}}},getGatewayDeviceType:function(b){return{type:this.TYPE,name:"Zigbee (USB Stick)"}},getCommandStatusMap:function(b){if(!b||!b.endpoints)return null;for(var a={command:[],status:[]},c=0;c<b.endpoints.length;c++){var d=b.endpoints[c];if(d&&d.profileID&&d.deviceID){var e=this.MAP[d.profileID];e&&(e=e[d.deviceID])&&(d=JSON.parse(JSON.stringify(e)),a.command=a.command.concat(d.command),a.status=a.status.concat(d.status))}}return a},
getIPevtMap:function(b){return null},createDevice:function(b,a,c){a=xnm.aio.gateway.DM.DMError;var d=xnm.aio.gateway.DM.DMError.ERROR_CODE;b.address?b.endpoints?(b=JSON.parse(JSON.stringify(b)),c(null,b)):c(new a(d.INVALID,"parameter endpoints is invalid")):c(new a(d.INVALID,"parameter address is invalid"))},updateDevice:function(b,a,c){a=xnm.aio.gateway.DM.DMError;var d=xnm.aio.gateway.DM.DMError.ERROR_CODE;b.address?b.endpoints?(b=JSON.parse(JSON.stringify(b)),c(null,b)):c(new a(d.INVALID,"parameter data is invalid")):
c(new a(d.INVALID,"parameter address is invalid"))},deleteDevice:function(b,a,c,d){d&&d(null,JSON.parse(JSON.stringify(a)));xnm.aio.gateway.systems.ZIGBEE.delSensor(b,a.address,function(){})}}};
xnm.aio.gateway.systems.BG={learn:function(b,a,c){a&&a.type?b._executeRequest("LearnSC",{type:"BG",deviceType:a.type},null,function(b,e){b?c&&c(b):(e.address=e.adr,delete e.adr,e.deviceType=a.type,c&&c(null,e))}):c&&c(Error("no device type"))},addWeatherStation:function(b,a,c){if(a&&a.serial){var d=this.brelag_mx_printAdr(this.brelag_mx_weather_getAdr(a.serial));d?(d+="01",b._executeRequest("AddSensor",{type:"BG",adr:d,deviceType:"05"},null,function(a,b){a?c&&c(a):(b.address=d,b.deviceType="05",c&&
c(null,b))})):c&&c(Error("serial number invalid"))}else c&&c(Error("no serial number"))},brelag_mx_printAdr:function(b){return("000000"+b.toString(16)).substr(-6)},brelag_mx_weather_getAdr:function(b){b=parseInt(this.brelag_mx_getAdr(b),16);return b|96},brelag_mx_getAdr:function(b){if(6!=b.length)return null;for(var a=0,c=0;6>c;c++)var d=parseInt(b.charAt(c))-1,a=a|d,a=a<<3;return((a&255)<<16|a&65280|(a&16711680)>>16).toString(16)},getDeviceInfo:function(b,a,c){a&&a.device&&a.device.address?b._executeRequest("getStates",
null,null,function(b,e){if(b)c&&c(b);else{for(var f=null,g=0;g<e.length;g++){var h=e[g];if(h&&"BG"==h.type&&h.adr==a.device.address){f=h;break}}f?(g={master:!1,bottom_top:0,top_bottom:0,group:"00"},f.group&&(g.group=f.group),f.config&&(h=f.config.split(":"),h[0]&&(g.master="01"==h[0]?!0:!1),h[1]&&(g.bottom_top=parseInt(h[1],16)),h[2]&&(g.top_bottom=parseInt(h[2],16)),h[3]&&"02"==f.deviceType&&(g.num_tilted_position=parseInt(h[3],16))),c&&c(null,g)):c&&c(Error("no such device"))}}):c&&c(Error("no address"))},
getGroups:function(b,a,c){b._executeRequest("getStates",null,null,function(a,b){if(a)c&&c(a);else{for(var f=[],g=0;g<b.length;g++){var h=b[g];h&&"BG"==h.type&&h.config&&"01"==h.config.split(":")[0]&&f.push(h)}c&&c(null,f)}})},saveDeviceConfig:function(b,a,c){if(a&&a.device)if(a.device.address)if(a.config){var d;d=0;a.config.master&&(d=1);var e=0;a.config.bottom_top&&(e=a.config.bottom_top);var f=0;a.config.top_bottom&&(f=a.config.top_bottom);d=""+(xnm.aio.gateway.Util.getHexVal(d,2)+":");d+=xnm.aio.gateway.Util.getHexVal(e,
4)+":";d+=xnm.aio.gateway.Util.getHexVal(f,4);"02"==a.device.deviceType&&(e=0,a.config.num_tilted_position&&(e=a.config.num_tilted_position),d+=":"+xnm.aio.gateway.Util.getHexVal(e,2));b._executeRequest("SaveSensor",{type:"BG",adr:a.device.address,config:d},null,function(a){c&&c(a)})}else c&&c(Error("no config"));else c&&c(Error("no address"));else c&&c(Error("no device"))},saveDeviceGroup:function(b,a,c){if(a&&a.device)if(a.device.address){var d="";a.group&&(d=a.group);b._executeRequest("SaveSensor",
{type:"BG",adr:a.device.address,group:d},null,function(a){c&&c(a)})}else c&&c(Error("no address"));else c&&c(Error("no device"))},executeCommandCreator:function(b,a,c,d){a?c&&c.value?a&&a.address?this._executeCommand(b,a,c,d):d&&d(Error("bg device address is empty")):d&&d(Error("bg device command is empty")):d&&d(Error("bg device is null"))},_executeCommand:function(b,a,c,d){a=this._buildParam(b,a,c);"undefined"==typeof a||null==a?d&&d(Error("command format invalid")):b._executeRequest("SendSC",a,
null,function(a){d&&d(a)})},buildQuery:function(b,a,c){b=this._buildParam(b,a,c);if("undefined"==typeof b||null==b)return null;b.XC_FNC="SendSC";return b},_buildParam:function(b,a,c){b=this._buildData(b,a,c);return"undefined"==typeof b||null==b?null:{type:"BG",data:b}},_buildData:function(b,a,c){if(!(c&&c.value&&a&&a.address))return null;b=c;var d="00",e="00";if("%multi"==c.ext&&c.extMeta){for(var f=null,g=0;g<c.extMeta.length;g++){var h=c.extMeta[g];if(h&&h.ref)if("locklevel"==h.ref.value&&h.ref.ext)switch(h.ref.ext){case "no_comamnd":d=
"81";break;case "set_level_1":d="81";break;case "set_level_2":d="82";break;case "set_level_3":d="83";break;case "clear_level_1":d="41";break;case "clear_level_2":d="42";break;case "clear_level_3":d="43"}else if("priority"==h.ref.value&&h.ref.ext)switch(h.ref.ext){case 0:e="00";break;case 1:e="01";break;case 2:e="02";break;case 3:e="03"}else f=h}f&&(b=f)}if(b.locklevel)switch(b.locklevel){case "no_comamnd":d="81";break;case "set_level_1":d="81";break;case "set_level_2":d="82";break;case "set_level_3":d=
"83";break;case "clear_level_1":d="41";break;case "clear_level_2":d="42";break;case "clear_level_3":d="43"}if(b.priority)switch(parseInt(b.priority)){case 0:e="00";break;case 1:e="01";break;case 2:e="02";break;case 3:e="03"}d="02"+a.address+d+e;if("no_command"==c.value)return d+"FF";c=a.deviceType;!c&&a.data&&("light"==a.data||"switch"==a.data?c="03":"dimmer"==a.data?c="04":"shutter"==a.data?c="01":"blind"==a.data&&(c="02"));if("01"==c||"02"==c)switch(b.value){case "pulseUp":d+="01";break;case "pulseDown":d+=
"02";break;case "continuousUp":case "moveUp":d+="03";break;case "continuousDown":case "moveDown":d+="04";break;case "stop":d+="05";break;case "savePos":d+="0F";break;case "restorePos":case "position":d+="10";break;case "moveTo":if("undefined"==typeof b.ext||null==b.ext)return null;d+="20"+xnm.aio.gateway.Util.getHexVal(parseInt(b.ext),2);break;default:if(isNaN(parseInt(b.value)))return null;d+="20"+xnm.aio.gateway.Util.getHexVal(parseInt(b.value),2)}else if("03"==c)switch(b.value){case "on":d+="01";
break;case "off":d+="02";break;case "toggle":d+="06";break;default:return null}else if("04"==c)switch(b.value){case "activate":case "combo":d+="01";break;case "on":d+="1164";break;case "off":d+="02";break;case "fullLvl":case "full":d+="03";break;case "saveLvl":case "savePos":d+="0F";break;case "restoreLvl":case "memory":d+="10";break;case "dimTo":if("undefined"==typeof b.ext||null==b.ext)return null;d+="11"+xnm.aio.gateway.Util.getHexVal(parseInt(b.ext),2);break;default:if(isNaN(parseInt(b.value)))return null;
d+="11"+xnm.aio.gateway.Util.getHexVal(parseInt(b.value),2)}return d},_parseData:function(b,a){if(!b||16>b.length||!a||!a.address||!a.deviceType||a.substr(2,8).toLowerCase()!=a.address.toLowerCase())return null;var c=a.substr(14,2),d,e={};16<b.length&&(d=a.substr(16));if("01"==a.deviceType||"02"==a.deviceType)switch(c){case "01":e.value="pulseUp";break;case "02":e.value="pulseDown";break;case "03":e.value="continuousUp";break;case "04":e.value="continuousDown";break;case "05":e.value="stop";break;
case "0F":e.value="savePos";break;case "10":e.value="restorePos";break;case "20":e.value="moveTo";if("undefined"==typeof d||null==d)return null;e.ext=parseInt(d,16);break;default:return null}else if("03"==a.deviceType)switch(c){case "01":e.value="on";break;case "02":e.value="off";break;case "06":e.value="toggle";break;default:return null}else if("04"==a.deviceType)switch(c){case "01":e.value="activate";break;case "02":e.value="off";break;case "03":e.value="fullLvl";break;case "0F":e.value="saveLvl";
break;case "10":e.value="restoreLvl";break;case "11":if("undefined"==typeof d||null==d)return null;"64"==d?e.value="on":(e.value="dimTo",e.ext=parseInt(d,16));break;default:return null}return e.value?e:null},handleStateCreator:function(b,a,c){return a&&a.value?(b=this._handleState(b,c))?b[a.value]:null:null},_handleState:function(b,a){if(!(a.type&&a.adr&&a.state&&b.type&&"BG"==b.type&&b.type.toLowerCase()==a.type.toLowerCase()&&b.address)||b.address.toLowerCase()!=a.adr.toLowerCase())return null;
var c=a.deviceType;c||(c=b.deviceType);if(!c)return null;var d=a.state.split(":"),e=null;switch(c){case "01":if(2>d.length)return null;e={position:parseInt(d[1],16)};break;case "02":if(3>d.length)return null;e={position:parseInt(d[1],16),lamella:parseInt(d[2],16)};break;case "03":if(2>d.length)return null;c=parseInt(d[1],16);e={state:100==c?"on":"off"};break;case "04":if(2>d.length)return null;e={level:parseInt(d[1],16)};break;case "05":if(4>d.length)return null;c=parseInt(d[3],16);e={bri:parseInt(d[1],
16),windS:parseInt(d[2],16)};e.briRange="0-5 5-8 8-10 10-30 30-100 100-5000 5000-10000 10000-12000 12000-15000 15000-20000 20000-25000 25000-30000 30000-40000 40000-60000 60000-80000 >80000".split(" ")[e.bri/8];e.windSRange="0-10 10-15 15-20 20-25 25-30 30-35 35-40 40-50 50-60 60-70 70-80 80-90 90-100 100-110 110-120 >120".split(" ")[e.windS/8];e.rainvalue=c;e.rain=112<=c&&120>=c?!0:!1}return e},generateActionCode:function(b,a){return this._buildData(null,a,b)},parseActionCode:function(b,a){return this._parseData(b,
a)},DM:{TYPE:"BG",MAP:{blind:{command:[{type:"enum",name:"move up",ref:{value:"continuousUp"}},{type:"enum",name:"move down",ref:{value:"continuousDown"}},{type:"enum",name:"stop",ref:{value:"stop"}},{type:"enum",name:"save position",ref:{value:"savePos"}},{type:"enum",name:"restore position",ref:{value:"restorePos"}},{type:"int",name:"move to",ref:{value:"moveTo",ext:"%d",extMeta:"0-100"}}],status:[{type:"int",name:"position",ref:{value:"position",extMeta:"0-100"}}]},jalousie:{command:[{type:"enum",
name:"step up",ref:{value:"pulseUp"}},{type:"enum",name:"step down",ref:{value:"pulseDown"}},{type:"enum",name:"move up",ref:{value:"continuousUp"}},{type:"enum",name:"move down",ref:{value:"continuousDown"}},{type:"enum",name:"stop",ref:{value:"stop"}},{type:"enum",name:"save position",ref:{value:"savePos"}},{type:"enum",name:"restore position",ref:{value:"restorePos"}},{type:"int",name:"move to",ref:{value:"moveTo",ext:"%d",extMeta:"0-100"}}],status:[{type:"int",name:"lamella",ref:{value:"lamella"}},
{type:"int",name:"position",ref:{value:"position",extMeta:"0-100"}}]},dimmer:{command:[{type:"enum",name:"activate",ref:{value:"activate"}},{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}},{type:"enum",name:"full level",ref:{value:"fullLvl"}},{type:"enum",name:"save level",ref:{value:"saveLvl"}},{type:"enum",name:"restore level",ref:{value:"restoreLvl"}},{type:"int",name:"dim to",ref:{value:"dimTo",ext:"%d",extMeta:"0-100",scale:"5"}}],status:[{type:"int",name:"level",
ref:{value:"level"}}]},"switch":{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}},{type:"enum",name:"toggle",ref:{value:"toggle"}}],status:[{type:"enum",name:"state",ref:{value:"state",options:["on","off"]}}]},weatherstation:{status:[{type:"int",name:"brightness",ref:{value:"bri",extMeta:"0-120",scale:"8"}},{type:"string",name:"brightness range",ref:{value:"briRange"}},{type:"int",name:"wind speed",ref:{value:"windS",extMeta:"0-112",scale:"8"}},{type:"string",
name:"wind speed range",ref:{value:"windSRange"}},{type:"enum",name:"rain",ref:{value:"rain",options:["true","false"]}}]}},getGatewayDeviceType:function(b){b={type:this.TYPE,name:"Brelag",subtypes:[]};b.subtypes.push({id:"Shutter",data:"01"});b.subtypes.push({id:"Jalousie",data:"02"});b.subtypes.push({id:"Switch",data:"03"});b.subtypes.push({id:"Dimmer",data:"04"});b.subtypes.push({id:"Weatherstation",data:"05"});return b},getCommandStatusMap:function(b){if(!b||!b.deviceType)return null;var a=null;
"01"==b.deviceType&&(a="blind");"02"==b.deviceType?a="jalousie":"03"==b.deviceType?a="switch":"04"==b.deviceType?a="dimmer":"05"==b.deviceType&&(a="weatherstation");return null==a?null:this.MAP[a]},getIPevtMap:function(b){b=this.getCommandStatusMap(b);if(!b)return null;var a={ipevt:[]};b.ipevt&&(a.ipevt=b.ipevt);return a},createDevice:function(b,a,c){a=xnm.aio.gateway.DM.DMError;var d=xnm.aio.gateway.DM.DMError.ERROR_CODE;b.address?b.deviceType?(b=JSON.parse(JSON.stringify(b)),c(null,b)):c(new a(d.INVALID,
"parameter device type is invalid")):c(new a(d.INVALID,"parameter address is invalid"))},updateDevice:function(b,a,c){a=xnm.aio.gateway.DM.DMError;var d=xnm.aio.gateway.DM.DMError.ERROR_CODE;b.address?b.deviceType?(b=JSON.parse(JSON.stringify(b)),c(null,b)):c(new a(d.INVALID,"parameter device type is invalid")):c(new a(d.INVALID,"parameter address is invalid"))},deleteDevice:function(b,a,c,d){d&&d(null,JSON.parse(JSON.stringify(a)))}}};
xnm.aio.gateway.systems.B4={learn:function(b,a,c){b._executeRequest("LearnSC",{type:this.DM.TYPE},{timeout:2E4},function(a,b){a?c&&c(a):c&&c(null,{address:b.CODE,type:b.TYPE})})},executeCommandCreator:function(b,a,c,d){a?c&&c.value?this._executeCommand(b,a,c,d):d&&d(Error("it device command is empty")):d&&d(Error("in device is null"))},_executeCommand:function(b,a,c,d){var e="SendSC";(a=this.buildQuery(b,a,c))?(e=a.XC_FNC,delete a.XC_FNC,b._executeRequest(e,a,null,function(a){d&&d(a)})):d&&d(Error("command format invalid"))},
buildQuery:function(b,a,c){return(b=this._buildData(b,a,c))?{type:this.DM.TYPE,data:b,XC_FNC:"SendSC"}:null},_buildData:function(b,a,c){if(!(c&&c.value&&a&&a.address))return null;b=a.address;a=null;switch(c.value){case "on":a="00";break;case "off":a="01";break;default:return null}return(b+a).toUpperCase()},_parseData:function(b,a){if(!(a&&a.type&&"b4"==a.type.toLowerCase()&&a.address&&b)||10>b.length)return null;var c=b.substr(0,8);if(a.address.toLowerCase()!=c.toLowerCase())return null;c={};switch(b.substr(8,
2).toUpperCase()){case "00":c.value="on";break;case "01":c.value="off"}return c.value?c:null},generateActionCode:function(b,a){return this._buildData(null,a,b)},parseActionCode:function(b,a){return this._parseData(b,a)},DM:{TYPE:"B4",MAP:{shutter:{command:[{type:"enum",name:"up",ref:{value:"off"}},{type:"enum",name:"down",ref:{value:"on"}}]},generic:{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}}]}},getGatewayDeviceType:function(b){b=require("xnm.aio.gateway.js").resolveGateway(b);
if(!b||!b.sysSupported("B4"))return null;b={type:this.TYPE,name:"ELV",subtypes:[]};b.subtypes.push({id:"Funk-Gurtwickler",data:"shutter"});return b},getCommandStatusMap:function(b){if(!b)return null;switch(b.data){case "shutter":return this.MAP.shutter;default:return this.MAP.generic}},createDevice:function(b,a,c){a=xnm.aio.gateway.DM.DMError;var d=xnm.aio.gateway.DM.DMError.ERROR_CODE;b.address?(b=JSON.parse(JSON.stringify(b)),c(null,b)):c(new a(d.INVALID,"parameter address is invalid"))},updateDevice:function(b,
a,c){a=xnm.aio.gateway.DM.DMError;var d=xnm.aio.gateway.DM.DMError.ERROR_CODE;b.address?(b=JSON.parse(JSON.stringify(b)),c(null,b)):c(new a(d.INVALID,"parameter address is invalid"))},deleteDevice:function(b,a,c,d){d&&d(null,JSON.parse(JSON.stringify(a)))}}};
xnm.aio.gateway.systems._SysVar={setVar:function(b,a,c,d,e){b._executeRequest("setVar",{id:c,type:a,value:d},{timeout:2E4},function(a){e&&e(a)})},delVar:function(b,a,c){b._executeRequest("delVar",{id:a},{timeout:2E4},function(a){c&&c(a)})},getSysVars:function(b,a){b._executeRequest("getStates",null,{timeout:2E4},function(b,d){if(b)a&&a(b);else{var e=[];if(d)for(var f=0;f<d.length;f++){var g=d[f];if(g.adr||g.id)switch(g.type){case xnm.aio.gateway.systems.Boolean.DM.TYPE:case xnm.aio.gateway.systems.Int.DM.TYPE:case xnm.aio.gateway.systems.Float.DM.TYPE:case xnm.aio.gateway.systems.String.DM.TYPE:case xnm.aio.gateway.systems.Event.DM.TYPE:e.push({type:g.type,
address:g.adr});break;case xnm.aio.gateway.systems.Task.DM.TYPE:e.push({type:g.type,address:g.id})}}a&&a(null,e)}})},buildQuery:function(b,a,c,d){return{XC_FNC:"setVar",id:c,type:a,value:d}}};
xnm.aio.gateway.systems.Boolean={regist:function(b,a,c){a&&a.address?xnm.aio.gateway.systems._SysVar.setVar(b,this.DM.TYPE,a.address,"on",c):c&&c(Error("regist device option foramt invalid"))},delVar:function(b,a,c){a?xnm.aio.gateway.systems._SysVar.delVar(b,a,c):c&&c(Error("address invalid"))},executeCommandCreator:function(b,a,c,d){a?c&&c.value?a&&a.address?this._executeCommand(b,a,c,d):d&&d(Error("device address is empty")):d&&d(Error("device command is empty")):d&&d(Error("device is null"))},
_executeCommand:function(b,a,c,d){xnm.aio.gateway.systems._SysVar.setVar(b,this.DM.TYPE,a.address,c.value,d)},buildQuery:function(b,a,c){return xnm.aio.gateway.systems._SysVar.buildQuery(b,this.DM.TYPE,a.address,c.value)},handleStateCreator:function(b,a,c){return a&&a.value?(b=this._handleState(b,c))?b[a.value]:null:null},_handleState:function(b,a){if(!(a.type&&"onoff"==a.type.toLowerCase()&&a.adr&&a.state&&b&&"onoff"==b.type.toLowerCase()&&b.address)||"string"==typeof b.address&&b.address.toLowerCase()!=
a.adr.toLowerCase()||b.address!=a.adr)return null;var c=a.state;c&&(c=c.toLowerCase());return{state:c}},generateActionCode:function(b,a){if(!a||!a.address||2!=a.address.length||!b)return null;var c;switch(b.value){case "on":c="01";break;case "off":c="00";break;case "toggle":c="0F";break;default:return null}return a.address+c},parseActionCode:function(b,a){if(!b||4!=b.length||!a||!a.address||2!=a.address.length)return null;var c=b.substr(0,2),d=b.substr(2,2);if(c.toLowerCase()!=a.address.toLowerCase())return null;
c={};switch(d.toUpperCase()){case "01":c.value="on";break;case "00":c.value="off";break;case "0F":c.value="toggle";break;default:return null}return c},DM:{TYPE:"ONOFF",MAP:{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}},{type:"enum",name:"toggle",ref:{value:"toggle"}}],status:[{type:"enum",name:"status",ref:{value:"state",options:["off","on"]}}],ipevt:[{type:"enum",name:"status",ref:{value:"state",options:["off","on"]}}]},getGatewayDeviceType:function(b){return{type:this.TYPE,
name:"Boolean System Variable"}},getCommandStatusMap:function(){return this.MAP},getIPevtMap:function(b,a){if(!a||"EA"!=a.version&&"A1"!=a.version)return[];var c=this.getCommandStatusMap(b);if(!c)return null;var d={ipevt:[]};c.ipevt&&(d.ipevt=c.ipevt);return d},createDevice:function(b,a,c){a=xnm.aio.gateway.DM.DMError;var d=xnm.aio.gateway.DM.DMError.ERROR_CODE;b.address?(b=JSON.parse(JSON.stringify(b)),c(null,b)):c(new a(d.INVALID,"parameter address is invalid"))},updateDevice:function(b,a,c){a=
xnm.aio.gateway.DM.DMError;var d=xnm.aio.gateway.DM.DMError.ERROR_CODE;b.address?(b=JSON.parse(JSON.stringify(b)),c(null,b)):c(new a(d.INVALID,"parameter address is invalid"))},deleteDevice:function(b,a,c,d){xnm.aio.gateway.systems.Boolean.delVar(b,a.address,function(){d&&d(null,JSON.parse(JSON.stringify(a)))})}}};
xnm.aio.gateway.systems.Int={regist:function(b,a,c){a&&a.address?xnm.aio.gateway.systems._SysVar.setVar(b,this.DM.TYPE,a.address,"00000000",c):c&&c(Error("regist device option foramt invalid"))},delVar:function(b,a,c){a?xnm.aio.gateway.systems._SysVar.delVar(b,a,c):c&&c(Error("address invalid"))},executeCommandCreator:function(b,a,c,d){a?c&&c.value?a&&a.address?this._executeCommand(b,a,c,d):d&&d(Error("device address is empty")):d&&d(Error("device command is empty")):d&&d(Error("device is null"))},
_executeCommand:function(b,a,c,d){if("setValue"!=c.value)d&&d(Error("unknow command"));else{var e=0;null!=c.ext&&"undefined"!=typeof c.ext&&(e=parseInt(c.ext));2147483647<e&&(e=2147483647);-2147483648>e&&(e=-2147483648);e=xnm.aio.gateway.Util.getHexVal(e,8);xnm.aio.gateway.systems._SysVar.setVar(b,this.DM.TYPE,a.address,e,d)}},buildQuery:function(b,a,c){if("setValue"!=c.value)return null;var d=0;null!=c.ext&&"undefined"!=typeof c.ext&&(d=parseInt(c.ext));2147483647<d&&(d=2147483647);-2147483648>d&&
(d=-2147483648);d=xnm.aio.gateway.Util.getHexVal(d,8);return xnm.aio.gateway.systems._SysVar.buildQuery(b,this.DM.TYPE,a.address,d)},handleStateCreator:function(b,a,c){return a&&a.value?(b=this._handleState(b,c))?b[a.value]:null:null},_handleState:function(b,a){if(!(a.type&&"int"==a.type.toLowerCase()&&a.adr&&a.state&&b&&"int"==b.type.toLowerCase()&&b.address&&b.address&&b.address.toLowerCase()==a.adr.toLowerCase()))return null;var c=parseInt(a.state,16);return{state:c&2147483648?c-4294967296:c}},
DM:{TYPE:"INT",MAP:{command:[{type:"int",name:"set value",ref:{value:"setValue",ext:"%d",extMeta:"-2147483648-2147483647"}}],status:[{type:"int",name:"status",ref:{value:"state",extMeta:"-2147483648-2147483647"}}],ipevt:[{type:"int",name:"status",ref:{value:"state",extMeta:"-2147483648-2147483647"}}]},getGatewayDeviceType:function(){return{type:this.TYPE,name:"Integer System Variable"}},getCommandStatusMap:function(){return this.MAP},getIPevtMap:function(b,a){if(!a||"EA"!=a.version&&"A1"!=a.version)return[];
var c=this.getCommandStatusMap(b);if(!c)return null;var d={ipevt:[]};c.ipevt&&(d.ipevt=c.ipevt);return d},getActionMap:function(){return{command:[]}},createDevice:function(b,a,c){a=xnm.aio.gateway.DM.DMError;var d=xnm.aio.gateway.DM.DMError.ERROR_CODE;b.address?(b=JSON.parse(JSON.stringify(b)),c(null,b)):c(new a(d.INVALID,"parameter address is invalid"))},updateDevice:function(b,a,c){a=xnm.aio.gateway.DM.DMError;var d=xnm.aio.gateway.DM.DMError.ERROR_CODE;b.address?(b=JSON.parse(JSON.stringify(b)),
c(null,b)):c(new a(d.INVALID,"parameter address is invalid"))},deleteDevice:function(b,a,c,d){xnm.aio.gateway.systems.Int.delVar(b,a.address,function(){d&&d(null,JSON.parse(JSON.stringify(a)))})}}};
xnm.aio.gateway.systems.Float={regist:function(b,a,c){a&&a.address?xnm.aio.gateway.systems._SysVar.setVar(b,this.DM.TYPE,a.address,"00000000",c):c&&c(Error("regist device option foramt invalid"))},delVar:function(b,a,c){a?xnm.aio.gateway.systems._SysVar.delVar(b,a,c):c&&c(Error("address invalid"))},executeCommandCreator:function(b,a,c,d){a?c&&c.value?a&&a.address?this._executeCommand(b,a,c,d):d&&d(Error("device address is empty")):d&&d(Error("device command is empty")):d&&d(Error("device is null"))},
_executeCommand:function(b,a,c,d){if("setValue"!=c.value)d&&d(Error("unknow command"));else{var e=0;null!=c.ext&&"undefined"!=typeof c.ext&&(e=parseFloat(c.ext));e=Math.round(100*e);2147483647<e&&(e=2147483647);-2147483648>e&&(e=-2147483648);e=xnm.aio.gateway.Util.getHexVal(e,8);xnm.aio.gateway.systems._SysVar.setVar(b,this.DM.TYPE,a.address,encodeURI(e),d)}},buildQuery:function(b,a,c){if("setValue"!=c.value)return null;var d=0;null!=c.ext&&"undefined"!=typeof c.ext&&(d=parseFloat(c.ext));d=Math.round(100*
d);2147483647<d&&(d=2147483647);-2147483648>d&&(d=-2147483648);d=xnm.aio.gateway.Util.getHexVal(d,8);return xnm.aio.gateway.systems._SysVar.buildQuery(b,this.DM.TYPE,a.address,encodeURI(d))},handleStateCreator:function(b,a,c){return a&&a.value?(b=this._handleState(b,c))?b[a.value]:null:null},_handleState:function(b,a){if(!(a.type&&"float"==a.type.toLowerCase()&&a.adr&&a.state&&b&&"float"==b.type.toLowerCase()&&b.address&&b.address&&b.address.toLowerCase()==a.adr.toLowerCase()))return null;var c=parseInt(a.state,
16),c=((c&2147483648?c-4294967296:c)/100).toFixed(2);return{state:c}},DM:{TYPE:"FLOAT",MAP:{command:[{type:"float",name:"set value",ref:{value:"setValue",ext:"%f",extMeta:"-21474836.48-21474836.47",scale:"0.01"}}],status:[{type:"float",name:"status",ref:{value:"state",extMeta:"-21474836.48-21474836.47",scale:"0.01"}}],ipevt:[{type:"float",name:"status",ref:{value:"state",extMeta:"-21474836.48-21474836.47",scale:"0.01"}}]},getGatewayDeviceType:function(){return{type:this.TYPE,name:"Float System Variable"}},
getCommandStatusMap:function(){return this.MAP},getIPevtMap:function(b,a){if(!a||"EA"!=a.version&&"A1"!=a.version)return[];var c=this.getCommandStatusMap(b);if(!c)return null;var d={ipevt:[]};c.ipevt&&(d.ipevt=c.ipevt);return d},getActionMap:function(){return{command:[]}},createDevice:function(b,a,c){a=xnm.aio.gateway.DM.DMError;var d=xnm.aio.gateway.DM.DMError.ERROR_CODE;b.address?(b=JSON.parse(JSON.stringify(b)),c(null,b)):c(new a(d.INVALID,"parameter address is invalid"))},updateDevice:function(b,
a,c){a=xnm.aio.gateway.DM.DMError;var d=xnm.aio.gateway.DM.DMError.ERROR_CODE;b.address?(b=JSON.parse(JSON.stringify(b)),c(null,b)):c(new a(d.INVALID,"parameter address is invalid"))},deleteDevice:function(b,a,c,d){xnm.aio.gateway.systems.Float.delVar(b,a.address,function(){d&&d(null,JSON.parse(JSON.stringify(a)))})}}};
xnm.aio.gateway.systems.String={regist:function(b,a,c){a&&a.address?xnm.aio.gateway.systems._SysVar.setVar(b,this.DM.TYPE,a.address,"",c):c&&c(Error("regist device option foramt invalid"))},delVar:function(b,a,c){a?xnm.aio.gateway.systems._SysVar.delVar(b,a,c):c&&c(Error("address invalid"))},executeCommandCreator:function(b,a,c,d){a?c&&c.value?a&&a.address?this._executeCommand(b,a,c,d):d&&d(Error("device address is empty")):d&&d(Error("device command is empty")):d&&d(Error("device is null"))},_executeCommand:function(b,
a,c,d){if("setValue"!=c.value)d&&d(Error("unknow command"));else{var e="";null!=c.ext&&"undefined"!=typeof c.ext&&(e=c.ext);!b._isV5P()&&15<e.length&&(e=e.substr(0,15));xnm.aio.gateway.systems._SysVar.setVar(b,this.DM.TYPE,a.address,encodeURI(e),d)}},buildQuery:function(b,a,c){if("setValue"!=c.value)return null;var d="";null!=c.ext&&"undefined"!=typeof c.ext&&(d=c.ext);b._isV5P&&!b._isV5P()&&15<d.length&&(d=d.substr(0,15));return xnm.aio.gateway.systems._SysVar.buildQuery(b,this.DM.TYPE,a.address,
encodeURI(d))},handleStateCreator:function(b,a,c){return a&&a.value?(b=this._handleState(b,c))?b[a.value]:null:null},_handleState:function(b,a){return a.type&&"string"==a.type.toLowerCase()&&a.adr&&"string"===typeof a.state&&b&&"string"==b.type.toLowerCase()&&b.type&&"string"==b.type.toLowerCase()&&b.address&&b.address&&b.address.toLowerCase()==a.adr.toLowerCase()?{state:a.state}:null},DM:{TYPE:"STRING",MAP:{command:[{type:"string",name:"set value",ref:{value:"setValue",ext:"%s"}}],status:[{type:"string",
name:"status",ref:{value:"state"}}],ipevt:[{type:"string",name:"status",ref:{value:"state"}}]},getGatewayDeviceType:function(){return{type:this.TYPE,name:"String System Variable"}},getCommandStatusMap:function(){return this.MAP},getIPevtMap:function(b,a){if(!a||"EA"!=a.version&&"A1"!=a.version)return[];var c=this.getCommandStatusMap(b);if(!c)return null;var d={ipevt:[]};c.ipevt&&(d.ipevt=c.ipevt);return d},getActionMap:function(){return{command:[]}},createDevice:function(b,a,c){a=xnm.aio.gateway.DM.DMError;
var d=xnm.aio.gateway.DM.DMError.ERROR_CODE;b.address?(b=JSON.parse(JSON.stringify(b)),c(null,b)):c(new a(d.INVALID,"parameter address is invalid"))},updateDevice:function(b,a,c){a=xnm.aio.gateway.DM.DMError;var d=xnm.aio.gateway.DM.DMError.ERROR_CODE;b.address?(b=JSON.parse(JSON.stringify(b)),c(null,b)):c(new a(d.INVALID,"parameter address is invalid"))},deleteDevice:function(b,a,c,d){xnm.aio.gateway.systems.String.delVar(b,a.address,function(){d&&d(null,JSON.parse(JSON.stringify(a)))})}}};
xnm.aio.gateway.systems.Event={executeCommandCreator:function(b,a,c,d){a?c&&c.value?a&&a.address?this._executeCommand(b,a,c,d):d&&d(Error("device address is empty")):d&&d(Error("device command is empty")):d&&d(Error("device is null"))},_executeCommand:function(b,a,c,d){var e,f;"on"==c.value?(e="saveGroup",f={id:a.address,active:1}):"off"==c.value?(e="saveGroup",f={id:a.address,active:0}):"toggle"==c.value&&(e="toggleEvent",f={group:a.address});b._executeRequest(e,f,{timeout:2E3},function(a){d&&d(a)})},
buildQuery:function(b,a,c){b=null;"on"==c.value?b={XC_FNC:"saveGroup",id:a.address,active:1}:"off"==c.value?b={XC_FNC:"saveGroup",id:a.address,active:0}:"toggle"==c.value&&(b={XC_FNC:"toggleEvent",group:a.address});return b},handleStateCreator:function(b,a,c){return a&&a.value?(b=this._handleState(b,c))?b[a.value]:null:null},_handleState:function(b,a){if(!(a.type&&"event"==a.type.toLowerCase()&&a.adr&&a.state&&b.address&&b.address&&b.address.toLowerCase()==a.adr.toLowerCase()))return null;var c=parseInt(a.state);
return{state:c?"on":"off"}},generateActionCode:function(b,a){if(!a||!a.address||2!=a.address.length||!b)return null;var c;switch(b.value){case "on":c="01";break;case "off":c="00";break;case "toggle":c="0F";break;default:return null}return a.address+c},parseActionCode:function(b,a){if(!b||4!=b.length||!a||!a.address||2!=a.address.length)return null;var c=b.substr(0,2),d=b.substr(2,2);if(c.toLowerCase()!=a.address.toLowerCase())return null;c={};switch(d.toUpperCase()){case "01":c.value="on";break;case "00":c.value=
"off";break;case "0F":c.value="toggle";break;default:return null}return c},DM:{TYPE:"EVENT",MAP:{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}},{type:"enum",name:"toggle",ref:{value:"toggle"}}],status:[{type:"enum",name:"status",ref:{value:"state",options:["off","on"]}}]},getGatewayDeviceType:function(){return{type:this.TYPE,name:"Task System Variable"}},getCommandStatusMap:function(){return this.MAP},createDevice:function(b,a,c){a=xnm.aio.gateway.DM.DMError;
var d=xnm.aio.gateway.DM.DMError.ERROR_CODE;b.address?(b=JSON.parse(JSON.stringify(b)),c(null,b)):c(new a(d.INVALID,"parameter address is invalid"))},updateDevice:function(b,a,c){a=xnm.aio.gateway.DM.DMError;var d=xnm.aio.gateway.DM.DMError.ERROR_CODE;b.address?(b=JSON.parse(JSON.stringify(b)),c(null,b)):c(new a(d.INVALID,"parameter address is invalid"))},deleteDevice:function(b,a,c,d){d(null,a)}}};
xnm.aio.gateway.systems.Task={executeCommandCreator:function(b,a,c,d){a?c&&c.value?a&&a.address?this._executeCommand(b,a,c,d):d&&d(Error("device address is empty")):d&&d(Error("device command is empty")):d&&d(Error("device is null"))},_executeCommand:function(b,a,c,d){var e,f;"on"==c.value?(e="SetTaskActive",f={id:a.address,active:!0}):"off"==c.value?(e="SetTaskActive",f={id:a.address,active:!1}):"toggle"==c.value?(e="ToggleTaskActive",f={id:a.address}):"run"==c.value&&(e="DoTask",f={id:a.address});
b._executeRequest(e,f,{timeout:2E3},function(a){d&&d(a)})},buildQuery:function(b,a,c){b=null;"on"==c.value?b={XC_FNC:"SetTaskActive",id:a.address,active:!0}:"off"==c.value?b={XC_FNC:"SetTaskActive",id:a.address,active:!1}:"toggle"==c.value?b={XC_FNC:"ToggleTaskActive",id:a.address}:"run"==c.value&&(params={id:a.address});return b},handleStateCreator:function(b,a,c){return a&&a.value?(b=this._handleState(b,c))?b[a.value]:null:null},_handleState:function(b,a){return a.type&&"task"==a.type.toLowerCase()&&
a.id&&b.address&&b.address==a.id?{state:a.active?"on":"off"}:null},DM:{TYPE:"TASK",MAP:{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}},{type:"enum",name:"toggle",ref:{value:"toggle"}},{type:"enum",name:"run",ref:{value:"run"}}],status:[{type:"enum",name:"status",ref:{value:"state",options:["off","on"]}}]},getGatewayDeviceType:function(){return{type:this.TYPE,name:"Task System Variable"}},getCommandStatusMap:function(){return this.MAP},createDevice:function(b,
a,c){a=xnm.aio.gateway.DM.DMError;var d=xnm.aio.gateway.DM.DMError.ERROR_CODE;b.address?(b=JSON.parse(JSON.stringify(b)),c(null,b)):c(new a(d.INVALID,"parameter address is invalid"))},updateDevice:function(b,a,c){a=xnm.aio.gateway.DM.DMError;var d=xnm.aio.gateway.DM.DMError.ERROR_CODE;b.address?(b=JSON.parse(JSON.stringify(b)),c(null,b)):c(new a(d.INVALID,"parameter address is invalid"))},deleteDevice:function(b,a,c,d){d(null,a)}}};
xnm.aio.gateway.RemoteModeSetting={_buf:{},getRemoteModeSetting:function(b){return(b=this._buf[b])&&b.setting?b.setting:"off"},setRemoteModeSetting:function(b,a){var c=this._buf[b];c||(this._buf[b]={},c=this._buf[b]);c.setting=a;"on"==a?c.state="remote":"off"==a&&(c.state="local")},getRemoteModeState:function(b){return(b=this._buf[b])&&b.state?b.state:"local"},setRemoteModeState:function(b,a){var c=this._buf[b];c||(this._buf[b]={},c=this._buf[b]);c.state=a}};
xnm.aio.gateway.EventListener=function(){return{_logger:null,_listeners:[],_socket:null,_socket1901:null,_running:!1,start:function(b,a){if(!this._logger){var c=require("x.logger.js");c?(this._logger=c.getLogger("xnm.aio.gateway.EventListener"),c.setLevel("info","xnm.aio.gateway.EventListener")):this._logger={log:function(){}}}var d=this;this.addListener(b);this._running?a&&a():(this._running=!0,this._startUdpListener(1902,function(b,c){b?(d._running=!1,a&&a(b)):(d._socket=c,a&&a())}))},stop:function(b){this._socket&&
(this._socket.close(),this._socket=null);this._running=!1;b&&b()},startPort1901:function(b){if(this._socket1901)b&&b();else{var a=this;this._startUdpListener(1901,function(c,d){c?b&&b(c):(a._socket1901=d,b&&b())})}},stopPort1901:function(b){this._socket1901&&(this._socket1901.close(),this._socket1901=null);b&&b()},addListener:function(b){if(b){for(var a=!1,c=0;c<this._listeners.length;c++)if(this._listeners[c]===b){a=!0;break}a||this._listeners.push(b)}},removeListener:function(b){if(b){for(var a=
-1,c=0;c<this._listeners.length;c++)if(this._listeners[c]===b){a=c;break}-1!=a&&this._listeners.splice(a,1)}},_startUdpListener:function(b,a){var c=this,d=a,e=require("dgram").createSocket({type:"udp4",reuseAddr:!0});e.on("listening",function(){e.setBroadcast(!0);c._logger.log("debug","aio gateway udp listener started at port:"+b);d&&(d(null,e),d=null)});e.on("error",function(a){if(d)c._logger.log("debug","bind aio gateway udp listener at port:"+b+" error:"+a.stack),d(a),d=null;else{c._logger.log("debug",
"aio gateway udp listener at port:"+b+" error:"+a.stack);c.stop();for(var e=0;e<c._listeners.length;e++)if(c._listeners[e]&&c._listeners[e].onError)c._listeners[e].onError(a)}});e.on("message",function(a,d){var e=a.toString();c._logger.log("debug","receive aio gateway udp message at port:"+b+" from:"+d.address+" data:"+e);if(10<e.length&&"{XC_EVT}"==e.substr(0,8))try{var m=JSON.parse(e.substr(8));m&&c._receivedUDPEvent(m,d,"EVT")}catch(l){}else if(4<e.length&&"EVT:"==e.substr(0,4))try{(m=JSON.parse(e.substr(4)))&&
c._receivedUDPEvent(m,d,"EVT")}catch(k){}else if(4<e.length&&"STA:"==e.substr(0,4))try{(m=JSON.parse(e.substr(4)))&&c._receivedUDPEvent(m,d,"STA")}catch(n){}});e.bind(b)},_receivedUDPEvent:function(b,a,c){for(var d=0;d<this._listeners.length;d++)if(this._listeners[d])this._listeners[d](b,a,c)}}}();
xnm.aio.gateway.DM={SYS:"aio",_logger:require("x.logger.js").getLogger("xnm.aio.gateway.DM"),GATEWAY_MAP:{led:{command:[{type:"enum",name:"LED on",ref:{value:"ledOn"}},{type:"enum",name:"LED off",ref:{value:"ledOff"}},{type:"enum",name:"LED white",ref:{value:"ledWhite"}},{type:"enum",name:"LED red",ref:{value:"ledRed"}},{type:"enum",name:"LED green",ref:{value:"ledGreen"}},{type:"enum",name:"LED blue",ref:{value:"ledBlue"}},{type:"enum",name:"LED yellow",ref:{value:"ledYellow"}},{type:"enum",name:"LED cyan",
ref:{value:"ledCyan"}},{type:"enum",name:"LED purple",ref:{value:"ledPurple"}}]},remote_access:{command:[{type:"enum",name:"remote access on",ref:{value:"raOn"}},{type:"enum",name:"remote access off",ref:{value:"raOff"}},{type:"enum",name:"remote access auto",ref:{value:"raAuto"}}],status:[{type:"enum",name:"remote access setting",ref:{value:"raSetting",options:["off","on","auto"]}},{type:"enum",name:"remote access state",ref:{value:"raState",options:["local","remote"]}}]},cloud_forward:{command:[{type:"enum",
name:"cloud forward on",ref:{value:"cfOn"}},{type:"enum",name:"cloud forward off",ref:{value:"cfOff"}}],status:[{type:"enum",name:"cloud forward setting",ref:{value:"cfSetting",options:["off","on"]}}]}},getGatewayType:function(){return[{sys:this.SYS,name:"AIO Gateway",gateway_vendor:"mediola"},{sys:this.SYS,name:"Siegenia Gateway",gateway_vendor:"siegenia"},{sys:this.SYS,name:"Internorm Gateway",gateway_vendor:"internorm"},{sys:this.SYS,name:"NUEVAINC Gateway",gateway_vendor:"nueva"},{sys:this.SYS,
name:"Brelag Gateway",gateway_vendor:"brelag"},{sys:this.SYS,name:"WIR Gateway",gateway_vendor:"wir"},{sys:this.SYS,name:"Kopp Gateway",gateway_vendor:"kopp"}]},getGatewayDeviceType:function(b,a){var c=a.lm,d=a.license;b=this._updateGatewayJson(b);var e=[],f;for(f in xnm.aio.gateway.systems)if(xnm.aio.gateway.systems.hasOwnProperty(f)&&("HM"!=f||"EA"!=b.version)&&("HM_X"!=f||"EA"==b.version)){var g=xnm.aio.gateway.systems[f];if(g&&g.DM&&g.DM.getGatewayDeviceType&&xnm.aio.gateway.Gateway._supportSystem(b,
g.DM.TYPE)){var h=g.DM.getGatewayDeviceType(b);if(h)if(Array.isArray(h)){for(g=0;g<h.length;g++)h[g].sys=this.SYS;e=e.concat(h)}else h.sys=this.SYS,e.push(h)}}f=[];for(g=0;g<e.length;g++)c&&d?c.permitFeature("read",e[g],d)&&f.push(e[g]):f.push(e[g]);return f},getGatewayDeviceType2:function(b,a,c){b=this._updateGatewayJson(b);var d=require("xnm.aio.gateway.js").resolveGateway(b);if(d){var e=this;d._getSI(function(d,g){!d&&g&&g.RFM&&(b.rfmode=g.RFM);var h=e.getGatewayDeviceType(b,a);c&&c(null,h)})}else d=
this.getGatewayDeviceType(b,a),c&&c(null,d)},applyUIFilter:function(b,a){return this._applyFilter(b,a)},applyUIFilterGateway:function(b,a){var c=function(a){if(!a)return null;var b={command:[],status:[]};xnm.aio.gateway.Gateway._supportRemoteMode(a)&&(b.command=b.command.concat(xnm.aio.gateway.DM.GATEWAY_MAP.remote_access.command),b.status=b.status.concat(xnm.aio.gateway.DM.GATEWAY_MAP.remote_access.status));if("nueva"==a.gateway_vendor)b.command=b.command.concat(xnm.aio.gateway.DM.GATEWAY_MAP.led.command);
else switch(a.version){case "FA":case "FB":case "FC":case "E1":case "E2":b.command=b.command.concat(xnm.aio.gateway.DM.GATEWAY_MAP.led.command);break;case "EA":b.command=b.command.concat(xnm.aio.gateway.DM.GATEWAY_MAP.led.command),b.command=b.command.concat(xnm.aio.gateway.DM.GATEWAY_MAP.cloud_forward.command),b.status=b.status.concat(xnm.aio.gateway.DM.GATEWAY_MAP.cloud_forward.status)}return b},d=function(a,b){if("*"==a)return!0;for(var c=!1,d=0;d<a.length;d++)if(a[d]==b){c=!0;break}return c},e=
function(a,b){var e=[],f=b.elems,g=c(a);if(g)switch(b.catagory){case "command":g.command&&g.command.forEach(function(a){d(f,a.type)&&(a=JSON.parse(JSON.stringify(a)),e.push(a))});break;case "status":g.status&&g.status.forEach(function(a){d(f,a.type)&&(a=JSON.parse(JSON.stringify(a)),e.push(a))})}return e},f=JSON.parse(JSON.stringify(b)),g=null;switch(a.catagory){case "command":g=e(b,a);f.command=g;break;case "status":g=e(b,a);f.status=g;break;default:return null}return g&&0!=g.length?f:null},applyIPEventFilter:function(b,
a,c,d,e){return this._applyFilter(b,a,e)},_applyFilter:function(b,a,c){var d=function(a,b){if("*"==a)return!0;for(var c=!1,d=0;d<a.length;d++)if(a[d]==b){c=!0;break}return c},e=function(a,b,c){var e=[];if("ipevt"==c.type)a.ipevt&&a.ipevt.forEach(function(a){a=JSON.parse(JSON.stringify(a));e.push(a)});else switch(c.catagory){case "command":case "action":a.command&&a.command.forEach(function(a){d(c.elems,a.type)&&(a=JSON.parse(JSON.stringify(a)),e.push(a))});break;case "status":a.status&&a.status.forEach(function(a){d(c.elems,
a.type)&&(a=JSON.parse(JSON.stringify(a)),e.push(a))});break;case "event":a.event&&a.event.forEach(function(a){a=JSON.parse(JSON.stringify(a));e.push(a)})}return e};if(!b.sys)return null;var f=JSON.parse(JSON.stringify(b));b=function(a,b,c){var d=[],f=null,n,f=xnm.aio.gateway.DM.getSystem(a);"ipevt"==b.type?f&&f.DM&&f.DM.getIPevtMap&&(n=f.DM.getIPevtMap(a,c)):"action"==b.catagory&&f&&f.DM&&f.DM.getActionMap&&(n=f.DM.getActionMap(a));n||f&&f.DM&&f.DM.getCommandStatusMap&&(n=f.DM.getCommandStatusMap(a));
n&&(f=e(n,a,b),d=d.concat(f));return d}(b,a,c);if("ipevt"==a.type)f.ipevt=b;else switch(a.catagory){case "command":case "action":f.command=b;break;case "status":f.status=b;break;case "event":f.event=b}return b&&0!=b.length?f:null},createGateway:function(b,a,c){a=xnm.aio.gateway.DM.DMError;var d=xnm.aio.gateway.DM.DMError.ERROR_CODE;if(b)if(b.ip){b.port||(b.port=80);var e=require("xnm.aio.gateway.js").resolveGateway(b);e?xnm.aio.gateway.Admin.getGatewaySID(e,function(a,d){!a&&d&&(b.sid=d);c(null,b)}):
c(new a(d.INVALID,"json is invalid"))}else c(new a(d.INVALID,"ip is invalid"));else c(new a(d.INVALID,"info is invalid"))},updateGateway:function(b,a,c,d){b=xnm.aio.gateway.DM.DMError;c=xnm.aio.gateway.DM.DMError.ERROR_CODE;if(a)if(a.ip){a.port||(a.port=80);var e=require("xnm.aio.gateway.js").resolveGateway(a);e?xnm.aio.gateway.Admin.getGatewaySID(e,function(b,c){!b&&c&&(a.sid=c);d(null,a)}):d(new b(c.INVALID,"json is invalid"))}else d(new b(c.INVALID,"ip is invalid"));else d(new b(c.INVALID,"update is invalid"))},
deleteGateway:function(b,a,c){c()},createDevice:function(b,a,c){var d=xnm.aio.gateway.DM.DMError,e=xnm.aio.gateway.DM.DMError.ERROR_CODE;if(b)if(b.gateway)if(b.type)if(a.data&&a.data.gateways&&0!==a.data.gateways.length){var f=a.data.gateways,g,h;for(g=0;g<f.length;g++)if(f[g].index===b.gateway){h=f[g];break}h?(d=this.getSystem(b,h.info))&&d.DM&&d.DM.createDevice?d.DM.createDevice(b,a,c,require("xnm.aio.gateway.js").resolveGateway(h.info)):(b=JSON.parse(JSON.stringify(b)),c(null,b)):c(new d(e.NOT_FOUND,
"gateway with index "+b.gateway+" not exists"))}else c(new d(e.NOT_FOUND,"gateway with index "+b.gateway+" not exists"));else c(new d(e.INVALID,"type is invalid"));else c(new d(e.INVALID,"gateway is invalid"));else c(new d(e.INVALID,"info is invalid"))},updateDevice:function(b,a,c){var d=xnm.aio.gateway.DM.DMError,e=xnm.aio.gateway.DM.DMError.ERROR_CODE;if(b)if(b.type){var f=this.getSystem(b);if(f&&f.DM&&f.DM.updateDevice){var g=JSON.parse(JSON.stringify(b));a&&a.dm&&a.tenant&&a.tenant.index&&b&&
b.gateway?a.dm.execute("read",a.tenant.index,"gateway",{filter:"prop",index:b.gateway,"info.sys":"aio"},function(d,e){if(!d&&e&&0!=e.length&&e[0]&&e[0].info){var l=require("xnm.aio.gateway.js").resolveGateway(e[0].info);f.DM.updateDevice(b,a,c,l)}else c&&c(null,g)}):c&&c(null,g)}else c(null,b)}else c(new d(e.INVALID,"type is invalid"));else c(new d(e.INVALID,"info is invalid"))},deleteDevice:function(b,a,c){var d=this.getSystem(b);if(d&&d.DM&&d.DM.deleteDevice){var e=JSON.parse(JSON.stringify(b));
a&&a.dm&&a.tenant&&a.tenant.index&&b&&b.gateway?a.dm.execute("read",a.tenant.index,"gateway",{filter:"prop",index:b.gateway,"info.sys":"aio"},function(f,g){if(!f&&g&&0!=g.length&&g[0]&&g[0].info){var h=require("xnm.aio.gateway.js").resolveGateway(g[0].info);d.DM.deleteDevice(h,b,a,c)}else c&&c(null,e)}):c&&c(null,e)}else c()},getSystem:function(b,a){var c=b.type;if("SI"==c||"SIAUG"==c||"SIAUR"==c||"SIAUD"==c)c="SIAU";"KP"==c&&(c="KOPP");"FS"==c&&(c="FS20");"WS"==c&&(c="WS300");if("EL"==c||"EF"==c)c=
"ELRO";"INSTA"==c&&(c="IA");"HMFHT"==c&&(c="HM");if(c)for(var d in xnm.aio.gateway.systems)if(xnm.aio.gateway.systems.hasOwnProperty(d)){"HM"==d&&("v5+"==b._ver||a&&"EA"==a.version)&&(d="HM_X");var e=xnm.aio.gateway.systems[d];if(e&&e.DM&&e.DM.TYPE&&e.DM.TYPE.toLowerCase()==c.toLowerCase())return e}return null},_updateGatewayJson:function(b){var a;if(xnm.aio.gateway.Admin.detectedGateways&&(b.mac&&(a=xnm.aio.gateway.Admin.detectedGateways[b.mac]),!a))for(var c in xnm.aio.gateway.Admin.detectedGateways)if(xnm.aio.gateway.Admin.detectedGateways.hasOwnProperty(c)&&
xnm.aio.gateway.Admin.detectedGateways[c].IP==b.ip){a=xnm.aio.gateway.Admin.detectedGateways[c];break}a&&(b.mac=a.MAC,b.version=(a.HWV?a.HWV:"")+(a.SWV?a.SWV:""),a.VER&&(b.firmware=a.VER),a.RFM&&(b.rfmode=a.RFM));return b},applySmartWidgetFilterForGateway:function(b,a,c){return b&&"aio"===b.sys?this._injectToSmartWidgetTemplateForGateway(a,["gateway"],c,{"%ledOn%":{value:"ledOn",name:"LED on"},"%ledOff%":{value:"ledOff",name:"LED off"},"%ledWhite%":{value:"ledWhite",name:"LED white"},"%ledRed%":{value:"ledRed",
name:"LED red"},"%ledGreen%":{value:"ledGreen",name:"LED green"},"%ledBlue%":{value:"ledBlue",name:"LED blue"},"%ledYellow%":{value:"ledYellow",name:"LED yellow"},"%ledCyan%":{value:"ledCyan",name:"LED cyan"},"%ledPurple%":{value:"ledPurple",name:"LED purple"},"%remoteOn%":{value:"raOn",name:"remote access on"},"%remoteOff%":{value:"raOff",name:"remote access off"},"%remoteAuto%":{value:"raAuto",name:"remote access auto"},"%cloudForwardOn%":{value:"cfOn",name:"cloud forward on"},"%cloudForwardOff%":{value:"cfOff",
name:"cloud forward off"}},{"%remoteSetting%":{value:"raSetting",name:"remote access setting",options:["off","on","auto"]},"%remoteState%":{value:"raState",name:"remote access state",options:["local","remote"]},"%cloudForwardSetting%":{value:"cfSetting",name:"cloud forward setting",options:["off","on"]}}):null},_injectToSmartWidgetTemplateForGateway:function(b,a,c,d,e){var f=[];b||(d={});d||(d={});e||(e={});for(var g=0;g<b.length;g++){var h=b[g];if(h.meta&&-1!=a.indexOf(h.meta.type)&&h.elements){var h=
JSON.parse(JSON.stringify(h)),m=!1,l;for(l in h.elements){var k=h.elements[l];if(k&&Array.isArray(k))for(var n=0;n<k.length;n++){var p=k[n];if(p){if(p.action&&"command"==p.action.type&&p.action.ref&&p.action.ref.value){var t=p.action.ref.ext;d[p.action.ref.value]?(p.action.ref=d[p.action.ref.value],t&&(p.action.ref.ext=t),p.action.gateway=c.name,p.action.device=c,m=!0):p.action=null}p.status&&p.status.ref&&p.status.ref.value&&(e[p.status.ref.value]?(p.status.ref=e[p.status.ref.value],p.status.gateway=
c.name,m=!0):p.status=null)}}}m&&f.push(h)}}return f}};xnm.aio.gateway.DM.DMError=function(b,a){this.code=b;this.message=a;this.stack=Error().stack};xnm.aio.gateway.DM.DMError.prototype=Error();xnm.aio.gateway.DM.DMError.prototype.name="AioGatewayDeviceManagerError";xnm.aio.gateway.DM.DMError.prototype.code=0;xnm.aio.gateway.DM.DMError.ERROR_CODE={DEFAULT:0,INDEX_EXISTS:1,ID_EXISTS:2,INVALID:3,UNKNOW:4,NOT_FOUND:5,IP_EXISTS:6};xnm.aio.gateway.Handler.prototype.GatewayV5Plus=xnm.aio.gateway.GatewayV5Plus;
xnm.aio.gateway.Handler.prototype.devicemanager=xnm.aio.gateway.DM;xnm.aio.gateway.Handler.prototype.registModule=function(b){b.register(xnm.aio.gateway.DM.SYS,"gateway")};
xnm.aio.gateway.Handler.prototype.resolveGateway=function(b,a){if(!b.ip)return null;a||(b=xnm.aio.gateway.DM._updateGatewayJson(b));var c;c=b.version&&"EA"==b.version.toUpperCase()?new xnm.aio.gateway.GatewayV5Plus(b.ip,b.port):new xnm.aio.gateway.Gateway(b.ip,b.port);b.username&&(c.user=b.username);b.password&&(c.password=b.password);b.at&&(c._pwdHash=b.at);c._mac=b.mac;c._sid=b.sid;c._hwv=b.version?b.version.substr(0,2):"";c._swv=b.version&&4<=b.version.length?b.version.substr(2,2):"";c._ver=b.version;
c._rfm=b.rfmode;c.gateway_vendor=b.gateway_vendor;c.revision=b.revision;return c};xnm.aio.gateway.Handler.prototype.getDeviceCommands=function(b,a){var c;c=(c=b&&b.ip?xnm.aio.gateway.DM.applyUIFilterGateway(b,{catagory:"command",elems:"*"}):xnm.aio.gateway.DM.applyUIFilter(b,{catagory:"command",elems:"*"}))?c.command:[];a&&a(null,c)};
xnm.aio.gateway.Handler.prototype.getDeviceStatus=function(b,a){var c;c=(c=b&&b.ip?xnm.aio.gateway.DM.applyUIFilterGateway(b,{catagory:"status",elems:"*"}):xnm.aio.gateway.DM.applyUIFilter(b,{catagory:"status",elems:"*"}))?c.status:[];a&&a(null,c)};
xnm.aio.gateway.Handler.prototype.generateTriggerCode=function(b,a){if(!b||!b.type||!a)return null;var c=xnm.aio.gateway.DM.getSystem({type:b.type});return c&&c.generateTriggerCode&&b.type.toUpperCase()==c.DM.TYPE.toUpperCase()?c.generateTriggerCode(a,b):null};
xnm.aio.gateway.Handler.prototype.generateActionCode=function(b,a){if(!b||!b.type||!a)return null;var c=xnm.aio.gateway.DM.getSystem({type:b.type});return c&&c.generateActionCode&&b.type.toUpperCase()==c.DM.TYPE.toUpperCase()?c.generateActionCode(a,b):null};
xnm.aio.gateway.Handler.prototype.parseActionCode=function(b,a,c){if(!(b&&a.type&&a.code&&b.type))return null;var d=a.type;"GROUP"==d&&(d="Event");return(d=xnm.aio.gateway.DM.getSystem({type:d}))&&d.parseActionCode&&b.type.toUpperCase()==d.DM.TYPE.toUpperCase()?"CODE"==a.type?d.parseActionCode(a,b):d.parseActionCode(a.code,b,c):null};
xnm.aio.gateway.Handler.prototype.parseTriggerCode=function(b,a,c){return a&&c?(a=xnm.aio.gateway.DM.getSystem({type:a}))&&a.parseTriggerCode&&b.type.toUpperCase()==a.DM.TYPE.toUpperCase()?a.parseTriggerCode(c,b):null:null};xnm.aio.gateway.Handler.prototype.regist=function(b,a,c){(b=this.resolveGateway(b))?b.regist(a,c):c&&c(Error("gateway json format invalid"))};xnm.aio.gateway.Handler.prototype.doCommand=function(b,a,c,d){(b=this.resolveGateway(b))?b.executeCommandCreator(a,c,d):d&&d(Error("gateway json format invalid"))};
xnm.aio.gateway.Handler.prototype.doStatus=function(b,a,c,d,e){(a=this.resolveGateway(a))?a.getStatesCreator(null,[{id:b,device:c,status:d}],function(a,b){a?e&&e(a):e&&e(null,b[0])}):e&&e(Error("gateway json format invalid"))};
xnm.aio.gateway.Handler.prototype.discoverWithTimeout=function(b,a,c){this._discoverCallbacks||(this._discoverCallbacks=[]);for(var d=!1,e=0;e<this._discoverCallbacks.length;e++)if(this._discoverCallbacks[e]===c){d=!0;break}!d&&c&&this._discoverCallbacks.push(c);if(!this.Admin.isDiscovering){var f=[];this.Admin.isDiscovering=!0;this.Admin.detectedGateways={};this.Admin.detectGateways(function(b){var c=new xnm.aio.gateway.Gateway(b.IP,b.PT);c._swv=b.SWV;c._hwv=b.HWV;c._name=b.NAME;c._mac=b.MAC;c._ver=
b.VER;c._rfm=b.RFM;c._vid=b.VID;a&&"mediola"!=a?"EA"==c._hwv&&"internorm"==a?f.push(c):c.getVendor(function(b,d){b||a!=d||f.push(c)}):f.push(c)});var g=this;setTimeout(function(){g.Admin.isDiscovering=!1;var a=g._discoverCallbacks;g._discoverCallbacks=[];for(var b=0;b<a.length;b++){var c=a[b];c&&c(null,f)}},b)}};xnm.aio.gateway.Handler.prototype.startGatewayEventListener=function(b,a){xnm.aio.gateway.EventListener.start(b,a)};xnm.aio.gateway.Handler.prototype.startGateway1901Listener=function(b){xnm.aio.gateway.EventListener.startPort1901(b)};
xnm.aio.gateway.Handler.prototype.addGatewayEventListener=function(b){xnm.aio.gateway.EventListener.addListener(b)};xnm.aio.gateway.Handler.prototype.removeGatewayEventListener=function(b){xnm.aio.gateway.EventListener.removeListener(b)};
xnm.aio.gateway.Handler.prototype.resolveGatewayUdpEvent=function(b,a){var c=a.type;"SI"==c&&(c="SIAU");"WS"==c&&(c="WS300");"FS"==c&&(c="FS20");"KP"==c&&(c="KOPP");"EL"==c&&(c="ELRO");return b.type&&c&&b.type.toLowerCase()==c.toLowerCase()?(c=this.devicemanager.getSystem(b))&&c._handleUdpState?c._handleUdpState(b,a):null:null};xnm.aio.gateway.Handler.prototype.supportIRcodeTrigger=function(b,a){var c=this.resolveGateway(b);c?a&&a(null,c._supportIrCodeTrigger()):a&&a(Error("gateway json format invalid"))};
xnm.aio.gateway.Handler.prototype.searchInternorm=function(b,a){if(b){var c=this.resolveGateway(b);c?xnm.aio.gateway.systems.IN.search(c,null,function(b,c){a&&a(b,c)}):a&&a(Error("gateway format invalid"))}else a&&a(Error("gateway json is null"))};xnm.aio.gateway.Handler.prototype.loginInternorm=function(b,a,c){b?(b=this.resolveGateway(b))?xnm.aio.gateway.systems.IN.login(b,a,function(a,b){c&&c(a,b)}):c&&c(Error("gateway format invalid")):c&&c(Error("gateway json is null"))};
xnm.aio.gateway.Handler.prototype.logoutInternorm=function(b,a,c){b?(b=this.resolveGateway(b))?xnm.aio.gateway.systems.IN.logout(b,a,function(a){c&&c(a)}):c&&c(Error("gateway format invalid")):c&&c(Error("gateway json is null"))};xnm.aio.gateway.Handler.prototype.getINFreeAddresses=function(b,a,c){b?(b=this.resolveGateway(b))?xnm.aio.gateway.systems.IN.getFreeAddresses(b,a,function(a,b){c&&c(a,b)}):c&&c(Error("gateway format invalid")):c&&c(Error("gateway json is null"))};
xnm.aio.gateway.Handler.prototype.setRtLearnMode=function(b,a,c){b?(b=this.resolveGateway(b))?xnm.aio.gateway.systems.RT.setLearnMode(b,a,function(a,b){c&&c(a,b)}):c&&c(Error("gateway format invalid")):c&&c(Error("gateway json is null"))};xnm.aio.gateway.Handler.prototype.teachRT=function(b,a,c){b?(b=this.resolveGateway(b))?xnm.aio.gateway.systems.RT.teach(b,a,function(a,b){c&&c(a,b)}):c&&c(Error("gateway format invalid")):c&&c(Error("gateway json is null"))};
xnm.aio.gateway.Handler.prototype.learnKopp=function(b,a,c){b?(b=this.resolveGateway(b))?xnm.aio.gateway.systems.KOPP.learn(b,a,c):c&&c(Error("gateway format invalid")):c&&c(Error("gateway json is null"))};xnm.aio.gateway.Handler.prototype.learnKoppDimmerStep2=function(b,a,c){a?b?(b=this.resolveGateway(b))?xnm.aio.gateway.systems.KOPP.learnDimmerStep2(b,a.address,c):c&&c(Error("gateway format invalid")):c&&c(Error("gateway json is null")):c&&c(Error("options is null"))};
xnm.aio.gateway.Handler.prototype.getERAddresses=function(b,a){if(b){var c=this.resolveGateway(b);c?xnm.aio.gateway.systems.ER.getERDevicesAddress(c,a):a&&a(Error("gateway format invalid"))}else a&&a(Error("gateway json is null"))};xnm.aio.gateway.Handler.prototype.startLearnER=function(b,a,c){b?(b=this.resolveGateway(b))?xnm.aio.gateway.systems.ER.startLearnER(b,a.address,c):c&&c(Error("gateway format invalid")):c&&c(Error("gateway json is null"))};
xnm.aio.gateway.Handler.prototype.learnERUp=function(b,a,c){b?(b=this.resolveGateway(b))?xnm.aio.gateway.systems.ER.learnERUp(b,a.address,c):c&&c(Error("gateway format invalid")):c&&c(Error("gateway json is null"))};xnm.aio.gateway.Handler.prototype.learnERDown=function(b,a,c){b?(b=this.resolveGateway(b))?xnm.aio.gateway.systems.ER.learnERDown(b,a.address,c):c&&c(Error("gateway format invalid")):c&&c(Error("gateway json is null"))};
xnm.aio.gateway.Handler.prototype.stopLearnER=function(b,a){if(b){var c=this.resolveGateway(b);c?xnm.aio.gateway.systems.ER.stopLearnER(c,a):a&&a(Error("gateway format invalid"))}else a&&a(Error("gateway json is null"))};xnm.aio.gateway.Handler.prototype.teachEO=function(b,a,c){b?(b=this.resolveGateway(b))?xnm.aio.gateway.systems.EO.teach(b,a,function(a,b){c&&c(a,b)}):c&&c(Error("gateway format invalid")):c&&c(Error("gateway json is null"))};
xnm.aio.gateway.Handler.prototype.teachinENOCEAN=function(b,a,c){b?(b=this.resolveGateway(b))?xnm.aio.gateway.systems.ENOCEAN.teachin(b,a,function(a,b){c&&c(a,b)}):c&&c(Error("gateway format invalid")):c&&c(Error("gateway json is null"))};xnm.aio.gateway.Handler.prototype.learnENOCEAN=function(b,a,c){b?(b=this.resolveGateway(b))?xnm.aio.gateway.systems.ENOCEAN.learn(b,a,function(a,b){c&&c(a,b)}):c&&c(Error("gateway format invalid")):c&&c(Error("gateway json is null"))};
xnm.aio.gateway.Handler.prototype.genVirtualENOCEAN=function(b,a,c){b?(b=this.resolveGateway(b))?xnm.aio.gateway.systems.ENOCEAN.genVirtualDevice(b,a,function(a,b){c&&c(a,b)}):c&&c(Error("gateway format invalid")):c&&c(Error("gateway json is null"))};xnm.aio.gateway.Handler.prototype.addENOCEAN=function(b,a,c){b?(b=this.resolveGateway(b))?xnm.aio.gateway.systems.ENOCEAN.addSensor(b,a,function(a,b){c&&c(a,b)}):c&&c(Error("gateway format invalid")):c&&c(Error("gateway json is null"))};
xnm.aio.gateway.Handler.prototype.updateENOCEAN=function(b,a,c,d){b?(b=this.resolveGateway(b))?xnm.aio.gateway.systems.ENOCEAN.updateSensor(b,a,c,function(a,b){d&&d(a,b)}):d&&d(Error("gateway format invalid")):d&&d(Error("gateway json is null"))};xnm.aio.gateway.Handler.prototype.learnR2=function(b,a,c){b?(b=this.resolveGateway(b))?xnm.aio.gateway.systems.R2.learn(b,a,c):c&&c(Error("gateway format invalid")):c&&c(Error("gateway json is null"))};
xnm.aio.gateway.Handler.prototype.learnSIAU=function(b,a,c){b?(b=this.resolveGateway(b))?xnm.aio.gateway.systems.SIAU.learn(b,a,c):c&&c(Error("gateway format invalid")):c&&c(Error("gateway json is null"))};xnm.aio.gateway.Handler.prototype.learnRoiscok=function(b,a,c){b?(b=this.resolveGateway(b))?xnm.aio.gateway.systems.RC.learn(b,a,c):c&&c(Error("gateway format invalid")):c&&c(Error("gateway json is null"))};
xnm.aio.gateway.Handler.prototype.getQATimeSettings=function(b,a,c){b?(b=this.resolveGateway(b))?xnm.aio.gateway.systems.QA.getTimeSettings(b,a,c):c&&c(Error("gateway format invalid")):c&&c(Error("gateway json is null"))};xnm.aio.gateway.Handler.prototype.setQATimeSettings=function(b,a,c,d){b?(b=this.resolveGateway(b))?xnm.aio.gateway.systems.QA.setupTimeSettings(b,a,c,d):d&&d(Error("gateway format invalid")):d&&d(Error("gateway json is null"))};
xnm.aio.gateway.Handler.prototype.learnKN=function(b,a,c){b?(b=this.resolveGateway(b))?xnm.aio.gateway.systems.KN.learn(b,a,c):c&&c(Error("gateway format invalid")):c&&c(Error("gateway json is null"))};xnm.aio.gateway.Handler.prototype.teachFX3=function(b,a,c){b?(b=this.resolveGateway(b))?xnm.aio.gateway.systems.FX3.teach(b,a,function(a,b){c&&c(a,b)}):c&&c(Error("gateway format invalid")):c&&c(Error("gateway json is null"))};
xnm.aio.gateway.Handler.prototype.paringBK=function(b,a,c,d){b?(b=this.resolveGateway(b))?xnm.aio.gateway.systems.BK.pairing(b,a,c,d):d&&d(Error("gateway format invalid")):d&&d(Error("gateway json is null"))};xnm.aio.gateway.Handler.prototype.paringBK2=function(b,a,c){b?a&&a.address?(b=this.resolveGateway(b))?xnm.aio.gateway.systems.BK.learn(b,a,c):c&&c(Error("gateway format invalid")):c&&c(Error("device format is invalid")):c&&c(Error("gateway json is null"))};
xnm.aio.gateway.Handler.prototype.unparingBK=function(b,a,c,d){b?(b=this.resolveGateway(b))?xnm.aio.gateway.systems.BK.unpairing(b,a,c,d):d&&d(Error("gateway format invalid")):d&&d(Error("gateway json is null"))};xnm.aio.gateway.Handler.prototype.getSysVars=function(b,a){if(b){var c=this.resolveGateway(b);c?xnm.aio.gateway.systems._SysVar.getSysVars(c,a):a&&a(Error("gateway format invalid"))}else a&&a(Error("gateway json is null"))};
xnm.aio.gateway.Handler.prototype.configHMBlind=function(b,a,c){b?(b=this.resolveGateway(b))?xnm.aio.gateway.systems.HM.configBlind(b,a,function(a){c&&c(a)}):c&&c(Error("gateway format invalid")):c&&c(Error("gateway json is null"))};xnm.aio.gateway.Handler.prototype.learnHmIPDevice=function(b,a,c){b?(b=this.resolveGateway(b))?a&&a.key&&a.sgtin?xnm.aio.gateway.systems.HM_X.learn(b,a,function(a,b){c&&c(a,b)}):c&&c(Error("key or sgtin invalid")):c&&c(Error("gateway format invalid")):c&&c(Error("gateway json is null"))};
xnm.aio.gateway.Handler.prototype.getHMConfig=function(b,a,c){b?(b=this.resolveGateway(b))?xnm.aio.gateway.systems.HM_X.getHMConfig(b,a,function(a,b){c&&c(a,b)}):c&&c(Error("gateway format invalid")):c&&c(Error("gateway json is null"))};xnm.aio.gateway.Handler.prototype.setHMConfig=function(b,a,c,d){b?(b=this.resolveGateway(b))?xnm.aio.gateway.systems.HM_X.setHMConfig(b,a,c,function(a){d&&d(a)}):d&&d(Error("gateway format invalid")):d&&d(Error("gateway json is null"))};
xnm.aio.gateway.Handler.prototype.getHomematicDevices=function(b,a){if(b){var c=this.resolveGateway(b);c?xnm.aio.gateway.systems.HM_X.listDevices(c,function(b,c){a&&a(b,c)}):a&&a(Error("gateway format invalid"))}else a&&a(Error("gateway json is null"))};xnm.aio.gateway.Handler.prototype.searchKnxIpGateways=function(b,a){if(b){var c=this.resolveGateway(b);c?xnm.aio.gateway.systems.KNX.searchKnxIpGateway(c,function(b,c){a&&a(b,c)}):a&&a(Error("gateway format invalid"))}else a&&a(Error("gateway json is null"))};
xnm.aio.gateway.Handler.prototype.getKnxIpGateways=function(b,a){if(b){var c=this.resolveGateway(b);c?xnm.aio.gateway.systems.KNX.getKnxIpGateways(c,function(b,c){a&&a(b,c)}):a&&a(Error("gateway format invalid"))}else a&&a(Error("gateway json is null"))};
xnm.aio.gateway.Handler.prototype.addKnxIpGateways=function(b,a,c){b?a?(b=this.resolveGateway(b))?xnm.aio.gateway.systems.KNX.addKnxIpGateway(b,a,function(a,b){c&&c(a,b)}):c&&c(Error("gateway format invalid")):c&&c(Error("knx ip gateway json is null")):c&&c(Error("gateway json is null"))};
xnm.aio.gateway.Handler.prototype.updateKnxIpGateways=function(b,a,c){b?a?(b=this.resolveGateway(b))?xnm.aio.gateway.systems.KNX.updateKnxIpGateway(b,a,function(a,b){c&&c(a,b)}):c&&c(Error("gateway format invalid")):c&&c(Error("knx ip gateway json is null")):c&&c(Error("gateway json is null"))};
xnm.aio.gateway.Handler.prototype.deleteKnxIpGateways=function(b,a,c){b?a?(b=this.resolveGateway(b))?xnm.aio.gateway.systems.KNX.deleteKnxIpGateway(b,a,function(a,b){c&&c(a,b)}):c&&c(Error("gateway format invalid")):c&&c(Error("knx ip gateway json is null")):c&&c(Error("gateway json is null"))};
xnm.aio.gateway.Handler.prototype.getKnxDevices=function(b,a){if(b){var c=this.resolveGateway(b);c?xnm.aio.gateway.systems.KNX.getKnxDevices(c,function(b,c){a&&a(b,c)}):a&&a(Error("gateway format invalid"))}else a&&a(Error("gateway json is null"))};xnm.aio.gateway.Handler.prototype.addKnxDevice=function(b,a,c){b?a?(b=this.resolveGateway(b))?xnm.aio.gateway.systems.KNX.addKnxDevice(b,a,function(a,b){c&&c(a,b)}):c&&c(Error("gateway format invalid")):c&&c(Error("knx device json is null")):c&&c(Error("gateway json is null"))};
xnm.aio.gateway.Handler.prototype.updateKnxDevice=function(b,a,c){b?a?(b=this.resolveGateway(b))?xnm.aio.gateway.systems.KNX.updateKnxDevice(b,a,function(a,b){c&&c(a,b)}):c&&c(Error("gateway format invalid")):c&&c(Error("knx device json is null")):c&&c(Error("gateway json is null"))};
xnm.aio.gateway.Handler.prototype.deleteKnxDevice=function(b,a,c){b?a?(b=this.resolveGateway(b))?xnm.aio.gateway.systems.KNX.deleteKnxDevice(b,a,function(a,b){c&&c(a,b)}):c&&c(Error("gateway format invalid")):c&&c(Error("knx device json is null")):c&&c(Error("gateway json is null"))};
xnm.aio.gateway.Handler.prototype.getZigbeeDevices=function(b,a){if(b){var c=this.resolveGateway(b);c?xnm.aio.gateway.systems.ZIGBEE.listDevices(c,function(b,c){a&&a(b,c)}):a&&a(Error("gateway format invalid"))}else a&&a(Error("gateway json is null"))};xnm.aio.gateway.Handler.prototype.forcePollDevices=function(b,a,c){b?(b=this.resolveGateway(b))?xnm.aio.gateway.systems.ZWAVE2.forcePollDevices(b,a,function(a,b){c&&c(a,b)}):c&&c(Error("gateway format invalid")):c&&c(Error("gateway json is null"))};
xnm.aio.gateway.Handler.prototype.learnBrelag=function(b,a,c){b?(b=this.resolveGateway(b))?xnm.aio.gateway.systems.BG.learn(b,a,c):c&&c(Error("gateway format invalid")):c&&c(Error("gateway json is null"))};xnm.aio.gateway.Handler.prototype.addBrelagWeatherStation=function(b,a,c){b?(b=this.resolveGateway(b))?xnm.aio.gateway.systems.BG.addWeatherStation(b,a,c):c&&c(Error("gateway format invalid")):c&&c(Error("gateway json is null"))};
xnm.aio.gateway.Handler.prototype.getDeviceInfo=function(b,a,c){b?(b=this.resolveGateway(b))?xnm.aio.gateway.systems.BG.getDeviceInfo(b,a,c):c&&c(Error("gateway format invalid")):c&&c(Error("gateway json is null"))};xnm.aio.gateway.Handler.prototype.getGroups=function(b,a,c){b?(b=this.resolveGateway(b))?xnm.aio.gateway.systems.BG.getGroups(b,a,c):c&&c(Error("gateway format invalid")):c&&c(Error("gateway json is null"))};
xnm.aio.gateway.Handler.prototype.saveDeviceConfig=function(b,a,c){b?(b=this.resolveGateway(b))?xnm.aio.gateway.systems.BG.saveDeviceConfig(b,a,c):c&&c(Error("gateway format invalid")):c&&c(Error("gateway json is null"))};xnm.aio.gateway.Handler.prototype.saveDeviceGroup=function(b,a,c){b?(b=this.resolveGateway(b))?xnm.aio.gateway.systems.BG.saveDeviceGroup(b,a,c):c&&c(Error("gateway format invalid")):c&&c(Error("gateway json is null"))};
xnm.aio.gateway.Handler.prototype.learnWR=function(b,a,c){b?(b=this.resolveGateway(b))?xnm.aio.gateway.systems.WR.learn(b,a,c):c&&c(Error("gateway format invalid")):c&&c(Error("gateway json is null"))};"undefined"!=typeof exports&&"undefined"!=typeof module&&module.exports&&(exports=module.exports=new xnm.aio.gateway.Handler);
