var xnm=xnm||{};xnm.aio=xnm.aio||{};xnm.aio.push=xnm.aio.push||{};
xnm.aio.push.Handler=function(){var g="http://webservice.aio-control.com/pushservice",f=function(){};f.prototype.setURL=function(b){g=b};f.prototype.PUSH_TYPE={GCM:0,APNS:1,APNS_SANDBOX:2,ADM:3,IN_APNS:4,IN_APNS_SANDBOX:5};f.prototype.getDeviceToken=function(b){XC.callHost("pushservice","getDeviceToken",null,function(c){c.error?b&&b(Error(c.error)):b(null,c.token)})};f.prototype.registDevice=function(b,c,d,a){if(b)if(c){var e;switch(d){case this.PUSH_TYPE.GCM:e="GCM";break;case this.PUSH_TYPE.APNS:e=
"APNS";break;case this.PUSH_TYPE.APNS_SANDBOX:e="APNS_SANDBOX";break;case this.PUSH_TYPE.ADM:e="ADM";break;case this.PUSH_TYPE.IN_APNS:e="IN_APNS";break;case this.PUSH_TYPE.IN_APNS_SANDBOX:e="IN_APNS_SANDBOX";break;default:a&&a(Error("no such push type"))}d=g+"/registDevice?";b={sid:b.toUpperCase(),token:c,type:e};d+=$.param(b);$.ajax({url:d,timeout:4E3,cache:!1,dataType:"json",success:function(b){b&&b.arn?a&&a(null,b.arn):a&&a(Error("regist device response invalid"))},error:function(b,c,e){a&&a(Error(c))}})}else a&&
a(Error("token invalid"));else a&&a(Error("sid invalid"))};f.prototype.deleteDevice=function(b,c,d,a){if(b)if(c){var e;switch(d){case this.PUSH_TYPE.GCM:e="GCM";break;case this.PUSH_TYPE.APNS:e="APNS";break;case this.PUSH_TYPE.APNS_SANDBOX:e="APNS_SANDBOX";break;case this.PUSH_TYPE.ADM:e="ADM";break;default:a&&a(Error("no such push type"))}d=g+"/deleteDevice?";b={sid:b.toUpperCase(),token:c,type:e};d+=$.param(b);$.ajax({url:d,timeout:4E3,cache:!1,dataType:"json",success:function(){a&&a(null)},error:function(b,
c,e){a&&a(Error(c))}})}else a&&a(Error("token invalid"));else a&&a(Error("sid invalid"))};f.prototype.getRegistedDevice=function(b,c){if(b){var d=g+"/getDevice?",a={sid:b.toUpperCase()},d=d+$.param(a);$.ajax({url:d,timeout:4E3,cache:!1,dataType:"json",success:function(a){a?c&&c(null,a):c&&c(Error("regist device response invalid"))},error:function(a,b,d){c&&c(Error(b))}})}else c&&c(Error("sid invalid"))};return f}();"undefined"!=typeof module&&null!=module&&(module.exports=new xnm.aio.push.Handler);
